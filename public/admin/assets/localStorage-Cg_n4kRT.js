
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as B}from"./index.vue_vue_type_script_setup_true_lang-FDL5yZdU.js";import{d as j,m as q,r as d,a as N,p as n,g as $,c as E,b as t,w as l,e as s,h as H,G as p,j as I,_ as M,k as g}from"./index-TOhlAu5k.js";import{a as v}from"./config-CFeX2CT3.js";const O=j({__name:"localStorage",setup(R){const a=q({localStorageStatus:"",siteUrl:""}),i=d();async function c(){const o=await v.queryConfig({keys:["localStorageStatus","siteUrl"]});Object.assign(a,o.data)}const x=d({siteUrl:[{required:!0,message:"请输入网站地址",trigger:"blur"}]});function S(){var o;(o=i.value)==null||o.validate(async e=>{if(e){try{await v.setConfig({settings:b(a)}),p.success("变更配置信息成功")}catch{}c()}else p.error("请填写完整信息")})}function b(o){return Object.keys(o).map(e=>({configKey:e,configVal:o[e]}))}return N(()=>{c()}),(o,e)=>{const u=I,y=M,V=B,w=n("el-switch"),m=n("el-form-item"),f=n("el-col"),_=n("el-row"),U=n("el-input"),C=n("el-form"),k=n("el-card");return $(),E("div",null,[t(V,null,{title:l(()=>e[2]||(e[2]=[s("div",{class:"flex items-center gap-4"},"本地存储参数设置",-1)])),content:l(()=>e[3]||(e[3]=[s("div",{class:"text-sm/6"},[s("div",null," 开启后将优先使用本地存储方式保存数据，有些场景需开启跨域访问，可能需额外自行解决读写权限问题。 "),s("div",null," 文件存储目录为 /public/file，更新迁移时请做好数据维护及备份。 ")],-1)])),default:l(()=>[t(y,{outline:"",onClick:S},{default:l(()=>[t(u,{name:"i-ri:file-text-line"}),e[4]||(e[4]=H(" 保存设置 "))]),_:1})]),_:1}),t(k,{style:{margin:"20px"}},{default:l(()=>[t(C,{ref_key:"formRef",ref:i,model:a,"label-width":"120px",rules:x.value},{default:l(()=>[t(_,null,{default:l(()=>[t(f,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[t(m,{label:"启用状态",prop:"localStorageStatus"},{default:l(()=>[t(w,{modelValue:a.localStorageStatus,"onUpdate:modelValue":e[0]||(e[0]=r=>a.localStorageStatus=r),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(_,null,{default:l(()=>[t(f,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[t(m,{label:"网站地址",prop:"siteUrl"},{default:l(()=>[t(U,{modelValue:a.siteUrl,"onUpdate:modelValue":e[1]||(e[1]=r=>a.siteUrl=r),placeholder:"网站地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})])}}});typeof g=="function"&&g(O);export{O as default};
