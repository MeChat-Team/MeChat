
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as P}from"./index.vue_vue_type_script_setup_true_lang-Ddax1S58.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang-FDL5yZdU.js";import{A as O}from"./chat-C6_gHGd-.js";import{d as W,r as u,m as G,a as J,p as o,q as K,g as i,c as g,b as t,w as a,e as w,F as V,s as U,i as L,h as c,y as Q,z as v,t as m,L as X,k as S}from"./index-TOhlAu5k.js";import{D as Z}from"./index-BE-LteFu.js";import{u as E}from"./utcformatTime-Bq4gDWNx.js";const ee={class:"answer"},te={class:"answer_container"},le=W({__name:"draw",setup(ae){const d=u(!1),b=u(),y=u(0),h=u(),n=G({userId:"",rec:"",model:"",page:1,size:14}),k=u([]);async function p(){d.value=!0;try{const r=await O.queryDrawAll(n),{rows:l,count:_}=r.data;d.value=!1,y.value=_,k.value=l}catch{d.value=!1}}async function q(r){const l=await X.queryAllUser({size:30,username:r});h.value=l.data.rows}function B(r){r==null||r.resetFields(),p()}return J(()=>{p()}),(r,l)=>{const _=H,z=o("el-option"),D=o("el-select"),f=o("el-form-item"),x=o("el-button"),M=o("el-form"),I=P,s=o("el-table-column"),R=o("el-image"),T=o("el-tag"),Y=o("el-popover"),F=o("el-table"),N=o("el-pagination"),$=o("el-row"),j=K("loading");return i(),g("div",null,[t(_,null,{title:a(()=>l[5]||(l[5]=[w("div",{class:"flex items-center gap-4"},"绘画记录",-1)])),_:1}),t(I,null,{default:a(()=>[t(M,{ref_key:"formRef",ref:b,inline:!0,model:n},{default:a(()=>[t(f,{label:"用户名称",prop:"userId"},{default:a(()=>[t(D,{modelValue:n.userId,"onUpdate:modelValue":l[0]||(l[0]=e=>n.userId=e),filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"用户姓名[模糊搜索]","remote-show-suffix":"","remote-method":q,style:{width:"160px"}},{default:a(()=>[(i(!0),g(V,null,U(h.value,e=>(i(),v(z,{key:e.id,label:e.username,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"绘画模型",prop:"model"},{default:a(()=>[t(D,{modelValue:n.model,"onUpdate:modelValue":l[1]||(l[1]=e=>n.model=e),placeholder:"请选择绘画模型",clearable:"",style:{width:"160px"}},{default:a(()=>[(i(!0),g(V,null,U(L(Z),e=>(i(),v(z,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,null,{default:a(()=>[t(x,{type:"primary",onClick:p},{default:a(()=>l[6]||(l[6]=[c(" 查询 ")])),_:1}),t(x,{onClick:l[2]||(l[2]=e=>B(b.value))},{default:a(()=>l[7]||(l[7]=[c(" 重置 ")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(I,{style:{width:"100%"}},{default:a(()=>[Q((i(),v(F,{border:"",data:k.value,style:{width:"100%"},size:"large"},{default:a(()=>[t(s,{prop:"id",align:"center",label:"ID",width:"70"}),t(s,{prop:"userInfo.username",align:"center",label:"用户名",width:"120"}),t(s,{prop:"userInfo.email",align:"center",label:"用户邮箱",width:"200"}),t(s,{prop:"drawUrl",align:"center",label:"绘图结果",width:"200"},{default:a(e=>{var A,C;return[t(R,{style:{height:"50px"},"preview-teleported":"",fit:"contain","preview-src-list":[(A=e.row)==null?void 0:A.fileInfo],src:(C=e.row)==null?void 0:C.fileInfo,lazy:"","hide-on-click-modal":""},null,8,["preview-src-list","src"])]}),_:1}),t(s,{prop:"model",label:"种类",width:"180",align:"center"},{default:a(e=>[t(T,{type:"success"},{default:a(()=>[c(m(e.row.model),1)]),_:2},1024)]),_:1}),t(s,{prop:"prompt",label:"绘图指令",align:"center",width:"250"},{default:a(e=>[t(Y,{placement:"top",width:400,trigger:"click"},{reference:a(()=>[w("div",ee,m(e.row.prompt),1)]),default:a(()=>[w("div",te,m(e.row.prompt),1)]),_:2},1024)]),_:1}),t(s,{prop:"progress",align:"center",label:"绘图进度",width:"90"}),t(s,{prop:"createdAt",label:"绘图时间",align:"center",width:"200"},{default:a(e=>[c(m(L(E)(e.row.createdAt,"YYYY-MM-DD hh:mm:ss")),1)]),_:1})]),_:1},8,["data"])),[[j,d.value]]),t($,{class:"mt-5 flex justify-end"},{default:a(()=>[t(N,{"current-page":n.page,"onUpdate:currentPage":l[3]||(l[3]=e=>n.page=e),"page-size":n.size,"onUpdate:pageSize":l[4]||(l[4]=e=>n.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:y.value,onSizeChange:p,onCurrentChange:p},null,8,["current-page","page-size","total"])]),_:1})]),_:1})])}}});typeof S=="function"&&S(le);export{le as default};
