
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{d as N,N as T,r as n,c as U,e as i,y as j,O as q,i as e,b as o,w as l,P as B,p as r,f as D,g as M,t as E,v as I,h as w,x as L,j as G,k as h}from"./index-TOhlAu5k.js";const H={class:"min-h-screen flex items-center justify-center bg-gray-100"},O={id:"login-box",class:"min-h-[60vh] min-w-[40vw] items-center rounded-lg bg-gray-50 p-6 shadow-lg"},P={class:"mb-6 text-center"},W={class:"text-xl text-gray-900 font-bold"},$={class:"mb-4 flex items-center justify-between"},A="TWVDaGF0",J=N({__name:"login",setup(Q){var p;const y=B(),x=D(),V=T(),d="MeChat",k=atob(A);if(!d.includes(k))throw document.body.innerHTML="<h1></h1>",new Error("");const S=n("login"),u=n(!1),C=n(((p=y.query.redirect)==null?void 0:p.toString())??"/"),m=n(),t=n({username:localStorage.login_username||"",password:"",remember:!!localStorage.login_username}),R=n({username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function c(){m.value&&m.value.validate(g=>{g&&(u.value=!0,V.login(t.value).then(()=>{u.value=!1,t.value.remember?localStorage.setItem("login_username",t.value.username):localStorage.removeItem("login_username"),x.push(C.value)}).catch(()=>{u.value=!1}))})}return(g,s)=>{const _=G,f=r("el-icon"),b=r("el-input"),v=r("el-form-item"),z=r("el-checkbox"),F=r("el-button"),K=r("el-form");return M(),U("div",H,[i("div",O,[j(o(K,{ref_key:"loginFormRef",ref:m,model:e(t),rules:e(R),class:"login-form mx-12 my-10",autocomplete:"on"},{default:l(()=>[i("div",P,[i("h3",W," 欢迎来到 "+E(e(d)),1)]),i("div",null,[o(v,{prop:"username",class:"py-2"},{default:l(()=>[o(b,{modelValue:e(t).username,"onUpdate:modelValue":s[0]||(s[0]=a=>e(t).username=a),placeholder:"用户名",text:"",tabindex:"1",autocomplete:"on",size:"large",class:"h-10"},{prefix:l(()=>[o(f,null,{default:l(()=>[o(_,{name:"ep:user"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(v,{prop:"password",class:"py-2"},{default:l(()=>[o(b,{modelValue:e(t).password,"onUpdate:modelValue":s[1]||(s[1]=a=>e(t).password=a),type:"password",placeholder:"密码",tabindex:"2",autocomplete:"on","show-password":"",size:"large",class:"h-10",onKeyup:I(c,["enter"])},{prefix:l(()=>[o(f,null,{default:l(()=>[o(_,{name:"ep:lock"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),i("div",$,[o(z,{modelValue:e(t).remember,"onUpdate:modelValue":s[2]||(s[2]=a=>e(t).remember=a),size:"large"},{default:l(()=>s[3]||(s[3]=[w(" 记住我 ")])),_:1},8,["modelValue"])]),o(F,{loading:e(u),type:"primary",size:"large",class:"w-full",onClick:L(c,["prevent"])},{default:l(()=>s[4]||(s[4]=[w(" 登录 ")])),_:1},8,["loading"])]),_:1},8,["model","rules"]),[[q,e(S)==="login"]])])])}}});typeof h=="function"&&h(J);export{J as default};
