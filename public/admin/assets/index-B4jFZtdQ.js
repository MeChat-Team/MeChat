
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{d as Y,aF as ce,r as W,Z as z,a4 as J,a as Ce,E as ke,K as Ee,i as a,A as O,g as v,c as I,z as H,V as Z,U as E,e as R,R as Le,b as F,t as re,w as se,ar as gt,ac as ze,a3 as de,a2 as bt,X as Ct,$ as nt,aG as Se,p as ue,F as be,s as ot,aH as yt,Y as Te,y as He,O as $e,a8 as xt,m as kt,aI as St,h as _e,aJ as Mt,a9 as It,P as lt,f as st,u as wt,n as Pt,a1 as Ot,ag as Wt,ab as Ke,T as Rt,af as Bt,x as Ue,j as Lt,l as Tt}from"./index-TOhlAu5k.js";import{b as Ht}from"./index-DiAwnlh9.js";import{u as $t}from"./useMainPage-BBnl-433.js";let te=null;function _t(){return te!==null}function jt(e){te&&at(),te=e}function Ze(e){e===te&&(te=null)}function at(){te&&(te.closeMenu(),te=null)}const K={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultZoom:1,defaultAdjustPadding:{x:0,y:10}};function pe(e,t){let n=e.offsetTop;return e.offsetParent!=null&&e.offsetParent!=t&&(n-=e.offsetParent.scrollTop,n+=pe(e.offsetParent,t)),n}function ge(e,t){let n=e.offsetLeft;return e.offsetParent!=null&&e.offsetParent!=t&&(n-=e.offsetParent.scrollLeft,n+=ge(e.offsetParent,t)),n}function Nt(e,t,n,s){return{x:ge(e,s)+t,y:pe(e,s)+n}}const Re="mx-menu-default-container",At="mx-menu-container-";let Et=0;function it(e){const{getContainer:t,zIndex:n}=e;if(t){const c=typeof t=="function"?t():t;if(c){let f=c.getAttribute("id");return f||(f=At+Et++,c.setAttribute("id",f)),{eleId:f,container:c,isNew:!1}}}let s=document.getElementById(Re);return s||(s=document.createElement("div"),s.setAttribute("id",Re),s.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(s)),s.style.zIndex=(n==null?void 0:n.toString())||K.defaultZindex.toString(),{eleId:Re,container:s,isNew:!0}}function zt(e){return typeof e=="number"?`${e}px`:e}const X=Y({props:{vnode:{type:null},data:{type:null,default:null}},setup(e){const{vnode:t,data:n}=ce(e);return()=>typeof t.value=="function"?t.value(n.value):t.value}}),Ie=(e,t)=>{const n=e.__vccOpts||e;for(const[s,c]of t)n[s]=c;return n},Ft={},Dt={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},Vt=R("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1),Kt=[Vt];function Ut(e,t){return v(),I("svg",Dt,Kt)}const Zt=Ie(Ft,[["render",Ut]]),Xt={},Yt={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},Gt=R("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1),Jt=[Gt];function qt(e,t){return v(),I("svg",Yt,Jt)}const ut=Ie(Xt,[["render",qt]]),Qt={class:"mx-item-row"},en=["xlink:href"],tn={key:1,class:"label"},nn={class:"mx-item-row"},on={class:"mx-shortcut"},Fe=Y({__name:"ContextMenuItem",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup(e,{expose:t,emit:n}){const s=e,c=n,{clickHandler:f,clickClose:h,clickableWhenHasChildren:i,disabled:g,hidden:b,label:o,icon:d,iconFontClass:k,showRightArrow:C,shortcut:u,hasChildren:p}=ce(s),r=W(!1),l=W(!1),x=W(),y=z("globalOptions"),w=z("globalHasSlot"),L=z("globalRenderSlot"),S=z("globalCloseMenu"),P=z("menuContext"),$={getSubMenuInstance:()=>{},showSubMenu:()=>r.value?(P.markActiveMenuItem($,!0),!0):p.value?(U(),!0):!1,hideSubMenu:()=>{P.closeOtherSubMenu()},isDisabledOrHidden:()=>g.value||b.value,getElement:()=>x.value,focus:()=>l.value=!0,blur:()=>l.value=!1,click:D};J("menuItemInstance",$),Ce(()=>{P.isMenuItemDataCollectedFlag()?ke(()=>{let M=0;const _=P.getElement();if(_){let G=0;for(let Q=0;Q<_.children.length;Q++){const oe=_.children[Q];if(oe.getAttribute("data-type")==="ContextMenuItem"){if(oe===x.value){M=G;break}G++}}}P.addChildMenuItem($,M)}):P.addChildMenuItem($)}),Ee(()=>{P.removeChildMenuItem($)});function D(M){if(!g.value){if(M){const _=M.target;if(_.classList.contains("mx-context-no-clickable")||y.value.ignoreClickClassName&&_.classList.contains(y.value.ignoreClickClassName))return;if(y.value.clickCloseClassName&&_.classList.contains(y.value.clickCloseClassName)){M.stopPropagation(),S(s.rawMenuItem);return}}p.value?i.value?(typeof f.value=="function"&&f.value(M),c("click",M)):r.value||U():(typeof f.value=="function"&&f.value(M),c("click",M),h.value&&S(s.rawMenuItem))}}function U(M){l.value=!1,P.checkCloseOtherSubMenuTimeOut()||P.closeOtherSubMenu(),g.value||(P.markActiveMenuItem($),p.value&&(M||P.markThisOpenedByKeyBoard(),P.addOpenedSubMenu(ne),r.value=!0,ke(()=>c("subMenuOpen",$))))}function ne(){l.value=!1,r.value=!1,c("subMenuClose",$)}function N(){return{disabled:g.value,label:o.value,icon:d.value,iconFontClass:k.value,showRightArrow:C.value,clickClose:h.value,clickableWhenHasChildren:i.value,shortcut:u.value,theme:y.value.theme,isOpen:r,hasChildren:p,onClick:D,onMouseEnter:U,closeMenu:S}}return t($),(M,_)=>a(b)?O("",!0):(v(),I("div",{key:0,class:"mx-context-menu-item-wrapper",ref_key:"menuItemRef",ref:x,"data-type":"ContextMenuItem"},[a(w)("itemRender")?(v(),H(a(X),{key:0,vnode:()=>a(L)("itemRender",N())},null,8,["vnode"])):e.customRender?(v(),H(a(X),{key:1,vnode:e.customRender,data:N()},null,8,["vnode","data"])):(v(),I("div",{key:2,class:Z(["mx-context-menu-item",a(g)?"disabled":"",l.value?"keyboard-focus":"",e.customClass?" "+e.customClass:"",r.value?"open":""]),onClick:D,onMouseenter:U},[E(M.$slots,"default",{},()=>[R("div",Qt,[R("div",{class:Z(["mx-icon-placeholder",e.preserveIconWidth?"preserve-width":""])},[E(M.$slots,"icon",{},()=>[a(w)("itemIconRender")?(v(),H(a(X),{key:0,vnode:()=>a(L)("itemIconRender",N())},null,8,["vnode"])):typeof e.svgIcon=="string"&&e.svgIcon?(v(),I("svg",Le({key:1,class:"icon svg"},e.svgProps),[R("use",{"xlink:href":e.svgIcon},null,8,en)],16)):typeof a(d)!="string"?(v(),H(a(X),{key:2,vnode:a(d),data:a(d)},null,8,["vnode","data"])):typeof a(d)=="string"&&a(d)!==""?(v(),I("i",{key:3,class:Z(a(d)+" icon "+a(k)+" "+a(y).iconFontClass)},null,2)):O("",!0)]),e.checked?E(M.$slots,"check",{key:0},()=>[a(w)("itemCheckRender")?(v(),H(a(X),{key:0,vnode:()=>a(L)("itemCheckRender",N())},null,8,["vnode"])):O("",!0),F(Zt)]):O("",!0)],2),E(M.$slots,"label",{},()=>[a(w)("itemLabelRender")?(v(),H(a(X),{key:0,vnode:()=>a(L)("itemLabelRender",N())},null,8,["vnode"])):typeof a(o)=="string"?(v(),I("span",tn,re(a(o)),1)):(v(),H(a(X),{key:2,vnode:a(o),data:a(o)},null,8,["vnode","data"]))])]),R("div",nn,[a(u)?E(M.$slots,"shortcut",{key:0},()=>[a(w)("itemShortcutRender")?(v(),H(a(X),{key:0,vnode:()=>a(L)("itemShortcutRender",N())},null,8,["vnode"])):O("",!0),R("span",on,re(a(u)),1)]):O("",!0),a(C)?E(M.$slots,"rightArrow",{key:1},()=>[a(w)("itemRightArrowRender")?(v(),H(a(X),{key:0,vnode:()=>a(L)("itemRightArrowRender",N())},null,8,["vnode"])):O("",!0),F(ut)]):O("",!0)])])],34)),a(y).menuTransitionProps?(v(),H(ze,gt(Le({key:3},a(y).menuTransitionProps)),{default:se(()=>[r.value?E(M.$slots,"submenu",{key:0}):O("",!0)]),_:3},16)):r.value?E(M.$slots,"submenu",{key:4}):O("",!0)],512))}}),ln=Y({name:"ContextMenuSperator",components:{VNodeRender:X},setup(){const e=z("globalHasSlot"),t=z("globalRenderSlot");return{globalHasSlot:e,globalRenderSlot:t}}}),sn={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function an(e,t,n,s,c,f){const h=ue("VNodeRender");return e.globalHasSlot("separatorRender")?(v(),H(h,{key:0,vnode:()=>e.globalRenderSlot("separatorRender",{})},null,8,["vnode"])):(v(),I("div",sn))}const je=Ie(ln,[["render",an]]),un=Y({name:"ContextSubMenu",components:{ContextMenuItem:Fe,ContextMenuSeparator:je,ContextMenuIconRight:ut},props:{items:{type:Object,default:null},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"}},setup(e){const t=z("menuContext"),n=z("globalOptions"),s=z("globalHasSlot"),c=z("globalRenderSlot"),{zIndex:f,getParentWidth:h,getParentHeight:i,getZoom:g}=t,{adjustPosition:b}=ce(e),o=W(),d=W(),k=W(),C=W(),u=[],p=z("globalSetCurrentSubMenu"),r=[];let l=null,x=0;function y(){l&&l.blur()}function w(m,T){if(m){for(let V=T!==void 0?T:0;V<r.length;V++)if(!r[V].isDisabledOrHidden()){L(V);break}}else for(let V=T!==void 0?T:r.length-1;V>=0;V--)if(!r[V].isDisabledOrHidden()){L(V);break}}function L(m){if(l&&y(),m!==void 0&&(l=r[Math.max(0,Math.min(m,r.length-1))]),!!l&&(l.focus(),le.value)){const T=l.getElement();T&&(M.value=Math.min(Math.max(-_.value,-T.offsetTop-T.offsetHeight+ee.value),0))}}function S(){p(P)}const P={isTopLevel:()=>t.getParentContext()===null,closeSelfAndActiveParent:()=>{const m=U.getParentContext();if(m){m.closeOtherSubMenu();const T=m.getSubMenuInstanceContext();if(T)return T.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:()=>{var m;return(m=U.getParentContext())==null?void 0:m.closeOtherSubMenu()},moveCurrentItemFirst:()=>w(!0),moveCurrentItemLast:()=>w(!1),moveCurrentItemDown:()=>w(!0,l?r.indexOf(l)+1:0),moveCurrentItemUp:()=>w(!1,l?r.indexOf(l)-1:0),focusCurrentItem:()=>L(),openCurrentItemSubMenu:()=>l?l==null?void 0:l.showSubMenu():!1,triggerCurrentItemClick:m=>l==null?void 0:l.click(m)};let $=!1,D=!1;const U={zIndex:f+1,container:t.container,adjustPadding:n.value.adjustPadding||K.defaultAdjustPadding,getParentWidth:()=>{var m;return((m=d.value)==null?void 0:m.offsetWidth)||0},getParentHeight:()=>{var m;return((m=d.value)==null?void 0:m.offsetHeight)||0},getParentX:()=>B.value.x,getParentY:()=>B.value.y,getParentAbsX:()=>d.value?ge(d.value,t.container):0,getParentAbsY:()=>d.value?pe(d.value,t.container):0,getPositon:()=>[0,0],getZoom:()=>n.value.zoom||K.defaultZoom,addOpenedSubMenu(m){u.push(m)},closeOtherSubMenu(){u.forEach(m=>m()),u.splice(0,u.length),p(P)},checkCloseOtherSubMenuTimeOut(){return x?(clearTimeout(x),x=0,!0):!1},closeOtherSubMenuWithTimeOut(){x=setTimeout(()=>{x=0,this.closeOtherSubMenu()},200)},addChildMenuItem:(m,T)=>{T===void 0?r.push(m):r.splice(T,0,m)},removeChildMenuItem:m=>{r.splice(r.indexOf(m),1),m.getSubMenuInstance=()=>{}},markActiveMenuItem:(m,T=!1)=>{y(),l=m,T&&L()},markThisOpenedByKeyBoard:()=>{$=!0},isOpenedByKeyBoardFlag:()=>$?($=!1,!0):!1,isMenuItemDataCollectedFlag:()=>D,getElement:()=>d.value||null,getParentContext:()=>t,getSubMenuInstanceContext:()=>P};J("menuContext",U);const ne={getChildItem:m=>r[m],getMenuDimensions:()=>o.value?{width:o.value.offsetWidth,height:o.value.offsetHeight}:{width:0,height:0},getSubmenuRoot:()=>o.value,getMenu:()=>d.value,getScrollValue:()=>M.value,setScrollValue:m=>M.value=m,getScrollHeight:()=>_.value,getMaxHeight:()=>ee.value,getPosition:()=>B.value,setPosition:(m,T)=>{B.value.x=m,B.value.y=T}},N=z("menuItemInstance",void 0);N&&(N.getSubMenuInstance=()=>ne);const M=W(0),_=W(0);function G(m){m?M.value=Math.min(Math.max(M.value-50,-_.value),0):M.value=Math.min(M.value+50,0)}function Q(m){m.preventDefault(),m.stopPropagation(),G(m.deltaY>0)}function oe(m){n.value.mouseScroll&&(m.preventDefault(),m.stopPropagation(),G(m.deltaY>0))}const le=W(!1),B=W({x:0,y:0}),ee=W(0);return Ce(()=>{const m=t.getPositon();B.value={x:(m[0]??n.value.xOffset??0)/g(),y:(m[1]??n.value.yOffset??0)/g()},p(P),ke(()=>{var T,V;const A=d.value;if(A&&k.value){const{container:ie}=t,we=(h==null?void 0:h())??0,De=(i==null?void 0:i())??0,ye=typeof t.adjustPadding=="number"?t.adjustPadding:((T=t.adjustPadding)==null?void 0:T.x)??0,xe=typeof t.adjustPadding=="number"?t.adjustPadding:((V=t.adjustPadding)==null?void 0:V.y)??0,me=De>0?xe:0,mt=document.documentElement.scrollHeight/g(),vt=document.documentElement.scrollWidth/g(),ht=Math.min(vt,ie.offsetWidth),Pe=Math.min(mt,ie.offsetHeight);let Oe=ge(A,ie),We=pe(A,ie);e.direction.includes("l")?B.value.x-=A.offsetWidth+ye:e.direction.includes("r")?B.value.x+=we+ye:(B.value.x+=we/2,B.value.x-=(A.offsetWidth+ye)/2),e.direction.includes("t")?B.value.y-=(A.offsetHeight+xe*2)/g():e.direction.includes("b")?B.value.y-=xe/g():(B.value.y+=De/2/g(),B.value.y-=(A.offsetHeight+xe)/2/g()),b.value&&ke(()=>{Oe=ge(A,ie),We=pe(A,ie);const pt=Oe+A.offsetWidth-ht,Ve=We+A.offsetHeight+me*2-Pe;if(le.value=Ve>0,_.value=A.offsetHeight-Pe+me*2,pt>0){const ve=we+A.offsetWidth-ye,he=Oe;ve>he?B.value.x-=he:B.value.x-=ve}if(le.value){const ve=Ve,he=We;ve>he?B.value.y-=he-me:B.value.y-=ve-me,ee.value=Pe-me*2}else ee.value=0})}A==null||A.focus({preventScroll:!0}),t.isOpenedByKeyBoardFlag()&&w(!0),D=!0})}),Ee(()=>{N&&(N.getSubMenuInstance=()=>{})}),{submenuRoot:o,menu:d,scroll:k,options:n,zIndex:f,constOptions:K,scrollValue:M,upScrollButton:C,overflow:le,position:B,scrollHeight:_,maxHeight:ee,...ne,globalHasSlot:s,globalRenderSlot:c,onScroll:G,onSubMenuBodyClick:S,onMouseWhell:oe,onMouseWhellMx:Q,solveNumberOrStringSize:zt}}}),rn={key:0,class:"mx-context-menu-updown placeholder"},dn={key:1,class:"mx-context-menu-updown placeholder"},cn={class:"mx-context-menu-scroll",ref:"scroll"};function fn(e,t,n,s,c,f){const h=ue("ContextMenuSeparator"),i=ue("ContextSubMenu",!0),g=ue("ContextMenuItem"),b=ue("ContextMenuIconRight");return v(),I("div",{ref:"submenuRoot",class:Z(["mx-context-menu",e.options.customClass?e.options.customClass:"",e.options.theme??""]),style:Te({maxWidth:e.maxWidth?e.solveNumberOrStringSize(e.maxWidth):`${e.constOptions.defaultMaxWidth}px`,minWidth:e.minWidth?e.solveNumberOrStringSize(e.minWidth):`${e.constOptions.defaultMinWidth}px`,maxHeight:e.overflow&&e.maxHeight>0?`${e.maxHeight}px`:void 0,zIndex:e.zIndex,left:`${e.position.x}px`,top:`${e.position.y}px`}),"data-type":"ContextSubMenu",onClick:t[4]||(t[4]=(...o)=>e.onSubMenuBodyClick&&e.onSubMenuBodyClick(...o)),onWheel:t[5]||(t[5]=(...o)=>e.onMouseWhell&&e.onMouseWhell(...o))},[R("div",{class:Z(["mx-context-menu-items"]),ref:"menu",style:Te({top:`${e.scrollValue}px`})},[E(e.$slots,"default",{},()=>[e.overflow&&e.options.updownButtonSpaceholder?(v(),I("div",rn)):O("",!0),(v(!0),I(be,null,ot(e.items,(o,d)=>(v(),I(be,{key:d},[o.hidden!==!0&&o.divided==="up"?(v(),H(h,{key:0})):O("",!0),o.hidden!==!0&&o.divided==="self"?(v(),H(h,{key:1})):(v(),H(g,{key:2,clickHandler:o.onClick?k=>o.onClick(k):void 0,disabled:typeof o.disabled=="object"?o.disabled.value:o.disabled,hidden:typeof o.hidden=="object"?o.hidden.value:o.hidden,icon:o.icon,iconFontClass:o.iconFontClass,svgIcon:o.svgIcon,svgProps:o.svgProps,label:o.label,customRender:o.customRender,customClass:o.customClass,checked:typeof o.checked=="object"?o.checked.value:o.checked,shortcut:o.shortcut,clickClose:o.clickClose,clickableWhenHasChildren:o.clickableWhenHasChildren,preserveIconWidth:o.preserveIconWidth!==void 0?o.preserveIconWidth:e.options.preserveIconWidth,showRightArrow:o.children&&o.children.length>0,hasChildren:o.children&&o.children.length>0,rawMenuItem:o,onSubMenuOpen:k=>{var C;return(C=o.onSubMenuOpen)==null?void 0:C.call(o,k)},onSubMenuClose:k=>{var C;return(C=o.onSubMenuClose)==null?void 0:C.call(o,k)}},yt({_:2},[o.children&&o.children.length>0?{name:"submenu",fn:se(()=>[F(i,{items:o.children,maxWidth:o.maxWidth,minWidth:o.minWidth,adjustPosition:o.adjustSubMenuPosition!==void 0?o.adjustSubMenuPosition:e.options.adjustPosition,direction:o.direction!==void 0?o.direction:e.options.direction},null,8,["items","maxWidth","minWidth","adjustPosition","direction"])]),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),o.hidden!==!0&&(o.divided==="down"||o.divided===!0)?(v(),H(h,{key:3})):O("",!0)],64))),128)),e.overflow&&e.options.updownButtonSpaceholder?(v(),I("div",dn)):O("",!0)])],4),R("div",cn,[He(R("div",{ref:"upScrollButton",class:Z("mx-context-menu-updown mx-context-no-clickable up"+(e.overflow&&e.scrollValue<0?"":" disabled")),onClick:t[0]||(t[0]=o=>e.onScroll(!1)),onWheel:t[1]||(t[1]=(...o)=>e.onMouseWhellMx&&e.onMouseWhellMx(...o))},[F(b)],34),[[$e,e.overflow]]),He(R("div",{class:Z("mx-context-menu-updown mx-context-no-clickable down"+(e.overflow&&e.scrollValue>-e.scrollHeight?"":" disabled")),onClick:t[2]||(t[2]=o=>e.onScroll(!0)),onWheel:t[3]||(t[3]=(...o)=>e.onMouseWhellMx&&e.onMouseWhellMx(...o))},[F(b)],34),[[$e,e.overflow]])],512)],38)}const Me=Ie(un,[["render",fn]]),mn={class:"mx-menu-ghost-host"},rt=Y({__name:"ContextSubMenuWrapper",props:{options:{type:Object,default:null},show:{type:Object,default:null},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},emits:["close","closeAnimFinished"],setup(e,{expose:t,emit:n}){const s=e,c=n,f=Ct(),h=W(),{options:i,show:g,container:b}=ce(s);Ce(()=>{g.value&&k()}),Ee(()=>{r()}),nt(g,S=>{S?k():(Ze(o),r())});const o={closeMenu:C,isClosed:u,getMenuRef:()=>h.value,getMenuDimensions:()=>{var S;return((S=h.value)==null?void 0:S.getMenuDimensions())??{width:0,height:0}}};let d=!1;function k(){p(),jt(o)}function C(S){d=!0,c("close",S),i.value.menuTransitionProps||c("closeAnimFinished"),Ze(o)}function u(){return d}function p(){setTimeout(()=>{document.addEventListener("click",w,!0),document.addEventListener("contextmenu",w,!0),document.addEventListener("scroll",y,!0),!s.isFullScreenContainer&&b.value&&b.value.addEventListener("scroll",y,!0),i.value.keyboardControl!==!1&&document.addEventListener("keydown",x)},50)}function r(){document.removeEventListener("contextmenu",w,!0),document.removeEventListener("click",w,!0),document.removeEventListener("scroll",y,!0),!s.isFullScreenContainer&&b.value&&b.value.removeEventListener("scroll",y,!0),i.value.keyboardControl!==!1&&document.removeEventListener("keydown",x)}const l=W();J("globalSetCurrentSubMenu",S=>l.value=S);function x(S){var P,$,D,U,ne,N,M,_,G,Q,oe,le,B;let ee=!0;switch(S.key){case"Escape":{((P=l.value)==null?void 0:P.isTopLevel())===!1?($=l.value)==null||$.closeCurrentSubMenu():C();break}case"ArrowDown":(D=l.value)==null||D.moveCurrentItemDown();break;case"ArrowUp":(U=l.value)==null||U.moveCurrentItemUp();break;case"Home":(ne=l.value)==null||ne.moveCurrentItemFirst();break;case"End":(N=l.value)==null||N.moveCurrentItemLast();break;case"ArrowLeft":{(M=l.value)!=null&&M.closeSelfAndActiveParent()||(G=(_=i.value).onKeyFocusMoveLeft)==null||G.call(_);break}case"ArrowRight":(Q=l.value)!=null&&Q.openCurrentItemSubMenu()||(le=(oe=i.value).onKeyFocusMoveRight)==null||le.call(oe);break;case"Enter":(B=l.value)==null||B.triggerCurrentItemClick(S);break;default:ee=!1;break}ee&&l.value&&(S.stopPropagation(),S.preventDefault())}function y(){i.value.closeWhenScroll!==!1&&C()}function w(S){L(S.target,S)}function L(S,P){for(var $,D;S;){if(S.classList&&S.classList.contains("mx-menu-host"))return;S=S.parentNode}i.value.clickCloseOnOutside!==!1?(r(),C()):(D=($=i.value).onClickOnOutside)==null||D.call($,P)}return J("globalOptions",i),J("globalCloseMenu",C),J("globalIsFullScreenContainer",s.isFullScreenContainer),J("globalHasSlot",S=>f[S]!==void 0),J("globalRenderSlot",(S,P)=>E(f,S,{...P},()=>[de("span","Render slot failed")],!1)),J("menuContext",{zIndex:i.value.zIndex||K.defaultZindex,container:b.value,adjustPadding:{x:0,y:0},getParentAbsY:()=>i.value.x,getParentAbsX:()=>i.value.y,getZoom:()=>i.value.zoom||K.defaultZoom,getParentX:()=>0,getParentY:()=>0,getParentWidth:()=>0,getParentHeight:()=>0,getPositon:()=>[i.value.x,i.value.y],closeOtherSubMenuWithTimeOut:()=>{},checkCloseOtherSubMenuTimeOut:()=>!1,addOpenedSubMenu:()=>{},closeOtherSubMenu:()=>{},getParentContext:()=>null,getSubMenuInstanceContext:()=>null,getElement:()=>null,addChildMenuItem:()=>{},removeChildMenuItem:()=>{},markActiveMenuItem:()=>{},markThisOpenedByKeyBoard:()=>{},isOpenedByKeyBoardFlag:()=>!1,isMenuItemDataCollectedFlag:()=>!1}),t(o),(S,P)=>(v(),I("div",mn,[a(i).menuTransitionProps?(v(),H(ze,Le({key:0,appear:""},a(i).menuTransitionProps,{onAfterLeave:P[0]||(P[0]=$=>c("closeAnimFinished"))}),{default:se(()=>[a(g)?(v(),H(Me,{key:0,ref_key:"submenuInstance",ref:h,class:"mx-menu-host",items:a(i).items,adjustPosition:a(i).adjustPosition,maxWidth:a(i).maxWidth||a(K).defaultMaxWidth,minWidth:a(i).minWidth||a(K).defaultMinWidth,direction:a(i).direction||a(K).defaultDirection},{default:se(()=>[E(S.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):O("",!0)]),_:3},16)):a(g)?(v(),H(Me,{key:1,ref_key:"submenuInstance",ref:h,class:"mx-menu-host",items:a(i).items,adjustPosition:a(i).adjustPosition,maxWidth:a(i).maxWidth||a(K).defaultMaxWidth,minWidth:a(i).minWidth||a(K).defaultMinWidth,direction:a(i).direction||a(K).defaultDirection},{default:se(()=>[E(S.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):O("",!0)]))}}),vn=Y({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},setup(e,t){const{options:n,show:s}=ce(e),c=W(null);return t.expose({closeMenu:()=>t.emit("update:show",!1),isClosed:()=>!s.value,getMenuRef:()=>{var f;return(f=c.value)==null?void 0:f.getMenuRef()},getMenuDimensions:()=>{var f;return((f=c.value)==null?void 0:f.getMenuDimensions())??{width:0,height:0}}}),()=>{const{isNew:f,container:h,eleId:i}=it(n.value);return[de(bt,{to:`#${i}`},[de(rt,{ref:c,options:n,show:s,container:h,isFullScreenContainer:!f,onClose:g=>{var b,o;t.emit("update:show",!1),t.emit("close"),(o=(b=n.value).onClose)==null||o.call(b,g)}},t.slots)])]}}}),hn=Y({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup(e,t){const n=z("globalOptions"),{adjustSubMenuPosition:s,maxWidth:c,minWidth:f}=ce(e),h=typeof s.value<"u"?s.value:n.value.adjustPosition,i=W(),g=W();return t.expose({getSubMenuRef:()=>i.value,getMenuItemRef:()=>g.value}),()=>de(Fe,{...e,ref:g,showRightArrow:!0,maxWidth:void 0,minWidth:void 0,adjustSubMenuPosition:void 0,hasChildren:typeof t.slots.default!==void 0},t.slots.default?{submenu:()=>de(Me,{ref:i,maxWidth:c.value,minWidth:f.value,adjustPosition:h},{default:t.slots.default})}:void 0)}});function pn(e,t,n,s){const c=W(!0),f=de(rt,{options:e,show:c,container:t,isFullScreenContainer:!n,onCloseAnimFinished:()=>{Se(null,t)},onClose:h=>{var i;(i=e.onClose)==null||i.call(e,h),c.value=!1}},s);return Se(f,t),f.component}function Xe(e,t){const n=it(e);return pn(e,n.container,n.isNew,t).exposed}const gn={install(e){e.config.globalProperties.$contextmenu=Xe,e.component("ContextMenu",vn),e.component("ContextMenuItem",Fe),e.component("ContextMenuGroup",hn),e.component("ContextMenuSperator",je),e.component("ContextMenuSeparator",je),e.component("ContextSubMenu",Me)},showContextMenu(e,t){return Xe(e,t)},isAnyContextMenuOpen(){return _t()},closeContextMenu:at,transformMenuPosition:Nt};var bn=Object.defineProperty,Cn=Object.defineProperties,yn=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,xn=Object.prototype.hasOwnProperty,kn=Object.prototype.propertyIsEnumerable,Ge=(e,t,n)=>t in e?bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,q=(e,t)=>{for(var n in t||(t={}))xn.call(t,n)&&Ge(e,n,t[n]);if(Ye)for(var n of Ye(t))kn.call(t,n)&&Ge(e,n,t[n]);return e},fe=(e,t)=>Cn(e,yn(t));const dt={},Sn=function(e,t){dt[e]=t},ae=Y({name:"Icon",props:{name:String,color:String},computed:{svg(){if(this.name)return dt[this.name]}},render(e){const t=this.svg;if(!t)return console.warn(`The name of '${this.name}' could not be found.`),F("span",{class:"m-svg-icon"},null);const n={color:this.color?this.color:t.fill?t.fill:null};return F("span",{class:["m-svg-icon","m-svg-icon--"+this.name]},[F("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:t.viewBox,style:n,class:t.class},[t.defs&&F("defs",{innerHTML:t.defs},null),t.path&&F("path",{fill:"currentColor",d:t.path},null),t.html&&F("g",{innerHTML:t.html},null),this.$slots.default])])}});ae.add=Sn;const Je={name:"error",fill:"#F56C6C",viewBox:"0 0 1024 1024",path:"M512,952C269,952,72,755,72,512S269,72,512,72s440,197,440,440S755,952,512,952z M579.7,512l101.6-101.6 c18.7-18.7,18.7-49,0-67.7c-18.7-18.7-49-18.7-67.7,0l0,0L512,444.3L410.4,342.7c-18.7-18.7-49-18.7-67.7,0s-18.7,49,0,67.7 L444.3,512L342.7,613.6c-18.7,18.7-18.7,49,0,67.7c18.7,18.7,49,18.7,67.7,0L512,579.7l101.6,101.6c18.7,18.7,49,18.7,67.7,0 c18.7-18.7,18.7-49,0-67.7L579.7,512z"},qe={name:"info",fill:"#1CADF2",viewBox:"0 0 1024 1024",path:"M512,72C269,72,72,269,72,512s197,440,440,440s440-197,440-440S755,72,512,72z M581,673.9 c-33.2,49.9-67,88.3-123.8,88.3c-38.8-6.3-54.7-34.1-46.3-62.4L484,457.6c1.8-5.9-1.2-12.3-6.6-14.2c-5.4-1.9-15.9,5.1-25.1,15.1 l-44.2,53.2c-1.2-8.9-0.1-23.7-0.1-29.6c33.2-49.9,87.8-89.2,124.8-89.2c35.2,3.6,51.8,31.7,45.7,62.6l-73.6,243.3 c-1,5.5,1.9,11.1,6.9,12.8c5.4,1.9,16.8-5.1,26-15.1l44.2-53.1C583,652.3,581,667.9,581,673.9z M571.2,357.6 c-28,0-50.6-20.4-50.6-50.4c0-30,22.7-50.3,50.6-50.3c28,0,50.6,20.4,50.6,50.3C621.8,337.3,599.1,357.6,571.2,357.6z"},Qe={name:"success",fill:"#17B77E",viewBox:"0 0 1024 1024",path:"M512,72C269,72,72,269,72,512s197,440,440,440s440-197,440-440S755,72,512,72L512,72z M758.9,374 c-48.5,48.6-81.2,76.9-172.3,186.8c-52.6,63.4-102.3,131.5-102.7,132L462.1,720c-4.6,6.1-13.5,6.8-19.1,1.6L267.9,558.9 c-17.8-16.5-18.8-44.4-2.3-62.2s44.4-18.8,62.2-2.3l104.9,97.5c5.5,5.1,14.1,4.5,18.9-1.3c16.2-20.1,38.4-44.5,62.4-68.6 c90.2-90.9,145.6-139.7,175.2-161.3c36-26.2,77.3-48.6,87.3-36.2C792,343.9,782.5,350.3,758.9,374L758.9,374z"},et={name:"warning",fill:"#FFC603",viewBox:"0 0 1024 1024",path:"M512,952C269,952,72,755,72,512S269,72,512,72s440,197,440,440S755,952,512,952z M510,770.8 c30.4,0,55-24.6,55-55s-24.6-55-55-55s-55,24.6-55,55S479.6,770.8,510,770.8z M509.8,255.3c-39.3,0-71.2,31.9-71.2,71.2 c0,3.1,0.2,6.2,0.6,9.3L472.4,588c2.5,19.3,18.9,33.7,38.4,33.7c19.4,0,35.8-14.4,38.2-33.7l31.8-252.2c5-39.2-22.8-75-62-79.9 C515.9,255.5,512.8,255.3,509.8,255.3z"},tt={name:"loading",viewBox:"0 0 50 50",html:'<g stroke="#f2f2f2" stroke-width="3.5"  stroke-linecap="round" fill="none"><circle cx="25" cy="25" r="20" class="m-loading-icon-bg-path"></circle><circle cx="25" cy="25" r="20" stroke="#20a0ff" stroke-dasharray="90, 150" stroke-dashoffset="0" class="m-loading-icon-active-path"><animate attributeName="stroke-dasharray" dur="1.5s" values="1,200;90,150;90,150" repeatCount="indefinite"/><animate attributeName="stroke-dashoffset" dur="1.5s" values="0;-40px;-120px" repeatCount="indefinite"/><animateTransform attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="2s" repeatCount="indefinite"/></circle></g>'};ae.add(Je.name,Je);ae.add(qe.name,qe);ae.add(Qe.name,Qe);ae.add(et.name,et);ae.add(tt.name,tt);var Mn=(e,t)=>{const n=e.__vccOpts||e;for(const[s,c]of t)n[s]=c;return n};function In(e,t){const n=W(0);return n.value=window.setTimeout(e,t),{stop(){window.clearTimeout(n.value)}}}const wn=Y({components:{Icon:ae},name:"m-message",emits:["close","destroy","collapsed"],props:{id:String,type:{type:String,default:"info"},title:String,message:String,iconURL:String,duration:{type:Number,default:3e3},isCollapsed:Boolean,collapsable:Boolean,supportHTML:Boolean,width:String,className:String,wrapperClassName:String,closable:Boolean,stopTimerOnHover:{type:Boolean,default:!0}},setup(e,{expose:t,emit:n}){const s=kt({visible:!0,collapsed:e.isCollapsed,timer:null});let c;const f=()=>{e.duration<0||({stop:c}=In(()=>{i()},e.duration))},h=()=>{c==null||c()},i=()=>{s.visible=!1},g=()=>{s.collapsed=!s.collapsed,n("collapsed",s.collapsed)},b=()=>{s.visible=!1},o=()=>{e.stopTimerOnHover&&h()},d=()=>{e.stopTimerOnHover&&f()};return St(()=>{h()}),Ce(()=>{f()}),t({close:i}),{state:s,handleClearTimer:o,handleStartTimer:d,triggerCollapse:g,handleClose:b}}}),Pn=["id"],On={key:0,class:"m-message-icons"},Wn=["src"],Rn={class:"m-message-content"},Bn={key:0,class:"m-message--title"},Ln=["innerHTML"],Tn={key:0,class:"m-message--description"},Hn={class:"m-message--control"},$n=R("svg",{viewBox:"0 0 35 35",width:"20",height:"20",version:"1.1",fill:"currentColor"},[R("path",{d:"M9.4,13.9c-0.2,0.2-0.2,0.6,0,0.8l8.1,8.1l0,0l0,0l8.1-8.1c0.2-0.2,0.2-0.6,0-0.8l-1.3-1.3 c-0.2-0.2-0.6-0.2-0.8,0l-5.5,5.5c-0.2,0.2-0.6,0.2-0.8,0l-5.5-5.5c-0.2-0.2-0.6-0.2-0.8,0L9.4,13.9z"})],-1),_n=[$n],jn=R("svg",{viewBox:"0 0 35 35",width:"20",height:"20",version:"1.1",fill:"currentColor"},[R("path",{d:"M19.5,17.5l5.1,5.1l-2,2l-5.1-5.1l-5.1,5.1l-2-2l5.1-5.1l-5.1-5.1l2-2l5.1,5.1l5.1-5.1l2,2L19.5,17.5z"})],-1),Nn=[jn];function An(e,t,n,s,c,f){const h=ue("icon");return v(),H(ze,{name:"m-message-fade",appear:"",mode:"in-out",onBeforeLeave:t[4]||(t[4]=i=>e.$emit("close")),onAfterLeave:t[5]||(t[5]=i=>e.$emit("destroy"))},{default:se(()=>[e.state.visible?(v(),I("div",{key:0,class:Z(["m-message-wrapper",e.wrapperClassName]),id:e.id,style:Te({width:e.width})},[R("div",{class:Z(["m-message",e.className]),onMouseenter:t[2]||(t[2]=(...i)=>e.handleClearTimer&&e.handleClearTimer(...i)),onMouseleave:t[3]||(t[3]=(...i)=>e.handleStartTimer&&e.handleStartTimer(...i))},[e.iconURL||e.type?(v(),I("div",On,[e.iconURL?(v(),I("img",{key:0,src:e.iconURL,class:"m-message--icon"},null,8,Wn)):e.type?(v(),H(h,{key:1,name:e.type,class:"m-message--icon"},null,8,["name"])):O("",!0)])):O("",!0),R("div",Rn,[e.title||e.$slots.title?(v(),I("div",Bn,[E(e.$slots,"title",{},()=>[_e(re(e.title),1)])])):O("",!0),e.supportHTML&&e.message?(v(),I(be,{key:1},[e.state.collapsed?O("",!0):(v(),I("div",{key:0,class:"m-message--description",innerHTML:e.message},null,8,Ln))],64)):(v(),I(be,{key:2},[e.state.collapsed?O("",!0):(v(),I("div",Tn,[E(e.$slots,"default",{},()=>[_e(re(e.message),1)])]))],64))]),R("div",Hn,[e.collapsable&&(e.title||e.$slots.title)?(v(),I("button",{key:0,class:Z(["m-message--button m-message--arrow-down",{"is-collapsed":e.state.collapsed}]),onClick:t[0]||(t[0]=(...i)=>e.triggerCollapse&&e.triggerCollapse(...i))},_n,2)):O("",!0),e.closable?(v(),I("button",{key:1,class:"m-message--button m-message--close",onClick:t[1]||(t[1]=(...i)=>e.handleClose&&e.handleClose(...i))},Nn)):O("",!0)])],34)],14,Pn)):O("",!0)]),_:3})}var En=Mn(wn,[["render",An]]);const Ne=[];let zn=0;const Be={};let ct={};const Fn={stopTimerOnHover:!0,duration:3e3},j=e=>{const t="m-message-"+zn++,n=fe(q(q(q({},Fn),ct),e),{id:t});delete n.hasMask,delete n.position,delete n.zIndex;const s=e.position||"top-center",c=e.hasMask||!1,f=s+(c?"-mask":"");let h=Be[f];h?h.count++:(h=Be[f]={el:document.createElement("div"),count:1},h.el.className=["m-message-container","is-"+s,c?"has-mask":""].filter(function(d){return!!d}).join(" "),document.body.appendChild(h.el)),e.zIndex&&(h.el.style.zIndex=String(e.zIndex));let i=null;xt(e.message)?(i={default:()=>e.message},n.message=""):typeof e.message=="function"&&(i={default:e.message},n.message="");const g=F(En,n,i),b=document.createElement("div");g.appContext=e.ctx||j._context||null,g.props.onClose=e.onClose,g.props.onDestroy=()=>{h.count--,h.count===0&&(delete Be[f],h.el.remove()),Se(null,b)},Se(g,b),s.indexOf("bottom")===0&&h.el.firstChild?h.el.insertBefore(b.firstElementChild,h.el.firstChild):h.el.appendChild(b.firstElementChild);const o={id:t,close(){var d,k;(k=(d=g==null?void 0:g.component)==null?void 0:d.exposed)==null||k.close()}};return Ne.push(o),o};j.success=(e,t)=>j(fe(q({},t),{type:"success",message:e}));j.info=(e,t)=>j(fe(q({},t),{type:"info",message:e}));j.warning=(e,t)=>j(fe(q({},t),{type:"warning",message:e}));j.error=(e,t)=>j(fe(q({},t),{type:"error",message:e}));j.loading=(e,t)=>j(fe(q({},t),{type:"loading",message:e}));j.closeAll=function(){for(let e=Ne.length-1;e>=0;e--)Ne[e].close()};j.setDefault=e=>{ct=q({},e)};const Dn=(e,t)=>(e.install=t,e);var Ae=Dn(j,function(e,t={}){j._context=e._context,e.config.globalProperties["$"+(t.name||"mmessage")]=j,t.defaultOptions&&j.setDefault(t.defaultOptions)});const ft=Mt("tabbar",()=>{const e=It(),t=W([]),n=W(-1);async function s(b){var C,u,p;const o=[];b.matched.forEach((r,l)=>{var x;l>0&&(x=r.components)!=null&&x.default.name&&o.push(r.components.default.name)});const d=(C=b.matched.at(-1))==null?void 0:C.meta,k=b.fullPath;if(b.name!=="reload"&&!t.value.find(l=>l.routeName?l.routeName===b.name:l.tabId===k)){const l={tabId:k,fullPath:b.fullPath,routeName:b.name,title:typeof(d==null?void 0:d.title)=="function"?d.title():d==null?void 0:d.title,icon:(d==null?void 0:d.icon)??((p=(u=d==null?void 0:d.breadcrumbNeste)==null?void 0:u.findLast(x=>x.icon))==null?void 0:p.icon),name:o};n.value>=0?(t.value.splice(n.value+1,0,l),n.value=-1):t.value.push(l)}}function c(b){const o=[],d=[];t.value.forEach(C=>{C.tabId===b?d.push(...C.name):o.push(...C.name)});const k=[];d.forEach(C=>{o.includes(C)||k.push(C)}),e.remove(k),t.value=t.value.filter(C=>C.tabId!==b)}function f(b){const o=[],d=[];t.value.forEach(C=>{C.tabId!==b?d.push(...C.name):o.push(...C.name)});const k=[];d.forEach(C=>{o.includes(C)||k.push(C)}),e.remove(k),t.value=t.value.filter(C=>C.tabId===b)}function h(b){const o=t.value.findIndex(u=>u.tabId===b),d=[],k=[];t.value.forEach((u,p)=>{p<o?k.push(...u.name):d.push(...u.name)});const C=[];k.forEach(u=>{d.includes(u)||C.push(u)}),e.remove(C),t.value=t.value.filter((u,p)=>p>=o)}function i(b){const o=t.value.findIndex(u=>u.tabId===b),d=[],k=[];t.value.forEach((u,p)=>{p>o?k.push(...u.name):d.push(...u.name)});const C=[];k.forEach(u=>{d.includes(u)||C.push(u)}),e.remove(C),t.value=t.value.filter((u,p)=>p<=o)}function g(){t.value=[]}return{list:t,leaveIndex:n,add:s,remove:c,removeOtherSide:f,removeLeftSide:h,removeRightSide:i,clean:g}});function Vn(){const e=lt(),t=st(),n=ft();function s(){return e.fullPath}function c(u){const p=n.list.findIndex(r=>r.tabId===s());n.$patch({leaveIndex:p}),t.push(u)}function f(u){const p=s();t.go(u),n.remove(p)}function h(u){const p=s();t.push(u).then(()=>{n.remove(p)})}function i(u=s()){const p=s();if(n.list.some(r=>r.tabId===u))if(n.list.length>1)if(u===p){const r=n.list.findIndex(l=>l.tabId===u);r<n.list.length-1?h(n.list[r+1].fullPath):h(n.list[r-1].fullPath)}else n.remove(u);else Ae.error("当前只有一个标签页，已阻止关闭",{zIndex:2e3});else Ae.error("关闭的页面不存在",{zIndex:2e3})}function g(u=s()){const p=s();if(u!==p){const r=n.list.findIndex(l=>l.tabId===u);t.push(n.list[r].fullPath)}n.removeOtherSide(u)}function b(u=s()){const p=s();if(u!==p){const r=n.list.findIndex(x=>x.tabId===u);n.list.findIndex(x=>x.tabId===p)<r&&t.push(n.list[r].fullPath)}n.removeLeftSide(u)}function o(u=s()){const p=s();if(u!==p){const r=n.list.findIndex(x=>x.tabId===u);n.list.findIndex(x=>x.tabId===p)>r&&t.push(n.list[r].fullPath)}n.removeRightSide(u)}function d(u=s()){return n.list.some(p=>p.tabId!==u)}function k(u=s()){var r;let p=!0;if(u===((r=n.list[0])==null?void 0:r.tabId))p=!1;else{const l=n.list.findIndex(x=>x.tabId===u);p=n.list.some((x,y)=>y<l&&x.tabId!==u)}return p}function C(u=s()){var r;let p=!0;if(u===((r=n.list.at(-1))==null?void 0:r.tabId))p=!1;else{const l=n.list.findIndex(x=>x.tabId===u);p=n.list.some((x,y)=>y>=l&&x.tabId!==u)}return p}return{getId:s,open:c,go:f,close:h,closeById:i,closeOtherSide:g,closeLeftSide:b,closeRightSide:o,checkCloseOtherSide:d,checkCloseLeftSide:k,checkCloseRightSide:C}}const Kn={class:"tabbar-container"},Un=["data-index","title","onClick","onContextmenu"],Zn={class:"tab-content"},Xn=["onClick"],Yn=Y({name:"Tabbar",__name:"index",setup(e){const t=lt(),n=st(),s=wt(),c=ft(),f=Vn(),h=$t(),i=Ht({reactive:!0}),g=Pt(()=>f.getId()),b=W(),o=W(),d=Ot([]);Wt(()=>{d.value=[]}),nt(()=>t,r=>{s.settings.tabbar.enable&&c.add(r).then(()=>{const l=c.list.findIndex(x=>x.tabId===g.value);l!==-1&&(u(d.value[l].offsetLeft),k())})},{immediate:!0,deep:!0});function k(){o.value.$el.clientWidth>b.value.clientWidth&&localStorage.getItem("tabbarScrollTip")===void 0&&(localStorage.setItem("tabbarScrollTip",""),Ae.info("标签栏数量超过展示区域范围，可以将鼠标移到标签栏上，通过鼠标滚轮滑动浏览",{title:"温馨提示",duration:5e3,closable:!0,zIndex:2e3}))}function C(r){b.value.scrollBy({left:r.deltaY||r.detail})}function u(r){b.value.scrollTo({left:r-50,behavior:"smooth"})}function p(r,l){r.preventDefault(),gn.showContextMenu({x:r.x,y:r.y,zIndex:1050,iconFontClass:"",customClass:"tabbar-contextmenu",items:[{label:"重新加载",icon:"i-ri:refresh-line",disabled:l.tabId!==g.value,onClick:()=>h.reload()},{label:"关闭标签页",icon:"i-ri:close-line",disabled:c.list.length<=1,divided:!0,onClick:()=>{f.closeById(l.tabId)}},{label:"关闭其他标签页",disabled:!f.checkCloseOtherSide(l.tabId),onClick:()=>{f.closeOtherSide(l.tabId)}},{label:"关闭左侧标签页",disabled:!f.checkCloseLeftSide(l.tabId),onClick:()=>{f.closeLeftSide(l.tabId)}},{label:"关闭右侧标签页",disabled:!f.checkCloseRightSide(l.tabId),onClick:()=>{f.closeRightSide(l.tabId)}}]})}return Ce(()=>{Ke("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0",(r,l)=>{var x,y;if(s.settings.tabbar.enable&&s.settings.tabbar.enableHotkeys)switch(r.preventDefault(),l.key){case"alt+left":if(c.list[0].tabId!==g.value){const w=c.list.findIndex(L=>L.tabId===g.value);n.push(c.list[w-1].fullPath)}break;case"alt+right":if(((x=c.list.at(-1))==null?void 0:x.tabId)!==g.value){const w=c.list.findIndex(L=>L.tabId===g.value);n.push(c.list[w+1].fullPath)}break;case"alt+w":f.closeById(g.value);break;case"alt+1":case"alt+2":case"alt+3":case"alt+4":case"alt+5":case"alt+6":case"alt+7":case"alt+8":case"alt+9":{const w=Number(l.key.split("+")[1]);(y=c.list[w-1])!=null&&y.fullPath&&n.push(c.list[w-1].fullPath);break}case"alt+0":n.push(c.list[c.list.length-1].fullPath);break}})}),Rt(()=>{Ke.unbind("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0")}),(r,l)=>{const x=Lt;return v(),I("div",Kn,[R("div",{ref_key:"tabsRef",ref:b,class:"tabs",onWheel:Ue(C,["prevent"])},[F(Bt,{ref_key:"tabContainerRef",ref:o,name:"tabbar",tag:"div",class:"tab-container"},{default:se(()=>[(v(!0),I(be,null,ot(a(c).list,(y,w)=>(v(),I("div",{key:y.tabId,ref_for:!0,ref_key:"tabRef",ref:d,"data-index":w,class:Z(["tab",{actived:y.tabId===a(g)}]),title:typeof(y==null?void 0:y.title)=="function"?y.title():y.title,onClick:L=>a(n).push(y.fullPath),onContextmenu:L=>p(L,y)},[l[0]||(l[0]=R("div",{class:"tab-dividers"},null,-1)),l[1]||(l[1]=R("div",{class:"tab-background"},null,-1)),R("div",Zn,[(v(),I("div",{key:y.tabId,class:"title"},[a(s).settings.tabbar.enableIcon&&y.icon?(v(),H(x,{key:0,name:y.icon,class:"icon"},null,8,["name"])):O("",!0),_e(" "+re(typeof(y==null?void 0:y.title)=="function"?y.title():y.title),1)])),a(c).list.length>1?(v(),I("div",{key:0,class:"action-icon",onClick:Ue(L=>a(f).closeById(y.tabId),["stop"])},[F(x,{name:"i-ri:close-fill"})],8,Xn)):O("",!0),He(R("div",{class:"hotkey-number"},re(w+1),513),[[$e,a(i).alt&&w<9]])])],42,Un))),128))]),_:1},512)],544)])}}}),Qn=Tt(Yn,[["__scopeId","data-v-39d55a7e"]]);export{Qn as default};
