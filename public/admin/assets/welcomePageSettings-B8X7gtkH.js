
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as N}from"./index.vue_vue_type_script_setup_true_lang-FDL5yZdU.js";import{d as S,m as M,r as _,a as T,p as a,g as p,c as j,b as t,w as o,e as s,h as g,z as q,A as U,G as x,j as $,_ as A,k as h}from"./index-TOhlAu5k.js";import{a as v}from"./config-CFeX2CT3.js";const E=["srcdoc"],I=S({__name:"welcomePageSettings",setup(L){const l=M({clientHomePath:"",homeHtml:""}),y=_({siteName:[{required:!0,trigger:"blur",message:"请填写网站名称"}]}),c=_();async function d(){const n=await v.queryConfig({keys:["clientHomePath","homeHtml"]});Object.assign(l,n.data)}function H(){var n;(n=c.value)==null||n.validate(async e=>{if(e){try{await v.setConfig({settings:b(l)}),x.success("变更欢迎页设置成功")}catch{}d()}else x.error("请填写完整信息")})}function b(n){return Object.keys(n).map(e=>({configKey:e,configVal:n[e]}))}return T(()=>{d()}),(n,e)=>{const u=$,w=A,V=N,C=a("el-switch"),r=a("el-form-item"),m=a("el-col"),f=a("el-row"),k=a("el-input"),P=a("el-form"),B=a("el-card");return p(),j("div",null,[t(V,null,{title:o(()=>e[2]||(e[2]=[s("div",{class:"flex items-center gap-4"},"欢迎页设置",-1)])),content:o(()=>e[3]||(e[3]=[s("div",{class:"text-sm/6"},[s("div",null," 欢迎页设置支持配置访问首页时的默认显示内容。可以启用欢迎页，或直接跳转到聊天页面。 "),s("div",null,"若启用欢迎页，可以在此处自定义欢迎页面内容。"),s("div",{class:"mt-2 text-gray-500"},[s("strong",null,"推荐："),g(" 您可以在其他专业的 HTML 编辑器（如 VS Code、Sublime Text）中编辑欢迎页面内容并复制粘贴到此处，以获得更好的编辑体验。 ")])],-1)])),default:o(()=>[t(w,{outline:"",onClick:H},{default:o(()=>[t(u,{name:"i-ri:file-text-line"}),e[4]||(e[4]=g(" 保存设置 "))]),_:1})]),_:1}),t(B,{style:{margin:"20px"}},{default:o(()=>[t(P,{ref_key:"formRef",ref:c,rules:y.value,model:l,"label-width":"150px"},{default:o(()=>[t(f,null,{default:o(()=>[t(m,{xs:24,md:24,lg:24,xl:24},{default:o(()=>[t(r,{label:"开启欢迎页",prop:"clientHomePath"},{default:o(()=>[t(C,{modelValue:l.clientHomePath,"onUpdate:modelValue":e[0]||(e[0]=i=>l.clientHomePath=i),"active-value":"/home","inactive-value":"/chat"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l.clientHomePath==="/home"?(p(),q(f,{key:0},{default:o(()=>[t(m,{xs:24,md:20,lg:15,xl:12},{default:o(()=>[t(r,{label:"欢迎页（HTML）",prop:"homeHtml"},{default:o(()=>[t(k,{modelValue:l.homeHtml,"onUpdate:modelValue":e[1]||(e[1]=i=>l.homeHtml=i),placeholder:"请输入自定义欢迎页内容",type:"textarea",rows:10,clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):U("",!0),t(m,{xs:28,md:24,lg:20,xl:12,style:{"margin-top":"20px"}},{default:o(()=>[t(r,{label:"预览"},{default:o(()=>[s("iframe",{class:"w-full h-100 border border-gray-200 rounded-md bg-gray-100",srcdoc:l.homeHtml,sandbox:"allow-same-origin allow-scripts"},null,8,E)]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof h=="function"&&h(I);export{I as default};
