
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as M}from"./index.vue_vue_type_script_setup_true_lang-FDL5yZdU.js";import{d as k,m as C,r as _,a as N,p as r,g as h,c as q,b as e,w as l,e as p,h as y,G as g,j as R,_ as B,k as z}from"./index-TOhlAu5k.js";import{a as L}from"./config-CFeX2CT3.js";const j=k({__name:"ltzf",setup($){const a=C({payLtzfStatus:"",payLtzfMchId:"",payLtzfSecret:"",payLtzfNotifyUrl:"",payLtzfReturnUrl:""}),x=_({payLtzfStatus:[{required:!0,trigger:"change",message:"请选择当前支付开启状态"}],payLtzfSecret:[{required:!0,trigger:"blur",message:"请填写商户秘钥"}],payLtzfMchId:[{required:!0,trigger:"blur",message:"请填写商户号"}],payLtzfNotifyUrl:[{required:!0,trigger:"blur",message:"请填写支付通知地址"}]}),i=_();async function m(){const n=await L.queryConfig({keys:["payLtzfSecret","payLtzfNotifyUrl","payLtzfReturnUrl","payLtzfMchId","payLtzfStatus"]});Object.assign(a,n.data)}function V(){var n;(n=i.value)==null||n.validate(async t=>{if(t){try{await L.setConfig({settings:b(a)}),g.success("变更配置信息成功")}catch{}m()}else g.error("请填写完整信息")})}function b(n){return Object.keys(n).map(t=>({configKey:t,configVal:n[t]}))}return N(()=>{m()}),(n,t)=>{const c=R,v=B,S=M,U=r("el-switch"),f=r("el-form-item"),u=r("el-col"),s=r("el-row"),d=r("el-input"),w=r("el-form"),I=r("el-card");return h(),q("div",null,[e(S,null,{title:l(()=>t[5]||(t[5]=[p("div",{class:"flex items-center gap-4"},"蓝兔支付设置",-1)])),content:l(()=>t[6]||(t[6]=[p("div",{class:"text-sm/6"},[p("div",null,[p("a",{href:"https://www.ltzf.cn/",target:"_blank"},"蓝兔支付"),y(" 为第三方支付，接入请购买微信渠道。 ")]),p("div",null,"支付通知地址为： https://您的域名/api/pay/notify。")],-1)])),default:l(()=>[e(v,{outline:"",onClick:V},{default:l(()=>[e(c,{name:"i-ri:file-text-line"}),t[7]||(t[7]=y(" 保存设置 "))]),_:1})]),_:1}),e(I,{style:{margin:"20px"}},{default:l(()=>[e(w,{ref_key:"formRef",ref:i,rules:x.value,model:a,"label-width":"120px"},{default:l(()=>[e(s,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(f,{label:"启用当前支付",prop:"payLtzfMchId"},{default:l(()=>[e(U,{modelValue:a.payLtzfStatus,"onUpdate:modelValue":t[0]||(t[0]=o=>a.payLtzfStatus=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(f,{label:"商户号",prop:"payLtzfMchId"},{default:l(()=>[e(d,{modelValue:a.payLtzfMchId,"onUpdate:modelValue":t[1]||(t[1]=o=>a.payLtzfMchId=o),placeholder:"请填写商户号",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(f,{label:"商户密钥",prop:"payLtzfSecret"},{default:l(()=>[e(d,{modelValue:a.payLtzfSecret,"onUpdate:modelValue":t[2]||(t[2]=o=>a.payLtzfSecret=o),placeholder:"请填写商户秘钥",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(f,{label:"支付通知地址",prop:"payLtzfSecret"},{default:l(()=>[e(d,{modelValue:a.payLtzfNotifyUrl,"onUpdate:modelValue":t[3]||(t[3]=o=>a.payLtzfNotifyUrl=o),placeholder:"请填写支付通知地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(f,{label:"支付回调地址",prop:"payLtzfSecret"},{default:l(()=>[e(d,{modelValue:a.payLtzfReturnUrl,"onUpdate:modelValue":t[4]||(t[4]=o=>a.payLtzfReturnUrl=o),placeholder:"请填写支付成功后的回跳地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof z=="function"&&z(j);export{j as default};
