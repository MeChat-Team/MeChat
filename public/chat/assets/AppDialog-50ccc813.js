import{k as J,r as f,c as v,w as N,o as X,U as C,V as A,z as Y,a0 as Z,R as o,a2 as t,S as n,a3 as u,K as l,H as I,a6 as y,W as x,j as R,F as z,a7 as S,a4 as g,l as ee,a5 as te,a8 as se,A as ae}from"./vue-24971718.js";import{f as le,a as oe,_ as re,b as ne}from"./menu-c99e2e5c.js";import{u as ie,e as ce,t as j,r as de}from"./index-024c691e.js";import{u as fe,t as ue,S as pe}from"./main-3f933976.js";import{T as xe}from"./TopBar-b96c1700.js";import{u as ge}from"./useBasicLayout-259ce701.js";import{e as he}from"./naive-ui-95c9585a.js";import{L as ye,R as me}from"./Right-447bbcc1.js";import{S as ve}from"./Search-c4e5b1af.js";import{_ as _e}from"./_plugin-vue_export-helper-c27b6911.js";import"./vueuse-motion-ab500d09.js";import"./relative.vue_vue_type_script_setup_true_lang-6b4939d3.js";const be={class:"flex justify-center h-full flex-col items-center"},ke={key:0,class:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black bg-opacity-50 py-6"},we={class:"flex items-center flex-col items-center"},Ce={class:"flex mt-3 mb-4 justify-between font-bold"},Ae={class:""},Ie={class:"flex justify-between items-start h-9 mb-2"},ze={key:1,class:"relative",style:{"max-width":"60%",margin:"auto"}},Se=["onClick"],je={class:"relative flex flex-1 w-full"},Le={for:"search-field",class:"sr-only"},Be={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Me=["placeholder"],Ne={key:0,class:"flex justify-between items-start my-1 h-14",style:{"max-width":"100%"}},Re=["onClick"],$e={class:"flex-1 overflow-y-auto"},De={class:"w-full flex flex-1 flex-grow my-2 items-start"},Te=["onClick"],Ve={key:0,class:"flex-shrink-0 dark:ring-gray-400 rounded-full"},qe=["src"],Fe={class:"text-white text-sm"},Qe={class:"flex-grow flex flex-col"},Ge={class:"flex items-center font-medium text-base text-gray-600 dark:text-gray-400 my-1"},Pe={class:"line-clamp-1 overflow-hidden text-ellipsis block flex-grow whitespace-nowrap"},Ue={class:"text-xs line-clamp-2 text-gray-500 dark:text-gray-400 my-1"},We=J({__name:"AppDialog",props:{visible:{type:Boolean}},setup(Ee){const{isMobile:r}=ge(),$=ie();function D(){$.updateAppDialog(!1)}const T=he(),_=fe(),m=f(""),V=v(()=>_.catId),i=f([]),b=f([]),q=v(()=>_.mineApps),k=f([]),c=f(0);function L(e){return q.value.some(s=>s.appId===e.id)}async function F(){var s;const e=await le();i.value=(s=e==null?void 0:e.data)==null?void 0:s.rows.map(d=>(d.loading=!1,d)),b.value=i.value}const Q=v(()=>{if(m.value){const e=m.value.toLowerCase();return i.value.filter(s=>ue.match(s.name,e))}return c.value===0?i.value:i.value.filter(e=>e.catId===c.value)});async function G(e){e.loading=!0;try{const s=await ne({appId:e.id});T.success(s.data),await _.queryMineApps(),e.loading=!1}catch{e.loading=!1}}async function P(e){const s=Number(e.id);D(),de.replace({path:"/chat",query:{appId:s}})}async function U(){var d;const e=await oe(),s={id:0,name:j("app.allCategories")};k.value=[s,...(d=e==null?void 0:e.data)==null?void 0:d.rows]}function B(e){c.value=e}N(V,e=>{e?b.value=i.value.filter(s=>s.catId===e):b.value=i.value});function W(){const e=["bg-blue-300","bg-red-300","bg-green-300","bg-yellow-300","bg-purple-300","bg-pink-300"];return e[Math.floor(Math.random()*e.length)]}const p=f(null);function E(){p.value&&p.value.scrollBy({left:-100,behavior:"smooth"})}function H(){p.value&&p.value.scrollBy({left:100,behavior:"smooth"})}v(()=>M.siderCollapsed);const M=ce();N(r,e=>{M.setSiderCollapsed(e)},{immediate:!0,flush:"post"});const w=f(!1);function K(){w.value=!0}return X(()=>{U(),F()}),(e,s)=>{const d=Z("n-ellipsis");return o(),C(Y,{name:"modal-fade"},{default:A(()=>[t("div",be,[w.value?(o(),n("div",ke,[t("div",{class:u([[l(r)?" w-[300px]  h-[170px]":" w-[370px] h-[190px]"],"flex items-center flex-col bg-[#ffffff] h-[190px]"]),style:{background:"#ffffff","border-radius":"20px","justify-content":"space-around"}},[t("div",we,[t("div",{style:I([[l(r)?"font-size: 18px; ":" font-size: 20px;"],{color:"#333333"}])},"温馨提示",4),t("div",{style:I([[l(r)?"font-size: 14px; margin-top: 10px;":" font-size: 16px;margin-top: 19px;"],{color:"#8c8f9d"}])}," 智能体暂不支持用户自行添加，敬请期待 ",4)]),t("div",{style:I([[l(r)?"font-size: 14px; width: 120px;height: 42px;":" font-size: 16px;  width: 124px;height: 42px;"],{background:"#3742ea","border-radius":"10px","font-weight":"600","font-size":"14px",color:"#ffffff"}]),onClick:s[0]||(s[0]=a=>w.value=!1),class:"flex items-center justify-center"}," 我已知晓 ",4)],2)])):y("",!0),x(xe,{class:"px-4"}),t("div",{class:u(["bg-white max-w-[800px] dark:bg-gray-900 flex flex-col",[l(r)?"w-full h9full px-4 py-5 pt-0":" w-full h-full p-6 pt-0 rounded-lg"]])},[t("div",Ce,[s[3]||(s[3]=t("div",{class:"text-xl"},"发现 AI 智能体",-1)),t("div",{onClick:K,class:"h-9 px-3 rounded-full cursor-pointer py-1.5 text-[#ffffff] bg-[#0066ff] flex justify-center items-center"},[t("div",Ae,[x(l(re),{icon:"icon-park-outline:plus",class:"mr-2 text-xl"})]),s[2]||(s[2]=R(" 创建 AI 智能体 "))])]),t("div",Ie,[l(r)?y("",!0):(o(),C(l(ye),{key:0,size:"18",class:"text-gray-500 py-[9px] hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",onClick:E})),l(r)?y("",!0):(o(),n("div",ze,[t("div",{ref_key:"scrollContainer",ref:p,class:"flex justify-between items-center scrollbar-hide overflow-x-auto",style:{"max-width":"95%",margin:"auto"}},[(o(!0),n(z,null,S(k.value,(a,h)=>(o(),n("div",{key:h,onClick:O=>B(a.id),class:u([{"bg-[#232629]  ml-2  dark:bg-gray-700 text-[#ffffff] dark:text-gray-400":c.value===a.id,"text-gray-500  ml-2  hover:bg-[#f0f0f0]  ":c.value!==a.id},"border border-[rgba(0,0,0,.08)] rounded-[10px] flex-none px-4 py-1.5"])},g(a.name),11,Se))),128))],512)])),l(r)?y("",!0):(o(),C(l(me),{key:2,size:"18",class:"text-gray-500 py-[9px] mr-8 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",onClick:H})),t("div",{class:u(["hover:ring-1 hover:ring-primary-500 mx-1 flex rounded-full overflow-hidden shadow-sm ring-1 ring-gray-300 focus-within:ring-1 focus-within:ring-primary-500 text-gray-900 placeholder:text-gray-400 border-0 bg-transparent resize-none dark:focus:ring-gray-600 dark:ring-gray-600 dark:bg-gray-800",[l(r)?"w-full mr-8":"w-[40%]"]])},[t("div",je,[t("label",Le,g(l(j)("app.searchAppNameQuickFind")),1),t("div",Be,[x(l(ve),{theme:"outline",size:"24",class:"text-gray-400"})]),ee(t("input",{id:"search-field","onUpdate:modelValue":s[1]||(s[1]=a=>m.value=a),class:"z-1 w-full rounded-xl dark:bg-gray-800 pr-3 py-1.5 font-normal outline-0 delay-100 text-base pl-12 dark:text-gray-400",placeholder:l(j)("app.searchAppNameQuickFind"),type:"search",name:"search"},null,8,Me),[[te,m.value]])])],2)]),l(r)?(o(),n("div",Ne,[t("div",{ref_key:"scrollContainer",ref:p,class:"flex justify-between items-center overflow-x-auto scrollbar-hide"},[(o(!0),n(z,null,S(k.value,(a,h)=>(o(),n("div",{key:h,onClick:O=>B(a.id),class:u([{"bg-[#232629]   ml-2  dark:bg-gray-700 text-[#ffffff] dark:text-gray-400":c.value===a.id,"text-gray-500  ml-2  hover:bg-[#f0f0f0]  ":c.value!==a.id},"border border-[rgba(0,0,0,.08)] whitespace-nowrap rounded-full px-4 py-2 flex-none"])},g(a.name),11,Re))),128))],512)])):y("",!0),t("div",$e,[t("div",De,[x(ae,{name:"list",tag:"div",class:u(["w-full grid gap-2.5",[l(r)?"grid-cols-1  max-h-[85vh]":"h-[60vh] grid-cols-2   "]]),style:{"align-content":"start"}},{default:A(()=>[(o(!0),n(z,null,S(Q.value,a=>(o(),n("div",{key:a.id,onClick:h=>P(a),class:"h-24 flex items-center gap-5 rounded-xl bg-gray-50 px-3 py-3 hover:shadow-lg dark:bg-gray-800 dark:hover:bg-gray-700"},[a.coverImg?(o(),n("div",Ve,[t("img",{src:a.coverImg,class:"rounded-full w-16 h-16",alt:"app-image"},null,8,qe)])):(o(),n("div",{key:1,class:u([W(),"flex-shrink-0  dark:ring-gray-400 rounded-full w-16 h-16 flex items-center justify-center"])},[t("span",Fe,g(a.name.slice(0,3)),1)],2)),t("div",Qe,[t("div",Ge,[t("span",Pe,g(a.name),1),x(l(pe),{theme:L(a)?"filled":"outline",size:"20",fill:L(a)?"#fde68a":"#e5e7eb",class:"cursor-pointer",onClick:se(h=>G(a),["stop"])},null,8,["theme","fill","onClick"])]),t("span",Ue,[x(d,{"line-clamp":2},{default:A(()=>[R(g(a.des),1)]),_:2},1024)])])],8,Te))),128))]),_:1},8,["class"])])])],2)])]),_:1})}}});const ot=_e(We,[["__scopeId","data-v-3ebe33d3"]]);export{ot as default};
