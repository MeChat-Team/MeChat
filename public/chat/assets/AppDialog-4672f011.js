import{k as D,c as y,i as Y,R as o,S as n,a2 as t,W as c,V as b,K as l,a6 as x,r as h,w as V,o as Z,U as j,z as ee,a0 as te,a3 as v,j as T,F as z,a7 as S,a4 as g,l as se,a5 as ae,a8 as le,A as oe}from"./vue-24971718.js";import{_ as R,f as re,a as ne,L as ie,R as ce,b as de}from"./menu-afbb071f.js";import{e as G,u as fe,t as $,r as ue}from"./index-9ab30c86.js";import{u as pe,t as he,S as ve,a as ge}from"./main-af3565df.js";import{_ as xe}from"./relative.vue_vue_type_script_setup_true_lang-60ff25fb.js";import{n as me,e as ye}from"./naive-ui-0755ea39.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";import{u as _e}from"./useBasicLayout-259ce701.js";import"./vueuse-motion-ab500d09.js";const we={class:"flex h-14 pt-1 w-full items-center justify-between"},be={class:"h-11 px-1 flex justify-center items-center"},ke={key:0,class:"w-7 h-7 flex justify-center hover:bg-[#f4f5f5] rounded-[10px] items-center"},Ce={class:"flex items-center"},Ae=D({__name:"TopBar",setup(F){const i=G(),_=y(()=>i.siderCollapsed);function k(){i.setSiderCollapsed(!1)}const C=Y("createNewChatGroup",()=>Promise.resolve());return(w,r)=>(o(),n("div",we,[t("div",be,[_.value?(o(),n("div",ke,[c(l(me),{class:"",onClick:k,size:"23"},{default:b(()=>r[1]||(r[1]=[t("svg",{t:"1735279906826",class:"icon",viewBox:"0 0 1088 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1466",width:"200",height:"200"},[t("path",{d:"M854.592 160c58.24 0 105.408 47.168 105.408 105.408v493.184c0 58.24-47.168 105.408-105.408 105.408H233.408C175.168 864 128 816.832 128 758.592V265.408c0-58.24 47.168-105.408 105.408-105.408h621.184z m-378.368 64H271.04C227.392 224 192 259.392 192 303.04v417.92c0 43.648 35.392 79.04 79.04 79.04h205.184v-576z m340.736 0H535.68v576h281.216c43.648 0 79.04-35.392 79.04-79.04v-417.92c0-43.648-35.392-79.04-79.04-79.04zM423.552 443.456v54.848h-158.08v-54.848h158.08z m0-146.304V352h-158.08v-54.848h158.08z","p-id":"1467"})],-1)])),_:1})])):x("",!0),_.value?(o(),n("div",{key:1,onClick:r[0]||(r[0]=B=>l(C)()),class:"ml-3 h-8 border border-[#c2d6f8] hover:border-[#bad2f8] hover:text-[#ffffff] text-xs text-[#0057ff] py-1.5 pl-2 pr-2.5 hover:bg-[#5a91fc] flex justify-between rounded-2xl"},[t("div",Ce,[c(l(R),{icon:"icon-park-outline:plus",class:"w-4 h-4 mr-1"}),r[2]||(r[2]=t("span",{class:""}," 新对话 ",-1))]),r[3]||(r[3]=t("div",{class:"flex items-center"},null,-1))])):x("",!0)]),c(xe)]))}});const Ie=q(Ae,[["__scopeId","data-v-e1e9f788"]]),je={class:"flex justify-center h-full flex-col items-center"},ze={class:"flex mt-3 mb-4 justify-between font-bold"},Se={class:"h-9 px-3 rounded-full py-1.5 text-[#ffffff] bg-[#0066ff] flex justify-center items-center"},$e={class:""},Be={class:"flex justify-between items-start h-9 mb-2"},Me={key:1,class:"relative",style:{"max-width":"60%",margin:"auto"}},Ne=["onClick"],Le={class:"relative flex flex-1 w-full"},Ve={for:"search-field",class:"sr-only"},Te={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},De=["placeholder"],Re={key:0,class:"flex justify-between items-start my-1 h-14",style:{"max-width":"100%"}},Ge=["onClick"],qe={class:"flex-1 overflow-y-auto"},Fe={class:"w-full flex flex-1 flex-grow my-2 items-start"},Pe=["onClick"],Qe={key:0,class:"flex-shrink-0 dark:ring-gray-400 rounded-full"},He=["src"],Ue={class:"text-white text-sm"},We={class:"flex-grow flex flex-col"},Ee={class:"flex items-center font-medium text-base text-gray-600 dark:text-gray-400 my-1"},Ke={class:"line-clamp-1 overflow-hidden text-ellipsis block flex-grow whitespace-nowrap"},Oe={class:"text-xs line-clamp-2 text-gray-500 dark:text-gray-400 my-1"},Je=D({__name:"AppDialog",props:{visible:{type:Boolean}},setup(F){const{isMobile:i}=_e(),_=fe();function k(){_.updateAppDialog(!1)}const C=ye(),w=pe(),r=h(""),B=y(()=>w.catId),d=h([]),A=h([]),P=y(()=>w.mineApps),I=h([]),f=h(0);function M(e){return P.value.some(s=>s.appId===e.id)}async function Q(){var s;const e=await re();d.value=(s=e==null?void 0:e.data)==null?void 0:s.rows.map(u=>(u.loading=!1,u)),A.value=d.value}const H=y(()=>{if(r.value){const e=r.value.toLowerCase();return d.value.filter(s=>he.match(s.name,e))}return f.value===0?d.value:d.value.filter(e=>e.catId===f.value)});async function U(e){e.loading=!0;try{const s=await de({appId:e.id});C.success(s.data),await w.queryMineApps(),e.loading=!1}catch{e.loading=!1}}async function W(e){const s=Number(e.id);k(),ue.replace({path:"/chat",query:{appId:s}})}async function E(){var u;const e=await ne(),s={id:0,name:$("app.allCategories")};I.value=[s,...(u=e==null?void 0:e.data)==null?void 0:u.rows]}function N(e){f.value=e}V(B,e=>{e?A.value=d.value.filter(s=>s.catId===e):A.value=d.value});function K(){const e=["bg-blue-300","bg-red-300","bg-green-300","bg-yellow-300","bg-purple-300","bg-pink-300"];return e[Math.floor(Math.random()*e.length)]}const p=h(null);function O(){p.value&&p.value.scrollBy({left:-100,behavior:"smooth"})}function J(){p.value&&p.value.scrollBy({left:100,behavior:"smooth"})}y(()=>L.siderCollapsed);const L=G();return V(i,e=>{L.setSiderCollapsed(e)},{immediate:!0,flush:"post"}),Z(()=>{E(),Q()}),(e,s)=>{const u=te("n-ellipsis");return o(),j(ee,{name:"modal-fade"},{default:b(()=>[t("div",je,[c(Ie,{class:"px-4"}),t("div",{class:v(["bg-white max-w-[800px] dark:bg-gray-900 flex flex-col",[l(i)?"w-full h9full px-4 py-5 pt-0":" w-full h-full p-6 pt-0 rounded-lg"]])},[t("div",ze,[s[2]||(s[2]=t("div",{class:"text-xl"},"发现 AI 智能体",-1)),t("div",Se,[t("div",$e,[c(l(R),{icon:"icon-park-outline:plus",class:"mr-2 text-xl"})]),s[1]||(s[1]=T(" 创建 AI 智能体 "))])]),t("div",Be,[l(i)?x("",!0):(o(),j(l(ie),{key:0,size:"18",class:"text-gray-500 py-[9px] hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",onClick:O})),l(i)?x("",!0):(o(),n("div",Me,[t("div",{ref_key:"scrollContainer",ref:p,class:"flex justify-between items-center scrollbar-hide overflow-x-auto",style:{"max-width":"95%",margin:"auto"}},[(o(!0),n(z,null,S(I.value,(a,m)=>(o(),n("div",{key:m,onClick:X=>N(a.id),class:v([{"bg-[#232629]  ml-2  dark:bg-gray-700 text-[#ffffff] dark:text-gray-400":f.value===a.id,"text-gray-500  ml-2  hover:bg-[#f0f0f0]  ":f.value!==a.id},"border border-[rgba(0,0,0,.08)] rounded-[10px] flex-none px-4 py-1.5"])},g(a.name),11,Ne))),128))],512)])),l(i)?x("",!0):(o(),j(l(ce),{key:2,size:"18",class:"text-gray-500 py-[9px] mr-8 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",onClick:J})),t("div",{class:v(["hover:ring-1 hover:ring-primary-500 mx-1 flex rounded-full overflow-hidden shadow-sm ring-1 ring-gray-300 focus-within:ring-1 focus-within:ring-primary-500 text-gray-900 placeholder:text-gray-400 border-0 bg-transparent resize-none dark:focus:ring-gray-600 dark:ring-gray-600 dark:bg-gray-800",[l(i)?"w-full mr-8":"w-[40%]"]])},[t("div",Le,[t("label",Ve,g(l($)("app.searchAppNameQuickFind")),1),t("div",Te,[c(l(ve),{theme:"outline",size:"24",class:"text-gray-400"})]),se(t("input",{id:"search-field","onUpdate:modelValue":s[0]||(s[0]=a=>r.value=a),class:"z-1 w-full rounded-xl dark:bg-gray-800 pr-3 py-1.5 font-normal outline-0 delay-100 text-base pl-12 dark:text-gray-400",placeholder:l($)("app.searchAppNameQuickFind"),type:"search",name:"search"},null,8,De),[[ae,r.value]])])],2)]),l(i)?(o(),n("div",Re,[t("div",{ref_key:"scrollContainer",ref:p,class:"flex justify-between items-center overflow-x-auto scrollbar-hide"},[(o(!0),n(z,null,S(I.value,(a,m)=>(o(),n("div",{key:m,onClick:X=>N(a.id),class:v([{"bg-[#232629]   ml-2  dark:bg-gray-700 text-[#ffffff] dark:text-gray-400":f.value===a.id,"text-gray-500  ml-2  hover:bg-[#f0f0f0]  ":f.value!==a.id},"border border-[rgba(0,0,0,.08)] whitespace-nowrap rounded-full px-4 py-2 flex-none"])},g(a.name),11,Ge))),128))],512)])):x("",!0),t("div",qe,[t("div",Fe,[c(oe,{name:"list",tag:"div",class:v(["w-full grid gap-2.5",[l(i)?"grid-cols-1  max-h-[85vh]":"h-[60vh] grid-cols-2   "]]),style:{"align-content":"start"}},{default:b(()=>[(o(!0),n(z,null,S(H.value,a=>(o(),n("div",{key:a.id,onClick:m=>W(a),class:"h-24 flex items-center gap-5 rounded-xl bg-gray-50 px-3 py-3 hover:shadow-lg dark:bg-gray-800 dark:hover:bg-gray-700"},[a.coverImg?(o(),n("div",Qe,[t("img",{src:a.coverImg,class:"rounded-full w-16 h-16",alt:"app-image"},null,8,He)])):(o(),n("div",{key:1,class:v([K(),"flex-shrink-0  dark:ring-gray-400 rounded-full w-16 h-16 flex items-center justify-center"])},[t("span",Ue,g(a.name.slice(0,3)),1)],2)),t("div",We,[t("div",Ee,[t("span",Ke,g(a.name),1),c(l(ge),{theme:M(a)?"filled":"outline",size:"20",fill:M(a)?"#fde68a":"#e5e7eb",class:"cursor-pointer",onClick:le(m=>U(a),["stop"])},null,8,["theme","fill","onClick"])]),t("span",Oe,[c(u,{"line-clamp":2},{default:b(()=>[T(g(a.des),1)]),_:2},1024)])])],8,Pe))),128))]),_:1},8,["class"])])])],2)])]),_:1})}}});const rt=q(Je,[["__scopeId","data-v-ef28aae2"]]);export{rt as default};
