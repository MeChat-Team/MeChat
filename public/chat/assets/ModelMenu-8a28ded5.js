import{k as V,r,c as i,w as b,o as z,U as D,V as h,z as G,R as n,a2 as t,W as c,a3 as _,K as d,S as u,a7 as P,a4 as g,j as R,a8 as $,F as E,A as F}from"./vue-24971718.js";import{j as W,a as K,b as O}from"./menu-5519de68.js";import{u as Q,e as U,t as H,r as J}from"./index-3cc0a12a.js";import{u as X,t as Y,S as Z}from"./main-efa8b2b7.js";import{T as ee}from"./TopBar-90ee14d1.js";import{u as se}from"./useBasicLayout-259ce701.js";import{e as ae,C as te}from"./naive-ui-95c9585a.js";import{_ as oe}from"./_plugin-vue_export-helper-c27b6911.js";import"./vueuse-motion-ab500d09.js";import"./relative.vue_vue_type_script_setup_true_lang-d551edc1.js";const le={class:"flex justify-center h-full flex-col items-center"},re={class:"flex-1 px-6 overflow-y-auto"},ne={class:"w-full flex h-full flex-1 flex-grow my-2 items-start"},ie=["onClick"],ce={class:"flex items-center"},de={key:0,class:"flex-shrink-0 mr-1.5 dark:ring-gray-400 rounded-full"},ue=["src"],pe={class:"text-white text-sm"},fe={class:"flex-grow flex flex-col"},me={class:"flex items-center font-medium text-base text-gray-600 dark:text-gray-400 my-1"},he={class:"line-clamp-1 text-[#000000] pr-2 overflow-hidden text-ellipsis block flex-grow whitespace-nowrap"},_e={class:""},ge={class:"text-sm text-[#595959] py-1 pl-1.5"},ve={class:"flex justify-end"},xe={class:"w-fit h-fit p-1 border border-[#e4e4e7] hover:border-hover transition-all rounded-md"},ye=V({__name:"ModelMenu",props:{visible:{type:Boolean}},setup(we){const{isMobile:p}=se(),k=Q();function C(){k.updateAppDialog(!1)}const A=ae(),f=X(),v=r(""),M=i(()=>f.catId),o=r([]),m=r([]),I=i(()=>f.mineApps),S=r([]),x=r(0);function y(e){return I.value.some(s=>s.appId===e.id)}async function L(){const s=(await W()).data.modelMaps;let a=[];for(let l in s)Array.isArray(s[l])&&(a=a.concat(s[l]));o.value=a.map(l=>(l.loading=!1,l)),m.value=o.value}const N=i(()=>{if(v.value){const e=v.value.toLowerCase();return o.value.filter(s=>Y.match(s.name,e))}return x.value===0?o.value:o.value.filter(e=>e.catId===x.value)});async function B(e){e.loading=!0;try{const s=await O({appId:e.id});A.success(s.data),await f.queryMineApps(),e.loading=!1}catch{e.loading=!1}}async function j(e){const s=Number(e.id);C(),J.replace({path:"/chat",query:{appId:s}})}async function T(){var a;const e=await K(),s={id:0,name:H("app.allCategories")};S.value=[s,...(a=e==null?void 0:e.data)==null?void 0:a.rows]}b(M,e=>{e?m.value=o.value.filter(s=>s.catId===e):m.value=o.value});function q(){const e=["bg-blue-300","bg-red-300","bg-green-300","bg-yellow-300","bg-purple-300","bg-pink-300"];return e[Math.floor(Math.random()*e.length)]}r(null),i(()=>w.siderCollapsed);const w=U();return b(p,e=>{w.setSiderCollapsed(e)},{immediate:!0,flush:"post"}),z(()=>{T(),L()}),(e,s)=>(n(),D(G,{name:"modal-fade"},{default:h(()=>[t("div",le,[c(ee,{class:"px-4"}),t("div",{class:_(["bg-white dark:bg-gray-900 flex flex-col",[d(p)?"w-full h9full   ":" w-full h-full  rounded-lg"]])},[t("div",re,[t("div",ne,[c(F,{name:"list",tag:"div",class:_(["w-full grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-3 grid gap-2.5",[d(p)?"  max-h-[85vh]":"h-[60vh] grid-cols-2   "]]),style:{"align-content":"start"}},{default:h(()=>[(n(!0),u(E,null,P(N.value,a=>(n(),u("div",{key:a.id,onClick:l=>j(a),class:"gap-5 rounded-xl border border-[#d6d6db] px-3 py-3 hover:border-[#c9c9cf] dark:bg-[gray-800] hover:bg-[#fafafa] dark:hover:bg-gray-700"},[t("div",ce,[a.modelAvatar?(n(),u("div",de,[t("img",{src:a.modelAvatar,class:"rounded-full w-6 h-6",alt:"app-image"},null,8,ue)])):(n(),u("div",{key:1,class:_(["mr-1.5",[q(),"flex-shrink-0  dark:ring-gray-400 rounded-full w-6 h-6 flex items-center justify-center"]])},[t("span",pe,g(a.modelName.slice(0,2)),1)],2)),t("div",fe,[t("div",me,[t("span",he,g(a.modelName),1)])])]),t("div",_e,[t("div",ge,[c(d(te),{"line-clamp":8},{default:h(()=>[R(g(a.modelDescription),1)]),_:2},1024)])]),t("div",ve,[t("div",xe,[c(d(Z),{theme:y(a)?"filled":"outline",size:"16",fill:y(a)?"#fde68a":"#71717a",class:"cursor-pointer",onClick:$(l=>B(a),["stop"])},null,8,["theme","fill","onClick"])])])],8,ie))),128)),s[0]||(s[0]=t("div",{class:"h-6"},null,-1))]),_:1},8,["class"])])])],2)])]),_:1}))}});const je=oe(ye,[["__scopeId","data-v-1caf6e38"]]);export{je as default};
