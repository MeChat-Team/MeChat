import{u as $,a as ee,b as oe,c as te,d as ie,e as ae,_ as s}from"./index-8a5a92e3.js";import{f as se,a as ne}from"./user-df519bb5.js";import{u as le}from"./useBasicLayout-324e7195.js";import{e as re,m as ue,n as ce}from"./naive-ui-4d2b97e1.js";import{k as de,c as o,o as me,w as _e,U as pe,a3 as ge,X as t,W as f,L as i,a4 as n,p as ve,a1 as fe,S as D,H as he,V as De,a5 as be}from"./vue-edf88119.js";import"./vueuse-motion-5f535188.js";const Ie={class:"dark:bg-gray-900 transition-all h-full p-0"},we={class:"h-full overflow-hidden"},Re=de({__name:"index",setup(Le){const b=n(()=>s(()=>import("./AppDialog-ea802ec0.js"),["./AppDialog-ea802ec0.js","./vue-edf88119.js","./appStore-d09c4d9c.js","./index-8a5a92e3.js","./naive-ui-4d2b97e1.js","./vueuse-motion-5f535188.js","./index-c0557723.css","./main-e5c49f92.js","./index-302fa4d9.js","./useBasicLayout-324e7195.js","./index-ae6891e9.js","./Left-e348ac5b.js","./Right-f3d631f7.js","./Close-6f37fbd4.js","./Star-51db2100.js","./_plugin-vue_export-helper-c27b6911.js","./AppDialog-5447bdb3.css"],import.meta.url)),I=n(()=>s(()=>import("./BadWordsDialog-a4ee5c94.js"),["./BadWordsDialog-a4ee5c94.js","./index-8a5a92e3.js","./vue-edf88119.js","./naive-ui-4d2b97e1.js","./vueuse-motion-5f535188.js","./index-c0557723.css","./preview-ff828f3e.css"],import.meta.url)),w=n(()=>s(()=>import("./BindWx-b6c6194b.js"),["./BindWx-b6c6194b.js","./user-df519bb5.js","./index-8a5a92e3.js","./vue-edf88119.js","./naive-ui-4d2b97e1.js","./vueuse-motion-5f535188.js","./index-c0557723.css"],import.meta.url)),L=n(()=>s(()=>import("./GoodsDialog-dc696b6e.js"),["./GoodsDialog-dc696b6e.js","./vue-edf88119.js","./crami-2dbd875a.js","./index-8a5a92e3.js","./naive-ui-4d2b97e1.js","./vueuse-motion-5f535188.js","./index-c0557723.css","./order-cbdc13ce.js","./user-df519bb5.js","./useBasicLayout-324e7195.js","./CheckOne-67f1e6fa.js","./index-302fa4d9.js","./Close-6f37fbd4.js","./_plugin-vue_export-helper-c27b6911.js","./GoodsDialog-243ecf21.css"],import.meta.url)),y=n(()=>s(()=>import("./Identity-3cfe9cb1.js"),["./Identity-3cfe9cb1.js","./vue-edf88119.js","./useBasicLayout-324e7195.js","./user-df519bb5.js","./index-8a5a92e3.js","./naive-ui-4d2b97e1.js","./vueuse-motion-5f535188.js","./index-c0557723.css","./SliderCaptcha-41527a86.js","./_plugin-vue_export-helper-c27b6911.js","./SliderCaptcha-fc473f83.css","./Close-6f37fbd4.js","./index-302fa4d9.js"],import.meta.url)),A=n(()=>s(()=>import("./Login-bffddbee.js"),["./Login-bffddbee.js","./useBasicLayout-324e7195.js","./vue-edf88119.js","./index-8a5a92e3.js","./naive-ui-4d2b97e1.js","./vueuse-motion-5f535188.js","./index-c0557723.css","./SliderCaptcha-41527a86.js","./_plugin-vue_export-helper-c27b6911.js","./SliderCaptcha-fc473f83.css","./user-df519bb5.js","./Close-6f37fbd4.js","./index-302fa4d9.js","./Login-fe38ec7c.css"],import.meta.url)),E=n(()=>s(()=>import("./NoticeDialog-cf487869.js"),["./NoticeDialog-cf487869.js","./index-8a5a92e3.js","./vue-edf88119.js","./naive-ui-4d2b97e1.js","./vueuse-motion-5f535188.js","./index-c0557723.css","./Close-6f37fbd4.js","./index-302fa4d9.js","./preview-ff828f3e.css"],import.meta.url)),C=n(()=>s(()=>import("./PayDialog-9923e36d.js"),["./PayDialog-9923e36d.js","./vue-edf88119.js","./order-cbdc13ce.js","./index-8a5a92e3.js","./naive-ui-4d2b97e1.js","./vueuse-motion-5f535188.js","./index-c0557723.css","./useBasicLayout-324e7195.js","./_plugin-vue_export-helper-c27b6911.js","./Close-6f37fbd4.js","./index-302fa4d9.js","./PayDialog-e540214b.css"],import.meta.url)),P=n(()=>s(()=>import("./PhoneIdentity-1c2801dd.js"),["./PhoneIdentity-1c2801dd.js","./vue-edf88119.js","./index-8a5a92e3.js","./naive-ui-4d2b97e1.js","./vueuse-motion-5f535188.js","./index-c0557723.css","./user-df519bb5.js","./useBasicLayout-324e7195.js","./SliderCaptcha-41527a86.js","./_plugin-vue_export-helper-c27b6911.js","./SliderCaptcha-fc473f83.css","./Close-6f37fbd4.js","./index-302fa4d9.js"],import.meta.url)),S=n(()=>s(()=>import("./SignInDialog-66cea8ae.js"),["./SignInDialog-66cea8ae.js","./vue-edf88119.js","./index-8a5a92e3.js","./naive-ui-4d2b97e1.js","./vueuse-motion-5f535188.js","./index-c0557723.css","./useBasicLayout-324e7195.js","./_plugin-vue_export-helper-c27b6911.js","./SignInDialog-e667b267.css"],import.meta.url)),R=n(()=>s(()=>import("./UserAgreementDialog-7fc51c20.js"),["./UserAgreementDialog-7fc51c20.js","./index-8a5a92e3.js","./vue-edf88119.js","./naive-ui-4d2b97e1.js","./vueuse-motion-5f535188.js","./index-c0557723.css","./Close-6f37fbd4.js","./index-302fa4d9.js","./preview-ff828f3e.css"],import.meta.url)),V=n(()=>s(()=>import("./index-15f15033.js"),["./index-15f15033.js","./vue-edf88119.js","./logo-63e5ee5a.js","./index-8a5a92e3.js","./naive-ui-4d2b97e1.js","./vueuse-motion-5f535188.js","./index-c0557723.css","./index.vue_vue_type_script_setup_true_lang-44eb054b.js","./useBasicLayout-324e7195.js","./menu-6e9822d2.js","./index-302fa4d9.js","./index-ae6891e9.js","./appStore-d09c4d9c.js"],import.meta.url)),r=$(),m=ee(),v=oe(),l=te(),_=ie(),h=re(),T=o(()=>l.payDialog),O=o(()=>l.goodsDialog),k=o(()=>l.noticeDialog),N=o(()=>l.bindWxDialog),x=o(()=>l.signInDialog),B=o(()=>l.appDialog),W=o(()=>l.identityDialog),G=o(()=>l.phoneIdentityDialog),M=o(()=>l.userAgreementDialog),U=o(()=>l.BadWordsDialog),{isMobile:p}=le(),q=o(()=>r.loginDialog);o(()=>_.theme);const z=o(()=>r.isLogin),H=o(()=>{var e;return Number((e=r.globalConfig)==null?void 0:e.wechatSilentLoginStatus)===1});function X(){const{token:e}=m.query;if(e){r.setToken(e);const a=m.name;v.replace({name:a,query:{}}),h.success("账户登录成功、开始体验吧！"),r.getUserInfo()}}async function j(){if(m.path==="/home"||!H.value||z.value)return;const a=new URLSearchParams(window.location.search).getAll("code"),c=a.length>0?a[a.length-1]:null;if(c){const d=await se({code:c});d.success&&(r.setToken(d.data),r.getUserInfo(),r.setLoginDialog(!1),v.replace("/chat"))}else{const d=window.location.href.split("#")[0],g=await ne({url:d});g.success&&(window.location.href=g.data)}}function F(){var a;const e=window.navigator.userAgent.toLowerCase();e.match(/MicroMessenger/i)&&((a=e==null?void 0:e.match(/MicroMessenger/i))==null?void 0:a[0])==="micromessenger"&&j()}me(()=>{F(),X()});const u=ae(),J=o(()=>u.isStreamIn!==void 0?u.isStreamIn:!1),K=o(()=>{var e;return Number((e=r.globalConfig)==null?void 0:e.isModelInherited)===1});async function Q(e){if(J.value){h.info("AI回复中，请稍后再试");return}u.setStreamIn(!1);try{if(e&&e>0)await u.addNewChatGroup(e);else{const{modelInfo:a}=u.activeConfig;if(a&&K.value&&u.activeGroupAppId===0){const c={modelInfo:a};await u.addNewChatGroup(0,c)}else await u.addNewChatGroup()}u.setUsingPlugin(null),p.value&&_.setSiderCollapsed(!0),m.path!=="/chat"&&v.push("/chat")}catch{}}ve("createNewChatGroup",Q),o(()=>p.value?["rounded-none","shadow-none"]:["dark:border-neutral-800"]),o(()=>p.value?["flex-col"]:["dark:border-neutral-800"]);const Y=o(()=>_.siderCollapsed),Z=o(()=>["h-full",{"pl-[260px]":!p.value&&!Y.value}]);return _e(()=>m.path,e=>{e==="/user-center"&&setTimeout(function(){_.setSiderCollapsed(!0)},600)},{immediate:!0}),(e,a)=>{const c=fe("RouterView");return D(),pe("div",Ie,[ge("div",we,[t(i(ue),{class:"h-full","has-sider":""},{default:f(()=>[t(i(V),{class:""}),t(i(ce),{class:he(["h-full",Z.value]),style:{flex:"1"}},{default:f(()=>[t(c,null,{default:f(({Component:d,route:g})=>[(D(),De(be(d),{key:g.fullPath}))]),_:1})]),_:1},8,["class"])]),_:1}),t(i(A),{visible:q.value},null,8,["visible"]),t(i(C),{visible:T.value},null,8,["visible"]),t(i(L),{visible:O.value},null,8,["visible"]),t(i(E),{visible:k.value},null,8,["visible"]),t(i(w),{visible:N.value},null,8,["visible"]),t(i(S),{visible:x.value},null,8,["visible"]),t(i(b),{visible:B.value},null,8,["visible"]),t(i(y),{visible:W.value},null,8,["visible"]),t(i(P),{visible:G.value},null,8,["visible"]),t(i(R),{visible:M.value},null,8,["visible"]),t(i(I),{visible:U.value},null,8,["visible"])])])}}});export{Re as default};
