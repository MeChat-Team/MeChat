import{k as D,c as h,R as o,S as i,a2 as t,W as f,V as S,K as l,a6 as _,r as m,w as R,o as ee,U as j,z as te,a0 as se,a3 as x,j as T,F as $,a7 as B,a4 as y,l as ae,a5 as le,a8 as oe,A as re}from"./vue-24971718.js";import{_ as q,f as ne,a as ie,L as ce,R as de,b as ue}from"./menu-fad55c2a.js";import{e as F,a as fe,k as pe,l as he,u as ve,t as L,r as ge}from"./index-4f77b0de.js";import{u as me,t as xe,S as ye,a as _e}from"./main-20fd4073.js";import{_ as we}from"./relative.vue_vue_type_script_setup_true_lang-0a5d6adc.js";import{u as P}from"./useBasicLayout-259ce701.js";import{e as Q,n as be}from"./naive-ui-0755ea39.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import"./vueuse-motion-ab500d09.js";const ke={class:"flex h-14 pt-1 w-full items-center justify-between"},Ce={class:"h-11 px-1 flex justify-center items-center"},Ae={key:0,class:"w-7 h-7 flex justify-center hover:bg-[#f4f5f5] rounded-[10px] items-center"},Ie={class:"flex items-center"},Se=D({__name:"TopBar",setup(H){const c=F(),A=h(()=>c.siderCollapsed);function z(){c.setSiderCollapsed(!1)}const{isMobile:M}=P(),w=fe(),v=Q(),d=pe(),u=h(()=>d.isStreamIn!==void 0?d.isStreamIn:!1),b=h(()=>{var r;return Number((r=w.globalConfig)==null?void 0:r.isModelInherited)===1}),N=he();async function k(r){if(u.value){v.info("AI回复中，请稍后再试");return}d.setStreamIn(!1);try{if(r&&r>0)await d.addNewChatGroup(r);else{const{modelInfo:n}=d.activeConfig;if(n&&b.value&&d.activeGroupAppId===0){const I={modelInfo:n};await d.addNewChatGroup(0,I)}else await d.addNewChatGroup()}d.setUsingPlugin(null),M.value&&c.setSiderCollapsed(!0),N.push("/chat")}catch{}}return(r,n)=>(o(),i("div",ke,[t("div",Ce,[A.value?(o(),i("div",Ae,[f(l(be),{class:"",onClick:z,size:"23"},{default:S(()=>n[1]||(n[1]=[t("svg",{t:"1735279906826",class:"icon",viewBox:"0 0 1088 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1466",width:"200",height:"200"},[t("path",{d:"M854.592 160c58.24 0 105.408 47.168 105.408 105.408v493.184c0 58.24-47.168 105.408-105.408 105.408H233.408C175.168 864 128 816.832 128 758.592V265.408c0-58.24 47.168-105.408 105.408-105.408h621.184z m-378.368 64H271.04C227.392 224 192 259.392 192 303.04v417.92c0 43.648 35.392 79.04 79.04 79.04h205.184v-576z m340.736 0H535.68v576h281.216c43.648 0 79.04-35.392 79.04-79.04v-417.92c0-43.648-35.392-79.04-79.04-79.04zM423.552 443.456v54.848h-158.08v-54.848h158.08z m0-146.304V352h-158.08v-54.848h158.08z","p-id":"1467"})],-1)])),_:1})])):_("",!0),A.value?(o(),i("div",{key:1,onClick:n[0]||(n[0]=I=>k()),class:"ml-3 cursor-pointer h-8 border border-[#c2d6f8] hover:border-[#bad2f8] hover:text-[#ffffff] text-xs text-[#0057ff] py-1.5 pl-2 pr-2.5 hover:bg-[#5a91fc] flex justify-between rounded-2xl"},[t("div",Ie,[f(l(q),{icon:"icon-park-outline:plus",class:"w-4 h-4 mr-1"}),n[2]||(n[2]=t("span",{class:""}," 新对话 ",-1))]),n[3]||(n[3]=t("div",{class:"flex items-center"},null,-1))])):_("",!0)]),f(we)]))}});const ze=U(Se,[["__scopeId","data-v-7376ab21"]]),Me={class:"flex justify-center h-full flex-col items-center"},Ne={class:"flex mt-3 mb-4 justify-between font-bold"},je={class:"h-9 px-3 rounded-full cursor-pointer py-1.5 text-[#ffffff] bg-[#0066ff] flex justify-center items-center"},$e={class:""},Be={class:"flex justify-between items-start h-9 mb-2"},Le={key:1,class:"relative",style:{"max-width":"60%",margin:"auto"}},Ge=["onClick"],Ve={class:"relative flex flex-1 w-full"},Re={for:"search-field",class:"sr-only"},Te={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},De=["placeholder"],qe={key:0,class:"flex justify-between items-start my-1 h-14",style:{"max-width":"100%"}},Fe=["onClick"],Pe={class:"flex-1 overflow-y-auto"},Qe={class:"w-full flex flex-1 flex-grow my-2 items-start"},Ue=["onClick"],He={key:0,class:"flex-shrink-0 dark:ring-gray-400 rounded-full"},We=["src"],Ee={class:"text-white text-sm"},Ke={class:"flex-grow flex flex-col"},Oe={class:"flex items-center font-medium text-base text-gray-600 dark:text-gray-400 my-1"},Je={class:"line-clamp-1 overflow-hidden text-ellipsis block flex-grow whitespace-nowrap"},Xe={class:"text-xs line-clamp-2 text-gray-500 dark:text-gray-400 my-1"},Ye=D({__name:"AppDialog",props:{visible:{type:Boolean}},setup(H){const{isMobile:c}=P(),A=ve();function z(){A.updateAppDialog(!1)}const M=Q(),w=me(),v=m(""),d=h(()=>w.catId),u=m([]),b=m([]),N=h(()=>w.mineApps),k=m([]),r=m(0);function n(e){return N.value.some(s=>s.appId===e.id)}async function I(){var s;const e=await ne();u.value=(s=e==null?void 0:e.data)==null?void 0:s.rows.map(p=>(p.loading=!1,p)),b.value=u.value}const W=h(()=>{if(v.value){const e=v.value.toLowerCase();return u.value.filter(s=>xe.match(s.name,e))}return r.value===0?u.value:u.value.filter(e=>e.catId===r.value)});async function E(e){e.loading=!0;try{const s=await ue({appId:e.id});M.success(s.data),await w.queryMineApps(),e.loading=!1}catch{e.loading=!1}}async function K(e){const s=Number(e.id);z(),ge.replace({path:"/chat",query:{appId:s}})}async function O(){var p;const e=await ie(),s={id:0,name:L("app.allCategories")};k.value=[s,...(p=e==null?void 0:e.data)==null?void 0:p.rows]}function G(e){r.value=e}R(d,e=>{e?b.value=u.value.filter(s=>s.catId===e):b.value=u.value});function J(){const e=["bg-blue-300","bg-red-300","bg-green-300","bg-yellow-300","bg-purple-300","bg-pink-300"];return e[Math.floor(Math.random()*e.length)]}const g=m(null);function X(){g.value&&g.value.scrollBy({left:-100,behavior:"smooth"})}function Y(){g.value&&g.value.scrollBy({left:100,behavior:"smooth"})}h(()=>V.siderCollapsed);const V=F();return R(c,e=>{V.setSiderCollapsed(e)},{immediate:!0,flush:"post"}),ee(()=>{O(),I()}),(e,s)=>{const p=se("n-ellipsis");return o(),j(te,{name:"modal-fade"},{default:S(()=>[t("div",Me,[f(ze,{class:"px-4"}),t("div",{class:x(["bg-white max-w-[800px] dark:bg-gray-900 flex flex-col",[l(c)?"w-full h9full px-4 py-5 pt-0":" w-full h-full p-6 pt-0 rounded-lg"]])},[t("div",Ne,[s[2]||(s[2]=t("div",{class:"text-xl"},"发现 AI 智能体",-1)),t("div",je,[t("div",$e,[f(l(q),{icon:"icon-park-outline:plus",class:"mr-2 text-xl"})]),s[1]||(s[1]=T(" 创建 AI 智能体 "))])]),t("div",Be,[l(c)?_("",!0):(o(),j(l(ce),{key:0,size:"18",class:"text-gray-500 py-[9px] hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",onClick:X})),l(c)?_("",!0):(o(),i("div",Le,[t("div",{ref_key:"scrollContainer",ref:g,class:"flex justify-between items-center scrollbar-hide overflow-x-auto",style:{"max-width":"95%",margin:"auto"}},[(o(!0),i($,null,B(k.value,(a,C)=>(o(),i("div",{key:C,onClick:Z=>G(a.id),class:x([{"bg-[#232629]  ml-2  dark:bg-gray-700 text-[#ffffff] dark:text-gray-400":r.value===a.id,"text-gray-500  ml-2  hover:bg-[#f0f0f0]  ":r.value!==a.id},"border border-[rgba(0,0,0,.08)] rounded-[10px] flex-none px-4 py-1.5"])},y(a.name),11,Ge))),128))],512)])),l(c)?_("",!0):(o(),j(l(de),{key:2,size:"18",class:"text-gray-500 py-[9px] mr-8 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",onClick:Y})),t("div",{class:x(["hover:ring-1 hover:ring-primary-500 mx-1 flex rounded-full overflow-hidden shadow-sm ring-1 ring-gray-300 focus-within:ring-1 focus-within:ring-primary-500 text-gray-900 placeholder:text-gray-400 border-0 bg-transparent resize-none dark:focus:ring-gray-600 dark:ring-gray-600 dark:bg-gray-800",[l(c)?"w-full mr-8":"w-[40%]"]])},[t("div",Ve,[t("label",Re,y(l(L)("app.searchAppNameQuickFind")),1),t("div",Te,[f(l(ye),{theme:"outline",size:"24",class:"text-gray-400"})]),ae(t("input",{id:"search-field","onUpdate:modelValue":s[0]||(s[0]=a=>v.value=a),class:"z-1 w-full rounded-xl dark:bg-gray-800 pr-3 py-1.5 font-normal outline-0 delay-100 text-base pl-12 dark:text-gray-400",placeholder:l(L)("app.searchAppNameQuickFind"),type:"search",name:"search"},null,8,De),[[le,v.value]])])],2)]),l(c)?(o(),i("div",qe,[t("div",{ref_key:"scrollContainer",ref:g,class:"flex justify-between items-center overflow-x-auto scrollbar-hide"},[(o(!0),i($,null,B(k.value,(a,C)=>(o(),i("div",{key:C,onClick:Z=>G(a.id),class:x([{"bg-[#232629]   ml-2  dark:bg-gray-700 text-[#ffffff] dark:text-gray-400":r.value===a.id,"text-gray-500  ml-2  hover:bg-[#f0f0f0]  ":r.value!==a.id},"border border-[rgba(0,0,0,.08)] whitespace-nowrap rounded-full px-4 py-2 flex-none"])},y(a.name),11,Fe))),128))],512)])):_("",!0),t("div",Pe,[t("div",Qe,[f(re,{name:"list",tag:"div",class:x(["w-full grid gap-2.5",[l(c)?"grid-cols-1  max-h-[85vh]":"h-[60vh] grid-cols-2   "]]),style:{"align-content":"start"}},{default:S(()=>[(o(!0),i($,null,B(W.value,a=>(o(),i("div",{key:a.id,onClick:C=>K(a),class:"h-24 flex items-center gap-5 rounded-xl bg-gray-50 px-3 py-3 hover:shadow-lg dark:bg-gray-800 dark:hover:bg-gray-700"},[a.coverImg?(o(),i("div",He,[t("img",{src:a.coverImg,class:"rounded-full w-16 h-16",alt:"app-image"},null,8,We)])):(o(),i("div",{key:1,class:x([J(),"flex-shrink-0  dark:ring-gray-400 rounded-full w-16 h-16 flex items-center justify-center"])},[t("span",Ee,y(a.name.slice(0,3)),1)],2)),t("div",Ke,[t("div",Oe,[t("span",Je,y(a.name),1),f(l(_e),{theme:n(a)?"filled":"outline",size:"20",fill:n(a)?"#fde68a":"#e5e7eb",class:"cursor-pointer",onClick:oe(C=>E(a),["stop"])},null,8,["theme","fill","onClick"])]),t("span",Xe,[f(p,{"line-clamp":2},{default:S(()=>[T(y(a.des),1)]),_:2},1024)])])],8,Ue))),128))]),_:1},8,["class"])])])],2)])]),_:1})}}});const it=U(Ye,[["__scopeId","data-v-ed0be8f6"]]);export{it as default};
