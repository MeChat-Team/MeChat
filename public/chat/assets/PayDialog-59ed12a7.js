import{r as H,w as kt,k as Dt,R as T,S as x,a2 as _,K as I,a4 as Y,H as ee,c as $,o as ne,G as oe,U as j,V as It,a8 as R,W as At,a6 as k,j as Nt,F as re,a7 as ie,l as se,ae,z as le}from"./vue-3af3b332.js";import{f as ue,a as ce}from"./order-1b72be34.js";import{u as fe}from"./useBasicLayout-2b2b4d99.js";import{u as de,y as ge,t as S}from"./index-0db41f00.js";import{t as he,a as me}from"./vueuse-motion-b8c5571c.js";import{_ as Ut}from"./_plugin-vue_export-helper-c27b6911.js";import{e as ye,G as pe,F as we,t as Ce,E as Ee}from"./naive-ui-5201514a.js";import{C as ve}from"./Close-a99981ea.js";import"./index-3d816091.js";const Tt=""+new URL("alipay-eab94eb8.png",import.meta.url).href,Pt=""+new URL("wxpay-2d8f84af.png",import.meta.url).href;var tt={},be=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Ft={},L={};let Et;const _e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];L.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};L.getSymbolTotalCodewords=function(t){return _e[t]};L.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};L.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Et=t};L.isKanjiModeEnabled=function(){return typeof Et<"u"};L.toSJIS=function(t){return Et(t)};var st={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+i)}}e.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},e.from=function(n,o){if(e.isValid(n))return n;try{return t(n)}catch{return o}}})(st);function zt(){this.buffer=[],this.length=0}zt.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let i=0;i<t;i++)this.putBit((e>>>t-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var Be=zt;function et(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}et.prototype.set=function(e,t,i,n){const o=e*this.size+t;this.data[o]=i,n&&(this.reservedBit[o]=!0)};et.prototype.get=function(e,t){return this.data[e*this.size+t]};et.prototype.xor=function(e,t,i){this.data[e*this.size+t]^=i};et.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var Ie=et,xt={};(function(e){const t=L.getSymbolSize;e.getRowColCoords=function(n){if(n===1)return[];const o=Math.floor(n/7)+2,r=t(n),s=r===145?26:Math.ceil((r-13)/(2*o-2))*2,l=[r-7];for(let a=1;a<o-1;a++)l[a]=l[a-1]-s;return l.push(6),l.reverse()},e.getPositions=function(n){const o=[],r=e.getRowColCoords(n),s=r.length;for(let l=0;l<s;l++)for(let a=0;a<s;a++)l===0&&a===0||l===0&&a===s-1||l===s-1&&a===0||o.push([r[l],r[a]]);return o}})(xt);var Vt={};const Ae=L.getSymbolSize,St=7;Vt.getPositions=function(t){const i=Ae(t);return[[0,0],[i-St,0],[0,i-St]]};var Ht={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},e.from=function(o){return e.isValid(o)?parseInt(o,10):void 0},e.getPenaltyN1=function(o){const r=o.size;let s=0,l=0,a=0,u=null,c=null;for(let v=0;v<r;v++){l=a=0,u=c=null;for(let g=0;g<r;g++){let h=o.get(v,g);h===u?l++:(l>=5&&(s+=t.N1+(l-5)),u=h,l=1),h=o.get(g,v),h===c?a++:(a>=5&&(s+=t.N1+(a-5)),c=h,a=1)}l>=5&&(s+=t.N1+(l-5)),a>=5&&(s+=t.N1+(a-5))}return s},e.getPenaltyN2=function(o){const r=o.size;let s=0;for(let l=0;l<r-1;l++)for(let a=0;a<r-1;a++){const u=o.get(l,a)+o.get(l,a+1)+o.get(l+1,a)+o.get(l+1,a+1);(u===4||u===0)&&s++}return s*t.N2},e.getPenaltyN3=function(o){const r=o.size;let s=0,l=0,a=0;for(let u=0;u<r;u++){l=a=0;for(let c=0;c<r;c++)l=l<<1&2047|o.get(u,c),c>=10&&(l===1488||l===93)&&s++,a=a<<1&2047|o.get(c,u),c>=10&&(a===1488||a===93)&&s++}return s*t.N3},e.getPenaltyN4=function(o){let r=0;const s=o.data.length;for(let a=0;a<s;a++)r+=o.data[a];return Math.abs(Math.ceil(r*100/s/5)-10)*t.N4};function i(n,o,r){switch(n){case e.Patterns.PATTERN000:return(o+r)%2===0;case e.Patterns.PATTERN001:return o%2===0;case e.Patterns.PATTERN010:return r%3===0;case e.Patterns.PATTERN011:return(o+r)%3===0;case e.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(r/3))%2===0;case e.Patterns.PATTERN101:return o*r%2+o*r%3===0;case e.Patterns.PATTERN110:return(o*r%2+o*r%3)%2===0;case e.Patterns.PATTERN111:return(o*r%3+(o+r)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}e.applyMask=function(o,r){const s=r.size;for(let l=0;l<s;l++)for(let a=0;a<s;a++)r.isReserved(a,l)||r.xor(a,l,i(o,a,l))},e.getBestMask=function(o,r){const s=Object.keys(e.Patterns).length;let l=0,a=1/0;for(let u=0;u<s;u++){r(u),e.applyMask(u,o);const c=e.getPenaltyN1(o)+e.getPenaltyN2(o)+e.getPenaltyN3(o)+e.getPenaltyN4(o);e.applyMask(u,o),c<a&&(a=c,l=u)}return l}})(Ht);var at={};const K=st,nt=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ot=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];at.getBlocksCount=function(t,i){switch(i){case K.L:return nt[(t-1)*4+0];case K.M:return nt[(t-1)*4+1];case K.Q:return nt[(t-1)*4+2];case K.H:return nt[(t-1)*4+3];default:return}};at.getTotalCodewordsCount=function(t,i){switch(i){case K.L:return ot[(t-1)*4+0];case K.M:return ot[(t-1)*4+1];case K.Q:return ot[(t-1)*4+2];case K.H:return ot[(t-1)*4+3];default:return}};var Kt={},lt={};const Z=new Uint8Array(512),rt=new Uint8Array(256);(function(){let t=1;for(let i=0;i<255;i++)Z[i]=t,rt[t]=i,t<<=1,t&256&&(t^=285);for(let i=255;i<512;i++)Z[i]=Z[i-255]})();lt.log=function(t){if(t<1)throw new Error("log("+t+")");return rt[t]};lt.exp=function(t){return Z[t]};lt.mul=function(t,i){return t===0||i===0?0:Z[rt[t]+rt[i]]};(function(e){const t=lt;e.mul=function(n,o){const r=new Uint8Array(n.length+o.length-1);for(let s=0;s<n.length;s++)for(let l=0;l<o.length;l++)r[s+l]^=t.mul(n[s],o[l]);return r},e.mod=function(n,o){let r=new Uint8Array(n);for(;r.length-o.length>=0;){const s=r[0];for(let a=0;a<o.length;a++)r[a]^=t.mul(o[a],s);let l=0;for(;l<r.length&&r[l]===0;)l++;r=r.slice(l)}return r},e.generateECPolynomial=function(n){let o=new Uint8Array([1]);for(let r=0;r<n;r++)o=e.mul(o,new Uint8Array([1,t.exp(r)]));return o}})(Kt);const Ot=Kt;function vt(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}vt.prototype.initialize=function(t){this.degree=t,this.genPoly=Ot.generateECPolynomial(this.degree)};vt.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(t.length+this.degree);i.set(t);const n=Ot.mod(i,this.genPoly),o=this.degree-n.length;if(o>0){const r=new Uint8Array(this.degree);return r.set(n,o),r}return n};var Ne=vt,Jt={},O={},bt={};bt.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var V={};const $t="[0-9]+",Te="[A-Z $%*+\\-./:]+";let X="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";X=X.replace(/u/g,"\\u");const Pe="(?:(?![A-Z0-9 $%*+\\-./:]|"+X+`)(?:.|[\r
]))+`;V.KANJI=new RegExp(X,"g");V.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");V.BYTE=new RegExp(Pe,"g");V.NUMERIC=new RegExp($t,"g");V.ALPHANUMERIC=new RegExp(Te,"g");const Se=new RegExp("^"+X+"$"),Me=new RegExp("^"+$t+"$"),Re=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");V.testKanji=function(t){return Se.test(t)};V.testNumeric=function(t){return Me.test(t)};V.testAlphanumeric=function(t){return Re.test(t)};(function(e){const t=bt,i=V;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(r,s){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!t.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?r.ccBits[0]:s<27?r.ccBits[1]:r.ccBits[2]},e.getBestModeForData=function(r){return i.testNumeric(r)?e.NUMERIC:i.testAlphanumeric(r)?e.ALPHANUMERIC:i.testKanji(r)?e.KANJI:e.BYTE},e.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},e.isValid=function(r){return r&&r.bit&&r.ccBits};function n(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+o)}}e.from=function(r,s){if(e.isValid(r))return r;try{return n(r)}catch{return s}}})(O);(function(e){const t=L,i=at,n=st,o=O,r=bt,s=7973,l=t.getBCHDigit(s);function a(g,h,y){for(let w=1;w<=40;w++)if(h<=e.getCapacity(w,y,g))return w}function u(g,h){return o.getCharCountIndicator(g,h)+4}function c(g,h){let y=0;return g.forEach(function(w){const N=u(w.mode,h);y+=N+w.getBitsLength()}),y}function v(g,h){for(let y=1;y<=40;y++)if(c(g,y)<=e.getCapacity(y,h,o.MIXED))return y}e.from=function(h,y){return r.isValid(h)?parseInt(h,10):y},e.getCapacity=function(h,y,w){if(!r.isValid(h))throw new Error("Invalid QR Code version");typeof w>"u"&&(w=o.BYTE);const N=t.getSymbolTotalCodewords(h),m=i.getTotalCodewordsCount(h,y),p=(N-m)*8;if(w===o.MIXED)return p;const f=p-u(w,h);switch(w){case o.NUMERIC:return Math.floor(f/10*3);case o.ALPHANUMERIC:return Math.floor(f/11*2);case o.KANJI:return Math.floor(f/13);case o.BYTE:default:return Math.floor(f/8)}},e.getBestVersionForData=function(h,y){let w;const N=n.from(y,n.M);if(Array.isArray(h)){if(h.length>1)return v(h,N);if(h.length===0)return 1;w=h[0]}else w=h;return a(w.mode,w.getLength(),N)},e.getEncodedBits=function(h){if(!r.isValid(h)||h<7)throw new Error("Invalid QR Code version");let y=h<<12;for(;t.getBCHDigit(y)-l>=0;)y^=s<<t.getBCHDigit(y)-l;return h<<12|y}})(Jt);var jt={};const yt=L,Yt=1335,Le=21522,Mt=yt.getBCHDigit(Yt);jt.getEncodedBits=function(t,i){const n=t.bit<<3|i;let o=n<<10;for(;yt.getBCHDigit(o)-Mt>=0;)o^=Yt<<yt.getBCHDigit(o)-Mt;return(n<<10|o)^Le};var qt={};const ke=O;function q(e){this.mode=ke.NUMERIC,this.data=e.toString()}q.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};q.prototype.getLength=function(){return this.data.length};q.prototype.getBitsLength=function(){return q.getBitsLength(this.data.length)};q.prototype.write=function(t){let i,n,o;for(i=0;i+3<=this.data.length;i+=3)n=this.data.substr(i,3),o=parseInt(n,10),t.put(o,10);const r=this.data.length-i;r>0&&(n=this.data.substr(i),o=parseInt(n,10),t.put(o,r*3+1))};var De=q;const Ue=O,ft=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Q(e){this.mode=Ue.ALPHANUMERIC,this.data=e}Q.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Q.prototype.getLength=function(){return this.data.length};Q.prototype.getBitsLength=function(){return Q.getBitsLength(this.data.length)};Q.prototype.write=function(t){let i;for(i=0;i+2<=this.data.length;i+=2){let n=ft.indexOf(this.data[i])*45;n+=ft.indexOf(this.data[i+1]),t.put(n,11)}this.data.length%2&&t.put(ft.indexOf(this.data[i]),6)};var Fe=Q;const ze=O;function G(e){this.mode=ze.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}G.getBitsLength=function(t){return t*8};G.prototype.getLength=function(){return this.data.length};G.prototype.getBitsLength=function(){return G.getBitsLength(this.data.length)};G.prototype.write=function(e){for(let t=0,i=this.data.length;t<i;t++)e.put(this.data[t],8)};var xe=G;const Ve=O,He=L;function W(e){this.mode=Ve.KANJI,this.data=e}W.getBitsLength=function(t){return t*13};W.prototype.getLength=function(){return this.data.length};W.prototype.getBitsLength=function(){return W.getBitsLength(this.data.length)};W.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let i=He.toSJIS(this.data[t]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),e.put(i,13)}};var Ke=W,Qt={exports:{}};(function(e){var t={single_source_shortest_paths:function(i,n,o){var r={},s={};s[n]=0;var l=t.PriorityQueue.make();l.push(n,0);for(var a,u,c,v,g,h,y,w,N;!l.empty();){a=l.pop(),u=a.value,v=a.cost,g=i[u]||{};for(c in g)g.hasOwnProperty(c)&&(h=g[c],y=v+h,w=s[c],N=typeof s[c]>"u",(N||w>y)&&(s[c]=y,l.push(c,y),r[c]=u))}if(typeof o<"u"&&typeof s[o]>"u"){var m=["Could not find a path from ",n," to ",o,"."].join("");throw new Error(m)}return r},extract_shortest_path_from_predecessor_list:function(i,n){for(var o=[],r=n;r;)o.push(r),i[r],r=i[r];return o.reverse(),o},find_path:function(i,n,o){var r=t.single_source_shortest_paths(i,n,o);return t.extract_shortest_path_from_predecessor_list(r,o)},PriorityQueue:{make:function(i){var n=t.PriorityQueue,o={},r;i=i||{};for(r in n)n.hasOwnProperty(r)&&(o[r]=n[r]);return o.queue=[],o.sorter=i.sorter||n.default_sorter,o},default_sorter:function(i,n){return i.cost-n.cost},push:function(i,n){var o={value:i,cost:n};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(Qt);var Oe=Qt.exports;(function(e){const t=O,i=De,n=Fe,o=xe,r=Ke,s=V,l=L,a=Oe;function u(m){return unescape(encodeURIComponent(m)).length}function c(m,p,f){const d=[];let E;for(;(E=m.exec(f))!==null;)d.push({data:E[0],index:E.index,mode:p,length:E[0].length});return d}function v(m){const p=c(s.NUMERIC,t.NUMERIC,m),f=c(s.ALPHANUMERIC,t.ALPHANUMERIC,m);let d,E;return l.isKanjiModeEnabled()?(d=c(s.BYTE,t.BYTE,m),E=c(s.KANJI,t.KANJI,m)):(d=c(s.BYTE_KANJI,t.BYTE,m),E=[]),p.concat(f,d,E).sort(function(A,M){return A.index-M.index}).map(function(A){return{data:A.data,mode:A.mode,length:A.length}})}function g(m,p){switch(p){case t.NUMERIC:return i.getBitsLength(m);case t.ALPHANUMERIC:return n.getBitsLength(m);case t.KANJI:return r.getBitsLength(m);case t.BYTE:return o.getBitsLength(m)}}function h(m){return m.reduce(function(p,f){const d=p.length-1>=0?p[p.length-1]:null;return d&&d.mode===f.mode?(p[p.length-1].data+=f.data,p):(p.push(f),p)},[])}function y(m){const p=[];for(let f=0;f<m.length;f++){const d=m[f];switch(d.mode){case t.NUMERIC:p.push([d,{data:d.data,mode:t.ALPHANUMERIC,length:d.length},{data:d.data,mode:t.BYTE,length:d.length}]);break;case t.ALPHANUMERIC:p.push([d,{data:d.data,mode:t.BYTE,length:d.length}]);break;case t.KANJI:p.push([d,{data:d.data,mode:t.BYTE,length:u(d.data)}]);break;case t.BYTE:p.push([{data:d.data,mode:t.BYTE,length:u(d.data)}])}}return p}function w(m,p){const f={},d={start:{}};let E=["start"];for(let b=0;b<m.length;b++){const A=m[b],M=[];for(let D=0;D<A.length;D++){const P=A[D],J=""+b+D;M.push(J),f[J]={node:P,lastCount:0},d[J]={};for(let C=0;C<E.length;C++){const B=E[C];f[B]&&f[B].node.mode===P.mode?(d[B][J]=g(f[B].lastCount+P.length,P.mode)-g(f[B].lastCount,P.mode),f[B].lastCount+=P.length):(f[B]&&(f[B].lastCount=P.length),d[B][J]=g(P.length,P.mode)+4+t.getCharCountIndicator(P.mode,p))}}E=M}for(let b=0;b<E.length;b++)d[E[b]].end=0;return{map:d,table:f}}function N(m,p){let f;const d=t.getBestModeForData(m);if(f=t.from(p,d),f!==t.BYTE&&f.bit<d.bit)throw new Error('"'+m+'" cannot be encoded with mode '+t.toString(f)+`.
 Suggested mode is: `+t.toString(d));switch(f===t.KANJI&&!l.isKanjiModeEnabled()&&(f=t.BYTE),f){case t.NUMERIC:return new i(m);case t.ALPHANUMERIC:return new n(m);case t.KANJI:return new r(m);case t.BYTE:return new o(m)}}e.fromArray=function(p){return p.reduce(function(f,d){return typeof d=="string"?f.push(N(d,null)):d.data&&f.push(N(d.data,d.mode)),f},[])},e.fromString=function(p,f){const d=v(p,l.isKanjiModeEnabled()),E=y(d),b=w(E,f),A=a.find_path(b.map,"start","end"),M=[];for(let D=1;D<A.length-1;D++)M.push(b.table[A[D]].node);return e.fromArray(h(M))},e.rawSplit=function(p){return e.fromArray(v(p,l.isKanjiModeEnabled()))}})(qt);const ut=L,dt=st,Je=Be,$e=Ie,je=xt,Ye=Vt,pt=Ht,wt=at,qe=Ne,it=Jt,Qe=jt,Ge=O,gt=qt;function We(e,t){const i=e.size,n=Ye.getPositions(t);for(let o=0;o<n.length;o++){const r=n[o][0],s=n[o][1];for(let l=-1;l<=7;l++)if(!(r+l<=-1||i<=r+l))for(let a=-1;a<=7;a++)s+a<=-1||i<=s+a||(l>=0&&l<=6&&(a===0||a===6)||a>=0&&a<=6&&(l===0||l===6)||l>=2&&l<=4&&a>=2&&a<=4?e.set(r+l,s+a,!0,!0):e.set(r+l,s+a,!1,!0))}}function Ze(e){const t=e.size;for(let i=8;i<t-8;i++){const n=i%2===0;e.set(i,6,n,!0),e.set(6,i,n,!0)}}function Xe(e,t){const i=je.getPositions(t);for(let n=0;n<i.length;n++){const o=i[n][0],r=i[n][1];for(let s=-2;s<=2;s++)for(let l=-2;l<=2;l++)s===-2||s===2||l===-2||l===2||s===0&&l===0?e.set(o+s,r+l,!0,!0):e.set(o+s,r+l,!1,!0)}}function tn(e,t){const i=e.size,n=it.getEncodedBits(t);let o,r,s;for(let l=0;l<18;l++)o=Math.floor(l/3),r=l%3+i-8-3,s=(n>>l&1)===1,e.set(o,r,s,!0),e.set(r,o,s,!0)}function ht(e,t,i){const n=e.size,o=Qe.getEncodedBits(t,i);let r,s;for(r=0;r<15;r++)s=(o>>r&1)===1,r<6?e.set(r,8,s,!0):r<8?e.set(r+1,8,s,!0):e.set(n-15+r,8,s,!0),r<8?e.set(8,n-r-1,s,!0):r<9?e.set(8,15-r-1+1,s,!0):e.set(8,15-r-1,s,!0);e.set(n-8,8,1,!0)}function en(e,t){const i=e.size;let n=-1,o=i-1,r=7,s=0;for(let l=i-1;l>0;l-=2)for(l===6&&l--;;){for(let a=0;a<2;a++)if(!e.isReserved(o,l-a)){let u=!1;s<t.length&&(u=(t[s]>>>r&1)===1),e.set(o,l-a,u),r--,r===-1&&(s++,r=7)}if(o+=n,o<0||i<=o){o-=n,n=-n;break}}}function nn(e,t,i){const n=new Je;i.forEach(function(a){n.put(a.mode.bit,4),n.put(a.getLength(),Ge.getCharCountIndicator(a.mode,e)),a.write(n)});const o=ut.getSymbolTotalCodewords(e),r=wt.getTotalCodewordsCount(e,t),s=(o-r)*8;for(n.getLengthInBits()+4<=s&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const l=(s-n.getLengthInBits())/8;for(let a=0;a<l;a++)n.put(a%2?17:236,8);return on(n,e,t)}function on(e,t,i){const n=ut.getSymbolTotalCodewords(t),o=wt.getTotalCodewordsCount(t,i),r=n-o,s=wt.getBlocksCount(t,i),l=n%s,a=s-l,u=Math.floor(n/s),c=Math.floor(r/s),v=c+1,g=u-c,h=new qe(g);let y=0;const w=new Array(s),N=new Array(s);let m=0;const p=new Uint8Array(e.buffer);for(let A=0;A<s;A++){const M=A<a?c:v;w[A]=p.slice(y,y+M),N[A]=h.encode(w[A]),y+=M,m=Math.max(m,M)}const f=new Uint8Array(n);let d=0,E,b;for(E=0;E<m;E++)for(b=0;b<s;b++)E<w[b].length&&(f[d++]=w[b][E]);for(E=0;E<g;E++)for(b=0;b<s;b++)f[d++]=N[b][E];return f}function rn(e,t,i,n){let o;if(Array.isArray(e))o=gt.fromArray(e);else if(typeof e=="string"){let u=t;if(!u){const c=gt.rawSplit(e);u=it.getBestVersionForData(c,i)}o=gt.fromString(e,u||40)}else throw new Error("Invalid data");const r=it.getBestVersionForData(o,i);if(!r)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=r;else if(t<r)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+r+`.
`);const s=nn(t,i,o),l=ut.getSymbolSize(t),a=new $e(l);return We(a,t),Ze(a),Xe(a,t),ht(a,i,0),t>=7&&tn(a,t),en(a,s),isNaN(n)&&(n=pt.getBestMask(a,ht.bind(null,a,i))),pt.applyMask(n,a),ht(a,i,n),{modules:a,version:t,errorCorrectionLevel:i,maskPattern:n,segments:o}}Ft.create=function(t,i){if(typeof t>"u"||t==="")throw new Error("No input text");let n=dt.M,o,r;return typeof i<"u"&&(n=dt.from(i.errorCorrectionLevel,dt.M),o=it.from(i.version),r=pt.from(i.maskPattern),i.toSJISFunc&&ut.setToSJISFunction(i.toSJISFunc)),rn(t,o,n,r)};var Gt={},_t={};(function(e){function t(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let n=i.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+i);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(r){return[r,r]}))),n.length===6&&n.push("F","F");const o=parseInt(n.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+n.slice(0,6).join("")}}e.getOptions=function(n){n||(n={}),n.color||(n.color={});const o=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,r=n.width&&n.width>=21?n.width:void 0,s=n.scale||4;return{width:r,scale:r?4:s,margin:o,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},e.getScale=function(n,o){return o.width&&o.width>=n+o.margin*2?o.width/(n+o.margin*2):o.scale},e.getImageWidth=function(n,o){const r=e.getScale(n,o);return Math.floor((n+o.margin*2)*r)},e.qrToImageData=function(n,o,r){const s=o.modules.size,l=o.modules.data,a=e.getScale(s,r),u=Math.floor((s+r.margin*2)*a),c=r.margin*a,v=[r.color.light,r.color.dark];for(let g=0;g<u;g++)for(let h=0;h<u;h++){let y=(g*u+h)*4,w=r.color.light;if(g>=c&&h>=c&&g<u-c&&h<u-c){const N=Math.floor((g-c)/a),m=Math.floor((h-c)/a);w=v[l[N*s+m]?1:0]}n[y++]=w.r,n[y++]=w.g,n[y++]=w.b,n[y]=w.a}}})(_t);(function(e){const t=_t;function i(o,r,s){o.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=s,r.width=s,r.style.height=s+"px",r.style.width=s+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(r,s,l){let a=l,u=s;typeof a>"u"&&(!s||!s.getContext)&&(a=s,s=void 0),s||(u=n()),a=t.getOptions(a);const c=t.getImageWidth(r.modules.size,a),v=u.getContext("2d"),g=v.createImageData(c,c);return t.qrToImageData(g.data,r,a),i(v,u,c),v.putImageData(g,0,0),u},e.renderToDataURL=function(r,s,l){let a=l;typeof a>"u"&&(!s||!s.getContext)&&(a=s,s=void 0),a||(a={});const u=e.render(r,s,a),c=a.type||"image/png",v=a.rendererOpts||{};return u.toDataURL(c,v.quality)}})(Gt);var Wt={};const sn=_t;function Rt(e,t){const i=e.a/255,n=t+'="'+e.hex+'"';return i<1?n+" "+t+'-opacity="'+i.toFixed(2).slice(1)+'"':n}function mt(e,t,i){let n=e+t;return typeof i<"u"&&(n+=" "+i),n}function an(e,t,i){let n="",o=0,r=!1,s=0;for(let l=0;l<e.length;l++){const a=Math.floor(l%t),u=Math.floor(l/t);!a&&!r&&(r=!0),e[l]?(s++,l>0&&a>0&&e[l-1]||(n+=r?mt("M",a+i,.5+u+i):mt("m",o,0),o=0,r=!1),a+1<t&&e[l+1]||(n+=mt("h",s),s=0)):o++}return n}Wt.render=function(t,i,n){const o=sn.getOptions(i),r=t.modules.size,s=t.modules.data,l=r+o.margin*2,a=o.color.light.a?"<path "+Rt(o.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",u="<path "+Rt(o.color.dark,"stroke")+' d="'+an(s,r,o.margin)+'"/>',c='viewBox="0 0 '+l+" "+l+'"',g='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+c+' shape-rendering="crispEdges">'+a+u+`</svg>
`;return typeof n=="function"&&n(null,g),g};const ln=be,Ct=Ft,Zt=Gt,un=Wt;function Bt(e,t,i,n,o){const r=[].slice.call(arguments,1),s=r.length,l=typeof r[s-1]=="function";if(!l&&!ln())throw new Error("Callback required as last argument");if(l){if(s<2)throw new Error("Too few arguments provided");s===2?(o=i,i=t,t=n=void 0):s===3&&(t.getContext&&typeof o>"u"?(o=n,n=void 0):(o=n,n=i,i=t,t=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(i=t,t=n=void 0):s===2&&!t.getContext&&(n=i,i=t,t=void 0),new Promise(function(a,u){try{const c=Ct.create(i,n);a(e(c,t,n))}catch(c){u(c)}})}try{const a=Ct.create(i,n);o(null,e(a,t,n))}catch(a){o(a)}}tt.create=Ct.create;tt.toCanvas=Bt.bind(null,Zt.render);tt.toDataURL=Bt.bind(null,Zt.renderToDataURL);tt.toString=Bt.bind(null,function(e,t,i){return un.render(e,i)});function cn(e,t){const i=he(e),n=H("");return kt(i,async o=>{i.value&&me&&(n.value=await tt.toDataURL(o,t))},{immediate:!0}),n}const fn=["src"],dn=Dt({__name:"index",props:{value:{default:""},size:{default:160},color:{default:"#000"},backgroundColor:{default:"#FFF"},bordered:{type:Boolean,default:!0},borderColor:{default:"#0505050f"},scale:{default:8},errorLevel:{default:"H"}},setup(e){const t=e,i=cn(t.value,{errorCorrectionLevel:t.errorLevel,type:"image/png",quality:1,margin:3,scale:t.scale,color:{dark:t.color,light:t.backgroundColor}});return(n,o)=>(T(),x("div",{class:Y(["m-qrcode",{bordered:n.bordered}]),style:ee(`width: ${n.size}px; height: ${n.size}px; border-color: ${n.borderColor};`)},[_("img",{src:I(i),class:"u-qrcode",alt:"QRCode"},null,8,fn)],6))}});const Lt=Ut(dn,[["__scopeId","data-v-56c01def"]]),gn={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},hn={class:"flex justify-between"},mn={class:"flex text-xl font-bold mb-[20px] bg-currentflex items-center"},yn={class:"ml-[8px]"},pn={class:"p-4"},wn={class:"whitespace-nowrap font-bold"},Cn={class:"ml-1 text-xl font-bold tracking-tight"},En={class:"mt-2 flex"},vn={class:"whitespace-nowrap font-bold"},bn={class:"ml-2"},_n={class:"flex items-center justify-center my-3 relative"},Bn=["src"],In=["src"],An={class:"mb-10 mt-5 text-base"},Nn=["src"],Tn=["src"],Pn={key:0,class:"flex items-center justify-center text-lg"},Sn={class:"inline-block w-20 text-primary-500 text-center"},Mn={class:"mt-6 space-y-6"},Rn=["id","value"],Ln=["for"],kn=["src"],Dn=1e3,Un=Dt({__name:"PayDialog",props:{visible:{type:Boolean}},setup(e){const{isMobile:t}=fe(),i=de(),n=ge(),o=ye(),r=H(!0),s=H("wxpay"),l=$(()=>{var U;const C=window.navigator.userAgent.toLowerCase(),B=C.match(/MicroMessenger/i)&&((U=C==null?void 0:C.match(/MicroMessenger/i))==null?void 0:U[0])==="micromessenger",F=!C.includes("windows")&&!C.includes("macintosh");return B&&F}),a=$(()=>{const{payHupiStatus:C,payEpayStatus:B,payMpayStatus:F,payWechatStatus:U,payLtzfStatus:z}=i.globalConfig;return Number(U)===1?"wechat":Number(B)===1?"epay":Number(F)===1?"mpay":Number(C)===1?"hupi":Number(z)===1?"ltzf":null}),u=$(()=>{const{payEpayChannel:C,payMpayChannel:B}=i.globalConfig;return a.value==="mpay"?B?JSON.parse(B):[]:a.value==="epay"?C?JSON.parse(C):[]:a.value==="wechat"?["wxpay"]:a.value==="hupi"?["wxpay"]:a.value==="ltzf"?["wxpay"]:[]}),c=$(()=>s.value==="wxpay"?S("pay.wechat"):S("pay.alipay")),v=H(),g=$(()=>{const{payEpayApiPayUrl:C}=i.globalConfig;return a.value==="epay"&&C.includes("submit")||a.value==="mpay"});kt(s,()=>{var C;A(),(C=v.value)==null||C.reset()});const h=H("");let y;const w=$(()=>[{label:S("pay.wechatPay"),value:"wxpay",icon:Pt,payChannel:"wxpay"},{label:S("pay.alipayPay"),value:"alipay",icon:Tt,payChannel:"alipay"}].filter(C=>u.value.includes(C.payChannel))),N=async()=>{if(!h.value)return;const C=await ce({orderId:h.value}),{success:B,data:F}=C;if(B){const{status:U}=F;U===1&&(clearInterval(y),o.success(S("pay.paymentSuccess")),r.value=!1,i.getUserInfo(),setTimeout(()=>{n.updatePayDialog(!1)},2e3))}},m=$(()=>n==null?void 0:n.orderInfo),p=H(""),f=H(!0),d=H(!0),E=H("");function b(){n.updateOrderInfo({}),P(),n.updatePayDialog(!1)}async function A(){!g.value&&(f.value=!0),g.value&&(d.value=!0);let C=null;C=s.value,a.value==="wechat"&&(C=l.value?"jsapi":"native");try{const B=await ue({goodsId:m.value.pkgInfo.id,payType:C}),{data:F,success:U,message:z}=B;if(!U)return o.error(z);const{url_qrcode:ct,orderId:Xt,redirectUrl:te}=F;E.value=te,h.value=Xt,p.value=ct,f.value=!1,d.value=!1}catch{n.updatePayDialog(!1),f.value=!1,d.value=!1}}function M(){window.open(E.value)}async function D(){await A(),y||(y=setInterval(()=>{N()},Dn))}function P(){y&&(clearInterval(y),y=null)}function J(){o.error(S("pay.paymentTimeout")),P(),n.updatePayDialog(!1),n.updateGoodsDialog(!0)}return ne(async()=>{D()}),oe(()=>{P(),b()}),(C,B)=>(T(),j(le,{name:"modal-fade",onAfterEnter:D,onAfterLeave:P},{default:It(()=>{var F,U;return[C.visible?(T(),x("div",gn,[_("div",{class:Y(["p-4 rounded bg-white dark:bg-gray-900",I(t)?" w-full h-full":" rounded-lg shadow-lg   p-4 mx-2 "])},[_("div",hn,[_("div",mn,[_("span",yn,R(I(S)("pay.productPayment")),1)]),At(I(ve),{size:"18",class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",onClick:b})]),_("div",pn,[_("div",null,[_("span",wn,R(I(S)("pay.amountDue")),1),_("span",Cn,R(`ï¿¥${(F=m.value.pkgInfo)==null?void 0:F.price}`),1)]),_("div",En,[_("span",vn,R(I(S)("pay.packageName")),1),_("span",bn,R((U=m.value.pkgInfo)==null?void 0:U.name),1)]),_("div",{class:Y(["flex justify-center",[I(t)?"flex-col":"flex-row",g.value?"flex-row-reverse":""]])},[_("div",null,[_("div",_n,[f.value&&!g.value?(T(),j(I(pe),{key:0,size:"large",class:"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2"})):k("",!0),f.value?(T(),j(I(we),{key:1,width:240,height:240,sharp:!1,size:"medium"})):k("",!0),a.value==="epay"&&!f.value&&!d.value&&!g.value?(T(),j(Lt,{key:2,value:p.value,size:240},null,8,["value"])):k("",!0),s.value==="wxpay"&&!f.value&&!g.value?(T(),x("img",{key:3,src:I(Pt),class:"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-10 bg-[#fff]"},null,8,Bn)):k("",!0),s.value==="alipay"&&!f.value&&!g.value?(T(),x("img",{key:4,src:I(Tt),class:"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-10 bg-[#fff]"},null,8,In)):k("",!0),a.value==="wechat"&&!f.value?(T(),j(Lt,{key:5,value:p.value,size:240},null,8,["value"])):k("",!0),g.value?(T(),x("div",{key:6,class:Y(["flex flex-col",[g.value&&I(t)?"ml-0":"ml-20"]])},[_("span",An,R(I(S)("pay.siteAdminEnabledRedirect")),1),g.value?(T(),j(I(Ce),{key:0,type:"primary",ghost:"",disabled:d.value,loading:d.value,onClick:M},{default:It(()=>[Nt(R(I(S)("pay.clickToPay")),1)]),_:1},8,["disabled","loading"])):k("",!0)],2)):k("",!0),a.value==="hupi"&&!d.value?(T(),x("iframe",{key:7,class:"w-[280px] h-[280px] scale-90",src:p.value,frameborder:"0"},null,8,Nn)):k("",!0),a.value==="ltzf"&&!d.value?(T(),x("img",{key:8,src:p.value,class:"w-[280px] h-[280px] scale-90",alt:"QRCode"},null,8,Tn)):k("",!0)]),g.value?k("",!0):(T(),x("span",Pn,R(I(S)("pay.open"))+" "+R(c.value)+" "+R(I(S)("pay.scanToPay")),1))]),_("div",{class:Y(["flex flex-col",[I(t)?"w-full ":" ml-10 w-[200] "]])},[_("div",{class:Y(["flex items-center justify-center mt-6 w-full font-bold text-sm",[I(t)?"mb-2":"mb-10"]]),style:{"white-space":"nowrap"}},[_("span",null,R(I(S)("pay.completePaymentWithin")),1),_("span",Sn,[At(I(Ee),{ref_key:"countdownRef",ref:v,active:r.value,duration:300*1e3,"on-finish":J},null,8,["active"])]),_("span",null,R(I(S)("pay.timeToCompletePayment")),1)],2),_("div",Mn,[(T(!0),x(re,null,ie(w.value,z=>(T(),x("div",{key:z.value,class:"flex items-center"},[se(_("input",{type:"radio",id:z.value,name:"payment-method",value:z.value,"onUpdate:modelValue":B[0]||(B[0]=ct=>s.value=ct),class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600"},null,8,Rn),[[ae,s.value]]),_("label",{for:z.value,class:"ml-3 block text-sm font-medium leading-6 text-gray-900"},[_("img",{class:"h-4 object-contain mr-2 inline-block",src:z.icon,alt:""},null,8,kn),Nt(" "+R(z.label),1)],8,Ln)]))),128))])],2)],2)])],2)])):k("",!0)]}),_:1}))}});const jn=Ut(Un,[["__scopeId","data-v-8dd6fdf4"]]);export{jn as default};
