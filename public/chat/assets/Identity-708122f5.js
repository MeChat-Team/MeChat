import{k as V,r as m,c as S,R as p,S as x,a2 as t,W as g,K as a,a4 as y,V as A,l as f,a9 as v,ae as N,j,a8 as B,a6 as b}from"./vue-cbfd7fa1.js";import{u as I}from"./useBasicLayout-5485175e.js";import{g as T}from"./user-337d128a.js";import{c as $,u as z}from"./index-d0602d6a.js";import{V as D}from"./SliderCaptcha-a9ade843.js";import{e as M,w as U}from"./naive-ui-8add5bf4.js";import{C as _}from"./Close-713c54f1.js";import"./vueuse-motion-6e187fab.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./index-e53e2518.js";const q={key:0,class:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black bg-opacity-50 py-6"},O={class:"flex-1 flex flex-col items-center"},F={class:"mt-4"},G={class:"mt-2"},R={class:"mt-4"},W={class:"mt-2"},E={key:0,class:"flex items-center justify-between my-3"},K={class:"flex items-center"},L={class:"ml-1 text-center text-sm text-gray-500 dark:text-gray-400"},ae=V({__name:"Identity",props:{visible:{type:Boolean}},setup(P){const n=M(),{isMobile:d}=I(),l=m(!1),c=$(),k=z(),o=S(()=>k.globalConfig),r=m({name:"",idCard:""}),h={name:[{required:!0,message:"请输入姓名",trigger:"blur"}],idCard:[{required:!0,message:"请输入身份证号",trigger:"blur"}]},i=m(!0);function w(){i.value=!0}function C(){if(i.value===!1&&o.value.isAutoOpenAgreement==="1")return n.error(`请阅读并同意《${o.value.agreementTitle}》`);l.value=!1,T(r.value).then(u=>{u.code===200?(n.success("认证成功"),c.updateIdentityDialog(!1)):n.error("认证失败")})}return(u,e)=>u.visible?(p(),x("div",q,[t("div",{class:y(["bg-white p-6 rounded-lg shadow-lg w-full max-h-[70vh] flex flex-col dark:bg-gray-900 dark:text-gray-400 relative",{"max-w-[95vw]":a(d),"max-w-xl":!a(d)}])},[g(a(_),{size:"18",class:"absolute top-3 right-3 cursor-pointer z-30",onClick:e[0]||(e[0]=s=>a(c).updateIdentityDialog(!1))}),t("div",O,[t("div",{class:y(["flex w-full flex-col h-full justify-center",a(d)?"px-5 py-5":"px-10 py-5"])},[g(a(U),{ref:"formRef",model:r.value,rules:h,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging"},{default:A(()=>[e[10]||(e[10]=t("div",{class:"sm:mx-auto sm:w-full sm:max-w-sm"},[t("h2",{class:"mb-8 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900 dark:text-gray-300"}," 实名认证 ")],-1)),t("div",F,[e[7]||(e[7]=t("label",{for:"username",class:"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-300"},"姓名 ",-1)),t("div",G,[f(t("input",{id:"username",type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>r.value.name=s),placeholder:"请输入姓名",class:"block w-full rounded-md border-0 py-2 px-3 text-gray-900 shadow-sm dark:text-gray-300 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-gray-300 sm:text-sm sm:leading-6 dark:bg-gray-800 dark:focus:ring-gray-400"},null,512),[[v,r.value.name]])])]),t("div",R,[e[8]||(e[8]=t("label",{for:"username",class:"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-300"},"身份证号 ",-1)),t("div",W,[f(t("input",{id:"username",type:"text","onUpdate:modelValue":e[2]||(e[2]=s=>r.value.idCard=s),placeholder:"请输入身份证号",class:"block w-full rounded-md border-0 py-2 px-3 text-gray-900 shadow-sm dark:text-gray-300 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-gray-300 sm:text-sm sm:leading-6 dark:bg-gray-800 dark:focus:ring-gray-400"},null,512),[[v,r.value.idCard]])])]),o.value.isAutoOpenAgreement==="1"?(p(),x("div",E,[t("div",K,[f(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>i.value=s),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"},null,512),[[N,i.value]]),t("p",L,[e[9]||(e[9]=j(" 已阅读并同意 ")),t("a",{href:"#",class:"font-semibold leading-6 text-primary-600 hover:text-primary-500 dark:text-primary-500 dark:hover:text-primary-600",onClick:w},"《"+B(o.value.agreementTitle)+"》",1)])])])):b("",!0),t("div",null,[t("button",{onClick:e[4]||(e[4]=s=>l.value=!0),type:"submit",class:"flex w-full my-5 justify-center rounded-md bg-primary-500 px-3 py-2 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-primary-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"}," 提交认证 ")])]),_:1},8,["model"])],2)])],2),g(D,{show:l.value,onSuccess:e[5]||(e[5]=s=>C()),onClose:e[6]||(e[6]=s=>l.value=!1),class:"bg-red-500"},null,8,["show"])])):b("",!0)}});export{ae as default};
