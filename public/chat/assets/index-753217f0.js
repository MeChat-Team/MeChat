import{u as $,a as ee,b as oe,c as te,d as ie,e as ae,_ as s}from"./index-d0602d6a.js";import{f as se,a as ne}from"./user-337d128a.js";import{u as le}from"./useBasicLayout-5485175e.js";import{e as re,m as ue,n as ce}from"./naive-ui-8add5bf4.js";import{k as de,c as o,o as me,w as _e,S as pe,a2 as ge,W as t,V as f,K as i,a3 as n,p as ve,a0 as fe,R as D,a4 as he,U as De,a5 as be}from"./vue-cbfd7fa1.js";import"./vueuse-motion-6e187fab.js";const Ie={class:"dark:bg-gray-900 transition-all h-full p-0"},we={class:"h-full overflow-hidden"},Re=de({__name:"index",setup(Le){const b=n(()=>s(()=>import("./AppDialog-57ccadd8.js"),["./AppDialog-57ccadd8.js","./vue-cbfd7fa1.js","./appStore-45233070.js","./index-d0602d6a.js","./naive-ui-8add5bf4.js","./vueuse-motion-6e187fab.js","./index-bb83bdc1.css","./main-6158928b.js","./index-e53e2518.js","./useBasicLayout-5485175e.js","./index-c04e4b59.js","./Left-b61f53c1.js","./Right-cc034a51.js","./Close-713c54f1.js","./Star-ae8860db.js","./_plugin-vue_export-helper-c27b6911.js","./AppDialog-5447bdb3.css"],import.meta.url)),I=n(()=>s(()=>import("./BadWordsDialog-1244ee79.js"),["./BadWordsDialog-1244ee79.js","./index-d0602d6a.js","./vue-cbfd7fa1.js","./naive-ui-8add5bf4.js","./vueuse-motion-6e187fab.js","./index-bb83bdc1.css","./preview-ff828f3e.css"],import.meta.url)),w=n(()=>s(()=>import("./BindWx-9ac614ad.js"),["./BindWx-9ac614ad.js","./user-337d128a.js","./index-d0602d6a.js","./vue-cbfd7fa1.js","./naive-ui-8add5bf4.js","./vueuse-motion-6e187fab.js","./index-bb83bdc1.css"],import.meta.url)),L=n(()=>s(()=>import("./GoodsDialog-85caadc9.js"),["./GoodsDialog-85caadc9.js","./vue-cbfd7fa1.js","./crami-d8c30777.js","./index-d0602d6a.js","./naive-ui-8add5bf4.js","./vueuse-motion-6e187fab.js","./index-bb83bdc1.css","./order-6324301d.js","./user-337d128a.js","./useBasicLayout-5485175e.js","./CheckOne-6d4df2ce.js","./index-e53e2518.js","./Close-713c54f1.js","./_plugin-vue_export-helper-c27b6911.js","./GoodsDialog-243ecf21.css"],import.meta.url)),y=n(()=>s(()=>import("./Identity-708122f5.js"),["./Identity-708122f5.js","./vue-cbfd7fa1.js","./useBasicLayout-5485175e.js","./user-337d128a.js","./index-d0602d6a.js","./naive-ui-8add5bf4.js","./vueuse-motion-6e187fab.js","./index-bb83bdc1.css","./SliderCaptcha-a9ade843.js","./_plugin-vue_export-helper-c27b6911.js","./SliderCaptcha-fc473f83.css","./Close-713c54f1.js","./index-e53e2518.js"],import.meta.url)),A=n(()=>s(()=>import("./Login-926efa69.js"),["./Login-926efa69.js","./useBasicLayout-5485175e.js","./vue-cbfd7fa1.js","./index-d0602d6a.js","./naive-ui-8add5bf4.js","./vueuse-motion-6e187fab.js","./index-bb83bdc1.css","./SliderCaptcha-a9ade843.js","./_plugin-vue_export-helper-c27b6911.js","./SliderCaptcha-fc473f83.css","./user-337d128a.js","./Close-713c54f1.js","./index-e53e2518.js","./Login-fe38ec7c.css"],import.meta.url)),E=n(()=>s(()=>import("./NoticeDialog-538b1b32.js"),["./NoticeDialog-538b1b32.js","./index-d0602d6a.js","./vue-cbfd7fa1.js","./naive-ui-8add5bf4.js","./vueuse-motion-6e187fab.js","./index-bb83bdc1.css","./Close-713c54f1.js","./index-e53e2518.js","./preview-ff828f3e.css"],import.meta.url)),C=n(()=>s(()=>import("./PayDialog-ef8de435.js"),["./PayDialog-ef8de435.js","./vue-cbfd7fa1.js","./order-6324301d.js","./index-d0602d6a.js","./naive-ui-8add5bf4.js","./vueuse-motion-6e187fab.js","./index-bb83bdc1.css","./useBasicLayout-5485175e.js","./_plugin-vue_export-helper-c27b6911.js","./Close-713c54f1.js","./index-e53e2518.js","./PayDialog-e540214b.css"],import.meta.url)),P=n(()=>s(()=>import("./PhoneIdentity-c94c0b62.js"),["./PhoneIdentity-c94c0b62.js","./vue-cbfd7fa1.js","./index-d0602d6a.js","./naive-ui-8add5bf4.js","./vueuse-motion-6e187fab.js","./index-bb83bdc1.css","./user-337d128a.js","./useBasicLayout-5485175e.js","./SliderCaptcha-a9ade843.js","./_plugin-vue_export-helper-c27b6911.js","./SliderCaptcha-fc473f83.css","./Close-713c54f1.js","./index-e53e2518.js"],import.meta.url)),S=n(()=>s(()=>import("./SignInDialog-b344c7d5.js"),["./SignInDialog-b344c7d5.js","./vue-cbfd7fa1.js","./index-d0602d6a.js","./naive-ui-8add5bf4.js","./vueuse-motion-6e187fab.js","./index-bb83bdc1.css","./useBasicLayout-5485175e.js","./_plugin-vue_export-helper-c27b6911.js","./SignInDialog-e667b267.css"],import.meta.url)),R=n(()=>s(()=>import("./UserAgreementDialog-a76588e3.js"),["./UserAgreementDialog-a76588e3.js","./index-d0602d6a.js","./vue-cbfd7fa1.js","./naive-ui-8add5bf4.js","./vueuse-motion-6e187fab.js","./index-bb83bdc1.css","./Close-713c54f1.js","./index-e53e2518.js","./preview-ff828f3e.css"],import.meta.url)),V=n(()=>s(()=>import("./index-85daa3b5.js"),["./index-85daa3b5.js","./vue-cbfd7fa1.js","./logo-63e5ee5a.js","./index-d0602d6a.js","./naive-ui-8add5bf4.js","./vueuse-motion-6e187fab.js","./index-bb83bdc1.css","./index.vue_vue_type_script_setup_true_lang-7ffea530.js","./useBasicLayout-5485175e.js","./menu-b9522a75.js","./index-e53e2518.js","./index-c04e4b59.js","./appStore-45233070.js"],import.meta.url)),r=$(),m=ee(),v=oe(),l=te(),_=ie(),h=re(),T=o(()=>l.payDialog),O=o(()=>l.goodsDialog),k=o(()=>l.noticeDialog),N=o(()=>l.bindWxDialog),x=o(()=>l.signInDialog),B=o(()=>l.appDialog),W=o(()=>l.identityDialog),G=o(()=>l.phoneIdentityDialog),M=o(()=>l.userAgreementDialog),U=o(()=>l.BadWordsDialog),{isMobile:p}=le(),q=o(()=>r.loginDialog);o(()=>_.theme);const z=o(()=>r.isLogin),K=o(()=>{var e;return Number((e=r.globalConfig)==null?void 0:e.wechatSilentLoginStatus)===1});function j(){const{token:e}=m.query;if(e){r.setToken(e);const a=m.name;v.replace({name:a,query:{}}),h.success("账户登录成功、开始体验吧！"),r.getUserInfo()}}async function F(){if(m.path==="/home"||!K.value||z.value)return;const a=new URLSearchParams(window.location.search).getAll("code"),c=a.length>0?a[a.length-1]:null;if(c){const d=await se({code:c});d.success&&(r.setToken(d.data),r.getUserInfo(),r.setLoginDialog(!1),v.replace("/chat"))}else{const d=window.location.href.split("#")[0],g=await ne({url:d});g.success&&(window.location.href=g.data)}}function H(){var a;const e=window.navigator.userAgent.toLowerCase();e.match(/MicroMessenger/i)&&((a=e==null?void 0:e.match(/MicroMessenger/i))==null?void 0:a[0])==="micromessenger"&&F()}me(()=>{H(),j()});const u=ae(),J=o(()=>u.isStreamIn!==void 0?u.isStreamIn:!1),Q=o(()=>{var e;return Number((e=r.globalConfig)==null?void 0:e.isModelInherited)===1});async function X(e){if(J.value){h.info("AI回复中，请稍后再试");return}u.setStreamIn(!1);try{if(e&&e>0)await u.addNewChatGroup(e);else{const{modelInfo:a}=u.activeConfig;if(a&&Q.value&&u.activeGroupAppId===0){const c={modelInfo:a};await u.addNewChatGroup(0,c)}else await u.addNewChatGroup()}u.setUsingPlugin(null),p.value&&_.setSiderCollapsed(!0),m.path!=="/chat"&&v.push("/chat")}catch{}}ve("createNewChatGroup",X),o(()=>p.value?["rounded-none","shadow-none"]:["dark:border-neutral-800"]),o(()=>p.value?["flex-col"]:["dark:border-neutral-800"]);const Y=o(()=>_.siderCollapsed),Z=o(()=>["h-full",{"pl-[260px]":!p.value&&!Y.value}]);return _e(()=>m.path,e=>{e==="/user-center"&&setTimeout(function(){_.setSiderCollapsed(!0)},600)},{immediate:!0}),(e,a)=>{const c=fe("RouterView");return D(),pe("div",Ie,[ge("div",we,[t(i(ue),{class:"h-full","has-sider":""},{default:f(()=>[t(i(V),{class:""}),t(i(ce),{class:he(["h-full",Z.value]),style:{flex:"1"}},{default:f(()=>[t(c,null,{default:f(({Component:d,route:g})=>[(D(),De(be(d),{key:g.fullPath}))]),_:1})]),_:1},8,["class"])]),_:1}),t(i(A),{visible:q.value},null,8,["visible"]),t(i(C),{visible:T.value},null,8,["visible"]),t(i(L),{visible:O.value},null,8,["visible"]),t(i(E),{visible:k.value},null,8,["visible"]),t(i(w),{visible:N.value},null,8,["visible"]),t(i(S),{visible:x.value},null,8,["visible"]),t(i(b),{visible:B.value},null,8,["visible"]),t(i(y),{visible:W.value},null,8,["visible"]),t(i(P),{visible:G.value},null,8,["visible"]),t(i(R),{visible:M.value},null,8,["visible"]),t(i(I),{visible:U.value},null,8,["visible"])])])}}});export{Re as default};
