import{k as T,r,c,w,o as j,U as V,V as g,z,R as n,a2 as e,W as u,a4 as v,K as d,l as D,a9 as E,S as p,a7 as F,F as R,A as q,a8 as h,j as G}from"./vue-3af3b332.js";import{M as P,a as Q}from"./appStore-c2d454ab.js";import{c as U,d as W,t as k,j as $}from"./index-0db41f00.js";import{t as K,S as O}from"./main-9659b9e9.js";import{T as H}from"./TopBar-2f5299bb.js";import{u as J}from"./useBasicLayout-2b2b4d99.js";import{e as X,r as Y}from"./naive-ui-5201514a.js";import{u as Z}from"./index-010716d7.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";import"./vueuse-motion-b8c5571c.js";import"./index-3d816091.js";import"./relative.vue_vue_type_script_setup_true_lang-1ec16f42.js";import"./logo-7b70ca99.js";import"./index.vue_vue_type_script_setup_true_lang-4f92ac7d.js";import"./menu-9d7b0f63.js";const se={class:"flex justify-center h-full flex-col items-center"},te={class:"flex flex-1 flex-col px-6"},ae={class:"flex px-1 h-10 w-full"},le={class:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background"},oe={class:"pl-3 flex items-center pointer-events-none"},re=["placeholder"],ne={class:"w-full px-1 flex h-full flex-1 overflow-y-auto flex-grow my-2 items-start"},de=["onClick"],ie={class:"flex items-center"},ce={key:0,class:"flex-shrink-0 mr-1.5 dark:ring-gray-400 rounded-full"},ue=["src"],pe={class:"text-white text-sm"},fe={class:"flex-grow flex flex-col"},me={class:"flex items-center font-medium text-base text-gray-600 dark:text-gray-400 my-1"},xe={class:"line-clamp-1 text-[#000000] pr-2 overflow-hidden text-ellipsis block flex-grow whitespace-nowrap"},ge={class:""},ve={class:"text-sm text-[#595959] py-1 pl-1.5"},he=T({__name:"ModelMenu",props:{visible:{type:Boolean}},setup(_e){const{isMobile:f}=J(),C=U();function A(){C.updateAppDialog(!1)}X();const _=Z(),i=r(""),M=c(()=>_.catId),l=r([]),m=r([]);c(()=>_.mineApps);const S=r([]),y=r(0);async function I(){const t=(await P()).data.modelMaps;let a=[];for(let o in t)Array.isArray(t[o])&&(a=a.concat(t[o]));l.value=a.map(o=>(o.loading=!1,o)),m.value=l.value}const x=c(()=>{if(i.value){const s=i.value.toLowerCase();return l.value.filter(t=>K.match(t.name,s))}return console.log("返回我的列表",l.value),y.value===0?l.value:l.value.filter(s=>s.catId===y.value)});async function L(s){const t=Number(s.id);A(),$.replace({path:"/chat",query:{appId:t}})}async function N(){var a;const s=await Q(),t={id:0,name:k("app.allCategories")};S.value=[t,...(a=s==null?void 0:s.data)==null?void 0:a.rows]}w(M,s=>{s?m.value=l.value.filter(t=>t.catId===s):m.value=l.value});function B(){const s=["bg-blue-300","bg-red-300","bg-green-300","bg-yellow-300","bg-purple-300","bg-pink-300"];return s[Math.floor(Math.random()*s.length)]}r(null),c(()=>b.siderCollapsed);const b=W();return w(f,s=>{b.setSiderCollapsed(s)},{immediate:!0,flush:"post"}),j(()=>{N(),I()}),(s,t)=>(n(),V(z,{name:"modal-fade"},{default:g(()=>[e("div",se,[u(H,{class:"px-4"}),e("div",{class:v(["bg-white dark:bg-gray-900 flex flex-1 flex-col",[d(f)?"w-full h9full   ":" w-full h-full  rounded-lg"]])},[e("div",te,[e("div",ae,[e("div",le,[e("div",oe,[u(d(O),{theme:"outline",size:"18",class:"text-[#18181b]"})]),D(e("input",{id:"search-field","onUpdate:modelValue":t[0]||(t[0]=a=>i.value=a),class:"z-1 w-full rounded-xl dark:bg-gray-800 font-normal outline-0 delay-100 text-base pl-2 pr-9 dark:text-gray-400",placeholder:d(k)("app.searchAppModelQuickFind"),type:"search",name:"search"},null,8,re),[[E,i.value]])])]),e("div",ne,[u(q,{name:"list",tag:"div",class:v(["w-full grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-3 grid gap-2.5",[d(f)?"  max-h-[85vh]":"h-[60vh] grid-cols-2   "]]),style:{"align-content":"start"}},{default:g(()=>[(n(!0),p(R,null,F([...x.value,...x.value,...x.value],a=>(n(),p("div",{key:a.id,onClick:o=>L(a),class:"gap-5 rounded-xl border border-[#d6d6db] px-3 py-3 hover:border-[#c9c9cf] dark:bg-[gray-800] hover:bg-[#fafafa] dark:hover:bg-gray-700"},[e("div",ie,[a.modelAvatar?(n(),p("div",ce,[e("img",{src:a.modelAvatar,class:"rounded-full w-6 h-6",alt:"app-image"},null,8,ue)])):(n(),p("div",{key:1,class:v(["mr-1.5",[B(),"flex-shrink-0  dark:ring-gray-400 rounded-full w-6 h-6 flex items-center justify-center"]])},[e("span",pe,h(a.modelName.slice(0,2)),1)],2)),e("div",fe,[e("div",me,[e("span",xe,h(a.modelName),1)])])]),e("div",ge,[e("div",ve,[u(d(Y),{"line-clamp":8},{default:g(()=>[G(h(a.modelDescription),1)]),_:2},1024)])]),t[1]||(t[1]=e("div",{class:"flex justify-end"},[e("div",{class:"flex flex-row text-sm items-center px-2 pr-1 py-1 w-full rounded-md border transition-all bg-secondary/5 hover:bg-secondary/10"},[e("span",{class:"flex-grow"},"免费"),e("span",{class:"text-2xs ml-1 px-1.5 bg-input/40 select-none rounded-sm"},"FREE")])],-1))],8,de))),128)),t[2]||(t[2]=e("div",{class:"h-6"},null,-1))]),_:1},8,["class"])])])],2)])]),_:1}))}});const ze=ee(he,[["__scopeId","data-v-6c145c3d"]]);export{ze as default};
