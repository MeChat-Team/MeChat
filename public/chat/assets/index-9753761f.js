import{u as $,a as ee,b as oe,c as te,d as ie,e as ae,_ as s}from"./index-0db41f00.js";import{f as se,a as le}from"./user-333b21c3.js";import{u as ne}from"./useBasicLayout-2b2b4d99.js";import{e as re,m as ue,n as ce}from"./naive-ui-5201514a.js";import{k as de,c as e,o as me,S as _e,a2 as ge,W as t,V as f,K as i,a3 as l,p as pe,a0 as ve,R as D,a4 as fe,U as he,a5 as De}from"./vue-3af3b332.js";import"./vueuse-motion-b8c5571c.js";const be={class:"dark:bg-gray-900 transition-all h-full p-0"},Ie={class:"h-full overflow-hidden"},Se=de({__name:"index",setup(we){const b=l(()=>s(()=>import("./AppDialog-41fe305b.js"),["./AppDialog-41fe305b.js","./vue-3af3b332.js","./appStore-c2d454ab.js","./index-0db41f00.js","./naive-ui-5201514a.js","./vueuse-motion-b8c5571c.js","./index-5ab0ca25.css","./main-9659b9e9.js","./index-3d816091.js","./useBasicLayout-2b2b4d99.js","./index-010716d7.js","./Left-bfcf8660.js","./Right-e4aa9d5c.js","./Close-a99981ea.js","./Star-53088522.js","./_plugin-vue_export-helper-c27b6911.js","./AppDialog-5447bdb3.css"],import.meta.url)),I=l(()=>s(()=>import("./BadWordsDialog-ef650147.js"),["./BadWordsDialog-ef650147.js","./index-0db41f00.js","./vue-3af3b332.js","./naive-ui-5201514a.js","./vueuse-motion-b8c5571c.js","./index-5ab0ca25.css","./preview-ff828f3e.css"],import.meta.url)),w=l(()=>s(()=>import("./BindWx-01059376.js"),["./BindWx-01059376.js","./user-333b21c3.js","./index-0db41f00.js","./vue-3af3b332.js","./naive-ui-5201514a.js","./vueuse-motion-b8c5571c.js","./index-5ab0ca25.css"],import.meta.url)),L=l(()=>s(()=>import("./GoodsDialog-0736fc20.js"),["./GoodsDialog-0736fc20.js","./vue-3af3b332.js","./crami-ea53bd52.js","./index-0db41f00.js","./naive-ui-5201514a.js","./vueuse-motion-b8c5571c.js","./index-5ab0ca25.css","./order-1b72be34.js","./user-333b21c3.js","./useBasicLayout-2b2b4d99.js","./CheckOne-a3b77e50.js","./index-3d816091.js","./Close-a99981ea.js","./_plugin-vue_export-helper-c27b6911.js","./GoodsDialog-243ecf21.css"],import.meta.url)),y=l(()=>s(()=>import("./Identity-6bdc5cf5.js"),["./Identity-6bdc5cf5.js","./vue-3af3b332.js","./useBasicLayout-2b2b4d99.js","./user-333b21c3.js","./index-0db41f00.js","./naive-ui-5201514a.js","./vueuse-motion-b8c5571c.js","./index-5ab0ca25.css","./SliderCaptcha-f5abe94f.js","./_plugin-vue_export-helper-c27b6911.js","./SliderCaptcha-fc473f83.css","./Close-a99981ea.js","./index-3d816091.js"],import.meta.url)),A=l(()=>s(()=>import("./Login-cfbf2756.js"),["./Login-cfbf2756.js","./useBasicLayout-2b2b4d99.js","./vue-3af3b332.js","./index-0db41f00.js","./naive-ui-5201514a.js","./vueuse-motion-b8c5571c.js","./index-5ab0ca25.css","./SliderCaptcha-f5abe94f.js","./_plugin-vue_export-helper-c27b6911.js","./SliderCaptcha-fc473f83.css","./user-333b21c3.js","./Close-a99981ea.js","./index-3d816091.js","./Login-fe38ec7c.css"],import.meta.url)),E=l(()=>s(()=>import("./NoticeDialog-149cc976.js"),["./NoticeDialog-149cc976.js","./index-0db41f00.js","./vue-3af3b332.js","./naive-ui-5201514a.js","./vueuse-motion-b8c5571c.js","./index-5ab0ca25.css","./Close-a99981ea.js","./index-3d816091.js","./preview-ff828f3e.css"],import.meta.url)),C=l(()=>s(()=>import("./PayDialog-59ed12a7.js"),["./PayDialog-59ed12a7.js","./vue-3af3b332.js","./order-1b72be34.js","./index-0db41f00.js","./naive-ui-5201514a.js","./vueuse-motion-b8c5571c.js","./index-5ab0ca25.css","./useBasicLayout-2b2b4d99.js","./_plugin-vue_export-helper-c27b6911.js","./Close-a99981ea.js","./index-3d816091.js","./PayDialog-e540214b.css"],import.meta.url)),P=l(()=>s(()=>import("./PhoneIdentity-23c5d9dd.js"),["./PhoneIdentity-23c5d9dd.js","./vue-3af3b332.js","./index-0db41f00.js","./naive-ui-5201514a.js","./vueuse-motion-b8c5571c.js","./index-5ab0ca25.css","./user-333b21c3.js","./useBasicLayout-2b2b4d99.js","./SliderCaptcha-f5abe94f.js","./_plugin-vue_export-helper-c27b6911.js","./SliderCaptcha-fc473f83.css","./Close-a99981ea.js","./index-3d816091.js"],import.meta.url)),S=l(()=>s(()=>import("./SignInDialog-b0a5c40d.js"),["./SignInDialog-b0a5c40d.js","./vue-3af3b332.js","./index-0db41f00.js","./naive-ui-5201514a.js","./vueuse-motion-b8c5571c.js","./index-5ab0ca25.css","./useBasicLayout-2b2b4d99.js","./_plugin-vue_export-helper-c27b6911.js","./SignInDialog-e667b267.css"],import.meta.url)),R=l(()=>s(()=>import("./UserAgreementDialog-664ce5bc.js"),["./UserAgreementDialog-664ce5bc.js","./index-0db41f00.js","./vue-3af3b332.js","./naive-ui-5201514a.js","./vueuse-motion-b8c5571c.js","./index-5ab0ca25.css","./Close-a99981ea.js","./index-3d816091.js","./preview-ff828f3e.css"],import.meta.url)),V=l(()=>s(()=>import("./index-db6de96c.js"),["./index-db6de96c.js","./vue-3af3b332.js","./logo-7b70ca99.js","./index-0db41f00.js","./naive-ui-5201514a.js","./vueuse-motion-b8c5571c.js","./index-5ab0ca25.css","./index.vue_vue_type_script_setup_true_lang-4f92ac7d.js","./useBasicLayout-2b2b4d99.js","./menu-9d7b0f63.js","./index-3d816091.js","./index-010716d7.js","./appStore-c2d454ab.js"],import.meta.url)),r=$(),m=ee(),p=oe(),n=te(),v=ie(),h=re(),T=e(()=>n.payDialog),O=e(()=>n.goodsDialog),k=e(()=>n.noticeDialog),N=e(()=>n.bindWxDialog),x=e(()=>n.signInDialog),B=e(()=>n.appDialog),W=e(()=>n.identityDialog),G=e(()=>n.phoneIdentityDialog),M=e(()=>n.userAgreementDialog),U=e(()=>n.BadWordsDialog),{isMobile:_}=ne(),q=e(()=>r.loginDialog);e(()=>v.theme);const z=e(()=>r.isLogin),K=e(()=>{var o;return Number((o=r.globalConfig)==null?void 0:o.wechatSilentLoginStatus)===1});function j(){const{token:o}=m.query;if(o){r.setToken(o);const a=m.name;p.replace({name:a,query:{}}),h.success("账户登录成功、开始体验吧！"),r.getUserInfo()}}async function F(){if(m.path==="/home"||!K.value||z.value)return;const a=new URLSearchParams(window.location.search).getAll("code"),c=a.length>0?a[a.length-1]:null;if(c){const d=await se({code:c});d.success&&(r.setToken(d.data),r.getUserInfo(),r.setLoginDialog(!1),p.replace("/chat"))}else{const d=window.location.href.split("#")[0],g=await le({url:d});g.success&&(window.location.href=g.data)}}function H(){var a;const o=window.navigator.userAgent.toLowerCase();o.match(/MicroMessenger/i)&&((a=o==null?void 0:o.match(/MicroMessenger/i))==null?void 0:a[0])==="micromessenger"&&F()}me(()=>{H(),j()});const u=ae(),J=e(()=>u.isStreamIn!==void 0?u.isStreamIn:!1),Q=e(()=>{var o;return Number((o=r.globalConfig)==null?void 0:o.isModelInherited)===1});async function X(o){if(J.value){h.info("AI回复中，请稍后再试");return}u.setStreamIn(!1);try{if(o&&o>0)await u.addNewChatGroup(o);else{const{modelInfo:a}=u.activeConfig;if(a&&Q.value&&u.activeGroupAppId===0){const c={modelInfo:a};await u.addNewChatGroup(0,c)}else await u.addNewChatGroup()}u.setUsingPlugin(null),_.value&&v.setSiderCollapsed(!0),m.path!=="/chat"&&p.push("/chat")}catch{}}pe("createNewChatGroup",X),e(()=>_.value?["rounded-none","shadow-none"]:["dark:border-neutral-800"]),e(()=>_.value?["flex-col"]:["dark:border-neutral-800"]);const Y=e(()=>v.siderCollapsed),Z=e(()=>["h-full",{"pl-[260px]":!_.value&&!Y.value}]);return(o,a)=>{const c=ve("RouterView");return D(),_e("div",be,[ge("div",Ie,[t(i(ue),{class:"h-full","has-sider":""},{default:f(()=>[t(i(V),{class:""}),t(i(ce),{class:fe(["h-full",Z.value]),style:{flex:"1"}},{default:f(()=>[t(c,null,{default:f(({Component:d,route:g})=>[(D(),he(De(d),{key:g.fullPath}))]),_:1})]),_:1},8,["class"])]),_:1}),t(i(A),{visible:q.value},null,8,["visible"]),t(i(C),{visible:T.value},null,8,["visible"]),t(i(L),{visible:O.value},null,8,["visible"]),t(i(E),{visible:k.value},null,8,["visible"]),t(i(w),{visible:N.value},null,8,["visible"]),t(i(S),{visible:x.value},null,8,["visible"]),t(i(b),{visible:B.value},null,8,["visible"]),t(i(y),{visible:W.value},null,8,["visible"]),t(i(P),{visible:G.value},null,8,["visible"]),t(i(R),{visible:M.value},null,8,["visible"]),t(i(I),{visible:U.value},null,8,["visible"])])])}}});export{Se as default};
