'use strict';const _0x26a7bd=_0x5ecc;(function(_0x26ee27,_0x537688){const _0x2e85a7=_0x5ecc,_0x41e444=_0x26ee27();while(!![]){try{const _0x6c1451=parseInt(_0x2e85a7(0x17a))/0x1*(parseInt(_0x2e85a7(0x196))/0x2)+parseInt(_0x2e85a7(0x193))/0x3*(parseInt(_0x2e85a7(0x18d))/0x4)+parseInt(_0x2e85a7(0x163))/0x5+-parseInt(_0x2e85a7(0x188))/0x6*(-parseInt(_0x2e85a7(0x176))/0x7)+parseInt(_0x2e85a7(0x191))/0x8*(-parseInt(_0x2e85a7(0x16f))/0x9)+parseInt(_0x2e85a7(0x16e))/0xa*(-parseInt(_0x2e85a7(0x18e))/0xb)+parseInt(_0x2e85a7(0x17e))/0xc*(parseInt(_0x2e85a7(0x184))/0xd);if(_0x6c1451===_0x537688)break;else _0x41e444['push'](_0x41e444['shift']());}catch(_0x2e4c5d){_0x41e444['push'](_0x41e444['shift']());}}}(_0x538a,0x1d0ce));var __decorate=this&&this[_0x26a7bd(0x17f)]||function(_0x2708f6,_0x5cf40a,_0x53f173,_0x144ead){const _0x505630=_0x26a7bd;var _0x302a4f=arguments['length'],_0x3803ca=_0x302a4f<0x3?_0x5cf40a:_0x144ead===null?_0x144ead=Object['getOwnPropertyDescriptor'](_0x5cf40a,_0x53f173):_0x144ead,_0x5050d6;if(typeof Reflect===_0x505630(0x16c)&&typeof Reflect[_0x505630(0x174)]===_0x505630(0x192))_0x3803ca=Reflect['decorate'](_0x2708f6,_0x5cf40a,_0x53f173,_0x144ead);else{for(var _0x27f23e=_0x2708f6['length']-0x1;_0x27f23e>=0x0;_0x27f23e--)if(_0x5050d6=_0x2708f6[_0x27f23e])_0x3803ca=(_0x302a4f<0x3?_0x5050d6(_0x3803ca):_0x302a4f>0x3?_0x5050d6(_0x5cf40a,_0x53f173,_0x3803ca):_0x5050d6(_0x5cf40a,_0x53f173))||_0x3803ca;}return _0x302a4f>0x3&&_0x3803ca&&Object[_0x505630(0x18c)](_0x5cf40a,_0x53f173,_0x3803ca),_0x3803ca;},__metadata=this&&this[_0x26a7bd(0x17d)]||function(_0x381be2,_0x3d0784){const _0xbaf315=_0x26a7bd;if(typeof Reflect==='object'&&typeof Reflect[_0xbaf315(0x177)]===_0xbaf315(0x192))return Reflect[_0xbaf315(0x177)](_0x381be2,_0x3d0784);},__param=this&&this['__param']||function(_0x2959a2,_0x3bfd34){return function(_0x22ca3d,_0x57eaf9){_0x3bfd34(_0x22ca3d,_0x57eaf9,_0x2959a2);};};Object[_0x26a7bd(0x18c)](exports,_0x26a7bd(0x169),{'value':!![]}),exports['TaskService']=void 0x0;function _0x5ecc(_0x1ca82b,_0x5f36e1){const _0x538a81=_0x538a();return _0x5ecc=function(_0x5ecc8c,_0x4c2e62){_0x5ecc8c=_0x5ecc8c-0x163;let _0x58ac3c=_0x538a81[_0x5ecc8c];return _0x58ac3c;},_0x5ecc(_0x1ca82b,_0x5f36e1);}const globalConfig_service_1=require(_0x26a7bd(0x189)),common_1=require(_0x26a7bd(0x170)),schedule_1=require(_0x26a7bd(0x17c)),userBalance_entity_1=require(_0x26a7bd(0x165)),typeorm_1=require(_0x26a7bd(0x16b)),typeorm_2=require(_0x26a7bd(0x178)),models_service_1=require(_0x26a7bd(0x181));let TaskService=class TaskService{constructor(_0x3b23ce,_0x131858,_0x913336){const _0x1afe03=_0x26a7bd;this[_0x1afe03(0x186)]=_0x3b23ce,this[_0x1afe03(0x171)]=_0x131858,this['modelsService']=_0x913336;}['handleCron'](){const _0x2bc20a=_0x26a7bd;common_1[_0x2bc20a(0x18b)][_0x2bc20a(0x187)]('Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token',_0x2bc20a(0x18a)),this[_0x2bc20a(0x171)]['getWechatAccessToken']();}async[_0x26a7bd(0x18f)](){const _0x4ae945=_0x26a7bd,_0x21352f=await this[_0x4ae945(0x186)][_0x4ae945(0x173)]({'where':{'expirationTime':(0x0,typeorm_2[_0x4ae945(0x183)])(new Date())}});if(!_0x21352f||!_0x21352f['length'])return;_0x21352f[_0x4ae945(0x197)](_0x34545a=>{const _0x354466=_0x4ae945;this[_0x354466(0x186)][_0x354466(0x180)]({'id':_0x34545a['id']},{'expirationTime':null,'packageId':0x0,'memberModel3Count':0x0,'memberModel4Count':0x0,'memberDrawMjCount':0x0})[_0x354466(0x175)](_0x422d12=>{const _0x1768f0=_0x354466;common_1[_0x1768f0(0x18b)]['debug'](_0x34545a['id']+_0x1768f0(0x164),_0x1768f0(0x18a));});});}};__decorate([(0x0,schedule_1[_0x26a7bd(0x16a)])(schedule_1[_0x26a7bd(0x198)][_0x26a7bd(0x168)]),__metadata('design:type',Function),__metadata(_0x26a7bd(0x16d),[]),__metadata(_0x26a7bd(0x185),void 0x0)],TaskService[_0x26a7bd(0x195)],_0x26a7bd(0x179),null),__decorate([(0x0,schedule_1[_0x26a7bd(0x16a)])(schedule_1['CronExpression'][_0x26a7bd(0x166)]),__metadata('design:type',Function),__metadata(_0x26a7bd(0x16d),[]),__metadata(_0x26a7bd(0x185),Promise)],TaskService[_0x26a7bd(0x195)],_0x26a7bd(0x18f),null),TaskService=__decorate([(0x0,common_1[_0x26a7bd(0x194)])(),__param(0x0,(0x0,typeorm_1[_0x26a7bd(0x190)])(userBalance_entity_1[_0x26a7bd(0x172)])),__metadata(_0x26a7bd(0x16d),[typeorm_2[_0x26a7bd(0x182)],globalConfig_service_1[_0x26a7bd(0x167)],models_service_1[_0x26a7bd(0x17b)]])],TaskService),exports[_0x26a7bd(0x18a)]=TaskService;function _0x538a(){const _0x1d399c=['@nestjs/typeorm','object','design:paramtypes','10Agjzpi','9NhniAW','@nestjs/common','globalConfigService','UserBalanceEntity','find','decorate','then','5467AjGDkG','metadata','typeorm','handleCron','3qtMwDN','ModelsService','@nestjs/schedule','__metadata','910332uXDvHR','__decorate','update','../models/models.service','Repository','LessThanOrEqual','13TawsYN','design:returntype','userBalanceEntity','debug','582xJUprF','./../globalConfig/globalConfig.service','TaskService','Logger','defineProperty','68lMeHKt','2604877mwFVZT','checkUserMemerExpire','InjectRepository','463816FZRWbU','function','9426WKOEuI','Injectable','prototype','134242xMOqhS','forEach','CronExpression','36895XzShOQ','会员已到期、清空所有余额并移除会员身份！','../userBalance/userBalance.entity','EVERY_5_MINUTES','GlobalConfigService','EVERY_HOUR','__esModule','Cron'];_0x538a=function(){return _0x1d399c;};return _0x538a();}