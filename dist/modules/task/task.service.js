'use strict';const _0x3e6d54=_0x1c54;(function(_0xfb503d,_0x2e2623){const _0x594609=_0x1c54,_0x3c8aca=_0xfb503d();while(!![]){try{const _0x367ecd=-parseInt(_0x594609(0x14c))/0x1*(-parseInt(_0x594609(0x157))/0x2)+-parseInt(_0x594609(0x13c))/0x3+parseInt(_0x594609(0x150))/0x4+parseInt(_0x594609(0x164))/0x5+-parseInt(_0x594609(0x14e))/0x6+parseInt(_0x594609(0x15b))/0x7+-parseInt(_0x594609(0x167))/0x8*(-parseInt(_0x594609(0x14f))/0x9);if(_0x367ecd===_0x2e2623)break;else _0x3c8aca['push'](_0x3c8aca['shift']());}catch(_0x386240){_0x3c8aca['push'](_0x3c8aca['shift']());}}}(_0x223f,0xe65a9));var __decorate=this&&this[_0x3e6d54(0x154)]||function(_0x128cde,_0x5a22a5,_0x465498,_0x2158c4){const _0x13c9b4=_0x3e6d54;var _0x314c1e=arguments[_0x13c9b4(0x15d)],_0x1df9fa=_0x314c1e<0x3?_0x5a22a5:_0x2158c4===null?_0x2158c4=Object[_0x13c9b4(0x160)](_0x5a22a5,_0x465498):_0x2158c4,_0x594b33;if(typeof Reflect==='object'&&typeof Reflect[_0x13c9b4(0x142)]==='function')_0x1df9fa=Reflect[_0x13c9b4(0x142)](_0x128cde,_0x5a22a5,_0x465498,_0x2158c4);else{for(var _0x104da3=_0x128cde['length']-0x1;_0x104da3>=0x0;_0x104da3--)if(_0x594b33=_0x128cde[_0x104da3])_0x1df9fa=(_0x314c1e<0x3?_0x594b33(_0x1df9fa):_0x314c1e>0x3?_0x594b33(_0x5a22a5,_0x465498,_0x1df9fa):_0x594b33(_0x5a22a5,_0x465498))||_0x1df9fa;}return _0x314c1e>0x3&&_0x1df9fa&&Object[_0x13c9b4(0x13e)](_0x5a22a5,_0x465498,_0x1df9fa),_0x1df9fa;},__metadata=this&&this[_0x3e6d54(0x15e)]||function(_0x3f5aef,_0x4fa4f4){const _0x5cc756=_0x3e6d54;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x5cc756(0x158))return Reflect['metadata'](_0x3f5aef,_0x4fa4f4);},__param=this&&this[_0x3e6d54(0x156)]||function(_0x127498,_0x3e1a19){return function(_0xbf7da5,_0x1a6a1a){_0x3e1a19(_0xbf7da5,_0x1a6a1a,_0x127498);};};Object['defineProperty'](exports,_0x3e6d54(0x13d),{'value':!![]}),exports[_0x3e6d54(0x148)]=void 0x0;const globalConfig_service_1=require(_0x3e6d54(0x169)),common_1=require(_0x3e6d54(0x151)),schedule_1=require(_0x3e6d54(0x153)),userBalance_entity_1=require('../userBalance/userBalance.entity'),typeorm_1=require(_0x3e6d54(0x168)),typeorm_2=require(_0x3e6d54(0x152)),models_service_1=require('../models/models.service');function _0x1c54(_0x5be985,_0x45eb47){const _0x223f21=_0x223f();return _0x1c54=function(_0x1c5420,_0x14212e){_0x1c5420=_0x1c5420-0x13c;let _0x2bd0ff=_0x223f21[_0x1c5420];return _0x2bd0ff;},_0x1c54(_0x5be985,_0x45eb47);}let TaskService=class TaskService{constructor(_0x34361f,_0x1d6b46,_0x42e657){const _0x27c585=_0x3e6d54;this[_0x27c585(0x14b)]=_0x34361f,this[_0x27c585(0x14d)]=_0x1d6b46,this[_0x27c585(0x140)]=_0x42e657;}[_0x3e6d54(0x143)](){const _0x5b2c93=_0x3e6d54;common_1[_0x5b2c93(0x144)][_0x5b2c93(0x15f)]('Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token',_0x5b2c93(0x148)),this[_0x5b2c93(0x14d)][_0x5b2c93(0x165)]();}async[_0x3e6d54(0x16a)](){const _0x183238=_0x3e6d54,_0x4f371e=await this[_0x183238(0x14b)][_0x183238(0x146)]({'where':{'expirationTime':(0x0,typeorm_2[_0x183238(0x15c)])(new Date())}});if(!_0x4f371e||!_0x4f371e[_0x183238(0x15d)])return;_0x4f371e['forEach'](_0x306d11=>{const _0x11c364=_0x183238;this[_0x11c364(0x14b)][_0x11c364(0x155)]({'id':_0x306d11['id']},{'expirationTime':null,'packageId':0x0,'memberModel3Count':0x0,'memberModel4Count':0x0,'memberDrawMjCount':0x0})[_0x11c364(0x163)](_0x25e097=>{const _0x42de64=_0x11c364;common_1[_0x42de64(0x144)][_0x42de64(0x15f)](_0x306d11['id']+_0x42de64(0x161),_0x42de64(0x148));});});}};__decorate([(0x0,schedule_1[_0x3e6d54(0x14a)])(schedule_1[_0x3e6d54(0x162)][_0x3e6d54(0x141)]),__metadata(_0x3e6d54(0x147),Function),__metadata(_0x3e6d54(0x149),[]),__metadata('design:returntype',void 0x0)],TaskService['prototype'],_0x3e6d54(0x143),null),__decorate([(0x0,schedule_1[_0x3e6d54(0x14a)])(schedule_1[_0x3e6d54(0x162)]['EVERY_5_MINUTES']),__metadata(_0x3e6d54(0x147),Function),__metadata(_0x3e6d54(0x149),[]),__metadata(_0x3e6d54(0x15a),Promise)],TaskService[_0x3e6d54(0x145)],_0x3e6d54(0x16a),null),TaskService=__decorate([(0x0,common_1[_0x3e6d54(0x159)])(),__param(0x0,(0x0,typeorm_1[_0x3e6d54(0x166)])(userBalance_entity_1['UserBalanceEntity'])),__metadata(_0x3e6d54(0x149),[typeorm_2['Repository'],globalConfig_service_1[_0x3e6d54(0x13f)],models_service_1['ModelsService']])],TaskService),exports[_0x3e6d54(0x148)]=TaskService;function _0x223f(){const _0x54ec53=['10096398BJRLum','45171xIzJcv','955556QQncyQ','@nestjs/common','typeorm','@nestjs/schedule','__decorate','update','__param','516uvduat','function','Injectable','design:returntype','6390503EOxMMh','LessThanOrEqual','length','__metadata','debug','getOwnPropertyDescriptor','会员已到期、清空所有余额并移除会员身份！','CronExpression','then','336520pJRpOQ','getWechatAccessToken','InjectRepository','1712vQrMem','@nestjs/typeorm','./../globalConfig/globalConfig.service','checkUserMemerExpire','3681156LZVsbl','__esModule','defineProperty','GlobalConfigService','modelsService','EVERY_HOUR','decorate','handleCron','Logger','prototype','find','design:type','TaskService','design:paramtypes','Cron','userBalanceEntity','6047Qsfmzc','globalConfigService'];_0x223f=function(){return _0x54ec53;};return _0x223f();}