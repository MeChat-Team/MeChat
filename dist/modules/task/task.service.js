'use strict';const _0xf51092=_0x290f;(function(_0x2e13b8,_0x5c6ca5){const _0x54ea0c=_0x290f,_0x429bd9=_0x2e13b8();while(!![]){try{const _0x4401a9=parseInt(_0x54ea0c(0x1b1))/0x1*(-parseInt(_0x54ea0c(0x1ab))/0x2)+parseInt(_0x54ea0c(0x19e))/0x3*(parseInt(_0x54ea0c(0x1b2))/0x4)+parseInt(_0x54ea0c(0x1a1))/0x5+parseInt(_0x54ea0c(0x197))/0x6*(parseInt(_0x54ea0c(0x19f))/0x7)+parseInt(_0x54ea0c(0x18d))/0x8*(parseInt(_0x54ea0c(0x1a7))/0x9)+-parseInt(_0x54ea0c(0x1af))/0xa*(-parseInt(_0x54ea0c(0x1a8))/0xb)+-parseInt(_0x54ea0c(0x19d))/0xc;if(_0x4401a9===_0x5c6ca5)break;else _0x429bd9['push'](_0x429bd9['shift']());}catch(_0x4cde09){_0x429bd9['push'](_0x429bd9['shift']());}}}(_0x3072,0x643a2));function _0x290f(_0x153c11,_0x3fd3c8){const _0x307296=_0x3072();return _0x290f=function(_0x290f1c,_0x1e18c0){_0x290f1c=_0x290f1c-0x182;let _0x54c04c=_0x307296[_0x290f1c];return _0x54c04c;},_0x290f(_0x153c11,_0x3fd3c8);}function _0x3072(){const _0xfe2efa=['TaskService','modelsService','18xPvrgu','1516691pOpMLG','./../globalConfig/globalConfig.service','design:paramtypes','5300tttAEx','Injectable','object','../models/models.service','20yyaqwE','update','49bwYpyW','148dGCHol','typeorm','forEach','GlobalConfigService','checkUserMemerExpire','function','userBalanceEntity','design:type','length','find','会员已到期、清空所有余额并移除会员身份！','__metadata','Cron','handleCron','LessThanOrEqual','__param','2241152izxVXa','@nestjs/common','Repository','decorate','CronExpression','@nestjs/typeorm','@nestjs/schedule','InjectRepository','debug','Logger','132hgrRmh','prototype','design:returntype','__esModule','getOwnPropertyDescriptor','EVERY_HOUR','18217140pcDYnz','44310oyPJFc','140721kEsmwq','getWechatAccessToken','1168345CGEOTC','globalConfigService','EVERY_5_MINUTES','then'];_0x3072=function(){return _0xfe2efa;};return _0x3072();}var __decorate=this&&this['__decorate']||function(_0x266336,_0x404a00,_0x14624f,_0x60c34f){const _0xcffd5c=_0x290f;var _0x5782f2=arguments['length'],_0x5995ec=_0x5782f2<0x3?_0x404a00:_0x60c34f===null?_0x60c34f=Object[_0xcffd5c(0x19b)](_0x404a00,_0x14624f):_0x60c34f,_0x5e36ff;if(typeof Reflect===_0xcffd5c(0x1ad)&&typeof Reflect[_0xcffd5c(0x190)]===_0xcffd5c(0x182))_0x5995ec=Reflect['decorate'](_0x266336,_0x404a00,_0x14624f,_0x60c34f);else{for(var _0x29de9b=_0x266336[_0xcffd5c(0x185)]-0x1;_0x29de9b>=0x0;_0x29de9b--)if(_0x5e36ff=_0x266336[_0x29de9b])_0x5995ec=(_0x5782f2<0x3?_0x5e36ff(_0x5995ec):_0x5782f2>0x3?_0x5e36ff(_0x404a00,_0x14624f,_0x5995ec):_0x5e36ff(_0x404a00,_0x14624f))||_0x5995ec;}return _0x5782f2>0x3&&_0x5995ec&&Object['defineProperty'](_0x404a00,_0x14624f,_0x5995ec),_0x5995ec;},__metadata=this&&this[_0xf51092(0x188)]||function(_0x46c880,_0x59b4c7){const _0x6af829=_0xf51092;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x6af829(0x182))return Reflect['metadata'](_0x46c880,_0x59b4c7);},__param=this&&this[_0xf51092(0x18c)]||function(_0x3fd129,_0x5a9cec){return function(_0x1c0ae3,_0x1e934d){_0x5a9cec(_0x1c0ae3,_0x1e934d,_0x3fd129);};};Object['defineProperty'](exports,_0xf51092(0x19a),{'value':!![]}),exports[_0xf51092(0x1a5)]=void 0x0;const globalConfig_service_1=require(_0xf51092(0x1a9)),common_1=require(_0xf51092(0x18e)),schedule_1=require(_0xf51092(0x193)),userBalance_entity_1=require('../userBalance/userBalance.entity'),typeorm_1=require(_0xf51092(0x192)),typeorm_2=require(_0xf51092(0x1b3)),models_service_1=require(_0xf51092(0x1ae));let TaskService=class TaskService{constructor(_0x38514c,_0x4c5e02,_0x538454){const _0x115b8a=_0xf51092;this[_0x115b8a(0x183)]=_0x38514c,this[_0x115b8a(0x1a2)]=_0x4c5e02,this[_0x115b8a(0x1a6)]=_0x538454;}[_0xf51092(0x18a)](){const _0x52334e=_0xf51092;common_1[_0x52334e(0x196)][_0x52334e(0x195)]('Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token',_0x52334e(0x1a5)),this[_0x52334e(0x1a2)][_0x52334e(0x1a0)]();}async[_0xf51092(0x1b6)](){const _0x543424=_0xf51092,_0x407927=await this[_0x543424(0x183)][_0x543424(0x186)]({'where':{'expirationTime':(0x0,typeorm_2[_0x543424(0x18b)])(new Date())}});if(!_0x407927||!_0x407927[_0x543424(0x185)])return;_0x407927[_0x543424(0x1b4)](_0xc08111=>{const _0x2981dc=_0x543424;this[_0x2981dc(0x183)][_0x2981dc(0x1b0)]({'id':_0xc08111['id']},{'expirationTime':null,'packageId':0x0,'memberModel3Count':0x0,'memberModel4Count':0x0,'memberDrawMjCount':0x0})[_0x2981dc(0x1a4)](_0x2577f2=>{const _0x3098a3=_0x2981dc;common_1['Logger'][_0x3098a3(0x195)](_0xc08111['id']+_0x3098a3(0x187),_0x3098a3(0x1a5));});});}};__decorate([(0x0,schedule_1[_0xf51092(0x189)])(schedule_1[_0xf51092(0x191)][_0xf51092(0x19c)]),__metadata(_0xf51092(0x184),Function),__metadata('design:paramtypes',[]),__metadata(_0xf51092(0x199),void 0x0)],TaskService[_0xf51092(0x198)],_0xf51092(0x18a),null),__decorate([(0x0,schedule_1[_0xf51092(0x189)])(schedule_1[_0xf51092(0x191)][_0xf51092(0x1a3)]),__metadata(_0xf51092(0x184),Function),__metadata(_0xf51092(0x1aa),[]),__metadata('design:returntype',Promise)],TaskService[_0xf51092(0x198)],_0xf51092(0x1b6),null),TaskService=__decorate([(0x0,common_1[_0xf51092(0x1ac)])(),__param(0x0,(0x0,typeorm_1[_0xf51092(0x194)])(userBalance_entity_1['UserBalanceEntity'])),__metadata(_0xf51092(0x1aa),[typeorm_2[_0xf51092(0x18f)],globalConfig_service_1[_0xf51092(0x1b5)],models_service_1['ModelsService']])],TaskService),exports[_0xf51092(0x1a5)]=TaskService;