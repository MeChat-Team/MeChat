'use strict';const _0x195bce=_0x2f47;(function(_0x5f18c0,_0x30e6c2){const _0x5f49ce=_0x2f47,_0xa4d80b=_0x5f18c0();while(!![]){try{const _0xc4d576=-parseInt(_0x5f49ce(0xbb))/0x1*(-parseInt(_0x5f49ce(0xb1))/0x2)+parseInt(_0x5f49ce(0xad))/0x3*(parseInt(_0x5f49ce(0x9c))/0x4)+parseInt(_0x5f49ce(0xb0))/0x5*(-parseInt(_0x5f49ce(0xc5))/0x6)+parseInt(_0x5f49ce(0xbc))/0x7*(-parseInt(_0x5f49ce(0xc4))/0x8)+parseInt(_0x5f49ce(0xb4))/0x9+-parseInt(_0x5f49ce(0xb3))/0xa+-parseInt(_0x5f49ce(0xca))/0xb;if(_0xc4d576===_0x30e6c2)break;else _0xa4d80b['push'](_0xa4d80b['shift']());}catch(_0x1ab7a2){_0xa4d80b['push'](_0xa4d80b['shift']());}}}(_0x4cdb,0x6dbd0));function _0x2f47(_0x417cf9,_0x89a9e9){const _0x4cdbf8=_0x4cdb();return _0x2f47=function(_0x2f4757,_0x2e3985){_0x2f4757=_0x2f4757-0x99;let _0x53e8a9=_0x4cdbf8[_0x2f4757];return _0x53e8a9;},_0x2f47(_0x417cf9,_0x89a9e9);}var __decorate=this&&this[_0x195bce(0xbd)]||function(_0x465767,_0x5185ef,_0x13acfb,_0x1e4035){const _0x32c2c0=_0x195bce;var _0x35c91d=arguments[_0x32c2c0(0xae)],_0x3e3b53=_0x35c91d<0x3?_0x5185ef:_0x1e4035===null?_0x1e4035=Object[_0x32c2c0(0x9f)](_0x5185ef,_0x13acfb):_0x1e4035,_0x4b6d95;if(typeof Reflect==='object'&&typeof Reflect[_0x32c2c0(0xc2)]==='function')_0x3e3b53=Reflect[_0x32c2c0(0xc2)](_0x465767,_0x5185ef,_0x13acfb,_0x1e4035);else{for(var _0x2a787d=_0x465767[_0x32c2c0(0xae)]-0x1;_0x2a787d>=0x0;_0x2a787d--)if(_0x4b6d95=_0x465767[_0x2a787d])_0x3e3b53=(_0x35c91d<0x3?_0x4b6d95(_0x3e3b53):_0x35c91d>0x3?_0x4b6d95(_0x5185ef,_0x13acfb,_0x3e3b53):_0x4b6d95(_0x5185ef,_0x13acfb))||_0x3e3b53;}return _0x35c91d>0x3&&_0x3e3b53&&Object[_0x32c2c0(0xa9)](_0x5185ef,_0x13acfb,_0x3e3b53),_0x3e3b53;},__metadata=this&&this['__metadata']||function(_0x42efc0,_0x2d0beb){const _0x4c4aa8=_0x195bce;if(typeof Reflect===_0x4c4aa8(0xc0)&&typeof Reflect[_0x4c4aa8(0xb9)]===_0x4c4aa8(0xbe))return Reflect[_0x4c4aa8(0xb9)](_0x42efc0,_0x2d0beb);},__param=this&&this[_0x195bce(0x9d)]||function(_0x29ec18,_0x430b08){return function(_0xca843f,_0x22c86f){_0x430b08(_0xca843f,_0x22c86f,_0x29ec18);};};Object[_0x195bce(0xa9)](exports,_0x195bce(0xb5),{'value':!![]}),exports[_0x195bce(0xa1)]=void 0x0;const globalConfig_service_1=require(_0x195bce(0xba)),common_1=require(_0x195bce(0xa0)),schedule_1=require(_0x195bce(0x99)),userBalance_entity_1=require(_0x195bce(0xc3)),typeorm_1=require('@nestjs/typeorm'),typeorm_2=require(_0x195bce(0xbf)),models_service_1=require(_0x195bce(0xc6));let TaskService=class TaskService{constructor(_0x2062fc,_0x566ccc,_0x6718bd){const _0x25a660=_0x195bce;this['userBalanceEntity']=_0x2062fc,this['globalConfigService']=_0x566ccc,this[_0x25a660(0xc8)]=_0x6718bd;}[_0x195bce(0xa3)](){const _0xab453e=_0x195bce;common_1[_0xab453e(0xb6)][_0xab453e(0xac)]('Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token',_0xab453e(0xa1)),this['globalConfigService']['getWechatAccessToken']();}async[_0x195bce(0x9e)](){const _0x3bcdb7=_0x195bce,_0x55dd0d=await this[_0x3bcdb7(0xc9)][_0x3bcdb7(0x9a)]({'where':{'expirationTime':(0x0,typeorm_2['LessThanOrEqual'])(new Date())}});if(!_0x55dd0d||!_0x55dd0d[_0x3bcdb7(0xae)])return;_0x55dd0d[_0x3bcdb7(0xaa)](_0x870310=>{const _0x164a7a=_0x3bcdb7;this[_0x164a7a(0xc9)][_0x164a7a(0xc1)]({'id':_0x870310['id']},{'expirationTime':null,'packageId':0x0,'memberModel3Count':0x0,'memberModel4Count':0x0,'memberDrawMjCount':0x0})[_0x164a7a(0xa6)](_0x272bc5=>{const _0xa3fe67=_0x164a7a;common_1[_0xa3fe67(0xb6)][_0xa3fe67(0xac)](_0x870310['id']+'会员已到期、清空所有余额并移除会员身份！',_0xa3fe67(0xa1));});});}};function _0x4cdb(){const _0x5a1363=['1714730OExfzC','3124134bytwpN','__esModule','Logger','GlobalConfigService','prototype','metadata','./../globalConfig/globalConfig.service','55884WsgoGg','7UOnifn','__decorate','function','typeorm','object','update','decorate','../userBalance/userBalance.entity','3605696JPanho','10524gmTiLD','../models/models.service','design:type','modelsService','userBalanceEntity','533786sIynKj','@nestjs/schedule','find','Repository','292bmoZGc','__param','checkUserMemerExpire','getOwnPropertyDescriptor','@nestjs/common','TaskService','Injectable','handleCron','EVERY_5_MINUTES','design:paramtypes','then','design:returntype','Cron','defineProperty','forEach','InjectRepository','debug','21945lnbncw','length','UserBalanceEntity','115qJAtKT','10UnnwNw','CronExpression'];_0x4cdb=function(){return _0x5a1363;};return _0x4cdb();}__decorate([(0x0,schedule_1[_0x195bce(0xa8)])(schedule_1[_0x195bce(0xb2)]['EVERY_HOUR']),__metadata(_0x195bce(0xc7),Function),__metadata(_0x195bce(0xa5),[]),__metadata('design:returntype',void 0x0)],TaskService['prototype'],_0x195bce(0xa3),null),__decorate([(0x0,schedule_1[_0x195bce(0xa8)])(schedule_1[_0x195bce(0xb2)][_0x195bce(0xa4)]),__metadata(_0x195bce(0xc7),Function),__metadata('design:paramtypes',[]),__metadata(_0x195bce(0xa7),Promise)],TaskService[_0x195bce(0xb8)],_0x195bce(0x9e),null),TaskService=__decorate([(0x0,common_1[_0x195bce(0xa2)])(),__param(0x0,(0x0,typeorm_1[_0x195bce(0xab)])(userBalance_entity_1[_0x195bce(0xaf)])),__metadata(_0x195bce(0xa5),[typeorm_2[_0x195bce(0x9b)],globalConfig_service_1[_0x195bce(0xb7)],models_service_1['ModelsService']])],TaskService),exports[_0x195bce(0xa1)]=TaskService;