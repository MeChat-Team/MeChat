'use strict';const _0x244c10=_0x236f;(function(_0x15796d,_0xff5216){const _0xcee073=_0x236f,_0x1fae6b=_0x15796d();while(!![]){try{const _0x1bb0c0=parseInt(_0xcee073(0x108))/0x1+-parseInt(_0xcee073(0xfe))/0x2+parseInt(_0xcee073(0x113))/0x3*(-parseInt(_0xcee073(0x106))/0x4)+parseInt(_0xcee073(0x111))/0x5*(-parseInt(_0xcee073(0xec))/0x6)+parseInt(_0xcee073(0xea))/0x7+parseInt(_0xcee073(0xf6))/0x8*(parseInt(_0xcee073(0x102))/0x9)+parseInt(_0xcee073(0x112))/0xa*(parseInt(_0xcee073(0xff))/0xb);if(_0x1bb0c0===_0xff5216)break;else _0x1fae6b['push'](_0x1fae6b['shift']());}catch(_0x1c46fb){_0x1fae6b['push'](_0x1fae6b['shift']());}}}(_0x440a,0x2dc11));function _0x440a(){const _0x4e3cad=['UserBalanceEntity','../models/models.service','metadata','55115bEhvRw','2520220XuZEfx','329544yUKaiX','Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token','object','function','prototype','getWechatAccessToken','@nestjs/schedule','modelsService','InjectRepository','533687yZYlNC','GlobalConfigService','138UPPVWr','Cron','design:type','./../globalConfig/globalConfig.service','handleCron','design:returntype','update','debug','@nestjs/common','typeorm','40ZThqrg','userBalanceEntity','EVERY_5_MINUTES','ModelsService','Logger','会员已到期、清空所有余额并移除会员身份！','TaskService','Injectable','381638BSficg','11JkAsSm','defineProperty','Repository','121383LyxEAn','forEach','design:paramtypes','length','4CkCzjc','__metadata','345907PBLAwM','getOwnPropertyDescriptor','checkUserMemerExpire','globalConfigService','CronExpression','__param'];_0x440a=function(){return _0x4e3cad;};return _0x440a();}var __decorate=this&&this['__decorate']||function(_0x243d91,_0x188765,_0x2dbfb9,_0x23b59d){const _0x166e43=_0x236f;var _0x1b7dc5=arguments['length'],_0x4e46f2=_0x1b7dc5<0x3?_0x188765:_0x23b59d===null?_0x23b59d=Object[_0x166e43(0x109)](_0x188765,_0x2dbfb9):_0x23b59d,_0x32c551;if(typeof Reflect===_0x166e43(0xe3)&&typeof Reflect['decorate']===_0x166e43(0xe4))_0x4e46f2=Reflect['decorate'](_0x243d91,_0x188765,_0x2dbfb9,_0x23b59d);else{for(var _0x5b1d21=_0x243d91[_0x166e43(0x105)]-0x1;_0x5b1d21>=0x0;_0x5b1d21--)if(_0x32c551=_0x243d91[_0x5b1d21])_0x4e46f2=(_0x1b7dc5<0x3?_0x32c551(_0x4e46f2):_0x1b7dc5>0x3?_0x32c551(_0x188765,_0x2dbfb9,_0x4e46f2):_0x32c551(_0x188765,_0x2dbfb9))||_0x4e46f2;}return _0x1b7dc5>0x3&&_0x4e46f2&&Object[_0x166e43(0x100)](_0x188765,_0x2dbfb9,_0x4e46f2),_0x4e46f2;},__metadata=this&&this[_0x244c10(0x107)]||function(_0x3eb46e,_0x34ac5a){const _0x189df3=_0x244c10;if(typeof Reflect==='object'&&typeof Reflect[_0x189df3(0x110)]===_0x189df3(0xe4))return Reflect[_0x189df3(0x110)](_0x3eb46e,_0x34ac5a);},__param=this&&this[_0x244c10(0x10d)]||function(_0x5bf68c,_0x47dce7){return function(_0x1f2911,_0x56fb76){_0x47dce7(_0x1f2911,_0x56fb76,_0x5bf68c);};};Object[_0x244c10(0x100)](exports,'__esModule',{'value':!![]}),exports[_0x244c10(0xfc)]=void 0x0;function _0x236f(_0x684a09,_0x3de37c){const _0x440a25=_0x440a();return _0x236f=function(_0x236ff6,_0x37534e){_0x236ff6=_0x236ff6-0xe3;let _0x3844fb=_0x440a25[_0x236ff6];return _0x3844fb;},_0x236f(_0x684a09,_0x3de37c);}const globalConfig_service_1=require(_0x244c10(0xef)),common_1=require(_0x244c10(0xf4)),schedule_1=require(_0x244c10(0xe7)),userBalance_entity_1=require('../userBalance/userBalance.entity'),typeorm_1=require('@nestjs/typeorm'),typeorm_2=require(_0x244c10(0xf5)),models_service_1=require(_0x244c10(0x10f));let TaskService=class TaskService{constructor(_0x4d8d73,_0x10de17,_0xad5c8){const _0x31bbc3=_0x244c10;this[_0x31bbc3(0xf7)]=_0x4d8d73,this[_0x31bbc3(0x10b)]=_0x10de17,this[_0x31bbc3(0xe8)]=_0xad5c8;}[_0x244c10(0xf0)](){const _0x5acf05=_0x244c10;common_1[_0x5acf05(0xfa)][_0x5acf05(0xf3)](_0x5acf05(0x114),_0x5acf05(0xfc)),this[_0x5acf05(0x10b)][_0x5acf05(0xe6)]();}async[_0x244c10(0x10a)](){const _0x2f30bd=_0x244c10,_0x1f5bb6=await this[_0x2f30bd(0xf7)]['find']({'where':{'expirationTime':(0x0,typeorm_2['LessThanOrEqual'])(new Date())}});if(!_0x1f5bb6||!_0x1f5bb6['length'])return;_0x1f5bb6[_0x2f30bd(0x103)](_0x105916=>{const _0x340f9b=_0x2f30bd;this[_0x340f9b(0xf7)][_0x340f9b(0xf2)]({'id':_0x105916['id']},{'expirationTime':null,'packageId':0x0,'memberModel3Count':0x0,'memberModel4Count':0x0,'memberDrawMjCount':0x0})['then'](_0x2ddf73=>{const _0x5b3063=_0x340f9b;common_1[_0x5b3063(0xfa)][_0x5b3063(0xf3)](_0x105916['id']+_0x5b3063(0xfb),'TaskService');});});}};__decorate([(0x0,schedule_1[_0x244c10(0xed)])(schedule_1[_0x244c10(0x10c)]['EVERY_HOUR']),__metadata(_0x244c10(0xee),Function),__metadata(_0x244c10(0x104),[]),__metadata('design:returntype',void 0x0)],TaskService[_0x244c10(0xe5)],_0x244c10(0xf0),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0x244c10(0x10c)][_0x244c10(0xf8)]),__metadata('design:type',Function),__metadata(_0x244c10(0x104),[]),__metadata(_0x244c10(0xf1),Promise)],TaskService[_0x244c10(0xe5)],_0x244c10(0x10a),null),TaskService=__decorate([(0x0,common_1[_0x244c10(0xfd)])(),__param(0x0,(0x0,typeorm_1[_0x244c10(0xe9)])(userBalance_entity_1[_0x244c10(0x10e)])),__metadata(_0x244c10(0x104),[typeorm_2[_0x244c10(0x101)],globalConfig_service_1[_0x244c10(0xeb)],models_service_1[_0x244c10(0xf9)]])],TaskService),exports[_0x244c10(0xfc)]=TaskService;