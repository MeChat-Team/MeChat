'use strict';function _0x19bc(){const _0x2a9092=['1KKFoPH','应用广场','decorate','menuPath','getOwnPropertyDescriptor','Draw','__metadata','InjectRepository','function','Injectable','缺失必要参数!','HttpStatus','menuListFront','object','推广计划','__decorate','2196531xldglR','567LQZUaj','./menu.entity','专业绘画','4988720UCViMT','__esModule','/app-store','Midjourney','ri:landscape-line','ri:message-3-line','typeorm','isSystem','ri:account-pin-box-line','基础绘画','4jWMxIY','menuPlatform','save','find','2154482ddvqpU','menuEntity','7751792ifiOmm','icon-park-outline:shopping','@nestjs/common','ant-design:appstore-outlined','HttpException','/chat','Share','BAD_REQUEST','/midjourney','visibleMenu','metadata','Mind','MenuService','绘画广场','2299562ogqYqd','Chat','/pay','defineProperty','length','initMenu','个人中心','81318OPVaDV','170fdpsuj','2538315wGrnVS','Repository','/market','/draw','delMenu','affected','Market','会员中心','UserCenter','MenuEntity','Pay','design:paramtypes','icon-park-outline:mindmap-map','onModuleInit','/mind','@nestjs/typeorm','update','对话聊天'];_0x19bc=function(){return _0x2a9092;};return _0x19bc();}function _0x44d2(_0x151c71,_0x47c3cc){const _0x19bc75=_0x19bc();return _0x44d2=function(_0x44d288,_0x24a479){_0x44d288=_0x44d288-0x12b;let _0x556d94=_0x19bc75[_0x44d288];return _0x556d94;},_0x44d2(_0x151c71,_0x47c3cc);}const _0x43bdfd=_0x44d2;(function(_0x3a7aeb,_0x29d466){const _0x1ea6d6=_0x44d2,_0xdc3d47=_0x3a7aeb();while(!![]){try{const _0x45521d=-parseInt(_0x1ea6d6(0x146))/0x1*(parseInt(_0x1ea6d6(0x12b))/0x2)+parseInt(_0x1ea6d6(0x156))/0x3*(-parseInt(_0x1ea6d6(0x164))/0x4)+-parseInt(_0x1ea6d6(0x15a))/0x5+-parseInt(_0x1ea6d6(0x132))/0x6*(parseInt(_0x1ea6d6(0x157))/0x7)+parseInt(_0x1ea6d6(0x16a))/0x8+parseInt(_0x1ea6d6(0x134))/0x9+-parseInt(_0x1ea6d6(0x133))/0xa*(-parseInt(_0x1ea6d6(0x168))/0xb);if(_0x45521d===_0x29d466)break;else _0xdc3d47['push'](_0xdc3d47['shift']());}catch(_0x3446f3){_0xdc3d47['push'](_0xdc3d47['shift']());}}}(_0x19bc,0x93420));var __decorate=this&&this[_0x43bdfd(0x155)]||function(_0x1e3d1c,_0xf945c4,_0x5e6c14,_0x477fc0){const _0x30181b=_0x43bdfd;var _0x404139=arguments['length'],_0x430000=_0x404139<0x3?_0xf945c4:_0x477fc0===null?_0x477fc0=Object[_0x30181b(0x14a)](_0xf945c4,_0x5e6c14):_0x477fc0,_0x213520;if(typeof Reflect==='object'&&typeof Reflect[_0x30181b(0x148)]==='function')_0x430000=Reflect[_0x30181b(0x148)](_0x1e3d1c,_0xf945c4,_0x5e6c14,_0x477fc0);else{for(var _0x5877ce=_0x1e3d1c[_0x30181b(0x12f)]-0x1;_0x5877ce>=0x0;_0x5877ce--)if(_0x213520=_0x1e3d1c[_0x5877ce])_0x430000=(_0x404139<0x3?_0x213520(_0x430000):_0x404139>0x3?_0x213520(_0xf945c4,_0x5e6c14,_0x430000):_0x213520(_0xf945c4,_0x5e6c14))||_0x430000;}return _0x404139>0x3&&_0x430000&&Object[_0x30181b(0x12e)](_0xf945c4,_0x5e6c14,_0x430000),_0x430000;},__metadata=this&&this[_0x43bdfd(0x14c)]||function(_0x403175,_0x4fe50e){const _0x2495d4=_0x43bdfd;if(typeof Reflect===_0x2495d4(0x153)&&typeof Reflect[_0x2495d4(0x174)]===_0x2495d4(0x14e))return Reflect[_0x2495d4(0x174)](_0x403175,_0x4fe50e);},__param=this&&this['__param']||function(_0x3aa8a7,_0x2616dc){return function(_0x1b5600,_0x46b353){_0x2616dc(_0x1b5600,_0x46b353,_0x3aa8a7);};};Object['defineProperty'](exports,_0x43bdfd(0x15b),{'value':!![]}),exports['MenuService']=void 0x0;const common_1=require(_0x43bdfd(0x16c)),typeorm_1=require(_0x43bdfd(0x143)),typeorm_2=require(_0x43bdfd(0x160)),menu_entity_1=require(_0x43bdfd(0x158));let MenuService=class MenuService{constructor(_0x3827a3){const _0x5cdc04=_0x43bdfd;this[_0x5cdc04(0x169)]=_0x3827a3;}async[_0x43bdfd(0x141)](){const _0x1ef9e8=_0x43bdfd;await this[_0x1ef9e8(0x130)]();}async[_0x43bdfd(0x130)](){const _0x39ebf6=_0x43bdfd,_0x4afbf8=await this['menuEntity']['count']();if(_0x4afbf8>0x0)return;const _0x1702e1=[{'menuTipText':_0x39ebf6(0x145),'menuIcon':_0x39ebf6(0x15f),'menuName':_0x39ebf6(0x12c),'menuPath':'/chat','menuType':0x0,'menuPlatform':0x1,'order':0x64},{'menuTipText':_0x39ebf6(0x147),'menuIcon':_0x39ebf6(0x16d),'menuName':'AppStore','menuPath':_0x39ebf6(0x15c),'menuType':0x0,'menuPlatform':0x1,'order':0xc8},{'menuTipText':_0x39ebf6(0x159),'menuIcon':_0x39ebf6(0x15e),'menuName':_0x39ebf6(0x15d),'menuPath':_0x39ebf6(0x172),'menuType':0x0,'menuPlatform':0x1,'order':0x12c},{'menuTipText':_0x39ebf6(0x177),'menuIcon':'solar:album-line-duotone','menuName':_0x39ebf6(0x13a),'menuPath':_0x39ebf6(0x136),'menuType':0x0,'menuPlatform':0x1,'order':0x190},{'menuTipText':_0x39ebf6(0x163),'menuIcon':'fluent:draw-image-24-regular','menuName':_0x39ebf6(0x14b),'menuPath':_0x39ebf6(0x137),'menuType':0x0,'menuPlatform':0x1,'order':0x1f4},{'menuTipText':'思维导图','menuIcon':_0x39ebf6(0x140),'menuName':_0x39ebf6(0x175),'menuPath':_0x39ebf6(0x142),'menuType':0x0,'menuPlatform':0x1,'order':0x258},{'menuTipText':_0x39ebf6(0x13b),'menuIcon':_0x39ebf6(0x16b),'menuName':_0x39ebf6(0x13e),'menuPath':_0x39ebf6(0x12d),'menuType':0x0,'menuPlatform':0x1,'order':0x2bc},{'menuTipText':_0x39ebf6(0x154),'menuIcon':'uiw:share','menuName':_0x39ebf6(0x170),'menuPath':'/share','menuType':0x0,'menuPlatform':0x1,'order':0x320}],_0x19e90c=[{'menuTipText':_0x39ebf6(0x145),'menuIcon':_0x39ebf6(0x15f),'menuName':_0x39ebf6(0x12c),'menuPath':_0x39ebf6(0x16f),'menuType':0x0,'menuPlatform':0x0,'order':0x64},{'menuTipText':_0x39ebf6(0x147),'menuIcon':_0x39ebf6(0x16d),'menuName':'AppStore','menuPath':_0x39ebf6(0x15c),'menuType':0x0,'menuPlatform':0x0,'order':0xc8},{'menuTipText':_0x39ebf6(0x159),'menuIcon':'ri:landscape-line','menuName':_0x39ebf6(0x15d),'menuPath':'/midjourney','menuType':0x0,'menuPlatform':0x0,'order':0x12c},{'menuTipText':'思维导图','menuIcon':_0x39ebf6(0x140),'menuName':_0x39ebf6(0x175),'menuPath':_0x39ebf6(0x142),'menuType':0x0,'menuPlatform':0x0,'order':0x190},{'menuTipText':_0x39ebf6(0x131),'menuIcon':_0x39ebf6(0x162),'menuName':_0x39ebf6(0x13c),'menuPath':'/user-center','menuType':0x0,'menuPlatform':0x0,'order':0x1f4}],_0x3a11aa=[..._0x1702e1,..._0x19e90c];await this[_0x39ebf6(0x169)]['save'](_0x3a11aa);}async['queryMenu'](_0x2c3dd5){const _0x3b2c6e=_0x43bdfd,{menuPlatform:_0x5a9cd3}=_0x2c3dd5;let _0x31b550={};return _0x5a9cd3&&(_0x31b550[_0x3b2c6e(0x165)]=_0x5a9cd3),await this[_0x3b2c6e(0x169)][_0x3b2c6e(0x167)]({'where':_0x31b550,'order':{'order':'ASC'}});}async[_0x43bdfd(0x152)](_0x4f2d7c){const _0xf5982f=_0x43bdfd,{menuPlatform:_0x46efb4}=_0x4f2d7c;let _0x230627={'isShow':!![]};return _0x46efb4&&(_0x230627[_0xf5982f(0x165)]=_0x46efb4),await this[_0xf5982f(0x169)][_0xf5982f(0x167)]({'where':_0x230627,'order':{'order':'ASC'}});}async[_0x43bdfd(0x173)](_0x16aba2){const _0x3d3667=_0x43bdfd,{id:_0x53757e}=_0x16aba2;if(!_0x53757e)return;const _0x38dfba=await this[_0x3d3667(0x169)]['findOne']({'where':{'id':_0x53757e}});if(!_0x38dfba)return;const {isShow:_0x17ee2e}=_0x38dfba,_0xbfedad=await this['menuEntity'][_0x3d3667(0x144)]({'id':_0x53757e},{'isShow':!_0x17ee2e});return _0xbfedad[_0x3d3667(0x139)]>0x0;}async['setMenu'](_0x28e4ad){const _0xda7687=_0x43bdfd,{id:_0x5702d3}=_0x28e4ad;_0x28e4ad['isSystem']?_0x28e4ad[_0xda7687(0x149)]='':_0x28e4ad['menuIframeUrl']='';delete _0x28e4ad[_0xda7687(0x161)];try{if(_0x5702d3){const _0x41e0ee=await this['menuEntity'][_0xda7687(0x144)]({'id':_0x5702d3},_0x28e4ad);return _0x41e0ee[_0xda7687(0x139)]>0x0;}else{const _0x276fa2=await this['menuEntity'][_0xda7687(0x166)](_0x28e4ad);return _0x276fa2;}}catch(_0xf4ca4){throw new common_1[(_0xda7687(0x16e))]('操作菜单失败!',common_1[_0xda7687(0x151)][_0xda7687(0x171)]);}}async[_0x43bdfd(0x138)](_0x5c9aea){const _0x42a8ce=_0x43bdfd,{id:_0x217230}=_0x5c9aea;if(!_0x217230)throw new common_1['HttpException'](_0x42a8ce(0x150),common_1['HttpStatus']['BAD_REQUEST']);const _0x4b2889=await this[_0x42a8ce(0x169)]['delete']({'id':_0x217230});return _0x4b2889;}};MenuService=__decorate([(0x0,common_1[_0x43bdfd(0x14f)])(),__param(0x0,(0x0,typeorm_1[_0x43bdfd(0x14d)])(menu_entity_1[_0x43bdfd(0x13d)])),__metadata(_0x43bdfd(0x13f),[typeorm_2[_0x43bdfd(0x135)]])],MenuService),exports[_0x43bdfd(0x176)]=MenuService;