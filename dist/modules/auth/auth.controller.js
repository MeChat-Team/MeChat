'use strict';const _0x21ea9f=_0x2331;function _0x2331(_0x168277,_0x3aad62){const _0x25a679=_0x25a6();return _0x2331=function(_0x233183,_0x1e83ef){_0x233183=_0x233183-0x9d;let _0xa95fc5=_0x25a679[_0x233183];return _0xa95fc5;},_0x2331(_0x168277,_0x3aad62);}(function(_0x300f09,_0x51d4b3){const _0x217260=_0x2331,_0x51bb55=_0x300f09();while(!![]){try{const _0x5c404d=parseInt(_0x217260(0xeb))/0x1+parseInt(_0x217260(0xcd))/0x2*(-parseInt(_0x217260(0xa6))/0x3)+parseInt(_0x217260(0xe6))/0x4+parseInt(_0x217260(0x9d))/0x5*(-parseInt(_0x217260(0xc0))/0x6)+-parseInt(_0x217260(0xea))/0x7+parseInt(_0x217260(0xa4))/0x8+-parseInt(_0x217260(0xdd))/0x9*(parseInt(_0x217260(0xed))/0xa);if(_0x5c404d===_0x51d4b3)break;else _0x51bb55['push'](_0x51bb55['shift']());}catch(_0x8cfeaf){_0x51bb55['push'](_0x51bb55['shift']());}}}(_0x25a6,0x3290a));function _0x25a6(){const _0x4092d0=['ApiTags','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...','UpdatePasswordDto','256067WTaLxB','400146JCRBPx','authService','310hLoGkL','323705pbCfEw','JwtAuthGuard','./dto/authLogin.dto','login','design:paramtypes','获取用户个人信息','../../common/auth/jwtAuth.guard','412480VNtRJp','当前密码错误！','27AMCOxs','@nestjs/common','发送验证码','sendCode','验证码发送成功、请填写验证码完成注册！','__esModule','updatePassword','./auth.service','请求过于频繁','验证手机号','UserRegisterDto','UseGuards','prototype','\x0a发送验证码到指定的邮箱或手机号。\x0a\x0a###\x20频率限制\x0a-\x20同一邮箱/手机号60秒内只能发送一次验证码\x0a-\x20每个邮箱/手机号每天最多发送10次\x0a-\x20验证码有效期为5分钟\x0a\x0a###\x20使用场景\x0a-\x20注册验证：isLogin\x20=\x20false\x0a-\x20登录验证：isLogin\x20=\x20true\x0a\x0a###\x20注意事项\x0a-\x20手机号格式：11位数字，以1开头\x0a-\x20邮箱格式：标准邮箱格式（example@domain.com）\x0a-\x20如果是登录场景，系统会检查该手机号/邮箱是否已注册\x0a\x20\x20\x20\x20','登录成功，返回\x20JWT\x20token','验证码发送成功','请求参数错误','AuthService','Req','register','verifyIdentity','ApiOperation','object','@nestjs/swagger','__decorate','用户不存在，请先注册！','18GbIcEW','design:type','function','ValidationPipe','Post','./dto/authRegister.dto','UserLoginDto','__metadata','Bad\x20Request','metadata','用户不存在','请提供有效的邮箱地址或手机号码。','verifyPhoneIdentity','11810TlzldB','登录失败','Body','支持使用用户名/邮箱/手机号\x20+\x20密码进行登录','number','./dto/sendCode.dto','验证身份','ApiResponse','design:returntype','SendCodeDto','用户登录','loginWithCaptcha','Controller','length','defineProperty','用户更改密码','909rlmEHC','AuthController','Not\x20Found','ApiBearerAuth','decorate','auth','./dto/updatePassword.dto','getInfo','string','169952gPrPAq'];_0x25a6=function(){return _0x4092d0;};return _0x25a6();}var __decorate=this&&this[_0x21ea9f(0xbe)]||function(_0x37dbdd,_0x2b3a83,_0x39a368,_0xab12b4){const _0x3c1f98=_0x21ea9f;var _0x4fcac0=arguments[_0x3c1f98(0xda)],_0x5263ad=_0x4fcac0<0x3?_0x2b3a83:_0xab12b4===null?_0xab12b4=Object['getOwnPropertyDescriptor'](_0x2b3a83,_0x39a368):_0xab12b4,_0x76d713;if(typeof Reflect===_0x3c1f98(0xbc)&&typeof Reflect[_0x3c1f98(0xe1)]===_0x3c1f98(0xc2))_0x5263ad=Reflect[_0x3c1f98(0xe1)](_0x37dbdd,_0x2b3a83,_0x39a368,_0xab12b4);else{for(var _0x559b13=_0x37dbdd[_0x3c1f98(0xda)]-0x1;_0x559b13>=0x0;_0x559b13--)if(_0x76d713=_0x37dbdd[_0x559b13])_0x5263ad=(_0x4fcac0<0x3?_0x76d713(_0x5263ad):_0x4fcac0>0x3?_0x76d713(_0x2b3a83,_0x39a368,_0x5263ad):_0x76d713(_0x2b3a83,_0x39a368))||_0x5263ad;}return _0x4fcac0>0x3&&_0x5263ad&&Object[_0x3c1f98(0xdb)](_0x2b3a83,_0x39a368,_0x5263ad),_0x5263ad;},__metadata=this&&this[_0x21ea9f(0xc7)]||function(_0x2850b6,_0x295721){const _0x28816d=_0x21ea9f;if(typeof Reflect===_0x28816d(0xbc)&&typeof Reflect[_0x28816d(0xc9)]==='function')return Reflect[_0x28816d(0xc9)](_0x2850b6,_0x295721);},__param=this&&this['__param']||function(_0xde1a0d,_0x3893b2){return function(_0x342d7d,_0x5f3f07){_0x3893b2(_0x342d7d,_0x5f3f07,_0xde1a0d);};};Object[_0x21ea9f(0xdb)](exports,_0x21ea9f(0xab),{'value':!![]}),exports['AuthController']=void 0x0;const jwtAuth_guard_1=require(_0x21ea9f(0xa3)),common_1=require(_0x21ea9f(0xa7)),swagger_1=require(_0x21ea9f(0xbd)),auth_service_1=require(_0x21ea9f(0xad)),authLogin_dto_1=require(_0x21ea9f(0x9f)),authRegister_dto_1=require(_0x21ea9f(0xc5)),updatePassword_dto_1=require(_0x21ea9f(0xe3)),loginWithCaptcha_dto_1=require('./dto/loginWithCaptcha.dto'),sendCode_dto_1=require(_0x21ea9f(0xd2));let AuthController=class AuthController{constructor(_0x4d5638){const _0x2f5142=_0x21ea9f;this[_0x2f5142(0xec)]=_0x4d5638;}async['register'](_0x34f31f,_0x453457){return await this['authService']['register'](_0x34f31f,_0x453457);}async['login'](_0xb59bae,_0x4d9e99){const _0x3c80cf=_0x21ea9f;return this[_0x3c80cf(0xec)][_0x3c80cf(0xa0)](_0xb59bae,_0x4d9e99);}async[_0x21ea9f(0xd8)](_0xfa8cc9,_0x262120){const _0x1db3f0=_0x21ea9f;return this[_0x1db3f0(0xec)][_0x1db3f0(0xd8)](_0xfa8cc9,_0x262120);}async[_0x21ea9f(0xac)](_0x537f82,_0xad76a6){const _0x59a64e=_0x21ea9f;return this[_0x59a64e(0xec)]['updatePassword'](_0x537f82,_0xad76a6);}async[_0x21ea9f(0xe4)](_0x49eb7c){const _0x9224de=_0x21ea9f;return this[_0x9224de(0xec)][_0x9224de(0xe4)](_0x49eb7c);}async[_0x21ea9f(0xa9)](_0x5cec14){const _0xfe30a5=_0x21ea9f;return await this[_0xfe30a5(0xec)][_0xfe30a5(0xa9)](_0x5cec14);}async[_0x21ea9f(0xba)](_0x4d523b,_0x4ffbbc){const _0xee621a=_0x21ea9f;return this[_0xee621a(0xec)][_0xee621a(0xba)](_0x4d523b,_0x4ffbbc);}async['verifyPhoneIdentity'](_0xc6203b,_0x52968c){const _0xb4ce8=_0x21ea9f;return this['authService'][_0xb4ce8(0xcc)](_0xc6203b,_0x52968c);}};__decorate([(0x0,common_1[_0x21ea9f(0xc4)])(_0x21ea9f(0xb9)),(0x0,swagger_1[_0x21ea9f(0xbb)])({'summary':'用户注册'}),__param(0x0,(0x0,common_1['Body'])(new common_1[(_0x21ea9f(0xc3))]({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x21ea9f(0xb8)])()),__metadata(_0x21ea9f(0xc1),Function),__metadata(_0x21ea9f(0xa1),[authRegister_dto_1[_0x21ea9f(0xb0)],Object]),__metadata(_0x21ea9f(0xd5),Promise)],AuthController[_0x21ea9f(0xb2)],'register',null),__decorate([(0x0,common_1[_0x21ea9f(0xc4)])(_0x21ea9f(0xa0)),(0x0,swagger_1['ApiOperation'])({'summary':_0x21ea9f(0xd7),'description':_0x21ea9f(0xd0)}),(0x0,swagger_1[_0x21ea9f(0xd4)])({'status':0xc8,'description':_0x21ea9f(0xb4),'schema':{'type':_0x21ea9f(0xe5),'example':_0x21ea9f(0xe8)}}),(0x0,swagger_1[_0x21ea9f(0xd4)])({'status':0x190,'description':_0x21ea9f(0xce),'schema':{'type':_0x21ea9f(0xbc),'properties':{'statusCode':{'type':_0x21ea9f(0xd1),'example':0x190},'message':{'type':_0x21ea9f(0xe5),'example':_0x21ea9f(0xa5)},'error':{'type':_0x21ea9f(0xe5),'example':_0x21ea9f(0xc8)}}}}),__param(0x0,(0x0,common_1['Body'])(new common_1[(_0x21ea9f(0xc3))]({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x21ea9f(0xb8)])()),__metadata(_0x21ea9f(0xc1),Function),__metadata(_0x21ea9f(0xa1),[authLogin_dto_1[_0x21ea9f(0xc6)],Object]),__metadata(_0x21ea9f(0xd5),Promise)],AuthController[_0x21ea9f(0xb2)],_0x21ea9f(0xa0),null),__decorate([(0x0,common_1[_0x21ea9f(0xc4)])(_0x21ea9f(0xd8)),(0x0,swagger_1[_0x21ea9f(0xbb)])({'summary':'用户使用验证码登录','description':'使用手机号/邮箱\x20+\x20验证码进行登录。需要先调用发送验证码接口获取验证码。'}),(0x0,swagger_1[_0x21ea9f(0xd4)])({'status':0xc8,'description':_0x21ea9f(0xb4),'schema':{'type':_0x21ea9f(0xe5),'example':_0x21ea9f(0xe8)}}),(0x0,swagger_1[_0x21ea9f(0xd4)])({'status':0x190,'description':_0x21ea9f(0xb6),'schema':{'type':_0x21ea9f(0xbc),'properties':{'statusCode':{'type':_0x21ea9f(0xd1),'example':0x190},'message':{'type':_0x21ea9f(0xe5),'example':'验证码已过期，请重新发送！'},'error':{'type':'string','example':_0x21ea9f(0xc8)}}}}),(0x0,swagger_1['ApiResponse'])({'status':0x194,'description':_0x21ea9f(0xca),'schema':{'type':_0x21ea9f(0xbc),'properties':{'statusCode':{'type':_0x21ea9f(0xd1),'example':0x194},'message':{'type':_0x21ea9f(0xe5),'example':_0x21ea9f(0xbf)},'error':{'type':_0x21ea9f(0xe5),'example':_0x21ea9f(0xdf)}}}}),__param(0x0,(0x0,common_1[_0x21ea9f(0xcf)])(new common_1[(_0x21ea9f(0xc3))]({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x21ea9f(0xb8)])()),__metadata('design:type',Function),__metadata(_0x21ea9f(0xa1),[loginWithCaptcha_dto_1['LoginWithCaptchaDto'],Object]),__metadata(_0x21ea9f(0xd5),Promise)],AuthController[_0x21ea9f(0xb2)],_0x21ea9f(0xd8),null),__decorate([(0x0,common_1[_0x21ea9f(0xc4)])('updatePassword'),(0x0,swagger_1[_0x21ea9f(0xbb)])({'summary':_0x21ea9f(0xdc)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x21ea9f(0xe0)])(),__param(0x0,(0x0,common_1[_0x21ea9f(0xb8)])()),__param(0x1,(0x0,common_1[_0x21ea9f(0xcf)])(new common_1[(_0x21ea9f(0xc3))]({'transform':!![]}))),__metadata(_0x21ea9f(0xc1),Function),__metadata('design:paramtypes',[Object,updatePassword_dto_1[_0x21ea9f(0xe9)]]),__metadata(_0x21ea9f(0xd5),Promise)],AuthController[_0x21ea9f(0xb2)],_0x21ea9f(0xac),null),__decorate([(0x0,common_1['Get'])('getInfo'),(0x0,swagger_1['ApiOperation'])({'summary':_0x21ea9f(0xa2)}),(0x0,common_1[_0x21ea9f(0xb1)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x21ea9f(0xb8)])()),__metadata('design:type',Function),__metadata(_0x21ea9f(0xa1),[Object]),__metadata(_0x21ea9f(0xd5),Promise)],AuthController['prototype'],_0x21ea9f(0xe4),null),__decorate([(0x0,common_1[_0x21ea9f(0xc4)])('sendCode'),(0x0,swagger_1[_0x21ea9f(0xbb)])({'summary':_0x21ea9f(0xa8),'description':_0x21ea9f(0xb3)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x21ea9f(0xb5),'schema':{'example':_0x21ea9f(0xaa)}}),(0x0,swagger_1[_0x21ea9f(0xd4)])({'status':0x190,'description':_0x21ea9f(0xb6),'schema':{'example':{'statusCode':0x190,'message':_0x21ea9f(0xcb)}}}),(0x0,swagger_1[_0x21ea9f(0xd4)])({'status':0x1ad,'description':_0x21ea9f(0xae),'schema':{'example':{'statusCode':0x1ad,'message':'今日发送验证码次数已达上限，请24小时后再试！'}}}),__param(0x0,(0x0,common_1[_0x21ea9f(0xcf)])(new common_1[(_0x21ea9f(0xc3))]({'transform':!![]}))),__metadata(_0x21ea9f(0xc1),Function),__metadata(_0x21ea9f(0xa1),[sendCode_dto_1[_0x21ea9f(0xd6)]]),__metadata('design:returntype',Promise)],AuthController['prototype'],_0x21ea9f(0xa9),null),__decorate([(0x0,common_1[_0x21ea9f(0xc4)])(_0x21ea9f(0xba)),(0x0,swagger_1[_0x21ea9f(0xbb)])({'summary':_0x21ea9f(0xd3)}),(0x0,common_1[_0x21ea9f(0xb1)])(jwtAuth_guard_1[_0x21ea9f(0x9e)]),(0x0,swagger_1[_0x21ea9f(0xe0)])(),__param(0x0,(0x0,common_1[_0x21ea9f(0xb8)])()),__param(0x1,(0x0,common_1[_0x21ea9f(0xcf)])(new common_1['ValidationPipe']({'transform':!![]}))),__metadata('design:type',Function),__metadata(_0x21ea9f(0xa1),[Object,Object]),__metadata(_0x21ea9f(0xd5),Promise)],AuthController[_0x21ea9f(0xb2)],_0x21ea9f(0xba),null),__decorate([(0x0,common_1[_0x21ea9f(0xc4)])(_0x21ea9f(0xcc)),(0x0,swagger_1[_0x21ea9f(0xbb)])({'summary':_0x21ea9f(0xaf)}),(0x0,common_1[_0x21ea9f(0xb1)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x21ea9f(0xe0)])(),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x21ea9f(0xcf)])(new common_1['ValidationPipe']({'transform':!![]}))),__metadata(_0x21ea9f(0xc1),Function),__metadata(_0x21ea9f(0xa1),[Object,Object]),__metadata(_0x21ea9f(0xd5),Promise)],AuthController[_0x21ea9f(0xb2)],_0x21ea9f(0xcc),null),AuthController=__decorate([(0x0,swagger_1[_0x21ea9f(0xe7)])('auth'),(0x0,common_1[_0x21ea9f(0xd9)])(_0x21ea9f(0xe2)),__metadata(_0x21ea9f(0xa1),[auth_service_1[_0x21ea9f(0xb7)]])],AuthController),exports[_0x21ea9f(0xde)]=AuthController;