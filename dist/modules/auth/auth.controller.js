'use strict';const _0x4ce498=_0x583e;(function(_0x2fc691,_0x36a8a8){const _0x3266c1=_0x583e,_0x4b166d=_0x2fc691();while(!![]){try{const _0x50485d=parseInt(_0x3266c1(0xe7))/0x1+parseInt(_0x3266c1(0xd1))/0x2+-parseInt(_0x3266c1(0xd2))/0x3+-parseInt(_0x3266c1(0xe6))/0x4*(parseInt(_0x3266c1(0xe5))/0x5)+parseInt(_0x3266c1(0xe0))/0x6+parseInt(_0x3266c1(0xea))/0x7+-parseInt(_0x3266c1(0xd8))/0x8;if(_0x50485d===_0x36a8a8)break;else _0x4b166d['push'](_0x4b166d['shift']());}catch(_0x461239){_0x4b166d['push'](_0x4b166d['shift']());}}}(_0x58a2,0x2739e));function _0x583e(_0x346614,_0x51ee22){const _0x58a258=_0x58a2();return _0x583e=function(_0x583ebc,_0x1068ee){_0x583ebc=_0x583ebc-0xab;let _0x13a79c=_0x58a258[_0x583ebc];return _0x13a79c;},_0x583e(_0x346614,_0x51ee22);}var __decorate=this&&this[_0x4ce498(0xcb)]||function(_0x52a08c,_0x5d2245,_0x58b0eb,_0x237105){const _0xe1f009=_0x4ce498;var _0x42407c=arguments['length'],_0x49823b=_0x42407c<0x3?_0x5d2245:_0x237105===null?_0x237105=Object['getOwnPropertyDescriptor'](_0x5d2245,_0x58b0eb):_0x237105,_0x42a38b;if(typeof Reflect==='object'&&typeof Reflect[_0xe1f009(0xbc)]===_0xe1f009(0xb0))_0x49823b=Reflect[_0xe1f009(0xbc)](_0x52a08c,_0x5d2245,_0x58b0eb,_0x237105);else{for(var _0xabcc26=_0x52a08c['length']-0x1;_0xabcc26>=0x0;_0xabcc26--)if(_0x42a38b=_0x52a08c[_0xabcc26])_0x49823b=(_0x42407c<0x3?_0x42a38b(_0x49823b):_0x42407c>0x3?_0x42a38b(_0x5d2245,_0x58b0eb,_0x49823b):_0x42a38b(_0x5d2245,_0x58b0eb))||_0x49823b;}return _0x42407c>0x3&&_0x49823b&&Object[_0xe1f009(0xce)](_0x5d2245,_0x58b0eb,_0x49823b),_0x49823b;},__metadata=this&&this[_0x4ce498(0xc1)]||function(_0x3e0d93,_0x37d2c4){const _0x39ab20=_0x4ce498;if(typeof Reflect===_0x39ab20(0xb3)&&typeof Reflect[_0x39ab20(0xbe)]===_0x39ab20(0xb0))return Reflect[_0x39ab20(0xbe)](_0x3e0d93,_0x37d2c4);},__param=this&&this[_0x4ce498(0xf6)]||function(_0x59b5cd,_0x4fcebf){return function(_0x4bde78,_0x46bdd8){_0x4fcebf(_0x4bde78,_0x46bdd8,_0x59b5cd);};};function _0x58a2(){const _0x36324c=['验证码发送成功','请求过于频繁','Get','用户使用验证码登录','design:type','登录成功，返回\x20JWT\x20token','UseGuards','@nestjs/swagger','__decorate','JwtAuthGuard','auth','defineProperty','@nestjs/common','design:returntype','632612xoNzwT','24837ktmhbz','verifyIdentity','Bad\x20Request','prototype','Not\x20Found','UserRegisterDto','2825368ikUzAC','请提供有效的邮箱地址或手机号码。','updatePassword','用户登录','UserLoginDto','number','Controller','design:paramtypes','968670ZqqLvp','Req','getInfo','./dto/authRegister.dto','LoginWithCaptchaDto','2700QnBYBX','1652DbEyjr','96307OBKIXF','使用手机号/邮箱\x20+\x20验证码进行登录。需要先调用发送验证码接口获取验证码。','./auth.service','1197574WFFMnh','用户不存在','loginWithCaptcha','登录失败','验证手机号','string','当前密码错误！','UpdatePasswordDto','ApiBearerAuth','AuthController','Post','login','__param','register','ValidationPipe','ApiOperation','ApiTags','sendCode','ApiResponse','./dto/authLogin.dto','function','./dto/sendCode.dto','请求参数错误','object','verifyPhoneIdentity','验证码已过期，请重新发送！','验证码发送成功、请填写验证码完成注册！','今日发送验证码次数已达上限，请24小时后再试！','Body','authService','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...','AuthService','decorate','./dto/loginWithCaptcha.dto','metadata','支持使用用户名/邮箱/手机号\x20+\x20密码进行登录','SendCodeDto','__metadata','用户不存在，请先注册！'];_0x58a2=function(){return _0x36324c;};return _0x58a2();}Object[_0x4ce498(0xce)](exports,'__esModule',{'value':!![]}),exports[_0x4ce498(0xf3)]=void 0x0;const jwtAuth_guard_1=require('../../common/auth/jwtAuth.guard'),common_1=require(_0x4ce498(0xcf)),swagger_1=require(_0x4ce498(0xca)),auth_service_1=require(_0x4ce498(0xe9)),authLogin_dto_1=require(_0x4ce498(0xaf)),authRegister_dto_1=require(_0x4ce498(0xe3)),updatePassword_dto_1=require('./dto/updatePassword.dto'),loginWithCaptcha_dto_1=require(_0x4ce498(0xbd)),sendCode_dto_1=require(_0x4ce498(0xb1));let AuthController=class AuthController{constructor(_0x4b70e8){const _0x2d6e99=_0x4ce498;this[_0x2d6e99(0xb9)]=_0x4b70e8;}async[_0x4ce498(0xf7)](_0xba660a,_0x15bf5c){return await this['authService']['register'](_0xba660a,_0x15bf5c);}async['login'](_0x20459f,_0xdd872a){const _0x2b6653=_0x4ce498;return this['authService'][_0x2b6653(0xf5)](_0x20459f,_0xdd872a);}async[_0x4ce498(0xec)](_0x486dbd,_0x4669bc){const _0x258c4a=_0x4ce498;return this['authService'][_0x258c4a(0xec)](_0x486dbd,_0x4669bc);}async[_0x4ce498(0xda)](_0x57a53c,_0x4c72f9){const _0x292586=_0x4ce498;return this[_0x292586(0xb9)]['updatePassword'](_0x57a53c,_0x4c72f9);}async['getInfo'](_0x27b20a){const _0x262a72=_0x4ce498;return this[_0x262a72(0xb9)]['getInfo'](_0x27b20a);}async[_0x4ce498(0xad)](_0x22b2cb){const _0x54bcd5=_0x4ce498;return await this[_0x54bcd5(0xb9)][_0x54bcd5(0xad)](_0x22b2cb);}async[_0x4ce498(0xd3)](_0x219db7,_0x352b11){return this['authService']['verifyIdentity'](_0x219db7,_0x352b11);}async[_0x4ce498(0xb4)](_0x6cd397,_0xf9e074){const _0x4e9f34=_0x4ce498;return this[_0x4e9f34(0xb9)]['verifyPhoneIdentity'](_0x6cd397,_0xf9e074);}};__decorate([(0x0,common_1[_0x4ce498(0xf4)])('register'),(0x0,swagger_1[_0x4ce498(0xab)])({'summary':'用户注册'}),__param(0x0,(0x0,common_1[_0x4ce498(0xb8)])(new common_1[(_0x4ce498(0xf8))]({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x4ce498(0xe1)])()),__metadata('design:type',Function),__metadata(_0x4ce498(0xdf),[authRegister_dto_1[_0x4ce498(0xd7)],Object]),__metadata('design:returntype',Promise)],AuthController[_0x4ce498(0xd5)],_0x4ce498(0xf7),null),__decorate([(0x0,common_1['Post'])(_0x4ce498(0xf5)),(0x0,swagger_1['ApiOperation'])({'summary':_0x4ce498(0xdb),'description':_0x4ce498(0xbf)}),(0x0,swagger_1[_0x4ce498(0xae)])({'status':0xc8,'description':_0x4ce498(0xc8),'schema':{'type':_0x4ce498(0xef),'example':_0x4ce498(0xba)}}),(0x0,swagger_1['ApiResponse'])({'status':0x190,'description':_0x4ce498(0xed),'schema':{'type':_0x4ce498(0xb3),'properties':{'statusCode':{'type':'number','example':0x190},'message':{'type':_0x4ce498(0xef),'example':_0x4ce498(0xf0)},'error':{'type':_0x4ce498(0xef),'example':_0x4ce498(0xd4)}}}}),__param(0x0,(0x0,common_1[_0x4ce498(0xb8)])(new common_1[(_0x4ce498(0xf8))]({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x4ce498(0xe1)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[authLogin_dto_1[_0x4ce498(0xdc)],Object]),__metadata(_0x4ce498(0xd0),Promise)],AuthController[_0x4ce498(0xd5)],_0x4ce498(0xf5),null),__decorate([(0x0,common_1['Post'])(_0x4ce498(0xec)),(0x0,swagger_1[_0x4ce498(0xab)])({'summary':_0x4ce498(0xc6),'description':_0x4ce498(0xe8)}),(0x0,swagger_1[_0x4ce498(0xae)])({'status':0xc8,'description':'登录成功，返回\x20JWT\x20token','schema':{'type':_0x4ce498(0xef),'example':_0x4ce498(0xba)}}),(0x0,swagger_1['ApiResponse'])({'status':0x190,'description':_0x4ce498(0xb2),'schema':{'type':_0x4ce498(0xb3),'properties':{'statusCode':{'type':_0x4ce498(0xdd),'example':0x190},'message':{'type':_0x4ce498(0xef),'example':_0x4ce498(0xb5)},'error':{'type':_0x4ce498(0xef),'example':_0x4ce498(0xd4)}}}}),(0x0,swagger_1[_0x4ce498(0xae)])({'status':0x194,'description':_0x4ce498(0xeb),'schema':{'type':_0x4ce498(0xb3),'properties':{'statusCode':{'type':'number','example':0x194},'message':{'type':_0x4ce498(0xef),'example':_0x4ce498(0xc2)},'error':{'type':_0x4ce498(0xef),'example':_0x4ce498(0xd6)}}}}),__param(0x0,(0x0,common_1[_0x4ce498(0xb8)])(new common_1[(_0x4ce498(0xf8))]({'transform':!![]}))),__param(0x1,(0x0,common_1['Req'])()),__metadata('design:type',Function),__metadata(_0x4ce498(0xdf),[loginWithCaptcha_dto_1[_0x4ce498(0xe4)],Object]),__metadata('design:returntype',Promise)],AuthController[_0x4ce498(0xd5)],_0x4ce498(0xec),null),__decorate([(0x0,common_1[_0x4ce498(0xf4)])(_0x4ce498(0xda)),(0x0,swagger_1[_0x4ce498(0xab)])({'summary':'用户更改密码'}),(0x0,common_1[_0x4ce498(0xc9)])(jwtAuth_guard_1[_0x4ce498(0xcc)]),(0x0,swagger_1[_0x4ce498(0xf2)])(),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x4ce498(0xb8)])(new common_1[(_0x4ce498(0xf8))]({'transform':!![]}))),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,updatePassword_dto_1[_0x4ce498(0xf1)]]),__metadata('design:returntype',Promise)],AuthController[_0x4ce498(0xd5)],'updatePassword',null),__decorate([(0x0,common_1[_0x4ce498(0xc5)])('getInfo'),(0x0,swagger_1['ApiOperation'])({'summary':'获取用户个人信息'}),(0x0,common_1[_0x4ce498(0xc9)])(jwtAuth_guard_1[_0x4ce498(0xcc)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1['Req'])()),__metadata('design:type',Function),__metadata(_0x4ce498(0xdf),[Object]),__metadata(_0x4ce498(0xd0),Promise)],AuthController[_0x4ce498(0xd5)],_0x4ce498(0xe2),null),__decorate([(0x0,common_1[_0x4ce498(0xf4)])(_0x4ce498(0xad)),(0x0,swagger_1[_0x4ce498(0xab)])({'summary':'发送验证码','description':'\x0a发送验证码到指定的邮箱或手机号。\x0a\x0a###\x20频率限制\x0a-\x20同一邮箱/手机号60秒内只能发送一次验证码\x0a-\x20每个邮箱/手机号每天最多发送10次\x0a-\x20验证码有效期为5分钟\x0a\x0a###\x20使用场景\x0a-\x20注册验证：isLogin\x20=\x20false\x0a-\x20登录验证：isLogin\x20=\x20true\x0a\x0a###\x20注意事项\x0a-\x20手机号格式：11位数字，以1开头\x0a-\x20邮箱格式：标准邮箱格式（example@domain.com）\x0a-\x20如果是登录场景，系统会检查该手机号/邮箱是否已注册\x0a\x20\x20\x20\x20'}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x4ce498(0xc3),'schema':{'example':_0x4ce498(0xb6)}}),(0x0,swagger_1[_0x4ce498(0xae)])({'status':0x190,'description':_0x4ce498(0xb2),'schema':{'example':{'statusCode':0x190,'message':_0x4ce498(0xd9)}}}),(0x0,swagger_1[_0x4ce498(0xae)])({'status':0x1ad,'description':_0x4ce498(0xc4),'schema':{'example':{'statusCode':0x1ad,'message':_0x4ce498(0xb7)}}}),__param(0x0,(0x0,common_1[_0x4ce498(0xb8)])(new common_1[(_0x4ce498(0xf8))]({'transform':!![]}))),__metadata(_0x4ce498(0xc7),Function),__metadata('design:paramtypes',[sendCode_dto_1[_0x4ce498(0xc0)]]),__metadata(_0x4ce498(0xd0),Promise)],AuthController[_0x4ce498(0xd5)],_0x4ce498(0xad),null),__decorate([(0x0,common_1[_0x4ce498(0xf4)])(_0x4ce498(0xd3)),(0x0,swagger_1['ApiOperation'])({'summary':'验证身份'}),(0x0,common_1[_0x4ce498(0xc9)])(jwtAuth_guard_1[_0x4ce498(0xcc)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x4ce498(0xb8)])(new common_1[(_0x4ce498(0xf8))]({'transform':!![]}))),__metadata('design:type',Function),__metadata(_0x4ce498(0xdf),[Object,Object]),__metadata(_0x4ce498(0xd0),Promise)],AuthController['prototype'],_0x4ce498(0xd3),null),__decorate([(0x0,common_1[_0x4ce498(0xf4)])(_0x4ce498(0xb4)),(0x0,swagger_1[_0x4ce498(0xab)])({'summary':_0x4ce498(0xee)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x4ce498(0xcc)]),(0x0,swagger_1[_0x4ce498(0xf2)])(),__param(0x0,(0x0,common_1[_0x4ce498(0xe1)])()),__param(0x1,(0x0,common_1[_0x4ce498(0xb8)])(new common_1[(_0x4ce498(0xf8))]({'transform':!![]}))),__metadata(_0x4ce498(0xc7),Function),__metadata(_0x4ce498(0xdf),[Object,Object]),__metadata('design:returntype',Promise)],AuthController[_0x4ce498(0xd5)],_0x4ce498(0xb4),null),AuthController=__decorate([(0x0,swagger_1[_0x4ce498(0xac)])(_0x4ce498(0xcd)),(0x0,common_1[_0x4ce498(0xde)])(_0x4ce498(0xcd)),__metadata(_0x4ce498(0xdf),[auth_service_1[_0x4ce498(0xbb)]])],AuthController),exports[_0x4ce498(0xf3)]=AuthController;