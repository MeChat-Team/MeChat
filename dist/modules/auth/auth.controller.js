'use strict';const _0x5777a6=_0x2aaf;(function(_0x5d994d,_0x2668a3){const _0x4c8a24=_0x2aaf,_0x4423f8=_0x5d994d();while(!![]){try{const _0x495a26=-parseInt(_0x4c8a24(0x189))/0x1+parseInt(_0x4c8a24(0x188))/0x2+parseInt(_0x4c8a24(0x193))/0x3*(-parseInt(_0x4c8a24(0x1a2))/0x4)+parseInt(_0x4c8a24(0x177))/0x5*(-parseInt(_0x4c8a24(0x1a0))/0x6)+-parseInt(_0x4c8a24(0x16a))/0x7*(parseInt(_0x4c8a24(0x172))/0x8)+-parseInt(_0x4c8a24(0x1ad))/0x9*(-parseInt(_0x4c8a24(0x1ae))/0xa)+-parseInt(_0x4c8a24(0x194))/0xb*(-parseInt(_0x4c8a24(0x162))/0xc);if(_0x495a26===_0x2668a3)break;else _0x4423f8['push'](_0x4423f8['shift']());}catch(_0x5a83ef){_0x4423f8['push'](_0x4423f8['shift']());}}}(_0x3ef9,0x88a3d));function _0x3ef9(){const _0x263d23=['design:returntype','login','object','UseGuards','1744788ZOfRqy','JwtAuthGuard','208tvmiML','__decorate','decorate','用户不存在','获取用户个人信息','sendCode','verifyIdentity','支持使用用户名/邮箱/手机号\x20+\x20密码进行登录','./dto/updatePassword.dto','发送验证码','auth','109341nQtawK','370dYhprk','@nestjs/swagger','updatePassword','用户登录','SendCodeDto','__esModule','UserRegisterDto','2677440yMoPEx','请提供有效的邮箱地址或手机号码。','使用手机号/邮箱\x20+\x20验证码进行登录。需要先调用发送验证码接口获取验证码。','验证码已过期，请重新发送！','design:paramtypes','getOwnPropertyDescriptor','string','登录成功，返回\x20JWT\x20token','27020kcrKtJ','../../common/auth/jwtAuth.guard','ValidationPipe','__param','验证身份','./dto/sendCode.dto','UpdatePasswordDto','用户使用验证码登录','1168EIgopI','length','@nestjs/common','ApiBearerAuth','Get','15DNRcKT','./dto/authLogin.dto','用户不存在，请先注册！','function','验证码发送成功','AuthService','ApiOperation','AuthController','./auth.service','metadata','UserLoginDto','Post','authService','当前密码错误！','design:type','Req','ApiResponse','1881922BZlFoW','439491GXKiMq','verifyPhoneIdentity','Bad\x20Request','验证码发送成功、请填写验证码完成注册！','__metadata','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...','getInfo','登录失败','number','./dto/authRegister.dto','29838yAJefF','77ZyfuWa','Body','请求参数错误','Controller','loginWithCaptcha','请求过于频繁','prototype','register'];_0x3ef9=function(){return _0x263d23;};return _0x3ef9();}function _0x2aaf(_0x32f340,_0x237705){const _0x3ef94b=_0x3ef9();return _0x2aaf=function(_0x2aafe8,_0x14b922){_0x2aafe8=_0x2aafe8-0x15e;let _0xb4665e=_0x3ef94b[_0x2aafe8];return _0xb4665e;},_0x2aaf(_0x32f340,_0x237705);}var __decorate=this&&this[_0x5777a6(0x1a3)]||function(_0x1a7a0e,_0x1bc0e1,_0x3adf5c,_0x16548f){const _0x472139=_0x5777a6;var _0x3bc3ca=arguments[_0x472139(0x173)],_0x8f4352=_0x3bc3ca<0x3?_0x1bc0e1:_0x16548f===null?_0x16548f=Object[_0x472139(0x167)](_0x1bc0e1,_0x3adf5c):_0x16548f,_0x300e5d;if(typeof Reflect==='object'&&typeof Reflect[_0x472139(0x1a4)]===_0x472139(0x17a))_0x8f4352=Reflect[_0x472139(0x1a4)](_0x1a7a0e,_0x1bc0e1,_0x3adf5c,_0x16548f);else{for(var _0x2cdc7b=_0x1a7a0e['length']-0x1;_0x2cdc7b>=0x0;_0x2cdc7b--)if(_0x300e5d=_0x1a7a0e[_0x2cdc7b])_0x8f4352=(_0x3bc3ca<0x3?_0x300e5d(_0x8f4352):_0x3bc3ca>0x3?_0x300e5d(_0x1bc0e1,_0x3adf5c,_0x8f4352):_0x300e5d(_0x1bc0e1,_0x3adf5c))||_0x8f4352;}return _0x3bc3ca>0x3&&_0x8f4352&&Object['defineProperty'](_0x1bc0e1,_0x3adf5c,_0x8f4352),_0x8f4352;},__metadata=this&&this[_0x5777a6(0x18d)]||function(_0x154127,_0x5910fb){const _0xe18142=_0x5777a6;if(typeof Reflect===_0xe18142(0x19e)&&typeof Reflect[_0xe18142(0x180)]===_0xe18142(0x17a))return Reflect[_0xe18142(0x180)](_0x154127,_0x5910fb);},__param=this&&this[_0x5777a6(0x16d)]||function(_0x19c4b4,_0x97a512){return function(_0x1aeff8,_0x48b50f){_0x97a512(_0x1aeff8,_0x48b50f,_0x19c4b4);};};Object['defineProperty'](exports,_0x5777a6(0x160),{'value':!![]}),exports[_0x5777a6(0x17e)]=void 0x0;const jwtAuth_guard_1=require(_0x5777a6(0x16b)),common_1=require(_0x5777a6(0x174)),swagger_1=require(_0x5777a6(0x1af)),auth_service_1=require(_0x5777a6(0x17f)),authLogin_dto_1=require(_0x5777a6(0x178)),authRegister_dto_1=require(_0x5777a6(0x192)),updatePassword_dto_1=require(_0x5777a6(0x1aa)),loginWithCaptcha_dto_1=require('./dto/loginWithCaptcha.dto'),sendCode_dto_1=require(_0x5777a6(0x16f));let AuthController=class AuthController{constructor(_0x1c2f36){const _0x1eb423=_0x5777a6;this[_0x1eb423(0x183)]=_0x1c2f36;}async['register'](_0x327a32,_0x454d77){const _0xe30692=_0x5777a6;return await this['authService'][_0xe30692(0x19b)](_0x327a32,_0x454d77);}async[_0x5777a6(0x19d)](_0x1c1066,_0x3581ef){const _0x416fcb=_0x5777a6;return this[_0x416fcb(0x183)][_0x416fcb(0x19d)](_0x1c1066,_0x3581ef);}async[_0x5777a6(0x198)](_0x125874,_0x3067db){const _0xd06a54=_0x5777a6;return this[_0xd06a54(0x183)]['loginWithCaptcha'](_0x125874,_0x3067db);}async[_0x5777a6(0x1b0)](_0x32294e,_0x170607){const _0x5042ef=_0x5777a6;return this['authService'][_0x5042ef(0x1b0)](_0x32294e,_0x170607);}async[_0x5777a6(0x18f)](_0x5b4438){const _0x298dcb=_0x5777a6;return this[_0x298dcb(0x183)][_0x298dcb(0x18f)](_0x5b4438);}async[_0x5777a6(0x1a7)](_0x3ff4e4){const _0x4a5d4c=_0x5777a6;return await this[_0x4a5d4c(0x183)][_0x4a5d4c(0x1a7)](_0x3ff4e4);}async[_0x5777a6(0x1a8)](_0x3e5324,_0x1b732e){return this['authService']['verifyIdentity'](_0x3e5324,_0x1b732e);}async[_0x5777a6(0x18a)](_0x22fbc2,_0x2a9740){const _0x4a281a=_0x5777a6;return this[_0x4a281a(0x183)][_0x4a281a(0x18a)](_0x22fbc2,_0x2a9740);}};__decorate([(0x0,common_1[_0x5777a6(0x182)])(_0x5777a6(0x19b)),(0x0,swagger_1['ApiOperation'])({'summary':'用户注册'}),__param(0x0,(0x0,common_1[_0x5777a6(0x195)])(new common_1['ValidationPipe']({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x5777a6(0x186)])()),__metadata(_0x5777a6(0x185),Function),__metadata(_0x5777a6(0x166),[authRegister_dto_1[_0x5777a6(0x161)],Object]),__metadata(_0x5777a6(0x19c),Promise)],AuthController[_0x5777a6(0x19a)],_0x5777a6(0x19b),null),__decorate([(0x0,common_1[_0x5777a6(0x182)])('login'),(0x0,swagger_1[_0x5777a6(0x17d)])({'summary':_0x5777a6(0x15e),'description':_0x5777a6(0x1a9)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x5777a6(0x169),'schema':{'type':_0x5777a6(0x168),'example':'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'}}),(0x0,swagger_1['ApiResponse'])({'status':0x190,'description':_0x5777a6(0x190),'schema':{'type':'object','properties':{'statusCode':{'type':_0x5777a6(0x191),'example':0x190},'message':{'type':'string','example':_0x5777a6(0x184)},'error':{'type':_0x5777a6(0x168),'example':_0x5777a6(0x18b)}}}}),__param(0x0,(0x0,common_1['Body'])(new common_1[(_0x5777a6(0x16c))]({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x5777a6(0x186)])()),__metadata(_0x5777a6(0x185),Function),__metadata(_0x5777a6(0x166),[authLogin_dto_1[_0x5777a6(0x181)],Object]),__metadata(_0x5777a6(0x19c),Promise)],AuthController[_0x5777a6(0x19a)],'login',null),__decorate([(0x0,common_1[_0x5777a6(0x182)])(_0x5777a6(0x198)),(0x0,swagger_1['ApiOperation'])({'summary':_0x5777a6(0x171),'description':_0x5777a6(0x164)}),(0x0,swagger_1[_0x5777a6(0x187)])({'status':0xc8,'description':_0x5777a6(0x169),'schema':{'type':_0x5777a6(0x168),'example':_0x5777a6(0x18e)}}),(0x0,swagger_1[_0x5777a6(0x187)])({'status':0x190,'description':_0x5777a6(0x196),'schema':{'type':_0x5777a6(0x19e),'properties':{'statusCode':{'type':'number','example':0x190},'message':{'type':_0x5777a6(0x168),'example':_0x5777a6(0x165)},'error':{'type':'string','example':'Bad\x20Request'}}}}),(0x0,swagger_1['ApiResponse'])({'status':0x194,'description':_0x5777a6(0x1a5),'schema':{'type':_0x5777a6(0x19e),'properties':{'statusCode':{'type':_0x5777a6(0x191),'example':0x194},'message':{'type':_0x5777a6(0x168),'example':_0x5777a6(0x179)},'error':{'type':_0x5777a6(0x168),'example':'Not\x20Found'}}}}),__param(0x0,(0x0,common_1[_0x5777a6(0x195)])(new common_1['ValidationPipe']({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x5777a6(0x186)])()),__metadata(_0x5777a6(0x185),Function),__metadata('design:paramtypes',[loginWithCaptcha_dto_1['LoginWithCaptchaDto'],Object]),__metadata(_0x5777a6(0x19c),Promise)],AuthController[_0x5777a6(0x19a)],'loginWithCaptcha',null),__decorate([(0x0,common_1[_0x5777a6(0x182)])(_0x5777a6(0x1b0)),(0x0,swagger_1[_0x5777a6(0x17d)])({'summary':'用户更改密码'}),(0x0,common_1[_0x5777a6(0x19f)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x5777a6(0x175)])(),__param(0x0,(0x0,common_1[_0x5777a6(0x186)])()),__param(0x1,(0x0,common_1['Body'])(new common_1['ValidationPipe']({'transform':!![]}))),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,updatePassword_dto_1[_0x5777a6(0x170)]]),__metadata(_0x5777a6(0x19c),Promise)],AuthController[_0x5777a6(0x19a)],'updatePassword',null),__decorate([(0x0,common_1[_0x5777a6(0x176)])(_0x5777a6(0x18f)),(0x0,swagger_1[_0x5777a6(0x17d)])({'summary':_0x5777a6(0x1a6)}),(0x0,common_1[_0x5777a6(0x19f)])(jwtAuth_guard_1[_0x5777a6(0x1a1)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1['Req'])()),__metadata('design:type',Function),__metadata(_0x5777a6(0x166),[Object]),__metadata(_0x5777a6(0x19c),Promise)],AuthController[_0x5777a6(0x19a)],_0x5777a6(0x18f),null),__decorate([(0x0,common_1[_0x5777a6(0x182)])(_0x5777a6(0x1a7)),(0x0,swagger_1['ApiOperation'])({'summary':_0x5777a6(0x1ab),'description':'\x0a发送验证码到指定的邮箱或手机号。\x0a\x0a###\x20频率限制\x0a-\x20同一邮箱/手机号60秒内只能发送一次验证码\x0a-\x20每个邮箱/手机号每天最多发送10次\x0a-\x20验证码有效期为5分钟\x0a\x0a###\x20使用场景\x0a-\x20注册验证：isLogin\x20=\x20false\x0a-\x20登录验证：isLogin\x20=\x20true\x0a\x0a###\x20注意事项\x0a-\x20手机号格式：11位数字，以1开头\x0a-\x20邮箱格式：标准邮箱格式（example@domain.com）\x0a-\x20如果是登录场景，系统会检查该手机号/邮箱是否已注册\x0a\x20\x20\x20\x20'}),(0x0,swagger_1[_0x5777a6(0x187)])({'status':0xc8,'description':_0x5777a6(0x17b),'schema':{'example':_0x5777a6(0x18c)}}),(0x0,swagger_1[_0x5777a6(0x187)])({'status':0x190,'description':_0x5777a6(0x196),'schema':{'example':{'statusCode':0x190,'message':_0x5777a6(0x163)}}}),(0x0,swagger_1[_0x5777a6(0x187)])({'status':0x1ad,'description':_0x5777a6(0x199),'schema':{'example':{'statusCode':0x1ad,'message':'今日发送验证码次数已达上限，请24小时后再试！'}}}),__param(0x0,(0x0,common_1['Body'])(new common_1[(_0x5777a6(0x16c))]({'transform':!![]}))),__metadata(_0x5777a6(0x185),Function),__metadata(_0x5777a6(0x166),[sendCode_dto_1[_0x5777a6(0x15f)]]),__metadata(_0x5777a6(0x19c),Promise)],AuthController['prototype'],'sendCode',null),__decorate([(0x0,common_1[_0x5777a6(0x182)])(_0x5777a6(0x1a8)),(0x0,swagger_1['ApiOperation'])({'summary':_0x5777a6(0x16e)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x5777a6(0x175)])(),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x5777a6(0x195)])(new common_1['ValidationPipe']({'transform':!![]}))),__metadata('design:type',Function),__metadata(_0x5777a6(0x166),[Object,Object]),__metadata(_0x5777a6(0x19c),Promise)],AuthController[_0x5777a6(0x19a)],_0x5777a6(0x1a8),null),__decorate([(0x0,common_1[_0x5777a6(0x182)])(_0x5777a6(0x18a)),(0x0,swagger_1[_0x5777a6(0x17d)])({'summary':'验证手机号'}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x5777a6(0x1a1)]),(0x0,swagger_1[_0x5777a6(0x175)])(),__param(0x0,(0x0,common_1[_0x5777a6(0x186)])()),__param(0x1,(0x0,common_1[_0x5777a6(0x195)])(new common_1[(_0x5777a6(0x16c))]({'transform':!![]}))),__metadata('design:type',Function),__metadata(_0x5777a6(0x166),[Object,Object]),__metadata(_0x5777a6(0x19c),Promise)],AuthController[_0x5777a6(0x19a)],_0x5777a6(0x18a),null),AuthController=__decorate([(0x0,swagger_1['ApiTags'])('auth'),(0x0,common_1[_0x5777a6(0x197)])(_0x5777a6(0x1ac)),__metadata(_0x5777a6(0x166),[auth_service_1[_0x5777a6(0x17c)]])],AuthController),exports[_0x5777a6(0x17e)]=AuthController;