'use strict';const _0x34ca12=_0x20e7;function _0x2006(){const _0x578e32=['\x0a发送验证码到指定的邮箱或手机号。\x0a\x0a###\x20频率限制\x0a-\x20同一邮箱/手机号60秒内只能发送一次验证码\x0a-\x20每个邮箱/手机号每天最多发送10次\x0a-\x20验证码有效期为5分钟\x0a\x0a###\x20使用场景\x0a-\x20注册验证：isLogin\x20=\x20false\x0a-\x20登录验证：isLogin\x20=\x20true\x0a\x0a###\x20注意事项\x0a-\x20手机号格式：11位数字，以1开头\x0a-\x20邮箱格式：标准邮箱格式（example@domain.com）\x0a-\x20如果是登录场景，系统会检查该手机号/邮箱是否已注册\x0a\x20\x20\x20\x20','支持使用用户名/邮箱/手机号\x20+\x20密码进行登录','__param','获取用户个人信息','design:returntype','用户不存在，请先注册！','89037DHGHBg','请求过于频繁','Post','__metadata','Controller','prototype','design:type','getInfo','__esModule','3963aemcyU','defineProperty','Body','用户不存在','LoginWithCaptchaDto','使用手机号/邮箱\x20+\x20验证码进行登录。需要先调用发送验证码接口获取验证码。','./auth.service','Bad\x20Request','请求参数错误','sendCode','__decorate','auth','7864914zaNhJD','验证身份','登录失败','./dto/authRegister.dto','2050molNVT','Not\x20Found','用户注册','ApiTags','length','verifyIdentity','updatePassword','./dto/sendCode.dto','metadata','ApiBearerAuth','7855505JwxQvt','6955WAXxmt','ValidationPipe','loginWithCaptcha','register','./dto/updatePassword.dto','验证手机号','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...','ApiOperation','object','AuthService','JwtAuthGuard','UserLoginDto','AuthController','验证码发送成功','ApiResponse','UseGuards','function','Req','verifyPhoneIdentity','26QzQwww','authService','UpdatePasswordDto','@nestjs/swagger','getOwnPropertyDescriptor','验证码发送成功、请填写验证码完成注册！','string','design:paramtypes','用户登录','1552THQudJ','UserRegisterDto','登录成功，返回\x20JWT\x20token','5125605rXbcRY','496616aaCPit','login','decorate','number'];_0x2006=function(){return _0x578e32;};return _0x2006();}(function(_0x5cc6d0,_0x4c823d){const _0x4c7fd5=_0x20e7,_0xf1ea00=_0x5cc6d0();while(!![]){try{const _0x121a24=parseInt(_0x4c7fd5(0x175))/0x1*(parseInt(_0x4c7fd5(0x188))/0x2)+-parseInt(_0x4c7fd5(0x1a8))/0x3*(parseInt(_0x4c7fd5(0x191))/0x4)+-parseInt(_0x4c7fd5(0x194))/0x5+parseInt(_0x4c7fd5(0x166))/0x6+-parseInt(_0x4c7fd5(0x174))/0x7+-parseInt(_0x4c7fd5(0x195))/0x8+parseInt(_0x4c7fd5(0x19f))/0x9*(parseInt(_0x4c7fd5(0x16a))/0xa);if(_0x121a24===_0x4c823d)break;else _0xf1ea00['push'](_0xf1ea00['shift']());}catch(_0xe02028){_0xf1ea00['push'](_0xf1ea00['shift']());}}}(_0x2006,0xacb0a));var __decorate=this&&this[_0x34ca12(0x164)]||function(_0x57c4e1,_0x43cfa8,_0x164172,_0x417639){const _0x46e222=_0x34ca12;var _0x43177b=arguments['length'],_0x521bdd=_0x43177b<0x3?_0x43cfa8:_0x417639===null?_0x417639=Object[_0x46e222(0x18c)](_0x43cfa8,_0x164172):_0x417639,_0x280483;if(typeof Reflect===_0x46e222(0x17d)&&typeof Reflect['decorate']===_0x46e222(0x185))_0x521bdd=Reflect[_0x46e222(0x197)](_0x57c4e1,_0x43cfa8,_0x164172,_0x417639);else{for(var _0x5f1e37=_0x57c4e1[_0x46e222(0x16e)]-0x1;_0x5f1e37>=0x0;_0x5f1e37--)if(_0x280483=_0x57c4e1[_0x5f1e37])_0x521bdd=(_0x43177b<0x3?_0x280483(_0x521bdd):_0x43177b>0x3?_0x280483(_0x43cfa8,_0x164172,_0x521bdd):_0x280483(_0x43cfa8,_0x164172))||_0x521bdd;}return _0x43177b>0x3&&_0x521bdd&&Object['defineProperty'](_0x43cfa8,_0x164172,_0x521bdd),_0x521bdd;},__metadata=this&&this[_0x34ca12(0x1a2)]||function(_0x394200,_0x259a74){const _0x33afd1=_0x34ca12;if(typeof Reflect==='object'&&typeof Reflect[_0x33afd1(0x172)]===_0x33afd1(0x185))return Reflect[_0x33afd1(0x172)](_0x394200,_0x259a74);},__param=this&&this[_0x34ca12(0x19b)]||function(_0x437959,_0x34ec94){return function(_0x31099f,_0xa582e8){_0x34ec94(_0x31099f,_0xa582e8,_0x437959);};};Object[_0x34ca12(0x1a9)](exports,_0x34ca12(0x1a7),{'value':!![]}),exports[_0x34ca12(0x181)]=void 0x0;function _0x20e7(_0x5b8cd9,_0x2e515b){const _0x2006b7=_0x2006();return _0x20e7=function(_0x20e7ca,_0x37ad79){_0x20e7ca=_0x20e7ca-0x15d;let _0xcb1b3d=_0x2006b7[_0x20e7ca];return _0xcb1b3d;},_0x20e7(_0x5b8cd9,_0x2e515b);}const jwtAuth_guard_1=require('../../common/auth/jwtAuth.guard'),common_1=require('@nestjs/common'),swagger_1=require(_0x34ca12(0x18b)),auth_service_1=require(_0x34ca12(0x160)),authLogin_dto_1=require('./dto/authLogin.dto'),authRegister_dto_1=require(_0x34ca12(0x169)),updatePassword_dto_1=require(_0x34ca12(0x179)),loginWithCaptcha_dto_1=require('./dto/loginWithCaptcha.dto'),sendCode_dto_1=require(_0x34ca12(0x171));let AuthController=class AuthController{constructor(_0x4f577b){const _0x405481=_0x34ca12;this[_0x405481(0x189)]=_0x4f577b;}async[_0x34ca12(0x178)](_0x5327ac,_0xb5b6d2){const _0x5773e0=_0x34ca12;return await this['authService'][_0x5773e0(0x178)](_0x5327ac,_0xb5b6d2);}async[_0x34ca12(0x196)](_0x557a15,_0x705ca0){const _0x9c61b4=_0x34ca12;return this[_0x9c61b4(0x189)][_0x9c61b4(0x196)](_0x557a15,_0x705ca0);}async[_0x34ca12(0x177)](_0x3a7b2f,_0xa5a428){const _0x475419=_0x34ca12;return this[_0x475419(0x189)][_0x475419(0x177)](_0x3a7b2f,_0xa5a428);}async[_0x34ca12(0x170)](_0x4409f4,_0x4589e1){const _0x4eeca5=_0x34ca12;return this['authService'][_0x4eeca5(0x170)](_0x4409f4,_0x4589e1);}async[_0x34ca12(0x1a6)](_0x200921){const _0x155fe6=_0x34ca12;return this[_0x155fe6(0x189)][_0x155fe6(0x1a6)](_0x200921);}async[_0x34ca12(0x163)](_0x1111d2){const _0x3c0f7e=_0x34ca12;return await this[_0x3c0f7e(0x189)][_0x3c0f7e(0x163)](_0x1111d2);}async[_0x34ca12(0x16f)](_0x34f4b1,_0x191c1d){const _0x14ed45=_0x34ca12;return this[_0x14ed45(0x189)]['verifyIdentity'](_0x34f4b1,_0x191c1d);}async[_0x34ca12(0x187)](_0x29bbd8,_0x2469b7){const _0x586aa3=_0x34ca12;return this['authService'][_0x586aa3(0x187)](_0x29bbd8,_0x2469b7);}};__decorate([(0x0,common_1[_0x34ca12(0x1a1)])(_0x34ca12(0x178)),(0x0,swagger_1[_0x34ca12(0x17c)])({'summary':_0x34ca12(0x16c)}),__param(0x0,(0x0,common_1[_0x34ca12(0x1aa)])(new common_1[(_0x34ca12(0x176))]({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x34ca12(0x186)])()),__metadata('design:type',Function),__metadata(_0x34ca12(0x18f),[authRegister_dto_1[_0x34ca12(0x192)],Object]),__metadata(_0x34ca12(0x19d),Promise)],AuthController[_0x34ca12(0x1a4)],_0x34ca12(0x178),null),__decorate([(0x0,common_1[_0x34ca12(0x1a1)])(_0x34ca12(0x196)),(0x0,swagger_1[_0x34ca12(0x17c)])({'summary':_0x34ca12(0x190),'description':_0x34ca12(0x19a)}),(0x0,swagger_1[_0x34ca12(0x183)])({'status':0xc8,'description':_0x34ca12(0x193),'schema':{'type':_0x34ca12(0x18e),'example':_0x34ca12(0x17b)}}),(0x0,swagger_1['ApiResponse'])({'status':0x190,'description':_0x34ca12(0x168),'schema':{'type':_0x34ca12(0x17d),'properties':{'statusCode':{'type':'number','example':0x190},'message':{'type':'string','example':'当前密码错误！'},'error':{'type':_0x34ca12(0x18e),'example':_0x34ca12(0x161)}}}}),__param(0x0,(0x0,common_1[_0x34ca12(0x1aa)])(new common_1[(_0x34ca12(0x176))]({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x34ca12(0x186)])()),__metadata(_0x34ca12(0x1a5),Function),__metadata('design:paramtypes',[authLogin_dto_1[_0x34ca12(0x180)],Object]),__metadata('design:returntype',Promise)],AuthController[_0x34ca12(0x1a4)],_0x34ca12(0x196),null),__decorate([(0x0,common_1['Post'])(_0x34ca12(0x177)),(0x0,swagger_1[_0x34ca12(0x17c)])({'summary':'用户使用验证码登录','description':_0x34ca12(0x15f)}),(0x0,swagger_1[_0x34ca12(0x183)])({'status':0xc8,'description':'登录成功，返回\x20JWT\x20token','schema':{'type':'string','example':_0x34ca12(0x17b)}}),(0x0,swagger_1[_0x34ca12(0x183)])({'status':0x190,'description':_0x34ca12(0x162),'schema':{'type':_0x34ca12(0x17d),'properties':{'statusCode':{'type':'number','example':0x190},'message':{'type':'string','example':'验证码已过期，请重新发送！'},'error':{'type':'string','example':'Bad\x20Request'}}}}),(0x0,swagger_1[_0x34ca12(0x183)])({'status':0x194,'description':_0x34ca12(0x15d),'schema':{'type':'object','properties':{'statusCode':{'type':_0x34ca12(0x198),'example':0x194},'message':{'type':_0x34ca12(0x18e),'example':_0x34ca12(0x19e)},'error':{'type':_0x34ca12(0x18e),'example':_0x34ca12(0x16b)}}}}),__param(0x0,(0x0,common_1[_0x34ca12(0x1aa)])(new common_1['ValidationPipe']({'transform':!![]}))),__param(0x1,(0x0,common_1['Req'])()),__metadata(_0x34ca12(0x1a5),Function),__metadata(_0x34ca12(0x18f),[loginWithCaptcha_dto_1[_0x34ca12(0x15e)],Object]),__metadata(_0x34ca12(0x19d),Promise)],AuthController[_0x34ca12(0x1a4)],_0x34ca12(0x177),null),__decorate([(0x0,common_1[_0x34ca12(0x1a1)])(_0x34ca12(0x170)),(0x0,swagger_1[_0x34ca12(0x17c)])({'summary':'用户更改密码'}),(0x0,common_1[_0x34ca12(0x184)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x34ca12(0x1aa)])(new common_1[(_0x34ca12(0x176))]({'transform':!![]}))),__metadata(_0x34ca12(0x1a5),Function),__metadata(_0x34ca12(0x18f),[Object,updatePassword_dto_1[_0x34ca12(0x18a)]]),__metadata('design:returntype',Promise)],AuthController['prototype'],_0x34ca12(0x170),null),__decorate([(0x0,common_1['Get'])(_0x34ca12(0x1a6)),(0x0,swagger_1['ApiOperation'])({'summary':_0x34ca12(0x19c)}),(0x0,common_1[_0x34ca12(0x184)])(jwtAuth_guard_1[_0x34ca12(0x17f)]),(0x0,swagger_1[_0x34ca12(0x173)])(),__param(0x0,(0x0,common_1['Req'])()),__metadata(_0x34ca12(0x1a5),Function),__metadata(_0x34ca12(0x18f),[Object]),__metadata(_0x34ca12(0x19d),Promise)],AuthController[_0x34ca12(0x1a4)],_0x34ca12(0x1a6),null),__decorate([(0x0,common_1[_0x34ca12(0x1a1)])(_0x34ca12(0x163)),(0x0,swagger_1[_0x34ca12(0x17c)])({'summary':'发送验证码','description':_0x34ca12(0x199)}),(0x0,swagger_1[_0x34ca12(0x183)])({'status':0xc8,'description':_0x34ca12(0x182),'schema':{'example':_0x34ca12(0x18d)}}),(0x0,swagger_1[_0x34ca12(0x183)])({'status':0x190,'description':'请求参数错误','schema':{'example':{'statusCode':0x190,'message':'请提供有效的邮箱地址或手机号码。'}}}),(0x0,swagger_1[_0x34ca12(0x183)])({'status':0x1ad,'description':_0x34ca12(0x1a0),'schema':{'example':{'statusCode':0x1ad,'message':'今日发送验证码次数已达上限，请24小时后再试！'}}}),__param(0x0,(0x0,common_1[_0x34ca12(0x1aa)])(new common_1[(_0x34ca12(0x176))]({'transform':!![]}))),__metadata(_0x34ca12(0x1a5),Function),__metadata(_0x34ca12(0x18f),[sendCode_dto_1['SendCodeDto']]),__metadata(_0x34ca12(0x19d),Promise)],AuthController[_0x34ca12(0x1a4)],_0x34ca12(0x163),null),__decorate([(0x0,common_1[_0x34ca12(0x1a1)])(_0x34ca12(0x16f)),(0x0,swagger_1[_0x34ca12(0x17c)])({'summary':_0x34ca12(0x167)}),(0x0,common_1[_0x34ca12(0x184)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x34ca12(0x173)])(),__param(0x0,(0x0,common_1[_0x34ca12(0x186)])()),__param(0x1,(0x0,common_1[_0x34ca12(0x1aa)])(new common_1[(_0x34ca12(0x176))]({'transform':!![]}))),__metadata(_0x34ca12(0x1a5),Function),__metadata(_0x34ca12(0x18f),[Object,Object]),__metadata(_0x34ca12(0x19d),Promise)],AuthController['prototype'],_0x34ca12(0x16f),null),__decorate([(0x0,common_1[_0x34ca12(0x1a1)])('verifyPhoneIdentity'),(0x0,swagger_1['ApiOperation'])({'summary':_0x34ca12(0x17a)}),(0x0,common_1[_0x34ca12(0x184)])(jwtAuth_guard_1[_0x34ca12(0x17f)]),(0x0,swagger_1[_0x34ca12(0x173)])(),__param(0x0,(0x0,common_1[_0x34ca12(0x186)])()),__param(0x1,(0x0,common_1['Body'])(new common_1['ValidationPipe']({'transform':!![]}))),__metadata(_0x34ca12(0x1a5),Function),__metadata(_0x34ca12(0x18f),[Object,Object]),__metadata(_0x34ca12(0x19d),Promise)],AuthController[_0x34ca12(0x1a4)],_0x34ca12(0x187),null),AuthController=__decorate([(0x0,swagger_1[_0x34ca12(0x16d)])(_0x34ca12(0x165)),(0x0,common_1[_0x34ca12(0x1a3)])('auth'),__metadata('design:paramtypes',[auth_service_1[_0x34ca12(0x17e)]])],AuthController),exports[_0x34ca12(0x181)]=AuthController;