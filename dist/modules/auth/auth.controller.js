'use strict';const _0x58b05a=_0x2e01;function _0x533a(){const _0x211361=['Req','login','今日发送验证码次数已达上限，请24小时后再试！','SendCodeDto','22yAUZbV','number','length','design:returntype','请求参数错误','updatePassword','用户使用验证码登录','AuthService','decorate','用户登录','745NmDfve','验证码已过期，请重新发送！','348807IWwlWL','LoginWithCaptchaDto','UseGuards','authService','请提供有效的邮箱地址或手机号码。','支持使用用户名/邮箱/手机号\x20+\x20密码进行登录','function','__metadata','verifyIdentity','获取用户个人信息','./dto/updatePassword.dto','./auth.service','Body','sendCode','./dto/authRegister.dto','__esModule','用户不存在，请先注册！','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...','2277378cAnJzY','design:paramtypes','metadata','../../common/auth/jwtAuth.guard','ApiBearerAuth','auth','verifyPhoneIdentity','验证身份','17656UtlqUA','ApiResponse','ValidationPipe','验证码发送成功','prototype','string','design:type','./dto/authLogin.dto','register','AuthController','ApiTags','UserLoginDto','当前密码错误！','ApiOperation','69793wsLDuT','Bad\x20Request','defineProperty','Not\x20Found','用户更改密码','Post','JwtAuthGuard','UpdatePasswordDto','5220072myQzIL','object','用户注册','登录失败','使用手机号/邮箱\x20+\x20验证码进行登录。需要先调用发送验证码接口获取验证码。','Get','loginWithCaptcha','getOwnPropertyDescriptor','用户不存在','11769993BqHlDb','getInfo','\x0a发送验证码到指定的邮箱或手机号。\x0a\x0a###\x20频率限制\x0a-\x20同一邮箱/手机号60秒内只能发送一次验证码\x0a-\x20每个邮箱/手机号每天最多发送10次\x0a-\x20验证码有效期为5分钟\x0a\x0a###\x20使用场景\x0a-\x20注册验证：isLogin\x20=\x20false\x0a-\x20登录验证：isLogin\x20=\x20true\x0a\x0a###\x20注意事项\x0a-\x20手机号格式：11位数字，以1开头\x0a-\x20邮箱格式：标准邮箱格式（example@domain.com）\x0a-\x20如果是登录场景，系统会检查该手机号/邮箱是否已注册\x0a\x20\x20\x20\x20','6904940JQQkeC'];_0x533a=function(){return _0x211361;};return _0x533a();}function _0x2e01(_0x1805e1,_0x5d90fb){const _0x533a65=_0x533a();return _0x2e01=function(_0x2e0150,_0xbec7d4){_0x2e0150=_0x2e0150-0x6a;let _0x2e614d=_0x533a65[_0x2e0150];return _0x2e614d;},_0x2e01(_0x1805e1,_0x5d90fb);}(function(_0x3f770a,_0x184e0d){const _0x4893c3=_0x2e01,_0x3dd5f5=_0x3f770a();while(!![]){try{const _0x380e19=parseInt(_0x4893c3(0x80))/0x1+-parseInt(_0x4893c3(0x99))/0x2*(-parseInt(_0x4893c3(0xa5))/0x3)+-parseInt(_0x4893c3(0x72))/0x4*(-parseInt(_0x4893c3(0xa3))/0x5)+-parseInt(_0x4893c3(0x6a))/0x6+parseInt(_0x4893c3(0x94))/0x7+-parseInt(_0x4893c3(0x88))/0x8+-parseInt(_0x4893c3(0x91))/0x9;if(_0x380e19===_0x184e0d)break;else _0x3dd5f5['push'](_0x3dd5f5['shift']());}catch(_0x2f9c50){_0x3dd5f5['push'](_0x3dd5f5['shift']());}}}(_0x533a,0x9f6d1));var __decorate=this&&this['__decorate']||function(_0x4b4d99,_0x126ce9,_0x5cce7a,_0x128a7b){const _0x3f55b8=_0x2e01;var _0x2cf545=arguments['length'],_0x25c5ea=_0x2cf545<0x3?_0x126ce9:_0x128a7b===null?_0x128a7b=Object[_0x3f55b8(0x8f)](_0x126ce9,_0x5cce7a):_0x128a7b,_0x231148;if(typeof Reflect===_0x3f55b8(0x89)&&typeof Reflect[_0x3f55b8(0xa1)]==='function')_0x25c5ea=Reflect['decorate'](_0x4b4d99,_0x126ce9,_0x5cce7a,_0x128a7b);else{for(var _0x366791=_0x4b4d99[_0x3f55b8(0x9b)]-0x1;_0x366791>=0x0;_0x366791--)if(_0x231148=_0x4b4d99[_0x366791])_0x25c5ea=(_0x2cf545<0x3?_0x231148(_0x25c5ea):_0x2cf545>0x3?_0x231148(_0x126ce9,_0x5cce7a,_0x25c5ea):_0x231148(_0x126ce9,_0x5cce7a))||_0x25c5ea;}return _0x2cf545>0x3&&_0x25c5ea&&Object[_0x3f55b8(0x82)](_0x126ce9,_0x5cce7a,_0x25c5ea),_0x25c5ea;},__metadata=this&&this[_0x58b05a(0xac)]||function(_0xa7178,_0x45772b){const _0x359035=_0x58b05a;if(typeof Reflect===_0x359035(0x89)&&typeof Reflect[_0x359035(0x6c)]===_0x359035(0xab))return Reflect[_0x359035(0x6c)](_0xa7178,_0x45772b);},__param=this&&this['__param']||function(_0x288058,_0x13076b){return function(_0x40418a,_0x19e4da){_0x13076b(_0x40418a,_0x19e4da,_0x288058);};};Object['defineProperty'](exports,_0x58b05a(0xb4),{'value':!![]}),exports[_0x58b05a(0x7b)]=void 0x0;const jwtAuth_guard_1=require(_0x58b05a(0x6d)),common_1=require('@nestjs/common'),swagger_1=require('@nestjs/swagger'),auth_service_1=require(_0x58b05a(0xb0)),authLogin_dto_1=require(_0x58b05a(0x79)),authRegister_dto_1=require(_0x58b05a(0xb3)),updatePassword_dto_1=require(_0x58b05a(0xaf)),loginWithCaptcha_dto_1=require('./dto/loginWithCaptcha.dto'),sendCode_dto_1=require('./dto/sendCode.dto');let AuthController=class AuthController{constructor(_0x2e5d36){const _0x4638c5=_0x58b05a;this[_0x4638c5(0xa8)]=_0x2e5d36;}async[_0x58b05a(0x7a)](_0x48d38a,_0x4c5b18){const _0x4457fb=_0x58b05a;return await this[_0x4457fb(0xa8)]['register'](_0x48d38a,_0x4c5b18);}async['login'](_0x493c63,_0x90ff){const _0x5c259a=_0x58b05a;return this['authService'][_0x5c259a(0x96)](_0x493c63,_0x90ff);}async['loginWithCaptcha'](_0x4048c8,_0x493386){return this['authService']['loginWithCaptcha'](_0x4048c8,_0x493386);}async[_0x58b05a(0x9e)](_0x2e44b9,_0x328131){const _0x548e7f=_0x58b05a;return this[_0x548e7f(0xa8)][_0x548e7f(0x9e)](_0x2e44b9,_0x328131);}async['getInfo'](_0x265aed){const _0x702360=_0x58b05a;return this[_0x702360(0xa8)][_0x702360(0x92)](_0x265aed);}async['sendCode'](_0x49ebe0){const _0x2abbff=_0x58b05a;return await this[_0x2abbff(0xa8)][_0x2abbff(0xb2)](_0x49ebe0);}async[_0x58b05a(0xad)](_0x9c0ee9,_0xec7e99){const _0x4bb7af=_0x58b05a;return this[_0x4bb7af(0xa8)]['verifyIdentity'](_0x9c0ee9,_0xec7e99);}async[_0x58b05a(0x70)](_0x112e6d,_0x439db2){const _0x5792a1=_0x58b05a;return this[_0x5792a1(0xa8)][_0x5792a1(0x70)](_0x112e6d,_0x439db2);}};__decorate([(0x0,common_1[_0x58b05a(0x85)])(_0x58b05a(0x7a)),(0x0,swagger_1[_0x58b05a(0x7f)])({'summary':_0x58b05a(0x8a)}),__param(0x0,(0x0,common_1['Body'])(new common_1['ValidationPipe']({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x58b05a(0x95)])()),__metadata(_0x58b05a(0x78),Function),__metadata(_0x58b05a(0x6b),[authRegister_dto_1['UserRegisterDto'],Object]),__metadata('design:returntype',Promise)],AuthController[_0x58b05a(0x76)],'register',null),__decorate([(0x0,common_1['Post'])(_0x58b05a(0x96)),(0x0,swagger_1[_0x58b05a(0x7f)])({'summary':_0x58b05a(0xa2),'description':_0x58b05a(0xaa)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':'登录成功，返回\x20JWT\x20token','schema':{'type':_0x58b05a(0x77),'example':_0x58b05a(0xb6)}}),(0x0,swagger_1['ApiResponse'])({'status':0x190,'description':_0x58b05a(0x8b),'schema':{'type':_0x58b05a(0x89),'properties':{'statusCode':{'type':_0x58b05a(0x9a),'example':0x190},'message':{'type':_0x58b05a(0x77),'example':_0x58b05a(0x7e)},'error':{'type':_0x58b05a(0x77),'example':_0x58b05a(0x81)}}}}),__param(0x0,(0x0,common_1[_0x58b05a(0xb1)])(new common_1[(_0x58b05a(0x74))]({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x58b05a(0x95)])()),__metadata(_0x58b05a(0x78),Function),__metadata('design:paramtypes',[authLogin_dto_1[_0x58b05a(0x7d)],Object]),__metadata('design:returntype',Promise)],AuthController['prototype'],'login',null),__decorate([(0x0,common_1[_0x58b05a(0x85)])(_0x58b05a(0x8e)),(0x0,swagger_1[_0x58b05a(0x7f)])({'summary':_0x58b05a(0x9f),'description':_0x58b05a(0x8c)}),(0x0,swagger_1[_0x58b05a(0x73)])({'status':0xc8,'description':'登录成功，返回\x20JWT\x20token','schema':{'type':_0x58b05a(0x77),'example':'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'}}),(0x0,swagger_1[_0x58b05a(0x73)])({'status':0x190,'description':'请求参数错误','schema':{'type':_0x58b05a(0x89),'properties':{'statusCode':{'type':_0x58b05a(0x9a),'example':0x190},'message':{'type':_0x58b05a(0x77),'example':_0x58b05a(0xa4)},'error':{'type':_0x58b05a(0x77),'example':_0x58b05a(0x81)}}}}),(0x0,swagger_1[_0x58b05a(0x73)])({'status':0x194,'description':_0x58b05a(0x90),'schema':{'type':'object','properties':{'statusCode':{'type':'number','example':0x194},'message':{'type':_0x58b05a(0x77),'example':_0x58b05a(0xb5)},'error':{'type':_0x58b05a(0x77),'example':_0x58b05a(0x83)}}}}),__param(0x0,(0x0,common_1['Body'])(new common_1[(_0x58b05a(0x74))]({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x58b05a(0x95)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[loginWithCaptcha_dto_1[_0x58b05a(0xa6)],Object]),__metadata(_0x58b05a(0x9c),Promise)],AuthController[_0x58b05a(0x76)],_0x58b05a(0x8e),null),__decorate([(0x0,common_1[_0x58b05a(0x85)])('updatePassword'),(0x0,swagger_1[_0x58b05a(0x7f)])({'summary':_0x58b05a(0x84)}),(0x0,common_1[_0x58b05a(0xa7)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x58b05a(0x6e)])(),__param(0x0,(0x0,common_1[_0x58b05a(0x95)])()),__param(0x1,(0x0,common_1[_0x58b05a(0xb1)])(new common_1['ValidationPipe']({'transform':!![]}))),__metadata(_0x58b05a(0x78),Function),__metadata(_0x58b05a(0x6b),[Object,updatePassword_dto_1[_0x58b05a(0x87)]]),__metadata(_0x58b05a(0x9c),Promise)],AuthController[_0x58b05a(0x76)],'updatePassword',null),__decorate([(0x0,common_1[_0x58b05a(0x8d)])(_0x58b05a(0x92)),(0x0,swagger_1[_0x58b05a(0x7f)])({'summary':_0x58b05a(0xae)}),(0x0,common_1[_0x58b05a(0xa7)])(jwtAuth_guard_1[_0x58b05a(0x86)]),(0x0,swagger_1[_0x58b05a(0x6e)])(),__param(0x0,(0x0,common_1[_0x58b05a(0x95)])()),__metadata(_0x58b05a(0x78),Function),__metadata(_0x58b05a(0x6b),[Object]),__metadata(_0x58b05a(0x9c),Promise)],AuthController[_0x58b05a(0x76)],_0x58b05a(0x92),null),__decorate([(0x0,common_1[_0x58b05a(0x85)])(_0x58b05a(0xb2)),(0x0,swagger_1[_0x58b05a(0x7f)])({'summary':'发送验证码','description':_0x58b05a(0x93)}),(0x0,swagger_1[_0x58b05a(0x73)])({'status':0xc8,'description':_0x58b05a(0x75),'schema':{'example':'验证码发送成功、请填写验证码完成注册！'}}),(0x0,swagger_1['ApiResponse'])({'status':0x190,'description':_0x58b05a(0x9d),'schema':{'example':{'statusCode':0x190,'message':_0x58b05a(0xa9)}}}),(0x0,swagger_1[_0x58b05a(0x73)])({'status':0x1ad,'description':'请求过于频繁','schema':{'example':{'statusCode':0x1ad,'message':_0x58b05a(0x97)}}}),__param(0x0,(0x0,common_1[_0x58b05a(0xb1)])(new common_1[(_0x58b05a(0x74))]({'transform':!![]}))),__metadata(_0x58b05a(0x78),Function),__metadata(_0x58b05a(0x6b),[sendCode_dto_1[_0x58b05a(0x98)]]),__metadata('design:returntype',Promise)],AuthController[_0x58b05a(0x76)],_0x58b05a(0xb2),null),__decorate([(0x0,common_1[_0x58b05a(0x85)])(_0x58b05a(0xad)),(0x0,swagger_1[_0x58b05a(0x7f)])({'summary':_0x58b05a(0x71)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x58b05a(0x86)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x58b05a(0x95)])()),__param(0x1,(0x0,common_1['Body'])(new common_1[(_0x58b05a(0x74))]({'transform':!![]}))),__metadata(_0x58b05a(0x78),Function),__metadata(_0x58b05a(0x6b),[Object,Object]),__metadata(_0x58b05a(0x9c),Promise)],AuthController[_0x58b05a(0x76)],'verifyIdentity',null),__decorate([(0x0,common_1[_0x58b05a(0x85)])(_0x58b05a(0x70)),(0x0,swagger_1[_0x58b05a(0x7f)])({'summary':'验证手机号'}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x58b05a(0x86)]),(0x0,swagger_1[_0x58b05a(0x6e)])(),__param(0x0,(0x0,common_1[_0x58b05a(0x95)])()),__param(0x1,(0x0,common_1[_0x58b05a(0xb1)])(new common_1[(_0x58b05a(0x74))]({'transform':!![]}))),__metadata(_0x58b05a(0x78),Function),__metadata('design:paramtypes',[Object,Object]),__metadata(_0x58b05a(0x9c),Promise)],AuthController[_0x58b05a(0x76)],_0x58b05a(0x70),null),AuthController=__decorate([(0x0,swagger_1[_0x58b05a(0x7c)])(_0x58b05a(0x6f)),(0x0,common_1['Controller'])('auth'),__metadata(_0x58b05a(0x6b),[auth_service_1[_0x58b05a(0xa0)]])],AuthController),exports['AuthController']=AuthController;