'use strict';const _0x408bb7=_0x53cb;(function(_0x994634,_0x50dfec){const _0x520549=_0x53cb,_0x1ca01e=_0x994634();while(!![]){try{const _0x451d21=parseInt(_0x520549(0xec))/0x1+-parseInt(_0x520549(0xcd))/0x2+-parseInt(_0x520549(0xce))/0x3*(parseInt(_0x520549(0xdd))/0x4)+-parseInt(_0x520549(0xe0))/0x5+-parseInt(_0x520549(0xd1))/0x6*(-parseInt(_0x520549(0xed))/0x7)+parseInt(_0x520549(0xd0))/0x8*(-parseInt(_0x520549(0xd9))/0x9)+-parseInt(_0x520549(0xee))/0xa*(-parseInt(_0x520549(0xc9))/0xb);if(_0x451d21===_0x50dfec)break;else _0x1ca01e['push'](_0x1ca01e['shift']());}catch(_0x444295){_0x1ca01e['push'](_0x1ca01e['shift']());}}}(_0x4cdf,0x32896));function _0x53cb(_0x50a76d,_0x4253f6){const _0x4cdf9a=_0x4cdf();return _0x53cb=function(_0x53cbc6,_0x3e9a1b){_0x53cbc6=_0x53cbc6-0xad;let _0x28c9f8=_0x4cdf9a[_0x53cbc6];return _0x28c9f8;},_0x53cb(_0x50a76d,_0x4253f6);}var __decorate=this&&this['__decorate']||function(_0x5a2d88,_0x1d95c5,_0x27fac9,_0xb929f3){const _0x466bf1=_0x53cb;var _0x48074d=arguments[_0x466bf1(0xe2)],_0xf2dc73=_0x48074d<0x3?_0x1d95c5:_0xb929f3===null?_0xb929f3=Object[_0x466bf1(0xbe)](_0x1d95c5,_0x27fac9):_0xb929f3,_0x12a18b;if(typeof Reflect==='object'&&typeof Reflect[_0x466bf1(0xe5)]==='function')_0xf2dc73=Reflect['decorate'](_0x5a2d88,_0x1d95c5,_0x27fac9,_0xb929f3);else{for(var _0x1d3911=_0x5a2d88['length']-0x1;_0x1d3911>=0x0;_0x1d3911--)if(_0x12a18b=_0x5a2d88[_0x1d3911])_0xf2dc73=(_0x48074d<0x3?_0x12a18b(_0xf2dc73):_0x48074d>0x3?_0x12a18b(_0x1d95c5,_0x27fac9,_0xf2dc73):_0x12a18b(_0x1d95c5,_0x27fac9))||_0xf2dc73;}return _0x48074d>0x3&&_0xf2dc73&&Object['defineProperty'](_0x1d95c5,_0x27fac9,_0xf2dc73),_0xf2dc73;},__metadata=this&&this[_0x408bb7(0xda)]||function(_0x3ea5f5,_0x110786){const _0x7af425=_0x408bb7;if(typeof Reflect===_0x7af425(0xbb)&&typeof Reflect[_0x7af425(0xb4)]==='function')return Reflect[_0x7af425(0xb4)](_0x3ea5f5,_0x110786);},__param=this&&this[_0x408bb7(0xe8)]||function(_0x3bc35d,_0x466103){return function(_0x5413fa,_0x8418a9){_0x466103(_0x5413fa,_0x8418a9,_0x3bc35d);};};Object['defineProperty'](exports,_0x408bb7(0xe1),{'value':!![]}),exports['AuthController']=void 0x0;const jwtAuth_guard_1=require('../../common/auth/jwtAuth.guard'),common_1=require(_0x408bb7(0xf1)),swagger_1=require(_0x408bb7(0xbd)),auth_service_1=require('./auth.service'),authLogin_dto_1=require('./dto/authLogin.dto'),authRegister_dto_1=require(_0x408bb7(0xc0)),updatePassword_dto_1=require(_0x408bb7(0xb9)),loginWithCaptcha_dto_1=require(_0x408bb7(0xf4)),sendCode_dto_1=require(_0x408bb7(0xdb));function _0x4cdf(){const _0x1f0e8c=['verifyPhoneIdentity','登录失败','__param','ValidationPipe','prototype','请提供有效的邮箱地址或手机号码。','234318MTYAyI','26957GgUjHV','30QAsoEq','ApiBearerAuth','用户不存在，请先注册！','@nestjs/common','请求过于频繁','design:type','./dto/loginWithCaptcha.dto','auth','Req','number','验证身份','AuthService','UseGuards','SendCodeDto','验证码已过期，请重新发送！','design:paramtypes','metadata','Post','verifyIdentity','string','sendCode','./dto/updatePassword.dto','Bad\x20Request','object','今日发送验证码次数已达上限，请24小时后再试！','@nestjs/swagger','getOwnPropertyDescriptor','Not\x20Found','./dto/authRegister.dto','UserLoginDto','验证码发送成功','验证码发送成功、请填写验证码完成注册！','ApiResponse','支持使用用户名/邮箱/手机号\x20+\x20密码进行登录','用户不存在','Get','请求参数错误','2142030qfLdgs','getInfo','design:returntype','login','405864twnrcQ','216099SofLLt','authService','32KYzCKO','558oihqZq','获取用户个人信息','JwtAuthGuard','Body','loginWithCaptcha','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...','ApiOperation','当前密码错误！','820107vZkZYj','__metadata','./dto/sendCode.dto','register','4HpNbXX','用户使用验证码登录','ApiTags','1650980JMrPCS','__esModule','length','使用手机号/邮箱\x20+\x20验证码进行登录。需要先调用发送验证码接口获取验证码。','updatePassword','decorate'];_0x4cdf=function(){return _0x1f0e8c;};return _0x4cdf();}let AuthController=class AuthController{constructor(_0x1b7943){const _0x66ade4=_0x408bb7;this[_0x66ade4(0xcf)]=_0x1b7943;}async[_0x408bb7(0xdc)](_0x575c0e,_0x2aeb1e){const _0x5bdc43=_0x408bb7;return await this['authService'][_0x5bdc43(0xdc)](_0x575c0e,_0x2aeb1e);}async['login'](_0xcdd2bc,_0x569f47){const _0x499aa5=_0x408bb7;return this['authService'][_0x499aa5(0xcc)](_0xcdd2bc,_0x569f47);}async[_0x408bb7(0xd5)](_0x4263c7,_0x45579a){const _0x34ea22=_0x408bb7;return this[_0x34ea22(0xcf)]['loginWithCaptcha'](_0x4263c7,_0x45579a);}async[_0x408bb7(0xe4)](_0x51aefb,_0x186b9d){const _0xcc4c32=_0x408bb7;return this['authService'][_0xcc4c32(0xe4)](_0x51aefb,_0x186b9d);}async[_0x408bb7(0xca)](_0x42461f){const _0x2d0794=_0x408bb7;return this[_0x2d0794(0xcf)][_0x2d0794(0xca)](_0x42461f);}async[_0x408bb7(0xb8)](_0x1cf5a0){const _0x4848d4=_0x408bb7;return await this['authService'][_0x4848d4(0xb8)](_0x1cf5a0);}async[_0x408bb7(0xb6)](_0x1ebef3,_0x13a204){const _0x34206c=_0x408bb7;return this[_0x34206c(0xcf)]['verifyIdentity'](_0x1ebef3,_0x13a204);}async[_0x408bb7(0xe6)](_0x20dde2,_0x29f2aa){const _0x3d606b=_0x408bb7;return this[_0x3d606b(0xcf)][_0x3d606b(0xe6)](_0x20dde2,_0x29f2aa);}};__decorate([(0x0,common_1[_0x408bb7(0xb5)])(_0x408bb7(0xdc)),(0x0,swagger_1[_0x408bb7(0xd7)])({'summary':'用户注册'}),__param(0x0,(0x0,common_1[_0x408bb7(0xd4)])(new common_1['ValidationPipe']({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x408bb7(0xf6)])()),__metadata(_0x408bb7(0xf3),Function),__metadata(_0x408bb7(0xb3),[authRegister_dto_1['UserRegisterDto'],Object]),__metadata(_0x408bb7(0xcb),Promise)],AuthController[_0x408bb7(0xea)],_0x408bb7(0xdc),null),__decorate([(0x0,common_1[_0x408bb7(0xb5)])('login'),(0x0,swagger_1[_0x408bb7(0xd7)])({'summary':'用户登录','description':_0x408bb7(0xc5)}),(0x0,swagger_1[_0x408bb7(0xc4)])({'status':0xc8,'description':'登录成功，返回\x20JWT\x20token','schema':{'type':_0x408bb7(0xb7),'example':_0x408bb7(0xd6)}}),(0x0,swagger_1[_0x408bb7(0xc4)])({'status':0x190,'description':_0x408bb7(0xe7),'schema':{'type':_0x408bb7(0xbb),'properties':{'statusCode':{'type':_0x408bb7(0xad),'example':0x190},'message':{'type':_0x408bb7(0xb7),'example':_0x408bb7(0xd8)},'error':{'type':_0x408bb7(0xb7),'example':'Bad\x20Request'}}}}),__param(0x0,(0x0,common_1['Body'])(new common_1[(_0x408bb7(0xe9))]({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x408bb7(0xf6)])()),__metadata(_0x408bb7(0xf3),Function),__metadata(_0x408bb7(0xb3),[authLogin_dto_1[_0x408bb7(0xc1)],Object]),__metadata(_0x408bb7(0xcb),Promise)],AuthController[_0x408bb7(0xea)],_0x408bb7(0xcc),null),__decorate([(0x0,common_1['Post'])('loginWithCaptcha'),(0x0,swagger_1[_0x408bb7(0xd7)])({'summary':_0x408bb7(0xde),'description':_0x408bb7(0xe3)}),(0x0,swagger_1[_0x408bb7(0xc4)])({'status':0xc8,'description':'登录成功，返回\x20JWT\x20token','schema':{'type':_0x408bb7(0xb7),'example':_0x408bb7(0xd6)}}),(0x0,swagger_1[_0x408bb7(0xc4)])({'status':0x190,'description':'请求参数错误','schema':{'type':_0x408bb7(0xbb),'properties':{'statusCode':{'type':'number','example':0x190},'message':{'type':_0x408bb7(0xb7),'example':_0x408bb7(0xb2)},'error':{'type':_0x408bb7(0xb7),'example':_0x408bb7(0xba)}}}}),(0x0,swagger_1[_0x408bb7(0xc4)])({'status':0x194,'description':_0x408bb7(0xc6),'schema':{'type':_0x408bb7(0xbb),'properties':{'statusCode':{'type':_0x408bb7(0xad),'example':0x194},'message':{'type':_0x408bb7(0xb7),'example':_0x408bb7(0xf0)},'error':{'type':_0x408bb7(0xb7),'example':_0x408bb7(0xbf)}}}}),__param(0x0,(0x0,common_1[_0x408bb7(0xd4)])(new common_1['ValidationPipe']({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x408bb7(0xf6)])()),__metadata(_0x408bb7(0xf3),Function),__metadata('design:paramtypes',[loginWithCaptcha_dto_1['LoginWithCaptchaDto'],Object]),__metadata(_0x408bb7(0xcb),Promise)],AuthController[_0x408bb7(0xea)],_0x408bb7(0xd5),null),__decorate([(0x0,common_1['Post'])(_0x408bb7(0xe4)),(0x0,swagger_1[_0x408bb7(0xd7)])({'summary':'用户更改密码'}),(0x0,common_1[_0x408bb7(0xb0)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x408bb7(0xd4)])(new common_1['ValidationPipe']({'transform':!![]}))),__metadata(_0x408bb7(0xf3),Function),__metadata(_0x408bb7(0xb3),[Object,updatePassword_dto_1['UpdatePasswordDto']]),__metadata('design:returntype',Promise)],AuthController[_0x408bb7(0xea)],_0x408bb7(0xe4),null),__decorate([(0x0,common_1[_0x408bb7(0xc7)])(_0x408bb7(0xca)),(0x0,swagger_1[_0x408bb7(0xd7)])({'summary':_0x408bb7(0xd2)}),(0x0,common_1[_0x408bb7(0xb0)])(jwtAuth_guard_1[_0x408bb7(0xd3)]),(0x0,swagger_1[_0x408bb7(0xef)])(),__param(0x0,(0x0,common_1[_0x408bb7(0xf6)])()),__metadata(_0x408bb7(0xf3),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x408bb7(0xcb),Promise)],AuthController['prototype'],_0x408bb7(0xca),null),__decorate([(0x0,common_1['Post'])(_0x408bb7(0xb8)),(0x0,swagger_1[_0x408bb7(0xd7)])({'summary':'发送验证码','description':'\x0a发送验证码到指定的邮箱或手机号。\x0a\x0a###\x20频率限制\x0a-\x20同一邮箱/手机号60秒内只能发送一次验证码\x0a-\x20每个邮箱/手机号每天最多发送10次\x0a-\x20验证码有效期为5分钟\x0a\x0a###\x20使用场景\x0a-\x20注册验证：isLogin\x20=\x20false\x0a-\x20登录验证：isLogin\x20=\x20true\x0a\x0a###\x20注意事项\x0a-\x20手机号格式：11位数字，以1开头\x0a-\x20邮箱格式：标准邮箱格式（example@domain.com）\x0a-\x20如果是登录场景，系统会检查该手机号/邮箱是否已注册\x0a\x20\x20\x20\x20'}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x408bb7(0xc2),'schema':{'example':_0x408bb7(0xc3)}}),(0x0,swagger_1[_0x408bb7(0xc4)])({'status':0x190,'description':_0x408bb7(0xc8),'schema':{'example':{'statusCode':0x190,'message':_0x408bb7(0xeb)}}}),(0x0,swagger_1[_0x408bb7(0xc4)])({'status':0x1ad,'description':_0x408bb7(0xf2),'schema':{'example':{'statusCode':0x1ad,'message':_0x408bb7(0xbc)}}}),__param(0x0,(0x0,common_1['Body'])(new common_1[(_0x408bb7(0xe9))]({'transform':!![]}))),__metadata(_0x408bb7(0xf3),Function),__metadata(_0x408bb7(0xb3),[sendCode_dto_1[_0x408bb7(0xb1)]]),__metadata(_0x408bb7(0xcb),Promise)],AuthController[_0x408bb7(0xea)],_0x408bb7(0xb8),null),__decorate([(0x0,common_1[_0x408bb7(0xb5)])('verifyIdentity'),(0x0,swagger_1[_0x408bb7(0xd7)])({'summary':_0x408bb7(0xae)}),(0x0,common_1[_0x408bb7(0xb0)])(jwtAuth_guard_1[_0x408bb7(0xd3)]),(0x0,swagger_1[_0x408bb7(0xef)])(),__param(0x0,(0x0,common_1[_0x408bb7(0xf6)])()),__param(0x1,(0x0,common_1[_0x408bb7(0xd4)])(new common_1[(_0x408bb7(0xe9))]({'transform':!![]}))),__metadata(_0x408bb7(0xf3),Function),__metadata('design:paramtypes',[Object,Object]),__metadata(_0x408bb7(0xcb),Promise)],AuthController['prototype'],_0x408bb7(0xb6),null),__decorate([(0x0,common_1[_0x408bb7(0xb5)])(_0x408bb7(0xe6)),(0x0,swagger_1[_0x408bb7(0xd7)])({'summary':'验证手机号'}),(0x0,common_1[_0x408bb7(0xb0)])(jwtAuth_guard_1[_0x408bb7(0xd3)]),(0x0,swagger_1[_0x408bb7(0xef)])(),__param(0x0,(0x0,common_1[_0x408bb7(0xf6)])()),__param(0x1,(0x0,common_1[_0x408bb7(0xd4)])(new common_1['ValidationPipe']({'transform':!![]}))),__metadata(_0x408bb7(0xf3),Function),__metadata(_0x408bb7(0xb3),[Object,Object]),__metadata('design:returntype',Promise)],AuthController['prototype'],_0x408bb7(0xe6),null),AuthController=__decorate([(0x0,swagger_1[_0x408bb7(0xdf)])(_0x408bb7(0xf5)),(0x0,common_1['Controller'])(_0x408bb7(0xf5)),__metadata(_0x408bb7(0xb3),[auth_service_1[_0x408bb7(0xaf)]])],AuthController),exports['AuthController']=AuthController;