'use strict';const _0x18bb37=_0x59b3;(function(_0x744a09,_0x522dbd){const _0x2de67d=_0x59b3,_0x22dfb0=_0x744a09();while(!![]){try{const _0x2bbc18=-parseInt(_0x2de67d(0x91))/0x1*(parseInt(_0x2de67d(0xb0))/0x2)+parseInt(_0x2de67d(0x97))/0x3+parseInt(_0x2de67d(0x92))/0x4*(-parseInt(_0x2de67d(0xdb))/0x5)+-parseInt(_0x2de67d(0xdd))/0x6*(parseInt(_0x2de67d(0xbb))/0x7)+parseInt(_0x2de67d(0xb3))/0x8+parseInt(_0x2de67d(0xd1))/0x9*(-parseInt(_0x2de67d(0xb6))/0xa)+parseInt(_0x2de67d(0xa1))/0xb;if(_0x2bbc18===_0x522dbd)break;else _0x22dfb0['push'](_0x22dfb0['shift']());}catch(_0x4324a7){_0x22dfb0['push'](_0x22dfb0['shift']());}}}(_0x5d2a,0xac209));function _0x59b3(_0x403ddb,_0x1174b4){const _0x5d2a53=_0x5d2a();return _0x59b3=function(_0x59b3d8,_0x48f7b1){_0x59b3d8=_0x59b3d8-0x8d;let _0x54aec1=_0x5d2a53[_0x59b3d8];return _0x54aec1;},_0x59b3(_0x403ddb,_0x1174b4);}function _0x5d2a(){const _0xdefd36=['__decorate','用户使用验证码登录','verifyIdentity','验证码发送成功、请填写验证码完成注册！','Body','5rYqdyy','design:returntype','6Cmfntx','验证身份','@nestjs/swagger','SendCodeDto','请提供有效的邮箱地址或手机号码。','AuthController','11329ZhccFR','2926104xplZXz','用户登录','design:type','ValidationPipe','UpdatePasswordDto','2255142NHvlyQ','decorate','Controller','getInfo','sendCode','auth','用户不存在，请先注册！','Req','JwtAuthGuard','ApiOperation','23404084ABWgdp','verifyPhoneIdentity','loginWithCaptcha','当前密码错误！','@nestjs/common','./dto/sendCode.dto','__metadata','用户注册','function','获取用户个人信息','验证手机号','string','__esModule','ApiResponse','./auth.service','116xeSrFb','ApiBearerAuth','Post','7813408VtBJyG','发送验证码','AuthService','1710UnYCBa','登录成功，返回\x20JWT\x20token','验证码已过期，请重新发送！','./dto/loginWithCaptcha.dto','ApiTags','8422561gFxIev','updatePassword','design:paramtypes','Bad\x20Request','metadata','length','\x0a发送验证码到指定的邮箱或手机号。\x0a\x0a###\x20频率限制\x0a-\x20同一邮箱/手机号60秒内只能发送一次验证码\x0a-\x20每个邮箱/手机号每天最多发送10次\x0a-\x20验证码有效期为5分钟\x0a\x0a###\x20使用场景\x0a-\x20注册验证：isLogin\x20=\x20false\x0a-\x20登录验证：isLogin\x20=\x20true\x0a\x0a###\x20注意事项\x0a-\x20手机号格式：11位数字，以1开头\x0a-\x20邮箱格式：标准邮箱格式（example@domain.com）\x0a-\x20如果是登录场景，系统会检查该手机号/邮箱是否已注册\x0a\x20\x20\x20\x20','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...','getOwnPropertyDescriptor','验证码发送成功','请求参数错误','defineProperty','login','用户更改密码','UseGuards','./dto/authRegister.dto','object','LoginWithCaptchaDto','UserRegisterDto','prototype','authService','register','29430YXwGoh','用户不存在','登录失败','请求过于频繁','number'];_0x5d2a=function(){return _0xdefd36;};return _0x5d2a();}var __decorate=this&&this[_0x18bb37(0xd6)]||function(_0x2a88a0,_0x3dd281,_0x487faf,_0x176054){const _0x5812a8=_0x18bb37;var _0x2d416d=arguments['length'],_0x2ee538=_0x2d416d<0x3?_0x3dd281:_0x176054===null?_0x176054=Object[_0x5812a8(0xc3)](_0x3dd281,_0x487faf):_0x176054,_0x2f2cf3;if(typeof Reflect===_0x5812a8(0xcb)&&typeof Reflect[_0x5812a8(0x98)]===_0x5812a8(0xa9))_0x2ee538=Reflect[_0x5812a8(0x98)](_0x2a88a0,_0x3dd281,_0x487faf,_0x176054);else{for(var _0x4814ca=_0x2a88a0[_0x5812a8(0xc0)]-0x1;_0x4814ca>=0x0;_0x4814ca--)if(_0x2f2cf3=_0x2a88a0[_0x4814ca])_0x2ee538=(_0x2d416d<0x3?_0x2f2cf3(_0x2ee538):_0x2d416d>0x3?_0x2f2cf3(_0x3dd281,_0x487faf,_0x2ee538):_0x2f2cf3(_0x3dd281,_0x487faf))||_0x2ee538;}return _0x2d416d>0x3&&_0x2ee538&&Object[_0x5812a8(0xc6)](_0x3dd281,_0x487faf,_0x2ee538),_0x2ee538;},__metadata=this&&this[_0x18bb37(0xa7)]||function(_0x231bcb,_0x63924c){const _0x2c6745=_0x18bb37;if(typeof Reflect===_0x2c6745(0xcb)&&typeof Reflect[_0x2c6745(0xbf)]===_0x2c6745(0xa9))return Reflect[_0x2c6745(0xbf)](_0x231bcb,_0x63924c);},__param=this&&this['__param']||function(_0x328743,_0x34af76){return function(_0x25f06f,_0xbfb108){_0x34af76(_0x25f06f,_0xbfb108,_0x328743);};};Object['defineProperty'](exports,_0x18bb37(0xad),{'value':!![]}),exports[_0x18bb37(0x90)]=void 0x0;const jwtAuth_guard_1=require('../../common/auth/jwtAuth.guard'),common_1=require(_0x18bb37(0xa5)),swagger_1=require(_0x18bb37(0x8d)),auth_service_1=require(_0x18bb37(0xaf)),authLogin_dto_1=require('./dto/authLogin.dto'),authRegister_dto_1=require(_0x18bb37(0xca)),updatePassword_dto_1=require('./dto/updatePassword.dto'),loginWithCaptcha_dto_1=require(_0x18bb37(0xb9)),sendCode_dto_1=require(_0x18bb37(0xa6));let AuthController=class AuthController{constructor(_0x3487cd){const _0x115e39=_0x18bb37;this[_0x115e39(0xcf)]=_0x3487cd;}async[_0x18bb37(0xd0)](_0x326dbc,_0x38cce1){const _0x251c45=_0x18bb37;return await this['authService'][_0x251c45(0xd0)](_0x326dbc,_0x38cce1);}async['login'](_0x3a7d57,_0x2d509c){const _0x43730d=_0x18bb37;return this[_0x43730d(0xcf)][_0x43730d(0xc7)](_0x3a7d57,_0x2d509c);}async[_0x18bb37(0xa3)](_0x4ab1af,_0x17db9d){const _0xe11d07=_0x18bb37;return this[_0xe11d07(0xcf)][_0xe11d07(0xa3)](_0x4ab1af,_0x17db9d);}async[_0x18bb37(0xbc)](_0x5e23d9,_0x10780b){const _0xce4b0a=_0x18bb37;return this['authService'][_0xce4b0a(0xbc)](_0x5e23d9,_0x10780b);}async[_0x18bb37(0x9a)](_0x47fbad){const _0x13eb5d=_0x18bb37;return this[_0x13eb5d(0xcf)][_0x13eb5d(0x9a)](_0x47fbad);}async[_0x18bb37(0x9b)](_0x1bfee4){const _0x48b09a=_0x18bb37;return await this[_0x48b09a(0xcf)]['sendCode'](_0x1bfee4);}async[_0x18bb37(0xd8)](_0x26ed4a,_0x4dfc09){const _0x252b77=_0x18bb37;return this[_0x252b77(0xcf)]['verifyIdentity'](_0x26ed4a,_0x4dfc09);}async[_0x18bb37(0xa2)](_0x282f77,_0x1f3872){const _0x140107=_0x18bb37;return this[_0x140107(0xcf)][_0x140107(0xa2)](_0x282f77,_0x1f3872);}};__decorate([(0x0,common_1[_0x18bb37(0xb2)])(_0x18bb37(0xd0)),(0x0,swagger_1[_0x18bb37(0xa0)])({'summary':_0x18bb37(0xa8)}),__param(0x0,(0x0,common_1[_0x18bb37(0xda)])(new common_1['ValidationPipe']({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x18bb37(0x9e)])()),__metadata(_0x18bb37(0x94),Function),__metadata('design:paramtypes',[authRegister_dto_1[_0x18bb37(0xcd)],Object]),__metadata(_0x18bb37(0xdc),Promise)],AuthController[_0x18bb37(0xce)],_0x18bb37(0xd0),null),__decorate([(0x0,common_1['Post'])(_0x18bb37(0xc7)),(0x0,swagger_1[_0x18bb37(0xa0)])({'summary':_0x18bb37(0x93),'description':'支持使用用户名/邮箱/手机号\x20+\x20密码进行登录'}),(0x0,swagger_1[_0x18bb37(0xae)])({'status':0xc8,'description':_0x18bb37(0xb7),'schema':{'type':_0x18bb37(0xac),'example':_0x18bb37(0xc2)}}),(0x0,swagger_1['ApiResponse'])({'status':0x190,'description':_0x18bb37(0xd3),'schema':{'type':_0x18bb37(0xcb),'properties':{'statusCode':{'type':_0x18bb37(0xd5),'example':0x190},'message':{'type':_0x18bb37(0xac),'example':_0x18bb37(0xa4)},'error':{'type':'string','example':_0x18bb37(0xbe)}}}}),__param(0x0,(0x0,common_1[_0x18bb37(0xda)])(new common_1[(_0x18bb37(0x95))]({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x18bb37(0x9e)])()),__metadata(_0x18bb37(0x94),Function),__metadata(_0x18bb37(0xbd),[authLogin_dto_1['UserLoginDto'],Object]),__metadata(_0x18bb37(0xdc),Promise)],AuthController[_0x18bb37(0xce)],_0x18bb37(0xc7),null),__decorate([(0x0,common_1[_0x18bb37(0xb2)])(_0x18bb37(0xa3)),(0x0,swagger_1['ApiOperation'])({'summary':_0x18bb37(0xd7),'description':'使用手机号/邮箱\x20+\x20验证码进行登录。需要先调用发送验证码接口获取验证码。'}),(0x0,swagger_1[_0x18bb37(0xae)])({'status':0xc8,'description':_0x18bb37(0xb7),'schema':{'type':_0x18bb37(0xac),'example':_0x18bb37(0xc2)}}),(0x0,swagger_1[_0x18bb37(0xae)])({'status':0x190,'description':_0x18bb37(0xc5),'schema':{'type':_0x18bb37(0xcb),'properties':{'statusCode':{'type':_0x18bb37(0xd5),'example':0x190},'message':{'type':_0x18bb37(0xac),'example':_0x18bb37(0xb8)},'error':{'type':'string','example':_0x18bb37(0xbe)}}}}),(0x0,swagger_1[_0x18bb37(0xae)])({'status':0x194,'description':_0x18bb37(0xd2),'schema':{'type':'object','properties':{'statusCode':{'type':_0x18bb37(0xd5),'example':0x194},'message':{'type':'string','example':_0x18bb37(0x9d)},'error':{'type':_0x18bb37(0xac),'example':'Not\x20Found'}}}}),__param(0x0,(0x0,common_1[_0x18bb37(0xda)])(new common_1['ValidationPipe']({'transform':!![]}))),__param(0x1,(0x0,common_1[_0x18bb37(0x9e)])()),__metadata(_0x18bb37(0x94),Function),__metadata(_0x18bb37(0xbd),[loginWithCaptcha_dto_1[_0x18bb37(0xcc)],Object]),__metadata(_0x18bb37(0xdc),Promise)],AuthController['prototype'],'loginWithCaptcha',null),__decorate([(0x0,common_1['Post'])(_0x18bb37(0xbc)),(0x0,swagger_1[_0x18bb37(0xa0)])({'summary':_0x18bb37(0xc8)}),(0x0,common_1[_0x18bb37(0xc9)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x18bb37(0xb1)])(),__param(0x0,(0x0,common_1[_0x18bb37(0x9e)])()),__param(0x1,(0x0,common_1[_0x18bb37(0xda)])(new common_1[(_0x18bb37(0x95))]({'transform':!![]}))),__metadata(_0x18bb37(0x94),Function),__metadata(_0x18bb37(0xbd),[Object,updatePassword_dto_1[_0x18bb37(0x96)]]),__metadata(_0x18bb37(0xdc),Promise)],AuthController[_0x18bb37(0xce)],_0x18bb37(0xbc),null),__decorate([(0x0,common_1['Get'])(_0x18bb37(0x9a)),(0x0,swagger_1[_0x18bb37(0xa0)])({'summary':_0x18bb37(0xaa)}),(0x0,common_1[_0x18bb37(0xc9)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x18bb37(0x9e)])()),__metadata(_0x18bb37(0x94),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x18bb37(0xdc),Promise)],AuthController['prototype'],'getInfo',null),__decorate([(0x0,common_1['Post'])('sendCode'),(0x0,swagger_1[_0x18bb37(0xa0)])({'summary':_0x18bb37(0xb4),'description':_0x18bb37(0xc1)}),(0x0,swagger_1[_0x18bb37(0xae)])({'status':0xc8,'description':_0x18bb37(0xc4),'schema':{'example':_0x18bb37(0xd9)}}),(0x0,swagger_1[_0x18bb37(0xae)])({'status':0x190,'description':'请求参数错误','schema':{'example':{'statusCode':0x190,'message':_0x18bb37(0x8f)}}}),(0x0,swagger_1['ApiResponse'])({'status':0x1ad,'description':_0x18bb37(0xd4),'schema':{'example':{'statusCode':0x1ad,'message':'今日发送验证码次数已达上限，请24小时后再试！'}}}),__param(0x0,(0x0,common_1[_0x18bb37(0xda)])(new common_1['ValidationPipe']({'transform':!![]}))),__metadata(_0x18bb37(0x94),Function),__metadata(_0x18bb37(0xbd),[sendCode_dto_1[_0x18bb37(0x8e)]]),__metadata(_0x18bb37(0xdc),Promise)],AuthController['prototype'],_0x18bb37(0x9b),null),__decorate([(0x0,common_1[_0x18bb37(0xb2)])('verifyIdentity'),(0x0,swagger_1['ApiOperation'])({'summary':_0x18bb37(0xde)}),(0x0,common_1[_0x18bb37(0xc9)])(jwtAuth_guard_1[_0x18bb37(0x9f)]),(0x0,swagger_1[_0x18bb37(0xb1)])(),__param(0x0,(0x0,common_1[_0x18bb37(0x9e)])()),__param(0x1,(0x0,common_1['Body'])(new common_1[(_0x18bb37(0x95))]({'transform':!![]}))),__metadata(_0x18bb37(0x94),Function),__metadata(_0x18bb37(0xbd),[Object,Object]),__metadata(_0x18bb37(0xdc),Promise)],AuthController['prototype'],_0x18bb37(0xd8),null),__decorate([(0x0,common_1[_0x18bb37(0xb2)])(_0x18bb37(0xa2)),(0x0,swagger_1[_0x18bb37(0xa0)])({'summary':_0x18bb37(0xab)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x18bb37(0xb1)])(),__param(0x0,(0x0,common_1[_0x18bb37(0x9e)])()),__param(0x1,(0x0,common_1[_0x18bb37(0xda)])(new common_1[(_0x18bb37(0x95))]({'transform':!![]}))),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,Object]),__metadata('design:returntype',Promise)],AuthController[_0x18bb37(0xce)],'verifyPhoneIdentity',null),AuthController=__decorate([(0x0,swagger_1[_0x18bb37(0xba)])('auth'),(0x0,common_1[_0x18bb37(0x99)])(_0x18bb37(0x9c)),__metadata('design:paramtypes',[auth_service_1[_0x18bb37(0xb5)]])],AuthController),exports[_0x18bb37(0x90)]=AuthController;