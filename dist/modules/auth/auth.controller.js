'use strict';const _0xe92cac=_0x3c18;(function(_0x57f093,_0x51356c){const _0xae4c55=_0x3c18,_0xb3a82c=_0x57f093();while(!![]){try{const _0x2a2b24=parseInt(_0xae4c55(0xaf))/0x1+-parseInt(_0xae4c55(0xae))/0x2+-parseInt(_0xae4c55(0x8b))/0x3+parseInt(_0xae4c55(0x74))/0x4*(-parseInt(_0xae4c55(0x75))/0x5)+-parseInt(_0xae4c55(0xab))/0x6+-parseInt(_0xae4c55(0x95))/0x7+parseInt(_0xae4c55(0x6f))/0x8;if(_0x2a2b24===_0x51356c)break;else _0xb3a82c['push'](_0xb3a82c['shift']());}catch(_0x375ca2){_0xb3a82c['push'](_0xb3a82c['shift']());}}}(_0x1668,0x790e4));function _0x3c18(_0x4e650b,_0x52ce49){const _0x1668f8=_0x1668();return _0x3c18=function(_0x3c1849,_0x1257f3){_0x3c1849=_0x3c1849-0x6e;let _0x3fcca4=_0x1668f8[_0x3c1849];return _0x3fcca4;},_0x3c18(_0x4e650b,_0x52ce49);}var __decorate=this&&this[_0xe92cac(0x9a)]||function(_0x5eeabb,_0x69a0e2,_0x437cfd,_0x1e6436){const _0x358536=_0xe92cac;var _0x32b4ea=arguments['length'],_0x47a897=_0x32b4ea<0x3?_0x69a0e2:_0x1e6436===null?_0x1e6436=Object[_0x358536(0x9d)](_0x69a0e2,_0x437cfd):_0x1e6436,_0xec54e8;if(typeof Reflect===_0x358536(0x83)&&typeof Reflect[_0x358536(0xa8)]===_0x358536(0x79))_0x47a897=Reflect[_0x358536(0xa8)](_0x5eeabb,_0x69a0e2,_0x437cfd,_0x1e6436);else{for(var _0x383aea=_0x5eeabb[_0x358536(0x7d)]-0x1;_0x383aea>=0x0;_0x383aea--)if(_0xec54e8=_0x5eeabb[_0x383aea])_0x47a897=(_0x32b4ea<0x3?_0xec54e8(_0x47a897):_0x32b4ea>0x3?_0xec54e8(_0x69a0e2,_0x437cfd,_0x47a897):_0xec54e8(_0x69a0e2,_0x437cfd))||_0x47a897;}return _0x32b4ea>0x3&&_0x47a897&&Object['defineProperty'](_0x69a0e2,_0x437cfd,_0x47a897),_0x47a897;},__metadata=this&&this[_0xe92cac(0x89)]||function(_0x20a7fa,_0x546a7b){const _0x478c00=_0xe92cac;if(typeof Reflect==='object'&&typeof Reflect[_0x478c00(0xa6)]===_0x478c00(0x79))return Reflect[_0x478c00(0xa6)](_0x20a7fa,_0x546a7b);},__param=this&&this[_0xe92cac(0xb3)]||function(_0x549591,_0x280eff){return function(_0x172195,_0x59c082){_0x280eff(_0x172195,_0x59c082,_0x549591);};};Object['defineProperty'](exports,_0xe92cac(0x94),{'value':!![]}),exports[_0xe92cac(0xb6)]=void 0x0;const jwtAuth_guard_1=require('../../common/auth/jwtAuth.guard'),common_1=require('@nestjs/common'),swagger_1=require(_0xe92cac(0x8c)),auth_service_1=require('./auth.service'),authLogin_dto_1=require(_0xe92cac(0x91)),authRegister_dto_1=require(_0xe92cac(0x7e)),updatePassword_dto_1=require('./dto/updatePassword.dto'),loginWithCaptcha_dto_1=require(_0xe92cac(0xa0)),sendCode_dto_1=require('./dto/sendCode.dto');let AuthController=class AuthController{constructor(_0x201dbe){const _0x47c1a6=_0xe92cac;this[_0x47c1a6(0x88)]=_0x201dbe;}async[_0xe92cac(0xac)](_0x4fd242,_0xa59d3e){const _0x2600b2=_0xe92cac;return await this[_0x2600b2(0x88)][_0x2600b2(0xac)](_0x4fd242,_0xa59d3e);}async[_0xe92cac(0xb7)](_0x19ff24,_0x4e6d45){const _0x4e13ef=_0xe92cac;return this['authService'][_0x4e13ef(0xb7)](_0x19ff24,_0x4e6d45);}async['loginWithCaptcha'](_0x5f472e,_0x1d92fb){const _0x48b576=_0xe92cac;return this[_0x48b576(0x88)]['loginWithCaptcha'](_0x5f472e,_0x1d92fb);}async[_0xe92cac(0x8d)](_0x3cb240,_0x2b350c){const _0x1ab936=_0xe92cac;return this[_0x1ab936(0x88)][_0x1ab936(0x8d)](_0x3cb240,_0x2b350c);}async['getInfo'](_0x3ee0b2){const _0x4dbe20=_0xe92cac;return this['authService'][_0x4dbe20(0x99)](_0x3ee0b2);}async['sendCode'](_0x33dcb3){const _0x18913a=_0xe92cac;return await this[_0x18913a(0x88)]['sendCode'](_0x33dcb3);}async[_0xe92cac(0x7c)](_0x28cb46,_0x104dd5){const _0x2a8109=_0xe92cac;return this[_0x2a8109(0x88)][_0x2a8109(0x7c)](_0x28cb46,_0x104dd5);}async[_0xe92cac(0xa2)](_0x2e763c,_0x3e8885){const _0x129c60=_0xe92cac;return this[_0x129c60(0x88)][_0x129c60(0xa2)](_0x2e763c,_0x3e8885);}};function _0x1668(){const _0x35c686=['Bad\x20Request','authService','__metadata','登录成功，返回\x20JWT\x20token','2707470dXzybJ','@nestjs/swagger','updatePassword','Body','SendCodeDto','Get','./dto/authLogin.dto','number','JwtAuthGuard','__esModule','5580337JtqirY','用户登录','auth','用户不存在','getInfo','__decorate','UserRegisterDto','ApiOperation','getOwnPropertyDescriptor','验证码发送成功','今日发送验证码次数已达上限，请24小时后再试！','./dto/loginWithCaptcha.dto','支持使用用户名/邮箱/手机号\x20+\x20密码进行登录','verifyPhoneIdentity','Req','UseGuards','UpdatePasswordDto','metadata','登录失败','decorate','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...','Not\x20Found','327924ozRDIr','register','ValidationPipe','602820utSKra','158278TLoAHq','请求参数错误','用户更改密码','用户注册','__param','AuthService','验证手机号','AuthController','login','使用手机号/邮箱\x20+\x20验证码进行登录。需要先调用发送验证码接口获取验证码。','22493984kqBOWG','string','design:paramtypes','prototype','用户不存在，请先注册！','76UdQtgo','110115VryngO','ApiBearerAuth','sendCode','请求过于频繁','function','当前密码错误！','design:type','verifyIdentity','length','./dto/authRegister.dto','ApiTags','验证身份','ApiResponse','design:returntype','object','用户使用验证码登录','Controller','Post'];_0x1668=function(){return _0x35c686;};return _0x1668();}__decorate([(0x0,common_1['Post'])(_0xe92cac(0xac)),(0x0,swagger_1['ApiOperation'])({'summary':_0xe92cac(0xb2)}),__param(0x0,(0x0,common_1[_0xe92cac(0x8e)])(new common_1['ValidationPipe']({'transform':!![]}))),__param(0x1,(0x0,common_1[_0xe92cac(0xa3)])()),__metadata(_0xe92cac(0x7b),Function),__metadata(_0xe92cac(0x71),[authRegister_dto_1[_0xe92cac(0x9b)],Object]),__metadata('design:returntype',Promise)],AuthController[_0xe92cac(0x72)],'register',null),__decorate([(0x0,common_1[_0xe92cac(0x86)])(_0xe92cac(0xb7)),(0x0,swagger_1[_0xe92cac(0x9c)])({'summary':_0xe92cac(0x96),'description':_0xe92cac(0xa1)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0xe92cac(0x8a),'schema':{'type':'string','example':_0xe92cac(0xa9)}}),(0x0,swagger_1[_0xe92cac(0x81)])({'status':0x190,'description':_0xe92cac(0xa7),'schema':{'type':_0xe92cac(0x83),'properties':{'statusCode':{'type':_0xe92cac(0x92),'example':0x190},'message':{'type':_0xe92cac(0x70),'example':_0xe92cac(0x7a)},'error':{'type':'string','example':_0xe92cac(0x87)}}}}),__param(0x0,(0x0,common_1[_0xe92cac(0x8e)])(new common_1['ValidationPipe']({'transform':!![]}))),__param(0x1,(0x0,common_1[_0xe92cac(0xa3)])()),__metadata(_0xe92cac(0x7b),Function),__metadata('design:paramtypes',[authLogin_dto_1['UserLoginDto'],Object]),__metadata(_0xe92cac(0x82),Promise)],AuthController['prototype'],'login',null),__decorate([(0x0,common_1['Post'])('loginWithCaptcha'),(0x0,swagger_1[_0xe92cac(0x9c)])({'summary':_0xe92cac(0x84),'description':_0xe92cac(0x6e)}),(0x0,swagger_1[_0xe92cac(0x81)])({'status':0xc8,'description':_0xe92cac(0x8a),'schema':{'type':_0xe92cac(0x70),'example':_0xe92cac(0xa9)}}),(0x0,swagger_1[_0xe92cac(0x81)])({'status':0x190,'description':_0xe92cac(0xb0),'schema':{'type':'object','properties':{'statusCode':{'type':'number','example':0x190},'message':{'type':_0xe92cac(0x70),'example':'验证码已过期，请重新发送！'},'error':{'type':_0xe92cac(0x70),'example':'Bad\x20Request'}}}}),(0x0,swagger_1['ApiResponse'])({'status':0x194,'description':_0xe92cac(0x98),'schema':{'type':_0xe92cac(0x83),'properties':{'statusCode':{'type':'number','example':0x194},'message':{'type':_0xe92cac(0x70),'example':_0xe92cac(0x73)},'error':{'type':'string','example':_0xe92cac(0xaa)}}}}),__param(0x0,(0x0,common_1[_0xe92cac(0x8e)])(new common_1[(_0xe92cac(0xad))]({'transform':!![]}))),__param(0x1,(0x0,common_1[_0xe92cac(0xa3)])()),__metadata(_0xe92cac(0x7b),Function),__metadata('design:paramtypes',[loginWithCaptcha_dto_1['LoginWithCaptchaDto'],Object]),__metadata(_0xe92cac(0x82),Promise)],AuthController[_0xe92cac(0x72)],'loginWithCaptcha',null),__decorate([(0x0,common_1[_0xe92cac(0x86)])(_0xe92cac(0x8d)),(0x0,swagger_1[_0xe92cac(0x9c)])({'summary':_0xe92cac(0xb1)}),(0x0,common_1[_0xe92cac(0xa4)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0xe92cac(0x76)])(),__param(0x0,(0x0,common_1[_0xe92cac(0xa3)])()),__param(0x1,(0x0,common_1['Body'])(new common_1['ValidationPipe']({'transform':!![]}))),__metadata('design:type',Function),__metadata(_0xe92cac(0x71),[Object,updatePassword_dto_1[_0xe92cac(0xa5)]]),__metadata(_0xe92cac(0x82),Promise)],AuthController['prototype'],'updatePassword',null),__decorate([(0x0,common_1[_0xe92cac(0x90)])(_0xe92cac(0x99)),(0x0,swagger_1[_0xe92cac(0x9c)])({'summary':'获取用户个人信息'}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0xe92cac(0x76)])(),__param(0x0,(0x0,common_1[_0xe92cac(0xa3)])()),__metadata('design:type',Function),__metadata(_0xe92cac(0x71),[Object]),__metadata(_0xe92cac(0x82),Promise)],AuthController[_0xe92cac(0x72)],'getInfo',null),__decorate([(0x0,common_1['Post'])(_0xe92cac(0x77)),(0x0,swagger_1[_0xe92cac(0x9c)])({'summary':'发送验证码','description':'\x0a发送验证码到指定的邮箱或手机号。\x0a\x0a###\x20频率限制\x0a-\x20同一邮箱/手机号60秒内只能发送一次验证码\x0a-\x20每个邮箱/手机号每天最多发送10次\x0a-\x20验证码有效期为5分钟\x0a\x0a###\x20使用场景\x0a-\x20注册验证：isLogin\x20=\x20false\x0a-\x20登录验证：isLogin\x20=\x20true\x0a\x0a###\x20注意事项\x0a-\x20手机号格式：11位数字，以1开头\x0a-\x20邮箱格式：标准邮箱格式（example@domain.com）\x0a-\x20如果是登录场景，系统会检查该手机号/邮箱是否已注册\x0a\x20\x20\x20\x20'}),(0x0,swagger_1[_0xe92cac(0x81)])({'status':0xc8,'description':_0xe92cac(0x9e),'schema':{'example':'验证码发送成功、请填写验证码完成注册！'}}),(0x0,swagger_1['ApiResponse'])({'status':0x190,'description':_0xe92cac(0xb0),'schema':{'example':{'statusCode':0x190,'message':'请提供有效的邮箱地址或手机号码。'}}}),(0x0,swagger_1[_0xe92cac(0x81)])({'status':0x1ad,'description':_0xe92cac(0x78),'schema':{'example':{'statusCode':0x1ad,'message':_0xe92cac(0x9f)}}}),__param(0x0,(0x0,common_1[_0xe92cac(0x8e)])(new common_1['ValidationPipe']({'transform':!![]}))),__metadata(_0xe92cac(0x7b),Function),__metadata(_0xe92cac(0x71),[sendCode_dto_1[_0xe92cac(0x8f)]]),__metadata(_0xe92cac(0x82),Promise)],AuthController[_0xe92cac(0x72)],_0xe92cac(0x77),null),__decorate([(0x0,common_1[_0xe92cac(0x86)])('verifyIdentity'),(0x0,swagger_1['ApiOperation'])({'summary':_0xe92cac(0x80)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0xe92cac(0x93)]),(0x0,swagger_1[_0xe92cac(0x76)])(),__param(0x0,(0x0,common_1[_0xe92cac(0xa3)])()),__param(0x1,(0x0,common_1[_0xe92cac(0x8e)])(new common_1[(_0xe92cac(0xad))]({'transform':!![]}))),__metadata(_0xe92cac(0x7b),Function),__metadata(_0xe92cac(0x71),[Object,Object]),__metadata(_0xe92cac(0x82),Promise)],AuthController['prototype'],_0xe92cac(0x7c),null),__decorate([(0x0,common_1[_0xe92cac(0x86)])('verifyPhoneIdentity'),(0x0,swagger_1[_0xe92cac(0x9c)])({'summary':_0xe92cac(0xb5)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0xe92cac(0x93)]),(0x0,swagger_1[_0xe92cac(0x76)])(),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0xe92cac(0x8e)])(new common_1[(_0xe92cac(0xad))]({'transform':!![]}))),__metadata(_0xe92cac(0x7b),Function),__metadata(_0xe92cac(0x71),[Object,Object]),__metadata(_0xe92cac(0x82),Promise)],AuthController['prototype'],_0xe92cac(0xa2),null),AuthController=__decorate([(0x0,swagger_1[_0xe92cac(0x7f)])('auth'),(0x0,common_1[_0xe92cac(0x85)])(_0xe92cac(0x97)),__metadata(_0xe92cac(0x71),[auth_service_1[_0xe92cac(0xb4)]])],AuthController),exports[_0xe92cac(0xb6)]=AuthController;