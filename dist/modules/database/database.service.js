'use strict';const _0x45ff7f=_0x246b;function _0x246b(_0x110ed4,_0x3ea465){const _0x2ea015=_0x2ea0();return _0x246b=function(_0x246b06,_0x26f5e4){_0x246b06=_0x246b06-0xec;let _0x12e19c=_0x2ea015[_0x246b06];return _0x12e19c;},_0x246b(_0x110ed4,_0x3ea465);}(function(_0x50a09f,_0x3a39ea){const _0x1492e0=_0x246b,_0x31c70b=_0x50a09f();while(!![]){try{const _0x1a2082=-parseInt(_0x1492e0(0x161))/0x1*(-parseInt(_0x1492e0(0x131))/0x2)+parseInt(_0x1492e0(0x13b))/0x3+parseInt(_0x1492e0(0xff))/0x4+-parseInt(_0x1492e0(0x11d))/0x5+parseInt(_0x1492e0(0x109))/0x6+parseInt(_0x1492e0(0x147))/0x7+-parseInt(_0x1492e0(0xf5))/0x8;if(_0x1a2082===_0x3a39ea)break;else _0x31c70b['push'](_0x31c70b['shift']());}catch(_0x12acba){_0x31c70b['push'](_0x31c70b['shift']());}}}(_0x2ea0,0x2d8c0));var __decorate=this&&this[_0x45ff7f(0xec)]||function(_0x3b68bd,_0x5819a3,_0x3dd756,_0x2c4962){const _0x13a085=_0x45ff7f;var _0x4ebf33=arguments[_0x13a085(0x14d)],_0x43da27=_0x4ebf33<0x3?_0x5819a3:_0x2c4962===null?_0x2c4962=Object[_0x13a085(0x151)](_0x5819a3,_0x3dd756):_0x2c4962,_0x56d5a6;if(typeof Reflect===_0x13a085(0xef)&&typeof Reflect['decorate']===_0x13a085(0x128))_0x43da27=Reflect[_0x13a085(0x10a)](_0x3b68bd,_0x5819a3,_0x3dd756,_0x2c4962);else{for(var _0x35a069=_0x3b68bd[_0x13a085(0x14d)]-0x1;_0x35a069>=0x0;_0x35a069--)if(_0x56d5a6=_0x3b68bd[_0x35a069])_0x43da27=(_0x4ebf33<0x3?_0x56d5a6(_0x43da27):_0x4ebf33>0x3?_0x56d5a6(_0x5819a3,_0x3dd756,_0x43da27):_0x56d5a6(_0x5819a3,_0x3dd756))||_0x43da27;}return _0x4ebf33>0x3&&_0x43da27&&Object['defineProperty'](_0x5819a3,_0x3dd756,_0x43da27),_0x43da27;},__metadata=this&&this[_0x45ff7f(0x137)]||function(_0x4887c2,_0x57d5ce){const _0x5ab96f=_0x45ff7f;if(typeof Reflect===_0x5ab96f(0xef)&&typeof Reflect[_0x5ab96f(0x154)]==='function')return Reflect[_0x5ab96f(0x154)](_0x4887c2,_0x57d5ce);};function _0x2ea0(){const _0x3ad240=['menuIcon','绘画广场','ri:message-3-line','ant-design:appstore-outlined','hashSync','buyCramiAddress','专业绘画','admin','130596CYWIHQ','decorate','icon-park-outline:shopping','log','SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20menu','robotAvatar','connection','@nestjs/common','error:\x20','menuName','map','mjTranslatePrompt','INSERT\x20INTO\x20menu\x20(menuName,\x20menuPath,\x20menuIcon,\x20menuTipText,\x20menuType,\x20menuPlatform,\x20menuIframeUrl,\x20`order`,\x20isShow,\x20isJump,\x20isNeedAuth,\x20createdAt,\x20updatedAt,\x20deletedAt)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20NOW(),\x20NOW(),\x20NULL)','Translate\x20any\x20given\x20phrase\x20from\x20any\x20language\x20into\x20English.\x20For\x20instance,\x20when\x20I\x20input\x20\x27{可爱的熊猫}\x27,\x20you\x20should\x20output\x20\x27{cute\x20panda}\x27,\x20with\x20no\x20period\x20at\x20the\x20end.','checkMenuConfig','insertId','registerSendDrawMjCount','INTERNAL_SERVER_ERROR','HttpStatus','firstRregisterSendDrawMjCount','425985MAJyEN','ri:landscape-line','baiduSiteId','Pay','firstRegisterSendStatus','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','Connection','onModuleInit','/user-center','/pay','Midjourney','function','油画风格,像素风格,赛博朋克,动漫,日系,超现实主义,油画,卡通,插画,海报,写实,扁平,中国风,水墨画,唯美二次元,印象派,炫彩插画,像素艺术,艺术创想,色彩主义,数字艺术','/chat','Logger','public','encry','ri:account-pin-box-line','count','初始化菜单配置成功','62hxMCfl','创建基础菜单配置失败！','DatabaseService','siteName','typeorm','创建默认超级管理员失败！','__metadata','isVerifyEmail','menuPlatform','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','400641jGOoWj','创建默认网站配置失败！','高级积分','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','bcryptjs','基础绘画','noticeInfo','初始化创建','Injectable','/midjourney','openaiBaseKey','openaiBaseUrl','2346981QsZGNh','registerSendStatus','个人中心','isShow','checkSuperAdmin','Chat','length','createBaseMenuConfig','userDefautlAvatar','https://api.lightai.io','getOwnPropertyDescriptor','checkGalleryConfig','Market','metadata','join','firstRegisterSendRank','用户成功、用户名为[','123456','300','firstRregisterSendModel4Count','AppStore','\x27,\x20\x27','registerSendModel4Count',']、初始密码为[','createDefaultUser','query','11489PZZBEd','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','推广计划','\x0a####\x20AIWeb\x20欢迎您\x0a\x20-\x20欢迎使用\x20AIWeb\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','/app-store','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','icon-park-outline:mindmap-map','思维导图','__decorate','solar:album-line-duotone','应用广场','object','fluent:draw-image-24-regular','drawMjName','HttpException','firstRregisterSendModel3Count','drawingStyles','7111880bqIfVl','/mind','openaiTimeout','super','Draw','createBaseSiteConfig','对话聊天','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','checkSiteBaseConfig','/market','1255948niUhup','sk-'];_0x2ea0=function(){return _0x3ad240;};return _0x2ea0();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[_0x45ff7f(0x133)]=void 0x0;const common_1=require(_0x45ff7f(0x110)),bcrypt=require(_0x45ff7f(0x13f)),typeorm_1=require(_0x45ff7f(0x135));let DatabaseService=class DatabaseService{constructor(_0x18bf4a){const _0xa1bb1e=_0x45ff7f;this[_0xa1bb1e(0x10f)]=_0x18bf4a;}async[_0x45ff7f(0x124)](){const _0x1105d0=_0x45ff7f;await this['checkSuperAdmin'](),await this[_0x1105d0(0xfd)](),await this[_0x1105d0(0x117)](),await this[_0x1105d0(0x152)]();}async[_0x45ff7f(0x14b)](){const _0x4dc564=_0x45ff7f,_0x4eacd5=await this[_0x4dc564(0x10f)]['query'](_0x4dc564(0x166));if(!_0x4eacd5||_0x4eacd5[_0x4dc564(0x14d)]===0x0){const _0x5f3f08=bcrypt[_0x4dc564(0x105)](_0x4dc564(0x158),0xa),_0x2cff33=bcrypt[_0x4dc564(0x105)](_0x4dc564(0x158),0xa),_0x227496=_0x4dc564(0xf8),_0x45399e=_0x4dc564(0x108),_0x4e737b={'username':_0x4dc564(0xf8),'password':_0x5f3f08,'status':0x1,'email':_0x227496,'sex':0x1,'role':_0x4dc564(0xf8)},_0x135d52={'username':_0x4dc564(0x108),'password':_0x2cff33,'status':0x0,'email':_0x45399e,'sex':0x1,'role':_0x4dc564(0x108)};await this[_0x4dc564(0x15f)](_0x4e737b),await this[_0x4dc564(0x15f)](_0x135d52);}}async['createDefaultUser'](_0x200bcc){const _0x29203b=_0x45ff7f;try{const {username:_0x465247,password:_0x4625a9,status:_0x4656c1,email:_0x584f40,role:_0x4eebf8}=_0x200bcc,_0x157968=await this['connection'][_0x29203b(0x160)](_0x29203b(0x13e)+_0x465247+'\x27,\x20\x27'+_0x4625a9+_0x29203b(0x15c)+_0x4656c1+_0x29203b(0x15c)+_0x584f40+'\x27,\x20\x27'+_0x4eebf8+'\x27)'),_0x2ea8dd=_0x157968[_0x29203b(0x118)];await this[_0x29203b(0x10f)][_0x29203b(0x160)](_0x29203b(0x13a)+_0x2ea8dd+'\x27,\x200,\x201000,\x20100)'),common_1[_0x29203b(0x12b)][_0x29203b(0x10c)](_0x29203b(0x142)+_0x4eebf8+_0x29203b(0x157)+_0x465247+_0x29203b(0x15e)+(_0x465247===_0x29203b(0xf8)?_0x29203b(0xf8):_0x29203b(0x158))+']\x20==============>\x20请注意查阅',_0x29203b(0x133));}catch(_0x38ccc3){console[_0x29203b(0x10c)]('error:\x20',_0x38ccc3);throw new common_1['HttpException'](_0x29203b(0x136),common_1[_0x29203b(0x11b)][_0x29203b(0x11a)]);}}async[_0x45ff7f(0xfd)](){const _0x5df2de=_0x45ff7f,_0x5ba3f8=[_0x5df2de(0x134),_0x5df2de(0x10e)],_0x3ae4f6=await this[_0x5df2de(0x10f)]['query'](_0x5df2de(0x162)+_0x5ba3f8[_0x5df2de(0x113)](_0xbcddfe=>'\x27'+_0xbcddfe+'\x27')[_0x5df2de(0x155)](',')+')\x0a'),_0xca4807=parseInt(_0x3ae4f6[0x0][_0x5df2de(0x12f)]);_0xca4807===0x0&&await this[_0x5df2de(0xfa)]();}async[_0x45ff7f(0xfa)](){const _0x3f2990=_0x45ff7f;try{const _0xe3112e='',_0x2e91d3=_0x3f2990(0x164),_0x5d1a9d=[{'configKey':_0x3f2990(0x134),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x3f2990(0x10e),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x3f2990(0x14f),'configVal':'','public':0x0,'encry':0x0},{'configKey':'baiduCode','configVal':_0xe3112e,'public':0x1,'encry':0x0},{'configKey':_0x3f2990(0x11f),'configVal':'','public':0x0,'encry':0x0},{'configKey':'baiduToken','configVal':'','public':0x0,'encry':0x0},{'configKey':_0x3f2990(0x106),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x3f2990(0x146),'configVal':_0x3f2990(0x150),'public':0x0,'encry':0x0},{'configKey':_0x3f2990(0xf7),'configVal':_0x3f2990(0x159),'public':0x0,'encry':0x0},{'configKey':_0x3f2990(0x145),'configVal':_0x3f2990(0x100),'public':0x0,'encry':0x0},{'configKey':_0x3f2990(0x114),'configVal':_0x3f2990(0x116),'public':0x0,'encry':0x0},{'configKey':_0x3f2990(0x141),'configVal':_0x2e91d3,'public':0x1,'encry':0x0},{'configKey':_0x3f2990(0x148),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'registerSendModel3Count','configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x3f2990(0x15d),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x3f2990(0x119),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x3f2990(0x121),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x3f2990(0x156),'configVal':'500','public':0x1,'encry':0x0},{'configKey':_0x3f2990(0xf3),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x3f2990(0x15a),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x3f2990(0x11c),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x3f2990(0x138),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'model3Name','configVal':'普通积分','public':0x1,'encry':0x0},{'configKey':'model4Name','configVal':_0x3f2990(0x13d),'public':0x1,'encry':0x0},{'configKey':_0x3f2990(0xf1),'configVal':'绘画积分','public':0x1,'encry':0x0},{'configKey':_0x3f2990(0xf4),'configVal':_0x3f2990(0x129),'public':0x1,'encry':0x0}],_0x2b2534=await this['connection'][_0x3f2990(0x160)](_0x3f2990(0x122)+_0x5d1a9d[_0x3f2990(0x113)](_0x449c92=>'(\x27'+_0x449c92['configKey']+_0x3f2990(0x15c)+_0x449c92['configVal']['replace'](/'/g,'\x5c\x27')+_0x3f2990(0x15c)+_0x449c92[_0x3f2990(0x12c)]+_0x3f2990(0x15c)+_0x449c92[_0x3f2990(0x12d)]+'\x27)')['join'](',\x20'));common_1['Logger'][_0x3f2990(0x10c)](_0x3f2990(0xfc),_0x3f2990(0x133));}catch(_0x92ee01){console[_0x3f2990(0x10c)](_0x3f2990(0x111),_0x92ee01);throw new common_1[(_0x3f2990(0xf2))](_0x3f2990(0x13c),common_1[_0x3f2990(0x11b)]['INTERNAL_SERVER_ERROR']);}}async[_0x45ff7f(0x117)](){const _0x138728=_0x45ff7f,_0x1b0c8e=await this['connection'][_0x138728(0x160)](_0x138728(0x10d)),_0x72fe52=parseInt(_0x1b0c8e[0x0][_0x138728(0x12f)]);_0x72fe52===0x0&&await this[_0x138728(0x14e)]();}async['createBaseMenuConfig'](){const _0x6d195c=_0x45ff7f;try{const _0x3e8a52=[{'menuTipText':_0x6d195c(0xfb),'menuIcon':_0x6d195c(0x103),'menuName':_0x6d195c(0x14c),'menuPath':_0x6d195c(0x12a),'menuType':0x0,'menuPlatform':0x1,'order':0x64,'isShow':!![]},{'menuTipText':_0x6d195c(0xee),'menuIcon':_0x6d195c(0x104),'menuName':'AppStore','menuPath':_0x6d195c(0x165),'menuType':0x0,'menuPlatform':0x1,'order':0xc8,'isShow':!![]},{'menuTipText':'专业绘画','menuIcon':_0x6d195c(0x11e),'menuName':_0x6d195c(0x127),'menuPath':_0x6d195c(0x144),'menuType':0x0,'menuPlatform':0x1,'order':0x12c,'isShow':!![]},{'menuTipText':_0x6d195c(0x102),'menuIcon':_0x6d195c(0xed),'menuName':_0x6d195c(0x153),'menuPath':_0x6d195c(0xfe),'menuType':0x0,'menuPlatform':0x1,'order':0x190,'isShow':!![]},{'menuTipText':_0x6d195c(0x140),'menuIcon':_0x6d195c(0xf0),'menuName':_0x6d195c(0xf9),'menuPath':'/draw','menuType':0x0,'menuPlatform':0x1,'order':0x1f4,'isShow':!![]},{'menuTipText':_0x6d195c(0x168),'menuIcon':_0x6d195c(0x167),'menuName':'Mind','menuPath':_0x6d195c(0xf6),'menuType':0x0,'menuPlatform':0x1,'order':0x258,'isShow':!![]},{'menuTipText':'会员中心','menuIcon':_0x6d195c(0x10b),'menuName':_0x6d195c(0x120),'menuPath':_0x6d195c(0x126),'menuType':0x0,'menuPlatform':0x1,'order':0x2bc,'isShow':!![]},{'menuTipText':_0x6d195c(0x163),'menuIcon':'uiw:share','menuName':'Share','menuPath':'/share','menuType':0x0,'menuPlatform':0x1,'order':0x320,'isShow':!![]}],_0x216464=[{'menuTipText':_0x6d195c(0xfb),'menuIcon':_0x6d195c(0x103),'menuName':_0x6d195c(0x14c),'menuPath':_0x6d195c(0x12a),'menuType':0x0,'menuPlatform':0x0,'order':0x64,'isShow':!![]},{'menuTipText':_0x6d195c(0xee),'menuIcon':_0x6d195c(0x104),'menuName':_0x6d195c(0x15b),'menuPath':_0x6d195c(0x165),'menuType':0x0,'menuPlatform':0x0,'order':0xc8,'isShow':!![]},{'menuTipText':_0x6d195c(0x107),'menuIcon':_0x6d195c(0x11e),'menuName':'Midjourney','menuPath':_0x6d195c(0x144),'menuType':0x0,'menuPlatform':0x0,'order':0x12c,'isShow':!![]},{'menuTipText':_0x6d195c(0x168),'menuIcon':_0x6d195c(0x167),'menuName':'Mind','menuPath':_0x6d195c(0xf6),'menuType':0x0,'menuPlatform':0x0,'order':0x190,'isShow':!![]},{'menuTipText':_0x6d195c(0x149),'menuIcon':_0x6d195c(0x12e),'menuName':'UserCenter','menuPath':_0x6d195c(0x125),'menuType':0x0,'menuPlatform':0x0,'order':0x1f4,'isShow':!![]}],_0x1004ee=[..._0x3e8a52,..._0x216464];for(const _0x5eb534 of _0x1004ee){await this[_0x6d195c(0x10f)]['query'](_0x6d195c(0x115),[_0x5eb534[_0x6d195c(0x112)],_0x5eb534['menuPath'],_0x5eb534[_0x6d195c(0x101)],_0x5eb534['menuTipText'],_0x5eb534['menuType'],_0x5eb534[_0x6d195c(0x139)],null,_0x5eb534['order'],_0x5eb534[_0x6d195c(0x14a)],![],![]]);}common_1[_0x6d195c(0x12b)][_0x6d195c(0x10c)](_0x6d195c(0x130),_0x6d195c(0x133));}catch(_0x2bd62c){console[_0x6d195c(0x10c)](_0x6d195c(0x111),_0x2bd62c);throw new common_1[(_0x6d195c(0xf2))](_0x6d195c(0x132),common_1[_0x6d195c(0x11b)]['INTERNAL_SERVER_ERROR']);}}async[_0x45ff7f(0x152)](){}};DatabaseService=__decorate([(0x0,common_1[_0x45ff7f(0x143)])(),__metadata('design:paramtypes',[typeorm_1[_0x45ff7f(0x123)]])],DatabaseService),exports[_0x45ff7f(0x133)]=DatabaseService;