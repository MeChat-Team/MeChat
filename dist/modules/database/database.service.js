'use strict';const _0x249c99=_0x3924;(function(_0x1eb269,_0x564b81){const _0x4fe28c=_0x3924,_0x13436b=_0x1eb269();while(!![]){try{const _0x3e2a05=parseInt(_0x4fe28c(0x181))/0x1*(parseInt(_0x4fe28c(0x1e9))/0x2)+-parseInt(_0x4fe28c(0x197))/0x3*(-parseInt(_0x4fe28c(0x1cb))/0x4)+-parseInt(_0x4fe28c(0x1d3))/0x5+parseInt(_0x4fe28c(0x1f6))/0x6*(parseInt(_0x4fe28c(0x1cf))/0x7)+parseInt(_0x4fe28c(0x1d5))/0x8+parseInt(_0x4fe28c(0x1b0))/0x9+-parseInt(_0x4fe28c(0x1ea))/0xa;if(_0x3e2a05===_0x564b81)break;else _0x13436b['push'](_0x13436b['shift']());}catch(_0x201370){_0x13436b['push'](_0x13436b['shift']());}}}(_0x1be4,0x77c42));function _0x3924(_0x59cd71,_0x3c6f6b){const _0x1be496=_0x1be4();return _0x3924=function(_0x392483,_0x3269a9){_0x392483=_0x392483-0x17c;let _0x42aa64=_0x1be496[_0x392483];return _0x42aa64;},_0x3924(_0x59cd71,_0x3c6f6b);}function _0x1be4(){const _0x38a764=['5707496YUhzhl','createDefaultUser','hashSync','Injectable','baiduToken','checkSiteBaseConfig','/pay','/share','join','ri:message-3-line','@nestjs/common',']、初始密码为[','error:\x20','defineProperty','INSERT\x20INTO\x20menu\x20(menuName,\x20menuPath,\x20menuIcon,\x20menuTipText,\x20menuType,\x20menuPlatform,\x20menuIframeUrl,\x20`order`,\x20isShow,\x20isJump,\x20isNeedAuth,\x20createdAt,\x20updatedAt,\x20deletedAt)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20NOW(),\x20NOW(),\x20NULL)','创建默认网站配置失败！','fluent:draw-image-24-regular','AppStore','registerSendModel3Count','绘画积分','361326DwbILh','15781840JSwoFS','uiw:share','getOwnPropertyDescriptor','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','HttpStatus','registerSendStatus','replace','typeorm','isShow','function','decorate','__metadata','467562GcrCMN','onModuleInit','sk-','__esModule','/user-center','checkMenuConfig','UserCenter','3LhPPdo','model4Name','INTERNAL_SERVER_ERROR','ri:account-pin-box-line','SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20menu','menuType','应用广场','baiduCode','高级积分','drawingStyles','configVal','super','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','初始化创建','Pay','创建默认超级管理员失败！','/mind','Share','solar:album-line-duotone','Midjourney','初始化菜单配置成功','length','72RrXaqh','普通积分','openaiTimeout','query','对话聊天','\x0a####\x20AIWeb\x20欢迎您\x0a\x20-\x20欢迎使用\x20AIWeb\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','openaiBaseKey','Mind','drawMjName','icon-park-outline:mindmap-map','个人中心','500','registerSendDrawMjCount','menuName','会员中心','isVerifyEmail','checkGalleryConfig',']\x20==============>\x20请注意查阅','专业绘画','admin','__decorate','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','Logger','/midjourney','\x27,\x20\x27','2532105ugNQkf','createBaseMenuConfig','userDefautlAvatar','Connection','思维导图','DatabaseService','insertId','firstRegisterSendStatus','design:paramtypes','ri:landscape-line','HttpException','ant-design:appstore-outlined','robotAvatar','icon-park-outline:shopping','order','menuPath','油画风格,像素风格,赛博朋克,动漫,日系,超现实主义,油画,卡通,插画,海报,写实,扁平,中国风,水墨画,唯美二次元,印象派,炫彩插画,像素艺术,艺术创想,色彩主义,数字艺术','/chat','/market','metadata','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','openaiBaseUrl','https://api.lightai.io','count','log','用户成功、用户名为[','/app-store','134924NBNBJn','connection','menuIcon','registerSendModel4Count','14kWRxJr','300','checkSuperAdmin','123456','2167115lsZtBL','menuPlatform'];_0x1be4=function(){return _0x38a764;};return _0x1be4();}var __decorate=this&&this[_0x249c99(0x1ab)]||function(_0x4d73d8,_0x1af9a2,_0x1c99b0,_0x3f8b06){const _0x43eca4=_0x249c99;var _0x2b464c=arguments['length'],_0xf04c2a=_0x2b464c<0x3?_0x1af9a2:_0x3f8b06===null?_0x3f8b06=Object[_0x43eca4(0x1ec)](_0x1af9a2,_0x1c99b0):_0x3f8b06,_0x2634f0;if(typeof Reflect==='object'&&typeof Reflect[_0x43eca4(0x1f4)]===_0x43eca4(0x1f3))_0xf04c2a=Reflect[_0x43eca4(0x1f4)](_0x4d73d8,_0x1af9a2,_0x1c99b0,_0x3f8b06);else{for(var _0x31c002=_0x4d73d8['length']-0x1;_0x31c002>=0x0;_0x31c002--)if(_0x2634f0=_0x4d73d8[_0x31c002])_0xf04c2a=(_0x2b464c<0x3?_0x2634f0(_0xf04c2a):_0x2b464c>0x3?_0x2634f0(_0x1af9a2,_0x1c99b0,_0xf04c2a):_0x2634f0(_0x1af9a2,_0x1c99b0))||_0xf04c2a;}return _0x2b464c>0x3&&_0xf04c2a&&Object[_0x43eca4(0x1e2)](_0x1af9a2,_0x1c99b0,_0xf04c2a),_0xf04c2a;},__metadata=this&&this[_0x249c99(0x1f5)]||function(_0x551183,_0x5d47a4){const _0x17cac0=_0x249c99;if(typeof Reflect==='object'&&typeof Reflect[_0x17cac0(0x1c3)]===_0x17cac0(0x1f3))return Reflect[_0x17cac0(0x1c3)](_0x551183,_0x5d47a4);};Object[_0x249c99(0x1e2)](exports,_0x249c99(0x17d),{'value':!![]}),exports['DatabaseService']=void 0x0;const common_1=require(_0x249c99(0x1df)),bcrypt=require('bcryptjs'),typeorm_1=require(_0x249c99(0x1f1));let DatabaseService=class DatabaseService{constructor(_0x4afac9){const _0x1cedaf=_0x249c99;this[_0x1cedaf(0x1cc)]=_0x4afac9;}async[_0x249c99(0x1f7)](){const _0x574542=_0x249c99;await this[_0x574542(0x1d1)](),await this[_0x574542(0x1da)](),await this[_0x574542(0x17f)](),await this['checkGalleryConfig']();}async[_0x249c99(0x1d1)](){const _0x33a41d=_0x249c99,_0x28cc73=await this[_0x33a41d(0x1cc)][_0x33a41d(0x19a)](_0x33a41d(0x18d));if(!_0x28cc73||_0x28cc73[_0x33a41d(0x196)]===0x0){const _0x1e8c71=bcrypt[_0x33a41d(0x1d7)]('123456',0xa),_0x3e9f0a=bcrypt['hashSync'](_0x33a41d(0x1d2),0xa),_0xb3d6ae=_0x33a41d(0x18c),_0x55dc86=_0x33a41d(0x1aa),_0x5b2e19={'username':_0x33a41d(0x18c),'password':_0x1e8c71,'status':0x1,'email':_0xb3d6ae,'sex':0x1,'role':_0x33a41d(0x18c)},_0x4009a9={'username':'admin','password':_0x3e9f0a,'status':0x0,'email':_0x55dc86,'sex':0x1,'role':_0x33a41d(0x1aa)};await this['createDefaultUser'](_0x5b2e19),await this[_0x33a41d(0x1d6)](_0x4009a9);}}async[_0x249c99(0x1d6)](_0x319842){const _0x191d78=_0x249c99;try{const {username:_0x5b131c,password:_0x342c9d,status:_0x28f409,email:_0x55a1a8,role:_0x124c5f}=_0x319842,_0x5680b4=await this[_0x191d78(0x1cc)][_0x191d78(0x19a)]('INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27'+_0x5b131c+_0x191d78(0x1af)+_0x342c9d+'\x27,\x20\x27'+_0x28f409+'\x27,\x20\x27'+_0x55a1a8+_0x191d78(0x1af)+_0x124c5f+'\x27)'),_0x51fdab=_0x5680b4[_0x191d78(0x1b6)];await this[_0x191d78(0x1cc)][_0x191d78(0x19a)](_0x191d78(0x1ed)+_0x51fdab+'\x27,\x200,\x201000,\x20100)'),common_1['Logger'][_0x191d78(0x1c8)](_0x191d78(0x18e)+_0x124c5f+_0x191d78(0x1c9)+_0x5b131c+_0x191d78(0x1e0)+(_0x5b131c===_0x191d78(0x18c)?'super':_0x191d78(0x1d2))+_0x191d78(0x1a8),_0x191d78(0x1b5));}catch(_0xa162cd){console['log'](_0x191d78(0x1e1),_0xa162cd);throw new common_1[(_0x191d78(0x1ba))](_0x191d78(0x190),common_1['HttpStatus'][_0x191d78(0x183)]);}}async[_0x249c99(0x1da)](){const _0x307db5=_0x249c99,_0x515a85=['siteName',_0x307db5(0x1bc)],_0x40a246=await this[_0x307db5(0x1cc)][_0x307db5(0x19a)](_0x307db5(0x1ac)+_0x515a85['map'](_0xddbd1a=>'\x27'+_0xddbd1a+'\x27')[_0x307db5(0x1dd)](',')+')\x0a'),_0x1280bf=parseInt(_0x40a246[0x0][_0x307db5(0x1c7)]);_0x1280bf===0x0&&await this['createBaseSiteConfig']();}async['createBaseSiteConfig'](){const _0x7a65ea=_0x249c99;try{const _0x4d10cd='',_0x31e94b=_0x7a65ea(0x19c),_0x17fca9=[{'configKey':'siteName','configVal':'','public':0x1,'encry':0x0},{'configKey':_0x7a65ea(0x1bc),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x7a65ea(0x1b2),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x7a65ea(0x188),'configVal':_0x4d10cd,'public':0x1,'encry':0x0},{'configKey':'baiduSiteId','configVal':'','public':0x0,'encry':0x0},{'configKey':_0x7a65ea(0x1d9),'configVal':'','public':0x0,'encry':0x0},{'configKey':'buyCramiAddress','configVal':'','public':0x1,'encry':0x0},{'configKey':_0x7a65ea(0x1c5),'configVal':_0x7a65ea(0x1c6),'public':0x0,'encry':0x0},{'configKey':_0x7a65ea(0x199),'configVal':_0x7a65ea(0x1d0),'public':0x0,'encry':0x0},{'configKey':_0x7a65ea(0x19d),'configVal':_0x7a65ea(0x17c),'public':0x0,'encry':0x0},{'configKey':'mjTranslatePrompt','configVal':'Translate\x20any\x20given\x20phrase\x20from\x20any\x20language\x20into\x20English.\x20For\x20instance,\x20when\x20I\x20input\x20\x27{可爱的熊猫}\x27,\x20you\x20should\x20output\x20\x27{cute\x20panda}\x27,\x20with\x20no\x20period\x20at\x20the\x20end.','public':0x0,'encry':0x0},{'configKey':'noticeInfo','configVal':_0x31e94b,'public':0x1,'encry':0x0},{'configKey':_0x7a65ea(0x1ef),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x7a65ea(0x1e7),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x7a65ea(0x1ce),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x7a65ea(0x1a3),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x7a65ea(0x1b7),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'firstRegisterSendRank','configVal':_0x7a65ea(0x1a2),'public':0x1,'encry':0x0},{'configKey':'firstRregisterSendModel3Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendModel4Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendDrawMjCount','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x7a65ea(0x1a6),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'model3Name','configVal':_0x7a65ea(0x198),'public':0x1,'encry':0x0},{'configKey':_0x7a65ea(0x182),'configVal':_0x7a65ea(0x189),'public':0x1,'encry':0x0},{'configKey':_0x7a65ea(0x19f),'configVal':_0x7a65ea(0x1e8),'public':0x1,'encry':0x0},{'configKey':_0x7a65ea(0x18a),'configVal':_0x7a65ea(0x1c0),'public':0x1,'encry':0x0}],_0x4be41d=await this['connection'][_0x7a65ea(0x19a)]('INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20'+_0x17fca9['map'](_0x38e02c=>'(\x27'+_0x38e02c['configKey']+_0x7a65ea(0x1af)+_0x38e02c[_0x7a65ea(0x18b)][_0x7a65ea(0x1f0)](/'/g,'\x5c\x27')+'\x27,\x20\x27'+_0x38e02c['public']+_0x7a65ea(0x1af)+_0x38e02c['encry']+'\x27)')['join'](',\x20'));common_1[_0x7a65ea(0x1ad)][_0x7a65ea(0x1c8)](_0x7a65ea(0x1c4),_0x7a65ea(0x1b5));}catch(_0x51c311){console[_0x7a65ea(0x1c8)](_0x7a65ea(0x1e1),_0x51c311);throw new common_1['HttpException'](_0x7a65ea(0x1e4),common_1[_0x7a65ea(0x1ee)][_0x7a65ea(0x183)]);}}async[_0x249c99(0x17f)](){const _0x1f0970=_0x249c99,_0x3098b2=await this['connection'][_0x1f0970(0x19a)](_0x1f0970(0x185)),_0x448567=parseInt(_0x3098b2[0x0]['count']);_0x448567===0x0&&await this[_0x1f0970(0x1b1)]();}async[_0x249c99(0x1b1)](){const _0x5e739d=_0x249c99;try{const _0x43e6c6=[{'menuTipText':_0x5e739d(0x19b),'menuIcon':_0x5e739d(0x1de),'menuName':'Chat','menuPath':_0x5e739d(0x1c1),'menuType':0x0,'menuPlatform':0x1,'order':0x64,'isShow':!![]},{'menuTipText':'应用广场','menuIcon':'ant-design:appstore-outlined','menuName':_0x5e739d(0x1e6),'menuPath':'/app-store','menuType':0x0,'menuPlatform':0x1,'order':0xc8,'isShow':!![]},{'menuTipText':'专业绘画','menuIcon':_0x5e739d(0x1b9),'menuName':_0x5e739d(0x194),'menuPath':_0x5e739d(0x1ae),'menuType':0x0,'menuPlatform':0x1,'order':0x12c,'isShow':!![]},{'menuTipText':'绘画广场','menuIcon':_0x5e739d(0x193),'menuName':'Market','menuPath':_0x5e739d(0x1c2),'menuType':0x0,'menuPlatform':0x1,'order':0x190,'isShow':!![]},{'menuTipText':'基础绘画','menuIcon':_0x5e739d(0x1e5),'menuName':'Draw','menuPath':'/draw','menuType':0x0,'menuPlatform':0x1,'order':0x1f4,'isShow':!![]},{'menuTipText':'思维导图','menuIcon':'icon-park-outline:mindmap-map','menuName':_0x5e739d(0x19e),'menuPath':_0x5e739d(0x191),'menuType':0x0,'menuPlatform':0x1,'order':0x258,'isShow':!![]},{'menuTipText':_0x5e739d(0x1a5),'menuIcon':_0x5e739d(0x1bd),'menuName':_0x5e739d(0x18f),'menuPath':_0x5e739d(0x1db),'menuType':0x0,'menuPlatform':0x1,'order':0x2bc,'isShow':!![]},{'menuTipText':'推广计划','menuIcon':_0x5e739d(0x1eb),'menuName':_0x5e739d(0x192),'menuPath':_0x5e739d(0x1dc),'menuType':0x0,'menuPlatform':0x1,'order':0x320,'isShow':!![]}],_0x5c70a4=[{'menuTipText':'对话聊天','menuIcon':'ri:message-3-line','menuName':'Chat','menuPath':_0x5e739d(0x1c1),'menuType':0x0,'menuPlatform':0x0,'order':0x64,'isShow':!![]},{'menuTipText':_0x5e739d(0x187),'menuIcon':_0x5e739d(0x1bb),'menuName':_0x5e739d(0x1e6),'menuPath':_0x5e739d(0x1ca),'menuType':0x0,'menuPlatform':0x0,'order':0xc8,'isShow':!![]},{'menuTipText':_0x5e739d(0x1a9),'menuIcon':_0x5e739d(0x1b9),'menuName':_0x5e739d(0x194),'menuPath':_0x5e739d(0x1ae),'menuType':0x0,'menuPlatform':0x0,'order':0x12c,'isShow':!![]},{'menuTipText':_0x5e739d(0x1b4),'menuIcon':_0x5e739d(0x1a0),'menuName':_0x5e739d(0x19e),'menuPath':_0x5e739d(0x191),'menuType':0x0,'menuPlatform':0x0,'order':0x190,'isShow':!![]},{'menuTipText':_0x5e739d(0x1a1),'menuIcon':_0x5e739d(0x184),'menuName':_0x5e739d(0x180),'menuPath':_0x5e739d(0x17e),'menuType':0x0,'menuPlatform':0x0,'order':0x1f4,'isShow':!![]}],_0x2b2396=[..._0x43e6c6,..._0x5c70a4];for(const _0x237fe7 of _0x2b2396){await this[_0x5e739d(0x1cc)][_0x5e739d(0x19a)](_0x5e739d(0x1e3),[_0x237fe7[_0x5e739d(0x1a4)],_0x237fe7[_0x5e739d(0x1bf)],_0x237fe7[_0x5e739d(0x1cd)],_0x237fe7['menuTipText'],_0x237fe7[_0x5e739d(0x186)],_0x237fe7[_0x5e739d(0x1d4)],null,_0x237fe7[_0x5e739d(0x1be)],_0x237fe7[_0x5e739d(0x1f2)],![],![]]);}common_1[_0x5e739d(0x1ad)][_0x5e739d(0x1c8)](_0x5e739d(0x195),_0x5e739d(0x1b5));}catch(_0x2e00e2){console[_0x5e739d(0x1c8)]('error:\x20',_0x2e00e2);throw new common_1[(_0x5e739d(0x1ba))]('创建基础菜单配置失败！',common_1[_0x5e739d(0x1ee)][_0x5e739d(0x183)]);}}async[_0x249c99(0x1a7)](){}};DatabaseService=__decorate([(0x0,common_1[_0x249c99(0x1d8)])(),__metadata(_0x249c99(0x1b8),[typeorm_1[_0x249c99(0x1b3)]])],DatabaseService),exports[_0x249c99(0x1b5)]=DatabaseService;