'use strict';function _0xac80(){const _0x4db091=['ri:landscape-line','ant-design:appstore-outlined','firstRregisterSendModel4Count','基础绘画','1474050maCwmE','Translate\x20any\x20given\x20phrase\x20from\x20any\x20language\x20into\x20English.\x20For\x20instance,\x20when\x20I\x20input\x20\x27{可爱的熊猫}\x27,\x20you\x20should\x20output\x20\x27{cute\x20panda}\x27,\x20with\x20no\x20period\x20at\x20the\x20end.','menuPath','count','replace','用户成功、用户名为[','Chat','length','noticeInfo','registerSendModel4Count','/share','598408csrRMd','drawMjName','Injectable','buyCramiAddress','专业绘画','createBaseSiteConfig','/draw','connection','534967qBaJmb','join','对话聊天','\x27,\x20\x27','registerSendModel3Count','@nestjs/common','推广计划','应用广场','__decorate','Mind','defineProperty','menuIcon','Pay','checkSuperAdmin','SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20menu','普通积分','创建基础菜单配置失败！','isVerifyEmail','design:paramtypes','36FBRuEe','drawingStyles','admin','firstRegisterSendStatus','UserCenter','ri:message-3-line','super','/market','/pay',']\x20==============>\x20请注意查阅','/midjourney','checkMenuConfig','configKey','metadata','order','siteName','6657025Pzgjwj','insertId','\x27,\x200,\x201000,\x20100)','openaiBaseUrl','AppStore','createBaseMenuConfig','baiduCode','registerSendDrawMjCount','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','firstRegisterSendRank','icon-park-outline:shopping','HttpStatus','初始化菜单配置成功','model3Name','会员中心','error:\x20','初始化创建','menuType','configVal','思维导图','Share','hashSync','300','bcryptjs','mjTranslatePrompt','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','query','baiduSiteId','/chat','object','Market','https://api.lightai.io','robotAvatar','registerSendStatus','INTERNAL_SERVER_ERROR','DatabaseService','createDefaultUser','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','model4Name','500','INSERT\x20INTO\x20menu\x20(menuName,\x20menuPath,\x20menuIcon,\x20menuTipText,\x20menuType,\x20menuPlatform,\x20menuIframeUrl,\x20`order`,\x20isShow,\x20isJump,\x20isNeedAuth,\x20createdAt,\x20updatedAt,\x20deletedAt)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20NOW(),\x20NOW(),\x20NULL)','solar:album-line-duotone','fluent:draw-image-24-regular','icon-park-outline:mindmap-map','function','Connection','log','3162327EclCJB','123456','Draw','firstRregisterSendDrawMjCount','baiduToken','绘画积分','创建默认网站配置失败！','Logger','HttpException','menuPlatform','/user-center','checkGalleryConfig','checkSiteBaseConfig','firstRregisterSendModel3Count','523272cyQbjh',']、初始密码为[','高级积分','7787532rdBVZc','uiw:share','/mind','menuName','sk-','onModuleInit','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','绘画广场'];_0xac80=function(){return _0x4db091;};return _0xac80();}const _0x1375df=_0x2451;(function(_0x185f53,_0x4e803b){const _0x2bba12=_0x2451,_0x2442b2=_0x185f53();while(!![]){try{const _0x5abff8=-parseInt(_0x2bba12(0x182))/0x1+parseInt(_0x2bba12(0x16f))/0x2+parseInt(_0x2bba12(0x113))/0x3*(-parseInt(_0x2bba12(0x160))/0x4)+parseInt(_0x2bba12(0x123))/0x5+parseInt(_0x2bba12(0x163))/0x6+-parseInt(_0x2bba12(0x152))/0x7+parseInt(_0x2bba12(0x17a))/0x8;if(_0x5abff8===_0x4e803b)break;else _0x2442b2['push'](_0x2442b2['shift']());}catch(_0x3447de){_0x2442b2['push'](_0x2442b2['shift']());}}}(_0xac80,0xd7f81));var __decorate=this&&this[_0x1375df(0x108)]||function(_0x466edb,_0x22b162,_0x3f87f9,_0x59bb70){const _0x5cc959=_0x1375df;var _0x92b4f9=arguments['length'],_0x358adf=_0x92b4f9<0x3?_0x22b162:_0x59bb70===null?_0x59bb70=Object['getOwnPropertyDescriptor'](_0x22b162,_0x3f87f9):_0x59bb70,_0xf791a2;if(typeof Reflect===_0x5cc959(0x140)&&typeof Reflect['decorate']===_0x5cc959(0x14f))_0x358adf=Reflect['decorate'](_0x466edb,_0x22b162,_0x3f87f9,_0x59bb70);else{for(var _0x35c7f8=_0x466edb['length']-0x1;_0x35c7f8>=0x0;_0x35c7f8--)if(_0xf791a2=_0x466edb[_0x35c7f8])_0x358adf=(_0x92b4f9<0x3?_0xf791a2(_0x358adf):_0x92b4f9>0x3?_0xf791a2(_0x22b162,_0x3f87f9,_0x358adf):_0xf791a2(_0x22b162,_0x3f87f9))||_0x358adf;}return _0x92b4f9>0x3&&_0x358adf&&Object['defineProperty'](_0x22b162,_0x3f87f9,_0x358adf),_0x358adf;},__metadata=this&&this['__metadata']||function(_0x408ba4,_0x5ba5e0){const _0x55ffee=_0x1375df;if(typeof Reflect===_0x55ffee(0x140)&&typeof Reflect[_0x55ffee(0x120)]===_0x55ffee(0x14f))return Reflect['metadata'](_0x408ba4,_0x5ba5e0);};function _0x2451(_0x5370fa,_0x5dfb79){const _0xac80cb=_0xac80();return _0x2451=function(_0x24514b,_0x5525bd){_0x24514b=_0x24514b-0x105;let _0x3e0a2d=_0xac80cb[_0x24514b];return _0x3e0a2d;},_0x2451(_0x5370fa,_0x5dfb79);}Object[_0x1375df(0x10a)](exports,'__esModule',{'value':!![]}),exports['DatabaseService']=void 0x0;const common_1=require(_0x1375df(0x105)),bcrypt=require(_0x1375df(0x13a)),typeorm_1=require('typeorm');let DatabaseService=class DatabaseService{constructor(_0x186735){const _0x2a4285=_0x1375df;this[_0x2a4285(0x181)]=_0x186735;}async[_0x1375df(0x168)](){const _0x3ad765=_0x1375df;await this[_0x3ad765(0x10d)](),await this[_0x3ad765(0x15e)](),await this['checkMenuConfig'](),await this['checkGalleryConfig']();}async[_0x1375df(0x10d)](){const _0x37aaa5=_0x1375df,_0x319a8e=await this[_0x37aaa5(0x181)][_0x37aaa5(0x13d)](_0x37aaa5(0x148));if(!_0x319a8e||_0x319a8e[_0x37aaa5(0x176)]===0x0){const _0x50d083=bcrypt[_0x37aaa5(0x138)](_0x37aaa5(0x153),0xa),_0x187876=bcrypt[_0x37aaa5(0x138)](_0x37aaa5(0x153),0xa),_0x4e14fe='super',_0x120534=_0x37aaa5(0x115),_0x139098={'username':_0x37aaa5(0x119),'password':_0x50d083,'status':0x1,'email':_0x4e14fe,'sex':0x1,'role':'super'},_0x20baba={'username':_0x37aaa5(0x115),'password':_0x187876,'status':0x0,'email':_0x120534,'sex':0x1,'role':_0x37aaa5(0x115)};await this['createDefaultUser'](_0x139098),await this['createDefaultUser'](_0x20baba);}}async[_0x1375df(0x147)](_0x2516f0){const _0x260c5f=_0x1375df;try{const {username:_0x1d0411,password:_0x18eebd,status:_0x570825,email:_0x21a9d8,role:_0x2bc2d7}=_0x2516f0,_0x1ce1e6=await this['connection'][_0x260c5f(0x13d)](_0x260c5f(0x13c)+_0x1d0411+_0x260c5f(0x185)+_0x18eebd+_0x260c5f(0x185)+_0x570825+_0x260c5f(0x185)+_0x21a9d8+'\x27,\x20\x27'+_0x2bc2d7+'\x27)'),_0x2ca26c=_0x1ce1e6[_0x260c5f(0x124)];await this['connection'][_0x260c5f(0x13d)]('INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27'+_0x2ca26c+_0x260c5f(0x125)),common_1['Logger'][_0x260c5f(0x151)](_0x260c5f(0x133)+_0x2bc2d7+_0x260c5f(0x174)+_0x1d0411+_0x260c5f(0x161)+(_0x1d0411==='super'?_0x260c5f(0x119):_0x260c5f(0x153))+_0x260c5f(0x11c),_0x260c5f(0x146));}catch(_0x47cadf){console[_0x260c5f(0x151)](_0x260c5f(0x132),_0x47cadf);throw new common_1[(_0x260c5f(0x15a))]('创建默认超级管理员失败！',common_1[_0x260c5f(0x12e)][_0x260c5f(0x145)]);}}async['checkSiteBaseConfig'](){const _0x33fa5d=_0x1375df,_0x1423d8=[_0x33fa5d(0x122),_0x33fa5d(0x143)],_0x3a9169=await this[_0x33fa5d(0x181)][_0x33fa5d(0x13d)]('\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20('+_0x1423d8['map'](_0x3d9038=>'\x27'+_0x3d9038+'\x27')[_0x33fa5d(0x183)](',')+')\x0a'),_0x365fe6=parseInt(_0x3a9169[0x0][_0x33fa5d(0x172)]);_0x365fe6===0x0&&await this[_0x33fa5d(0x17f)]();}async['createBaseSiteConfig'](){const _0x5c592a=_0x1375df;try{const _0x4f2d25='',_0x57fa3f='\x0a####\x20AIWeb\x20欢迎您\x0a\x20-\x20欢迎使用\x20AIWeb\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a',_0x3d687d=[{'configKey':'siteName','configVal':'','public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x143),'configVal':'','public':0x1,'encry':0x0},{'configKey':'userDefautlAvatar','configVal':'','public':0x0,'encry':0x0},{'configKey':_0x5c592a(0x129),'configVal':_0x4f2d25,'public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x13e),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x5c592a(0x156),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x5c592a(0x17d),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x126),'configVal':_0x5c592a(0x142),'public':0x0,'encry':0x0},{'configKey':'openaiTimeout','configVal':_0x5c592a(0x139),'public':0x0,'encry':0x0},{'configKey':'openaiBaseKey','configVal':_0x5c592a(0x167),'public':0x0,'encry':0x0},{'configKey':_0x5c592a(0x13b),'configVal':_0x5c592a(0x170),'public':0x0,'encry':0x0},{'configKey':_0x5c592a(0x177),'configVal':_0x57fa3f,'public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x144),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x186),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x178),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x12a),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x116),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x12c),'configVal':_0x5c592a(0x14a),'public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x15f),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x16d),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x155),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x111),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x130),'configVal':_0x5c592a(0x10f),'public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x149),'configVal':_0x5c592a(0x162),'public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x17b),'configVal':_0x5c592a(0x157),'public':0x1,'encry':0x0},{'configKey':_0x5c592a(0x114),'configVal':'油画风格,像素风格,赛博朋克,动漫,日系,超现实主义,油画,卡通,插画,海报,写实,扁平,中国风,水墨画,唯美二次元,印象派,炫彩插画,像素艺术,艺术创想,色彩主义,数字艺术','public':0x1,'encry':0x0}],_0x2088aa=await this[_0x5c592a(0x181)][_0x5c592a(0x13d)](_0x5c592a(0x169)+_0x3d687d['map'](_0x374f52=>'(\x27'+_0x374f52[_0x5c592a(0x11f)]+_0x5c592a(0x185)+_0x374f52[_0x5c592a(0x135)][_0x5c592a(0x173)](/'/g,'\x5c\x27')+_0x5c592a(0x185)+_0x374f52['public']+_0x5c592a(0x185)+_0x374f52['encry']+'\x27)')[_0x5c592a(0x183)](',\x20'));common_1[_0x5c592a(0x159)][_0x5c592a(0x151)](_0x5c592a(0x12b),_0x5c592a(0x146));}catch(_0x344b15){console[_0x5c592a(0x151)]('error:\x20',_0x344b15);throw new common_1[(_0x5c592a(0x15a))](_0x5c592a(0x158),common_1[_0x5c592a(0x12e)][_0x5c592a(0x145)]);}}async[_0x1375df(0x11e)](){const _0x20bf20=_0x1375df,_0x1c1732=await this[_0x20bf20(0x181)][_0x20bf20(0x13d)](_0x20bf20(0x10e)),_0x1abbd6=parseInt(_0x1c1732[0x0]['count']);_0x1abbd6===0x0&&await this[_0x20bf20(0x128)]();}async['createBaseMenuConfig'](){const _0x486306=_0x1375df;try{const _0x2fed8d=[{'menuTipText':_0x486306(0x184),'menuIcon':_0x486306(0x118),'menuName':_0x486306(0x175),'menuPath':_0x486306(0x13f),'menuType':0x0,'menuPlatform':0x1,'order':0x64,'isShow':!![]},{'menuTipText':_0x486306(0x107),'menuIcon':'ant-design:appstore-outlined','menuName':_0x486306(0x127),'menuPath':'/app-store','menuType':0x0,'menuPlatform':0x1,'order':0xc8,'isShow':!![]},{'menuTipText':_0x486306(0x17e),'menuIcon':_0x486306(0x16b),'menuName':'Midjourney','menuPath':_0x486306(0x11d),'menuType':0x0,'menuPlatform':0x1,'order':0x12c,'isShow':!![]},{'menuTipText':_0x486306(0x16a),'menuIcon':_0x486306(0x14c),'menuName':_0x486306(0x141),'menuPath':_0x486306(0x11a),'menuType':0x0,'menuPlatform':0x1,'order':0x190,'isShow':!![]},{'menuTipText':_0x486306(0x16e),'menuIcon':_0x486306(0x14d),'menuName':_0x486306(0x154),'menuPath':_0x486306(0x180),'menuType':0x0,'menuPlatform':0x1,'order':0x1f4,'isShow':!![]},{'menuTipText':_0x486306(0x136),'menuIcon':_0x486306(0x14e),'menuName':'Mind','menuPath':'/mind','menuType':0x0,'menuPlatform':0x1,'order':0x258,'isShow':!![]},{'menuTipText':_0x486306(0x131),'menuIcon':_0x486306(0x12d),'menuName':_0x486306(0x10c),'menuPath':_0x486306(0x11b),'menuType':0x0,'menuPlatform':0x1,'order':0x2bc,'isShow':!![]},{'menuTipText':_0x486306(0x106),'menuIcon':_0x486306(0x164),'menuName':_0x486306(0x137),'menuPath':_0x486306(0x179),'menuType':0x0,'menuPlatform':0x1,'order':0x320,'isShow':!![]}],_0x54776d=[{'menuTipText':'对话聊天','menuIcon':_0x486306(0x118),'menuName':_0x486306(0x175),'menuPath':'/chat','menuType':0x0,'menuPlatform':0x0,'order':0x64,'isShow':!![]},{'menuTipText':'应用广场','menuIcon':_0x486306(0x16c),'menuName':'AppStore','menuPath':'/app-store','menuType':0x0,'menuPlatform':0x0,'order':0xc8,'isShow':!![]},{'menuTipText':'专业绘画','menuIcon':'ri:landscape-line','menuName':'Midjourney','menuPath':_0x486306(0x11d),'menuType':0x0,'menuPlatform':0x0,'order':0x12c,'isShow':!![]},{'menuTipText':_0x486306(0x136),'menuIcon':_0x486306(0x14e),'menuName':_0x486306(0x109),'menuPath':_0x486306(0x165),'menuType':0x0,'menuPlatform':0x0,'order':0x190,'isShow':!![]},{'menuTipText':'个人中心','menuIcon':'ri:account-pin-box-line','menuName':_0x486306(0x117),'menuPath':_0x486306(0x15c),'menuType':0x0,'menuPlatform':0x0,'order':0x1f4,'isShow':!![]}],_0x837ee0=[..._0x2fed8d,..._0x54776d];for(const _0x5a1a38 of _0x837ee0){await this[_0x486306(0x181)]['query'](_0x486306(0x14b),[_0x5a1a38[_0x486306(0x166)],_0x5a1a38[_0x486306(0x171)],_0x5a1a38[_0x486306(0x10b)],_0x5a1a38['menuTipText'],_0x5a1a38[_0x486306(0x134)],_0x5a1a38[_0x486306(0x15b)],null,_0x5a1a38[_0x486306(0x121)],_0x5a1a38['isShow'],![],![]]);}common_1[_0x486306(0x159)][_0x486306(0x151)](_0x486306(0x12f),'DatabaseService');}catch(_0x583351){console[_0x486306(0x151)](_0x486306(0x132),_0x583351);throw new common_1[(_0x486306(0x15a))](_0x486306(0x110),common_1[_0x486306(0x12e)][_0x486306(0x145)]);}}async[_0x1375df(0x15d)](){}};DatabaseService=__decorate([(0x0,common_1[_0x1375df(0x17c)])(),__metadata(_0x1375df(0x112),[typeorm_1[_0x1375df(0x150)]])],DatabaseService),exports[_0x1375df(0x146)]=DatabaseService;