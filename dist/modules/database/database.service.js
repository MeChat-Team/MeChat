'use strict';const _0x49e0cd=_0x3f59;(function(_0x2ba7e1,_0x4aadfc){const _0x44d2e5=_0x3f59,_0x37997e=_0x2ba7e1();while(!![]){try{const _0x5375db=parseInt(_0x44d2e5(0x255))/0x1*(parseInt(_0x44d2e5(0x244))/0x2)+parseInt(_0x44d2e5(0x1fd))/0x3+parseInt(_0x44d2e5(0x21b))/0x4*(-parseInt(_0x44d2e5(0x263))/0x5)+-parseInt(_0x44d2e5(0x213))/0x6*(parseInt(_0x44d2e5(0x240))/0x7)+parseInt(_0x44d2e5(0x215))/0x8*(-parseInt(_0x44d2e5(0x221))/0x9)+parseInt(_0x44d2e5(0x241))/0xa*(parseInt(_0x44d2e5(0x202))/0xb)+parseInt(_0x44d2e5(0x20e))/0xc;if(_0x5375db===_0x4aadfc)break;else _0x37997e['push'](_0x37997e['shift']());}catch(_0x55a2b5){_0x37997e['push'](_0x37997e['shift']());}}}(_0x2da5,0x9ed2f));function _0x3f59(_0x1e8b38,_0x5c05d7){const _0x2da52d=_0x2da5();return _0x3f59=function(_0x3f59ad,_0x361464){_0x3f59ad=_0x3f59ad-0x1ef;let _0x5c49dd=_0x2da52d[_0x3f59ad];return _0x5c49dd;},_0x3f59(_0x1e8b38,_0x5c05d7);}function _0x2da5(){const _0x4ffa1f=['Logger','drawMjName','menuType','query','createBaseSiteConfig','Translate\x20any\x20given\x20phrase\x20from\x20any\x20language\x20into\x20English.\x20For\x20instance,\x20when\x20I\x20input\x20\x27{可爱的熊猫}\x27,\x20you\x20should\x20output\x20\x27{cute\x20panda}\x27,\x20with\x20no\x20period\x20at\x20the\x20end.','object','普通积分','10822740OyThTl','registerSendStatus','/chat','isVerifyEmail','Midjourney','12HxUTCj','buyCramiAddress','520ZfusUR','ri:message-3-line','join','推广计划','ri:landscape-line','\x0a####\x20AIWeb\x20欢迎您\x0a\x20-\x20欢迎使用\x20AIWeb\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','8gwklan','DatabaseService','icon-park-outline:mindmap-map','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','menuTipText','createDefaultUser','50121DySPkQ','baiduSiteId','openaiBaseUrl','drawingStyles','registerSendModel3Count','高级积分','INSERT\x20INTO\x20menu\x20(menuName,\x20menuPath,\x20menuIcon,\x20menuTipText,\x20menuType,\x20menuPlatform,\x20menuIframeUrl,\x20`order`,\x20isShow,\x20isJump,\x20isNeedAuth,\x20createdAt,\x20updatedAt,\x20deletedAt)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20NOW(),\x20NOW(),\x20NULL)','/app-store','初始化菜单配置成功','defineProperty','/midjourney','noticeInfo','创建默认网站配置失败！','menuPlatform','300','checkSuperAdmin','应用广场','AppStore','Mind','encry','HttpStatus','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','replace','menuIcon','order','log','length','bcryptjs','123456','map','baiduToken','1925042edAtjM','14710yweUdL','/pay','Pay','372716TCqqBx','model4Name','connection','firstRegisterSendRank','hashSync','/share','model3Name','初始化创建','menuName','sk-','siteName','对话聊天','checkSiteBaseConfig','configVal','绘画广场','openaiTimeout','/draw','2KMPwMG','onModuleInit','uiw:share','solar:album-line-duotone','icon-park-outline:shopping','metadata','__decorate','Draw','创建基础菜单配置失败！','ant-design:appstore-outlined','油画风格,像素风格,赛博朋克,动漫,日系,超现实主义,油画,卡通,插画,海报,写实,扁平,中国风,水墨画,唯美二次元,印象派,炫彩插画,像素艺术,艺术创想,色彩主义,数字艺术','design:paramtypes','isShow','super','2885195Gjgqwi','fluent:draw-image-24-regular','error:\x20','count','@nestjs/common','ri:account-pin-box-line','/mind','INTERNAL_SERVER_ERROR','Share','openaiBaseKey','\x27,\x20\x27','checkGalleryConfig','/market','typeorm',']、初始密码为[','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','function','admin','专业绘画','getOwnPropertyDescriptor','Chat','HttpException','个人中心','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','decorate','__esModule','思维导图','2785884XPGbpJ','基础绘画','firstRregisterSendDrawMjCount','创建默认超级管理员失败！','Injectable','3839KRSocE','firstRregisterSendModel4Count','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','checkMenuConfig'];_0x2da5=function(){return _0x4ffa1f;};return _0x2da5();}var __decorate=this&&this[_0x49e0cd(0x25b)]||function(_0x17a9b1,_0x5d6965,_0x550152,_0x92241e){const _0x28fb7a=_0x49e0cd;var _0xca54bb=arguments[_0x28fb7a(0x23b)],_0x3ad600=_0xca54bb<0x3?_0x5d6965:_0x92241e===null?_0x92241e=Object[_0x28fb7a(0x1f5)](_0x5d6965,_0x550152):_0x92241e,_0x487ec7;if(typeof Reflect===_0x28fb7a(0x20c)&&typeof Reflect[_0x28fb7a(0x1fa)]===_0x28fb7a(0x1f2))_0x3ad600=Reflect[_0x28fb7a(0x1fa)](_0x17a9b1,_0x5d6965,_0x550152,_0x92241e);else{for(var _0x544084=_0x17a9b1[_0x28fb7a(0x23b)]-0x1;_0x544084>=0x0;_0x544084--)if(_0x487ec7=_0x17a9b1[_0x544084])_0x3ad600=(_0xca54bb<0x3?_0x487ec7(_0x3ad600):_0xca54bb>0x3?_0x487ec7(_0x5d6965,_0x550152,_0x3ad600):_0x487ec7(_0x5d6965,_0x550152))||_0x3ad600;}return _0xca54bb>0x3&&_0x3ad600&&Object['defineProperty'](_0x5d6965,_0x550152,_0x3ad600),_0x3ad600;},__metadata=this&&this['__metadata']||function(_0x365477,_0x52e6a5){const _0x81480a=_0x49e0cd;if(typeof Reflect===_0x81480a(0x20c)&&typeof Reflect['metadata']===_0x81480a(0x1f2))return Reflect[_0x81480a(0x25a)](_0x365477,_0x52e6a5);};Object[_0x49e0cd(0x22a)](exports,_0x49e0cd(0x1fb),{'value':!![]}),exports[_0x49e0cd(0x21c)]=void 0x0;const common_1=require(_0x49e0cd(0x267)),bcrypt=require(_0x49e0cd(0x23c)),typeorm_1=require(_0x49e0cd(0x1ef));let DatabaseService=class DatabaseService{constructor(_0x27040e){const _0x212ef5=_0x49e0cd;this[_0x212ef5(0x246)]=_0x27040e;}async[_0x49e0cd(0x256)](){const _0x49401b=_0x49e0cd;await this[_0x49401b(0x230)](),await this['checkSiteBaseConfig'](),await this[_0x49401b(0x205)](),await this[_0x49401b(0x26e)]();}async[_0x49e0cd(0x230)](){const _0x3ed298=_0x49e0cd,_0x2cb523=await this[_0x3ed298(0x246)][_0x3ed298(0x209)](_0x3ed298(0x21e));if(!_0x2cb523||_0x2cb523[_0x3ed298(0x23b)]===0x0){const _0x28cc72=bcrypt[_0x3ed298(0x248)](_0x3ed298(0x23d),0xa),_0x529553=bcrypt[_0x3ed298(0x248)](_0x3ed298(0x23d),0xa),_0x24fa3d=_0x3ed298(0x262),_0x350029=_0x3ed298(0x1f3),_0x2d39d9={'username':_0x3ed298(0x262),'password':_0x28cc72,'status':0x1,'email':_0x24fa3d,'sex':0x1,'role':_0x3ed298(0x262)},_0x1786d4={'username':_0x3ed298(0x1f3),'password':_0x529553,'status':0x0,'email':_0x350029,'sex':0x1,'role':_0x3ed298(0x1f3)};await this[_0x3ed298(0x220)](_0x2d39d9),await this[_0x3ed298(0x220)](_0x1786d4);}}async[_0x49e0cd(0x220)](_0x357e09){const _0x28cef2=_0x49e0cd;try{const {username:_0x4bf053,password:_0x3b4752,status:_0x1a0151,email:_0x2e177c,role:_0x208a53}=_0x357e09,_0xc5bcbd=await this[_0x28cef2(0x246)][_0x28cef2(0x209)](_0x28cef2(0x204)+_0x4bf053+_0x28cef2(0x26d)+_0x3b4752+_0x28cef2(0x26d)+_0x1a0151+'\x27,\x20\x27'+_0x2e177c+_0x28cef2(0x26d)+_0x208a53+'\x27)'),_0x4dea58=_0xc5bcbd['insertId'];await this['connection'][_0x28cef2(0x209)](_0x28cef2(0x1f1)+_0x4dea58+'\x27,\x200,\x201000,\x20100)'),common_1[_0x28cef2(0x206)]['log'](_0x28cef2(0x24b)+_0x208a53+'用户成功、用户名为['+_0x4bf053+_0x28cef2(0x1f0)+(_0x4bf053===_0x28cef2(0x262)?_0x28cef2(0x262):_0x28cef2(0x23d))+']\x20==============>\x20请注意查阅',_0x28cef2(0x21c));}catch(_0x4a2903){console[_0x28cef2(0x23a)](_0x28cef2(0x265),_0x4a2903);throw new common_1['HttpException'](_0x28cef2(0x200),common_1[_0x28cef2(0x235)]['INTERNAL_SERVER_ERROR']);}}async[_0x49e0cd(0x250)](){const _0x408c3b=_0x49e0cd,_0x2cf5b8=[_0x408c3b(0x24e),'robotAvatar'],_0x122f4c=await this['connection'][_0x408c3b(0x209)](_0x408c3b(0x236)+_0x2cf5b8[_0x408c3b(0x23e)](_0xfe0c5a=>'\x27'+_0xfe0c5a+'\x27')['join'](',')+')\x0a'),_0x2b2bdc=parseInt(_0x122f4c[0x0]['count']);_0x2b2bdc===0x0&&await this[_0x408c3b(0x20a)]();}async[_0x49e0cd(0x20a)](){const _0x2b141d=_0x49e0cd;try{const _0x3509b9='',_0x475b1d=_0x2b141d(0x21a),_0x294e68=[{'configKey':_0x2b141d(0x24e),'configVal':'','public':0x1,'encry':0x0},{'configKey':'robotAvatar','configVal':'','public':0x1,'encry':0x0},{'configKey':'userDefautlAvatar','configVal':'','public':0x0,'encry':0x0},{'configKey':'baiduCode','configVal':_0x3509b9,'public':0x1,'encry':0x0},{'configKey':_0x2b141d(0x222),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x2b141d(0x23f),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x2b141d(0x214),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x2b141d(0x223),'configVal':'https://api.lightai.io','public':0x0,'encry':0x0},{'configKey':_0x2b141d(0x253),'configVal':_0x2b141d(0x22f),'public':0x0,'encry':0x0},{'configKey':_0x2b141d(0x26c),'configVal':_0x2b141d(0x24d),'public':0x0,'encry':0x0},{'configKey':'mjTranslatePrompt','configVal':_0x2b141d(0x20b),'public':0x0,'encry':0x0},{'configKey':_0x2b141d(0x22c),'configVal':_0x475b1d,'public':0x1,'encry':0x0},{'configKey':_0x2b141d(0x20f),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x2b141d(0x225),'configVal':'30','public':0x1,'encry':0x0},{'configKey':'registerSendModel4Count','configVal':'3','public':0x1,'encry':0x0},{'configKey':'registerSendDrawMjCount','configVal':'3','public':0x1,'encry':0x0},{'configKey':'firstRegisterSendStatus','configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x2b141d(0x247),'configVal':'500','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendModel3Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x2b141d(0x203),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x2b141d(0x1ff),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x2b141d(0x211),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x2b141d(0x24a),'configVal':_0x2b141d(0x20d),'public':0x1,'encry':0x0},{'configKey':_0x2b141d(0x245),'configVal':_0x2b141d(0x226),'public':0x1,'encry':0x0},{'configKey':_0x2b141d(0x207),'configVal':'绘画积分','public':0x1,'encry':0x0},{'configKey':_0x2b141d(0x224),'configVal':_0x2b141d(0x25f),'public':0x1,'encry':0x0}],_0x248cfc=await this[_0x2b141d(0x246)][_0x2b141d(0x209)](_0x2b141d(0x1f9)+_0x294e68['map'](_0x402534=>'(\x27'+_0x402534['configKey']+_0x2b141d(0x26d)+_0x402534[_0x2b141d(0x251)][_0x2b141d(0x237)](/'/g,'\x5c\x27')+_0x2b141d(0x26d)+_0x402534['public']+'\x27,\x20\x27'+_0x402534[_0x2b141d(0x234)]+'\x27)')[_0x2b141d(0x217)](',\x20'));common_1[_0x2b141d(0x206)][_0x2b141d(0x23a)]('初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅',_0x2b141d(0x21c));}catch(_0x1fcabe){console[_0x2b141d(0x23a)](_0x2b141d(0x265),_0x1fcabe);throw new common_1[(_0x2b141d(0x1f7))](_0x2b141d(0x22d),common_1[_0x2b141d(0x235)][_0x2b141d(0x26a)]);}}async[_0x49e0cd(0x205)](){const _0x58e93d=_0x49e0cd,_0x1dfc02=await this[_0x58e93d(0x246)][_0x58e93d(0x209)]('SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20menu'),_0x558eb0=parseInt(_0x1dfc02[0x0][_0x58e93d(0x266)]);_0x558eb0===0x0&&await this['createBaseMenuConfig']();}async['createBaseMenuConfig'](){const _0x2fdd86=_0x49e0cd;try{const _0x4d9e33=[{'menuTipText':_0x2fdd86(0x24f),'menuIcon':_0x2fdd86(0x216),'menuName':'Chat','menuPath':_0x2fdd86(0x210),'menuType':0x0,'menuPlatform':0x1,'order':0x64,'isShow':!![]},{'menuTipText':_0x2fdd86(0x231),'menuIcon':_0x2fdd86(0x25e),'menuName':_0x2fdd86(0x232),'menuPath':_0x2fdd86(0x228),'menuType':0x0,'menuPlatform':0x1,'order':0xc8,'isShow':!![]},{'menuTipText':'专业绘画','menuIcon':_0x2fdd86(0x219),'menuName':_0x2fdd86(0x212),'menuPath':_0x2fdd86(0x22b),'menuType':0x0,'menuPlatform':0x1,'order':0x12c,'isShow':!![]},{'menuTipText':_0x2fdd86(0x252),'menuIcon':_0x2fdd86(0x258),'menuName':'Market','menuPath':_0x2fdd86(0x26f),'menuType':0x0,'menuPlatform':0x1,'order':0x190,'isShow':!![]},{'menuTipText':_0x2fdd86(0x1fe),'menuIcon':_0x2fdd86(0x264),'menuName':_0x2fdd86(0x25c),'menuPath':_0x2fdd86(0x254),'menuType':0x0,'menuPlatform':0x1,'order':0x1f4,'isShow':!![]},{'menuTipText':_0x2fdd86(0x1fc),'menuIcon':'icon-park-outline:mindmap-map','menuName':_0x2fdd86(0x233),'menuPath':_0x2fdd86(0x269),'menuType':0x0,'menuPlatform':0x1,'order':0x258,'isShow':!![]},{'menuTipText':'会员中心','menuIcon':_0x2fdd86(0x259),'menuName':_0x2fdd86(0x243),'menuPath':_0x2fdd86(0x242),'menuType':0x0,'menuPlatform':0x1,'order':0x2bc,'isShow':!![]},{'menuTipText':_0x2fdd86(0x218),'menuIcon':_0x2fdd86(0x257),'menuName':_0x2fdd86(0x26b),'menuPath':_0x2fdd86(0x249),'menuType':0x0,'menuPlatform':0x1,'order':0x320,'isShow':!![]}],_0x541bee=[{'menuTipText':_0x2fdd86(0x24f),'menuIcon':_0x2fdd86(0x216),'menuName':_0x2fdd86(0x1f6),'menuPath':_0x2fdd86(0x210),'menuType':0x0,'menuPlatform':0x0,'order':0x64,'isShow':!![]},{'menuTipText':_0x2fdd86(0x231),'menuIcon':_0x2fdd86(0x25e),'menuName':'AppStore','menuPath':'/app-store','menuType':0x0,'menuPlatform':0x0,'order':0xc8,'isShow':!![]},{'menuTipText':_0x2fdd86(0x1f4),'menuIcon':_0x2fdd86(0x219),'menuName':_0x2fdd86(0x212),'menuPath':_0x2fdd86(0x22b),'menuType':0x0,'menuPlatform':0x0,'order':0x12c,'isShow':!![]},{'menuTipText':_0x2fdd86(0x1fc),'menuIcon':_0x2fdd86(0x21d),'menuName':'Mind','menuPath':_0x2fdd86(0x269),'menuType':0x0,'menuPlatform':0x0,'order':0x190,'isShow':!![]},{'menuTipText':_0x2fdd86(0x1f8),'menuIcon':_0x2fdd86(0x268),'menuName':'UserCenter','menuPath':'/user-center','menuType':0x0,'menuPlatform':0x0,'order':0x1f4,'isShow':!![]}],_0x147fa7=[..._0x4d9e33,..._0x541bee];for(const _0x3e90f6 of _0x147fa7){await this[_0x2fdd86(0x246)][_0x2fdd86(0x209)](_0x2fdd86(0x227),[_0x3e90f6[_0x2fdd86(0x24c)],_0x3e90f6['menuPath'],_0x3e90f6[_0x2fdd86(0x238)],_0x3e90f6[_0x2fdd86(0x21f)],_0x3e90f6[_0x2fdd86(0x208)],_0x3e90f6[_0x2fdd86(0x22e)],null,_0x3e90f6[_0x2fdd86(0x239)],_0x3e90f6[_0x2fdd86(0x261)],![],![]]);}common_1[_0x2fdd86(0x206)]['log'](_0x2fdd86(0x229),'DatabaseService');}catch(_0x1a9291){console[_0x2fdd86(0x23a)]('error:\x20',_0x1a9291);throw new common_1[(_0x2fdd86(0x1f7))](_0x2fdd86(0x25d),common_1[_0x2fdd86(0x235)][_0x2fdd86(0x26a)]);}}async[_0x49e0cd(0x26e)](){}};DatabaseService=__decorate([(0x0,common_1[_0x49e0cd(0x201)])(),__metadata(_0x49e0cd(0x260),[typeorm_1['Connection']])],DatabaseService),exports[_0x49e0cd(0x21c)]=DatabaseService;