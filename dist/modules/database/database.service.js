'use strict';function _0x5529(){const _0x5b0bbc=['500','buyCramiAddress','isShow','userDefautlAvatar','541184ySrlDV','model4Name','初始化菜单配置成功','\x27,\x20\x27','checkGalleryConfig','/pay','openaiTimeout','checkSuperAdmin','connection','477056lbjggT','menuIcon','admin','order','专业绘画','Draw','length','推广计划','115lYQxuV','configVal','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','noticeInfo','checkMenuConfig','ri:message-3-line','join','HttpStatus','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','menuType','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','typeorm','Market','log','menuTipText','__esModule','decorate','/chat','1247230sSJpJS','firstRregisterSendDrawMjCount','createDefaultUser','checkSiteBaseConfig','count','2OZIkfo','534291VuQyCx','firstRregisterSendModel3Count','menuPath','isVerifyEmail','创建基础菜单配置失败！','configKey','query','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','Logger','个人中心',']、初始密码为[','bcryptjs','icon-park-outline:shopping','__decorate','error:\x20','300','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','普通积分','map','Mind','fluent:draw-image-24-regular','DatabaseService','ant-design:appstore-outlined','@nestjs/common','registerSendStatus','firstRregisterSendModel4Count','15108ZgbaVo','高级积分','/mind','Injectable','创建默认网站配置失败！','ri:account-pin-box-line','mjTranslatePrompt','super','siteName','menuName','hashSync','Connection','/midjourney','robotAvatar','https://api.lightai.io','创建默认超级管理员失败！','replace','Chat','public','用户成功、用户名为[','应用广场','defineProperty','690750YBBogK','\x0a####\x20AIWeb\x20欢迎您\x0a\x20-\x20欢迎使用\x20AIWeb\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','icon-park-outline:mindmap-map','HttpException','油画风格,像素风格,赛博朋克,动漫,日系,超现实主义,油画,卡通,插画,海报,写实,扁平,中国风,水墨画,唯美二次元,印象派,炫彩插画,像素艺术,艺术创想,色彩主义,数字艺术','object','初始化创建','design:paramtypes','baiduCode','Midjourney','绘画积分','对话聊天','/app-store','INTERNAL_SERVER_ERROR','18cAKovr','metadata','createBaseMenuConfig','INSERT\x20INTO\x20menu\x20(menuName,\x20menuPath,\x20menuIcon,\x20menuTipText,\x20menuType,\x20menuPlatform,\x20menuIframeUrl,\x20`order`,\x20isShow,\x20isJump,\x20isNeedAuth,\x20createdAt,\x20updatedAt,\x20deletedAt)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20NOW(),\x20NOW(),\x20NULL)','openaiBaseUrl','firstRegisterSendStatus','function','222553paaFjQ','drawMjName','AppStore','drawingStyles','ri:landscape-line','/share','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','solar:album-line-duotone','baiduToken','思维导图','123456','baiduSiteId'];_0x5529=function(){return _0x5b0bbc;};return _0x5529();}const _0x25cf35=_0x1b0d;(function(_0x140d3e,_0x3d5e95){const _0xeb3f79=_0x1b0d,_0x54990f=_0x140d3e();while(!![]){try{const _0x1de006=parseInt(_0xeb3f79(0x191))/0x1*(parseInt(_0xeb3f79(0x1c9))/0x2)+-parseInt(_0xeb3f79(0x1ca))/0x3+parseInt(_0xeb3f79(0x1e4))/0x4*(parseInt(_0xeb3f79(0x1b2))/0x5)+-parseInt(_0xeb3f79(0x1fa))/0x6+-parseInt(_0xeb3f79(0x1a1))/0x7+-parseInt(_0xeb3f79(0x1aa))/0x8+parseInt(_0xeb3f79(0x208))/0x9*(parseInt(_0xeb3f79(0x1c4))/0xa);if(_0x1de006===_0x3d5e95)break;else _0x54990f['push'](_0x54990f['shift']());}catch(_0x4b668e){_0x54990f['push'](_0x54990f['shift']());}}}(_0x5529,0x1f6c0));function _0x1b0d(_0x5cd15b,_0x186486){const _0x552959=_0x5529();return _0x1b0d=function(_0x1b0d70,_0x162ead){_0x1b0d70=_0x1b0d70-0x191;let _0x5ceb1d=_0x552959[_0x1b0d70];return _0x5ceb1d;},_0x1b0d(_0x5cd15b,_0x186486);}var __decorate=this&&this[_0x25cf35(0x1d7)]||function(_0x5d28a5,_0xfac7d9,_0x1dd0ee,_0x92a3a){const _0x1ac4f0=_0x25cf35;var _0x1d7948=arguments['length'],_0x5413a7=_0x1d7948<0x3?_0xfac7d9:_0x92a3a===null?_0x92a3a=Object['getOwnPropertyDescriptor'](_0xfac7d9,_0x1dd0ee):_0x92a3a,_0x538020;if(typeof Reflect===_0x1ac4f0(0x1ff)&&typeof Reflect[_0x1ac4f0(0x1c2)]==='function')_0x5413a7=Reflect[_0x1ac4f0(0x1c2)](_0x5d28a5,_0xfac7d9,_0x1dd0ee,_0x92a3a);else{for(var _0x47f050=_0x5d28a5[_0x1ac4f0(0x1b0)]-0x1;_0x47f050>=0x0;_0x47f050--)if(_0x538020=_0x5d28a5[_0x47f050])_0x5413a7=(_0x1d7948<0x3?_0x538020(_0x5413a7):_0x1d7948>0x3?_0x538020(_0xfac7d9,_0x1dd0ee,_0x5413a7):_0x538020(_0xfac7d9,_0x1dd0ee))||_0x5413a7;}return _0x1d7948>0x3&&_0x5413a7&&Object[_0x1ac4f0(0x1f9)](_0xfac7d9,_0x1dd0ee,_0x5413a7),_0x5413a7;},__metadata=this&&this['__metadata']||function(_0x55a461,_0x309e82){const _0x56d3eb=_0x25cf35;if(typeof Reflect===_0x56d3eb(0x1ff)&&typeof Reflect['metadata']===_0x56d3eb(0x20e))return Reflect[_0x56d3eb(0x209)](_0x55a461,_0x309e82);};Object[_0x25cf35(0x1f9)](exports,_0x25cf35(0x1c1),{'value':!![]}),exports[_0x25cf35(0x1df)]=void 0x0;const common_1=require(_0x25cf35(0x1e1)),bcrypt=require(_0x25cf35(0x1d5)),typeorm_1=require(_0x25cf35(0x1bd));let DatabaseService=class DatabaseService{constructor(_0x32ec4b){const _0x1dfb83=_0x25cf35;this[_0x1dfb83(0x1a9)]=_0x32ec4b;}async['onModuleInit'](){const _0x2da16d=_0x25cf35;await this[_0x2da16d(0x1a8)](),await this[_0x2da16d(0x1c7)](),await this[_0x2da16d(0x1b6)](),await this['checkGalleryConfig']();}async[_0x25cf35(0x1a8)](){const _0x108770=_0x25cf35,_0x262498=await this[_0x108770(0x1a9)]['query'](_0x108770(0x1bc));if(!_0x262498||_0x262498[_0x108770(0x1b0)]===0x0){const _0x5d7ead=bcrypt[_0x108770(0x1ee)](_0x108770(0x19b),0xa),_0x1e7cc8=bcrypt[_0x108770(0x1ee)](_0x108770(0x19b),0xa),_0x212de7=_0x108770(0x1eb),_0x25eac4=_0x108770(0x1ac),_0x294ca6={'username':_0x108770(0x1eb),'password':_0x5d7ead,'status':0x1,'email':_0x212de7,'sex':0x1,'role':_0x108770(0x1eb)},_0x328ede={'username':'admin','password':_0x1e7cc8,'status':0x0,'email':_0x25eac4,'sex':0x1,'role':_0x108770(0x1ac)};await this[_0x108770(0x1c6)](_0x294ca6),await this[_0x108770(0x1c6)](_0x328ede);}}async[_0x25cf35(0x1c6)](_0x5199df){const _0x4a62f2=_0x25cf35;try{const {username:_0xdb15ba,password:_0x1c2bf7,status:_0x16e47b,email:_0x5c7f04,role:_0x4f2d2c}=_0x5199df,_0x4622be=await this[_0x4a62f2(0x1a9)][_0x4a62f2(0x1d0)](_0x4a62f2(0x1ba)+_0xdb15ba+_0x4a62f2(0x1a4)+_0x1c2bf7+_0x4a62f2(0x1a4)+_0x16e47b+_0x4a62f2(0x1a4)+_0x5c7f04+_0x4a62f2(0x1a4)+_0x4f2d2c+'\x27)'),_0x458618=_0x4622be['insertId'];await this[_0x4a62f2(0x1a9)][_0x4a62f2(0x1d0)](_0x4a62f2(0x197)+_0x458618+'\x27,\x200,\x201000,\x20100)'),common_1[_0x4a62f2(0x1d2)][_0x4a62f2(0x1bf)](_0x4a62f2(0x200)+_0x4f2d2c+_0x4a62f2(0x1f7)+_0xdb15ba+_0x4a62f2(0x1d4)+(_0xdb15ba===_0x4a62f2(0x1eb)?_0x4a62f2(0x1eb):'123456')+']\x20==============>\x20请注意查阅','DatabaseService');}catch(_0x18806a){console[_0x4a62f2(0x1bf)](_0x4a62f2(0x1d8),_0x18806a);throw new common_1[(_0x4a62f2(0x1fd))](_0x4a62f2(0x1f3),common_1[_0x4a62f2(0x1b9)][_0x4a62f2(0x207)]);}}async[_0x25cf35(0x1c7)](){const _0x51680e=_0x25cf35,_0xbdf442=[_0x51680e(0x1ec),_0x51680e(0x1f1)],_0x2783b6=await this[_0x51680e(0x1a9)][_0x51680e(0x1d0)](_0x51680e(0x1b4)+_0xbdf442[_0x51680e(0x1dc)](_0x488e0d=>'\x27'+_0x488e0d+'\x27')[_0x51680e(0x1b8)](',')+')\x0a'),_0x313be6=parseInt(_0x2783b6[0x0]['count']);_0x313be6===0x0&&await this['createBaseSiteConfig']();}async['createBaseSiteConfig'](){const _0x47671e=_0x25cf35;try{const _0x2e7587='',_0x481736=_0x47671e(0x1fb),_0x56e9e0=[{'configKey':_0x47671e(0x1ec),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x47671e(0x1f1),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x47671e(0x1a0),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x47671e(0x202),'configVal':_0x2e7587,'public':0x1,'encry':0x0},{'configKey':_0x47671e(0x19c),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x47671e(0x199),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x47671e(0x19e),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x47671e(0x20c),'configVal':_0x47671e(0x1f2),'public':0x0,'encry':0x0},{'configKey':_0x47671e(0x1a7),'configVal':_0x47671e(0x1d9),'public':0x0,'encry':0x0},{'configKey':'openaiBaseKey','configVal':'sk-','public':0x0,'encry':0x0},{'configKey':_0x47671e(0x1ea),'configVal':'Translate\x20any\x20given\x20phrase\x20from\x20any\x20language\x20into\x20English.\x20For\x20instance,\x20when\x20I\x20input\x20\x27{可爱的熊猫}\x27,\x20you\x20should\x20output\x20\x27{cute\x20panda}\x27,\x20with\x20no\x20period\x20at\x20the\x20end.','public':0x0,'encry':0x0},{'configKey':_0x47671e(0x1b5),'configVal':_0x481736,'public':0x1,'encry':0x0},{'configKey':_0x47671e(0x1e2),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'registerSendModel3Count','configVal':'30','public':0x1,'encry':0x0},{'configKey':'registerSendModel4Count','configVal':'3','public':0x1,'encry':0x0},{'configKey':'registerSendDrawMjCount','configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x47671e(0x20d),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'firstRegisterSendRank','configVal':_0x47671e(0x19d),'public':0x1,'encry':0x0},{'configKey':_0x47671e(0x1cb),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x47671e(0x1e3),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x47671e(0x1c5),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x47671e(0x1cd),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'model3Name','configVal':_0x47671e(0x1db),'public':0x1,'encry':0x0},{'configKey':_0x47671e(0x1a2),'configVal':_0x47671e(0x1e5),'public':0x1,'encry':0x0},{'configKey':_0x47671e(0x192),'configVal':_0x47671e(0x204),'public':0x1,'encry':0x0},{'configKey':_0x47671e(0x194),'configVal':_0x47671e(0x1fe),'public':0x1,'encry':0x0}],_0x422bf9=await this[_0x47671e(0x1a9)][_0x47671e(0x1d0)](_0x47671e(0x1d1)+_0x56e9e0['map'](_0x4723e2=>'(\x27'+_0x4723e2[_0x47671e(0x1cf)]+_0x47671e(0x1a4)+_0x4723e2[_0x47671e(0x1b3)][_0x47671e(0x1f4)](/'/g,'\x5c\x27')+_0x47671e(0x1a4)+_0x4723e2[_0x47671e(0x1f6)]+_0x47671e(0x1a4)+_0x4723e2['encry']+'\x27)')[_0x47671e(0x1b8)](',\x20'));common_1[_0x47671e(0x1d2)][_0x47671e(0x1bf)](_0x47671e(0x1da),_0x47671e(0x1df));}catch(_0x423048){console[_0x47671e(0x1bf)](_0x47671e(0x1d8),_0x423048);throw new common_1[(_0x47671e(0x1fd))](_0x47671e(0x1e8),common_1['HttpStatus'][_0x47671e(0x207)]);}}async[_0x25cf35(0x1b6)](){const _0x9eaec9=_0x25cf35,_0x1fc228=await this['connection']['query']('SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20menu'),_0x41280b=parseInt(_0x1fc228[0x0][_0x9eaec9(0x1c8)]);_0x41280b===0x0&&await this[_0x9eaec9(0x20a)]();}async['createBaseMenuConfig'](){const _0x2fca1f=_0x25cf35;try{const _0x3c0527=[{'menuTipText':_0x2fca1f(0x205),'menuIcon':_0x2fca1f(0x1b7),'menuName':_0x2fca1f(0x1f5),'menuPath':'/chat','menuType':0x0,'menuPlatform':0x1,'order':0x64,'isShow':!![]},{'menuTipText':_0x2fca1f(0x1f8),'menuIcon':_0x2fca1f(0x1e0),'menuName':_0x2fca1f(0x193),'menuPath':_0x2fca1f(0x206),'menuType':0x0,'menuPlatform':0x1,'order':0xc8,'isShow':!![]},{'menuTipText':_0x2fca1f(0x1ae),'menuIcon':_0x2fca1f(0x195),'menuName':_0x2fca1f(0x203),'menuPath':_0x2fca1f(0x1f0),'menuType':0x0,'menuPlatform':0x1,'order':0x12c,'isShow':!![]},{'menuTipText':'绘画广场','menuIcon':_0x2fca1f(0x198),'menuName':_0x2fca1f(0x1be),'menuPath':'/market','menuType':0x0,'menuPlatform':0x1,'order':0x190,'isShow':!![]},{'menuTipText':'基础绘画','menuIcon':_0x2fca1f(0x1de),'menuName':_0x2fca1f(0x1af),'menuPath':'/draw','menuType':0x0,'menuPlatform':0x1,'order':0x1f4,'isShow':!![]},{'menuTipText':_0x2fca1f(0x19a),'menuIcon':_0x2fca1f(0x1fc),'menuName':'Mind','menuPath':'/mind','menuType':0x0,'menuPlatform':0x1,'order':0x258,'isShow':!![]},{'menuTipText':'会员中心','menuIcon':_0x2fca1f(0x1d6),'menuName':'Pay','menuPath':_0x2fca1f(0x1a6),'menuType':0x0,'menuPlatform':0x1,'order':0x2bc,'isShow':!![]},{'menuTipText':_0x2fca1f(0x1b1),'menuIcon':'uiw:share','menuName':'Share','menuPath':_0x2fca1f(0x196),'menuType':0x0,'menuPlatform':0x1,'order':0x320,'isShow':!![]}],_0x1dc982=[{'menuTipText':_0x2fca1f(0x205),'menuIcon':_0x2fca1f(0x1b7),'menuName':_0x2fca1f(0x1f5),'menuPath':_0x2fca1f(0x1c3),'menuType':0x0,'menuPlatform':0x0,'order':0x64,'isShow':!![]},{'menuTipText':_0x2fca1f(0x1f8),'menuIcon':_0x2fca1f(0x1e0),'menuName':'AppStore','menuPath':_0x2fca1f(0x206),'menuType':0x0,'menuPlatform':0x0,'order':0xc8,'isShow':!![]},{'menuTipText':_0x2fca1f(0x1ae),'menuIcon':'ri:landscape-line','menuName':'Midjourney','menuPath':'/midjourney','menuType':0x0,'menuPlatform':0x0,'order':0x12c,'isShow':!![]},{'menuTipText':_0x2fca1f(0x19a),'menuIcon':_0x2fca1f(0x1fc),'menuName':_0x2fca1f(0x1dd),'menuPath':_0x2fca1f(0x1e6),'menuType':0x0,'menuPlatform':0x0,'order':0x190,'isShow':!![]},{'menuTipText':_0x2fca1f(0x1d3),'menuIcon':_0x2fca1f(0x1e9),'menuName':'UserCenter','menuPath':'/user-center','menuType':0x0,'menuPlatform':0x0,'order':0x1f4,'isShow':!![]}],_0x15951e=[..._0x3c0527,..._0x1dc982];for(const _0x5e7216 of _0x15951e){await this[_0x2fca1f(0x1a9)][_0x2fca1f(0x1d0)](_0x2fca1f(0x20b),[_0x5e7216[_0x2fca1f(0x1ed)],_0x5e7216[_0x2fca1f(0x1cc)],_0x5e7216[_0x2fca1f(0x1ab)],_0x5e7216[_0x2fca1f(0x1c0)],_0x5e7216[_0x2fca1f(0x1bb)],_0x5e7216['menuPlatform'],null,_0x5e7216[_0x2fca1f(0x1ad)],_0x5e7216[_0x2fca1f(0x19f)],![],![]]);}common_1['Logger'][_0x2fca1f(0x1bf)](_0x2fca1f(0x1a3),_0x2fca1f(0x1df));}catch(_0x2cd30f){console['log'](_0x2fca1f(0x1d8),_0x2cd30f);throw new common_1[(_0x2fca1f(0x1fd))](_0x2fca1f(0x1ce),common_1[_0x2fca1f(0x1b9)]['INTERNAL_SERVER_ERROR']);}}async[_0x25cf35(0x1a5)](){}};DatabaseService=__decorate([(0x0,common_1[_0x25cf35(0x1e7)])(),__metadata(_0x25cf35(0x201),[typeorm_1[_0x25cf35(0x1ef)]])],DatabaseService),exports[_0x25cf35(0x1df)]=DatabaseService;