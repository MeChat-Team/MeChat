'use strict';function _0x1191(){const _0x4abcbd=['siteName','admin','baiduCode','hashSync','firstRregisterSendDrawMjCount','Chat','推广计划','buyCramiAddress','bcryptjs','用户成功、用户名为[','ant-design:appstore-outlined','firstRegisterSendStatus','绘画积分','icon-park-outline:shopping','checkSiteBaseConfig','/mind','typeorm','Mind','Injectable','registerSendModel3Count','INTERNAL_SERVER_ERROR','/app-store','AppStore','44qDhZEO','createBaseMenuConfig','HttpStatus','19379SnPHmC','/midjourney','ri:message-3-line','menuPath','openaiBaseKey','count','icon-park-outline:mindmap-map','应用广场','123456','baiduToken','insertId','\x27,\x20\x27','onModuleInit','uiw:share','checkMenuConfig','Connection','Market','object','createDefaultUser','menuTipText','/chat','map','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','专业绘画','126bVqxpA','对话聊天','userDefautlAvatar','solar:album-line-duotone','500',']\x20==============>\x20请注意查阅','createBaseSiteConfig','registerSendModel4Count','defineProperty','ri:landscape-line','Midjourney','42FfqeXV','super','menuName','9040559YsnEnc','/market','drawingStyles','query','300','encry','普通积分','checkSuperAdmin','HttpException','Logger','Pay','7499224YZYoPG','length','registerSendStatus','robotAvatar','openaiBaseUrl','model3Name','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','会员中心','ri:account-pin-box-line','decorate','openaiTimeout','fluent:draw-image-24-regular','getOwnPropertyDescriptor','/draw','join','初始化创建','checkGalleryConfig','firstRregisterSendModel4Count','__metadata','高级积分','433167SpRRij','初始化菜单配置成功','DatabaseService','UserCenter','public','connection','metadata','noticeInfo','mjTranslatePrompt','3367420EseUqh','function','绘画广场','log','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','registerSendDrawMjCount','__esModule','isVerifyEmail','baiduSiteId','error:\x20','7801115XlRfWF','model4Name','\x27,\x200,\x201000,\x20100)','524811ITCLkL','https://api.lightai.io','firstRegisterSendRank','design:paramtypes','/user-center','__decorate','firstRregisterSendModel3Count','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','油画风格,像素风格,赛博朋克,动漫,日系,超现实主义,油画,卡通,插画,海报,写实,扁平,中国风,水墨画,唯美二次元,印象派,炫彩插画,像素艺术,艺术创想,色彩主义,数字艺术','Translate\x20any\x20given\x20phrase\x20from\x20any\x20language\x20into\x20English.\x20For\x20instance,\x20when\x20I\x20input\x20\x27{可爱的熊猫}\x27,\x20you\x20should\x20output\x20\x27{cute\x20panda}\x27,\x20with\x20no\x20period\x20at\x20the\x20end.','18eAYmfe','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','思维导图'];_0x1191=function(){return _0x4abcbd;};return _0x1191();}const _0xe797d9=_0x3f3f;function _0x3f3f(_0x16a491,_0x29b4af){const _0x119143=_0x1191();return _0x3f3f=function(_0x3f3fa1,_0xc9ba60){_0x3f3fa1=_0x3f3fa1-0x164;let _0xed1f3f=_0x119143[_0x3f3fa1];return _0xed1f3f;},_0x3f3f(_0x16a491,_0x29b4af);}(function(_0x580c8c,_0x55e068){const _0x6b6ca1=_0x3f3f,_0x26af63=_0x580c8c();while(!![]){try{const _0x3da87e=parseInt(_0x6b6ca1(0x165))/0x1*(-parseInt(_0x6b6ca1(0x17d))/0x2)+parseInt(_0x6b6ca1(0x1aa))/0x3*(parseInt(_0x6b6ca1(0x1e4))/0x4)+parseInt(_0x6b6ca1(0x1bd))/0x5+parseInt(_0x6b6ca1(0x188))/0x6*(-parseInt(_0x6b6ca1(0x1c0))/0x7)+parseInt(_0x6b6ca1(0x196))/0x8+-parseInt(_0x6b6ca1(0x1ca))/0x9*(parseInt(_0x6b6ca1(0x1b3))/0xa)+-parseInt(_0x6b6ca1(0x18b))/0xb;if(_0x3da87e===_0x55e068)break;else _0x26af63['push'](_0x26af63['shift']());}catch(_0x278d52){_0x26af63['push'](_0x26af63['shift']());}}}(_0x1191,0xce440));var __decorate=this&&this[_0xe797d9(0x1c5)]||function(_0x114be1,_0x233f30,_0x36cbec,_0xf52acb){const _0x3e8c14=_0xe797d9;var _0x1c981b=arguments['length'],_0x1ce9b8=_0x1c981b<0x3?_0x233f30:_0xf52acb===null?_0xf52acb=Object[_0x3e8c14(0x1a2)](_0x233f30,_0x36cbec):_0xf52acb,_0x33d16e;if(typeof Reflect===_0x3e8c14(0x176)&&typeof Reflect[_0x3e8c14(0x19f)]==='function')_0x1ce9b8=Reflect[_0x3e8c14(0x19f)](_0x114be1,_0x233f30,_0x36cbec,_0xf52acb);else{for(var _0x462b0b=_0x114be1[_0x3e8c14(0x197)]-0x1;_0x462b0b>=0x0;_0x462b0b--)if(_0x33d16e=_0x114be1[_0x462b0b])_0x1ce9b8=(_0x1c981b<0x3?_0x33d16e(_0x1ce9b8):_0x1c981b>0x3?_0x33d16e(_0x233f30,_0x36cbec,_0x1ce9b8):_0x33d16e(_0x233f30,_0x36cbec))||_0x1ce9b8;}return _0x1c981b>0x3&&_0x1ce9b8&&Object[_0x3e8c14(0x185)](_0x233f30,_0x36cbec,_0x1ce9b8),_0x1ce9b8;},__metadata=this&&this[_0xe797d9(0x1a8)]||function(_0x46d8f9,_0x52bbd8){const _0x39b571=_0xe797d9;if(typeof Reflect===_0x39b571(0x176)&&typeof Reflect[_0x39b571(0x1b0)]===_0x39b571(0x1b4))return Reflect['metadata'](_0x46d8f9,_0x52bbd8);};Object['defineProperty'](exports,_0xe797d9(0x1b9),{'value':!![]}),exports[_0xe797d9(0x1ac)]=void 0x0;const common_1=require('@nestjs/common'),bcrypt=require(_0xe797d9(0x1d5)),typeorm_1=require(_0xe797d9(0x1dd));let DatabaseService=class DatabaseService{constructor(_0x5c1c22){const _0x57414e=_0xe797d9;this[_0x57414e(0x1af)]=_0x5c1c22;}async[_0xe797d9(0x171)](){const _0x41295a=_0xe797d9;await this[_0x41295a(0x192)](),await this[_0x41295a(0x1db)](),await this[_0x41295a(0x173)](),await this[_0x41295a(0x1a6)]();}async[_0xe797d9(0x192)](){const _0x59912a=_0xe797d9,_0x3043c3=await this[_0x59912a(0x1af)]['query'](_0x59912a(0x19c));if(!_0x3043c3||_0x3043c3['length']===0x0){const _0x47b7a5=bcrypt['hashSync'](_0x59912a(0x16d),0xa),_0x5edeeb=bcrypt[_0x59912a(0x1d0)](_0x59912a(0x16d),0xa),_0x23e5c6=_0x59912a(0x189),_0x37e136=_0x59912a(0x1ce),_0x32a319={'username':_0x59912a(0x189),'password':_0x47b7a5,'status':0x1,'email':_0x23e5c6,'sex':0x1,'role':_0x59912a(0x189)},_0x31cfae={'username':_0x59912a(0x1ce),'password':_0x5edeeb,'status':0x0,'email':_0x37e136,'sex':0x1,'role':_0x59912a(0x1ce)};await this[_0x59912a(0x177)](_0x32a319),await this[_0x59912a(0x177)](_0x31cfae);}}async[_0xe797d9(0x177)](_0x3a0044){const _0x34de8a=_0xe797d9;try{const {username:_0x1d7936,password:_0xb45bab,status:_0x43aa8d,email:_0x4b51bb,role:_0x29fc89}=_0x3a0044,_0x59accb=await this[_0x34de8a(0x1af)][_0x34de8a(0x18e)](_0x34de8a(0x1cb)+_0x1d7936+'\x27,\x20\x27'+_0xb45bab+_0x34de8a(0x170)+_0x43aa8d+_0x34de8a(0x170)+_0x4b51bb+_0x34de8a(0x170)+_0x29fc89+'\x27)'),_0x4e2429=_0x59accb[_0x34de8a(0x16f)];await this[_0x34de8a(0x1af)][_0x34de8a(0x18e)](_0x34de8a(0x1c7)+_0x4e2429+_0x34de8a(0x1bf)),common_1[_0x34de8a(0x194)]['log'](_0x34de8a(0x1a5)+_0x29fc89+_0x34de8a(0x1d6)+_0x1d7936+']、初始密码为['+(_0x1d7936===_0x34de8a(0x189)?_0x34de8a(0x189):_0x34de8a(0x16d))+_0x34de8a(0x182),_0x34de8a(0x1ac));}catch(_0x5362dc){console['log'](_0x34de8a(0x1bc),_0x5362dc);throw new common_1[(_0x34de8a(0x193))]('创建默认超级管理员失败！',common_1[_0x34de8a(0x164)][_0x34de8a(0x1e1)]);}}async['checkSiteBaseConfig'](){const _0x56b66c=_0xe797d9,_0x285ba5=[_0x56b66c(0x1cd),_0x56b66c(0x199)],_0x3c5920=await this['connection'][_0x56b66c(0x18e)](_0x56b66c(0x1b7)+_0x285ba5[_0x56b66c(0x17a)](_0x46d645=>'\x27'+_0x46d645+'\x27')[_0x56b66c(0x1a4)](',')+')\x0a'),_0x16e81d=parseInt(_0x3c5920[0x0]['count']);_0x16e81d===0x0&&await this['createBaseSiteConfig']();}async[_0xe797d9(0x183)](){const _0x4ba2b9=_0xe797d9;try{const _0x9f24f1='',_0x5439bd='\x0a####\x20AIWeb\x20欢迎您\x0a\x20-\x20欢迎使用\x20AIWeb\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a',_0x1ae811=[{'configKey':_0x4ba2b9(0x1cd),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x199),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x17f),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x4ba2b9(0x1cf),'configVal':_0x9f24f1,'public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x1bb),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x4ba2b9(0x16e),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0x4ba2b9(0x1d4),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x19a),'configVal':_0x4ba2b9(0x1c1),'public':0x0,'encry':0x0},{'configKey':_0x4ba2b9(0x1a0),'configVal':_0x4ba2b9(0x18f),'public':0x0,'encry':0x0},{'configKey':_0x4ba2b9(0x169),'configVal':'sk-','public':0x0,'encry':0x0},{'configKey':_0x4ba2b9(0x1b2),'configVal':_0x4ba2b9(0x1c9),'public':0x0,'encry':0x0},{'configKey':_0x4ba2b9(0x1b1),'configVal':_0x5439bd,'public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x198),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x1e0),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x184),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x1b8),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x1d8),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x1c2),'configVal':_0x4ba2b9(0x181),'public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x1c6),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x1a7),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x1d1),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x1ba),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x19b),'configVal':_0x4ba2b9(0x191),'public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x1be),'configVal':_0x4ba2b9(0x1a9),'public':0x1,'encry':0x0},{'configKey':'drawMjName','configVal':_0x4ba2b9(0x1d9),'public':0x1,'encry':0x0},{'configKey':_0x4ba2b9(0x18d),'configVal':_0x4ba2b9(0x1c8),'public':0x1,'encry':0x0}],_0x5fbfe2=await this[_0x4ba2b9(0x1af)][_0x4ba2b9(0x18e)]('INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20'+_0x1ae811[_0x4ba2b9(0x17a)](_0x4eaeed=>'(\x27'+_0x4eaeed['configKey']+'\x27,\x20\x27'+_0x4eaeed['configVal']['replace'](/'/g,'\x5c\x27')+'\x27,\x20\x27'+_0x4eaeed[_0x4ba2b9(0x1ae)]+_0x4ba2b9(0x170)+_0x4eaeed[_0x4ba2b9(0x190)]+'\x27)')['join'](',\x20'));common_1[_0x4ba2b9(0x194)][_0x4ba2b9(0x1b6)](_0x4ba2b9(0x17b),'DatabaseService');}catch(_0x2129cd){console[_0x4ba2b9(0x1b6)]('error:\x20',_0x2129cd);throw new common_1[(_0x4ba2b9(0x193))]('创建默认网站配置失败！',common_1[_0x4ba2b9(0x164)]['INTERNAL_SERVER_ERROR']);}}async[_0xe797d9(0x173)](){const _0x2fc153=_0xe797d9,_0x3787c8=await this[_0x2fc153(0x1af)]['query']('SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20menu'),_0x12de3c=parseInt(_0x3787c8[0x0][_0x2fc153(0x16a)]);_0x12de3c===0x0&&await this[_0x2fc153(0x1e5)]();}async[_0xe797d9(0x1e5)](){const _0x3be3f5=_0xe797d9;try{const _0x50fe56=[{'menuTipText':_0x3be3f5(0x17e),'menuIcon':_0x3be3f5(0x167),'menuName':_0x3be3f5(0x1d2),'menuPath':_0x3be3f5(0x179),'menuType':0x0,'menuPlatform':0x1,'order':0x64,'isShow':!![]},{'menuTipText':_0x3be3f5(0x16c),'menuIcon':_0x3be3f5(0x1d7),'menuName':_0x3be3f5(0x1e3),'menuPath':_0x3be3f5(0x1e2),'menuType':0x0,'menuPlatform':0x1,'order':0xc8,'isShow':!![]},{'menuTipText':_0x3be3f5(0x17c),'menuIcon':_0x3be3f5(0x186),'menuName':_0x3be3f5(0x187),'menuPath':_0x3be3f5(0x166),'menuType':0x0,'menuPlatform':0x1,'order':0x12c,'isShow':!![]},{'menuTipText':_0x3be3f5(0x1b5),'menuIcon':_0x3be3f5(0x180),'menuName':_0x3be3f5(0x175),'menuPath':_0x3be3f5(0x18c),'menuType':0x0,'menuPlatform':0x1,'order':0x190,'isShow':!![]},{'menuTipText':'基础绘画','menuIcon':_0x3be3f5(0x1a1),'menuName':'Draw','menuPath':_0x3be3f5(0x1a3),'menuType':0x0,'menuPlatform':0x1,'order':0x1f4,'isShow':!![]},{'menuTipText':_0x3be3f5(0x1cc),'menuIcon':_0x3be3f5(0x16b),'menuName':'Mind','menuPath':_0x3be3f5(0x1dc),'menuType':0x0,'menuPlatform':0x1,'order':0x258,'isShow':!![]},{'menuTipText':_0x3be3f5(0x19d),'menuIcon':_0x3be3f5(0x1da),'menuName':_0x3be3f5(0x195),'menuPath':'/pay','menuType':0x0,'menuPlatform':0x1,'order':0x2bc,'isShow':!![]},{'menuTipText':_0x3be3f5(0x1d3),'menuIcon':_0x3be3f5(0x172),'menuName':'Share','menuPath':'/share','menuType':0x0,'menuPlatform':0x1,'order':0x320,'isShow':!![]}],_0x280b9f=[{'menuTipText':_0x3be3f5(0x17e),'menuIcon':_0x3be3f5(0x167),'menuName':_0x3be3f5(0x1d2),'menuPath':_0x3be3f5(0x179),'menuType':0x0,'menuPlatform':0x0,'order':0x64,'isShow':!![]},{'menuTipText':_0x3be3f5(0x16c),'menuIcon':'ant-design:appstore-outlined','menuName':_0x3be3f5(0x1e3),'menuPath':_0x3be3f5(0x1e2),'menuType':0x0,'menuPlatform':0x0,'order':0xc8,'isShow':!![]},{'menuTipText':_0x3be3f5(0x17c),'menuIcon':_0x3be3f5(0x186),'menuName':_0x3be3f5(0x187),'menuPath':_0x3be3f5(0x166),'menuType':0x0,'menuPlatform':0x0,'order':0x12c,'isShow':!![]},{'menuTipText':'思维导图','menuIcon':_0x3be3f5(0x16b),'menuName':_0x3be3f5(0x1de),'menuPath':_0x3be3f5(0x1dc),'menuType':0x0,'menuPlatform':0x0,'order':0x190,'isShow':!![]},{'menuTipText':'个人中心','menuIcon':_0x3be3f5(0x19e),'menuName':_0x3be3f5(0x1ad),'menuPath':_0x3be3f5(0x1c4),'menuType':0x0,'menuPlatform':0x0,'order':0x1f4,'isShow':!![]}],_0x31ef6e=[..._0x50fe56,..._0x280b9f];for(const _0xa1a148 of _0x31ef6e){await this[_0x3be3f5(0x1af)][_0x3be3f5(0x18e)]('INSERT\x20INTO\x20menu\x20(menuName,\x20menuPath,\x20menuIcon,\x20menuTipText,\x20menuType,\x20menuPlatform,\x20menuIframeUrl,\x20`order`,\x20isShow,\x20isJump,\x20isNeedAuth,\x20createdAt,\x20updatedAt,\x20deletedAt)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20NOW(),\x20NOW(),\x20NULL)',[_0xa1a148[_0x3be3f5(0x18a)],_0xa1a148[_0x3be3f5(0x168)],_0xa1a148['menuIcon'],_0xa1a148[_0x3be3f5(0x178)],_0xa1a148['menuType'],_0xa1a148['menuPlatform'],null,_0xa1a148['order'],_0xa1a148['isShow'],![],![]]);}common_1['Logger']['log'](_0x3be3f5(0x1ab),_0x3be3f5(0x1ac));}catch(_0x39ce15){console[_0x3be3f5(0x1b6)](_0x3be3f5(0x1bc),_0x39ce15);throw new common_1['HttpException']('创建基础菜单配置失败！',common_1['HttpStatus'][_0x3be3f5(0x1e1)]);}}async[_0xe797d9(0x1a6)](){}};DatabaseService=__decorate([(0x0,common_1[_0xe797d9(0x1df)])(),__metadata(_0xe797d9(0x1c3),[typeorm_1[_0xe797d9(0x174)]])],DatabaseService),exports[_0xe797d9(0x1ac)]=DatabaseService;