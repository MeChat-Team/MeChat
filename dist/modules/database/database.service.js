'use strict';const _0x2c7c4a=_0x4c06;function _0x4c06(_0x2da662,_0xa9b527){const _0x5906c7=_0x5906();return _0x4c06=function(_0x4c062c,_0x15283c){_0x4c062c=_0x4c062c-0x117;let _0x10c66a=_0x5906c7[_0x4c062c];return _0x10c66a;},_0x4c06(_0x2da662,_0xa9b527);}(function(_0x29f8f6,_0xe8de09){const _0x482d1d=_0x4c06,_0x1adcaf=_0x29f8f6();while(!![]){try{const _0x5f3bf5=-parseInt(_0x482d1d(0x128))/0x1*(-parseInt(_0x482d1d(0x120))/0x2)+-parseInt(_0x482d1d(0x155))/0x3*(-parseInt(_0x482d1d(0x15d))/0x4)+-parseInt(_0x482d1d(0x13f))/0x5+-parseInt(_0x482d1d(0x193))/0x6*(-parseInt(_0x482d1d(0x185))/0x7)+-parseInt(_0x482d1d(0x152))/0x8+parseInt(_0x482d1d(0x192))/0x9*(-parseInt(_0x482d1d(0x18e))/0xa)+parseInt(_0x482d1d(0x189))/0xb;if(_0x5f3bf5===_0xe8de09)break;else _0x1adcaf['push'](_0x1adcaf['shift']());}catch(_0xc7fbd0){_0x1adcaf['push'](_0x1adcaf['shift']());}}}(_0x5906,0xa2067));var __decorate=this&&this['__decorate']||function(_0x297ef7,_0x1fe0db,_0x17342b,_0x59252f){const _0x512179=_0x4c06;var _0x18942b=arguments[_0x512179(0x198)],_0x578484=_0x18942b<0x3?_0x1fe0db:_0x59252f===null?_0x59252f=Object['getOwnPropertyDescriptor'](_0x1fe0db,_0x17342b):_0x59252f,_0x3f331a;if(typeof Reflect===_0x512179(0x117)&&typeof Reflect[_0x512179(0x16e)]===_0x512179(0x146))_0x578484=Reflect[_0x512179(0x16e)](_0x297ef7,_0x1fe0db,_0x17342b,_0x59252f);else{for(var _0xc60803=_0x297ef7['length']-0x1;_0xc60803>=0x0;_0xc60803--)if(_0x3f331a=_0x297ef7[_0xc60803])_0x578484=(_0x18942b<0x3?_0x3f331a(_0x578484):_0x18942b>0x3?_0x3f331a(_0x1fe0db,_0x17342b,_0x578484):_0x3f331a(_0x1fe0db,_0x17342b))||_0x578484;}return _0x18942b>0x3&&_0x578484&&Object[_0x512179(0x130)](_0x1fe0db,_0x17342b,_0x578484),_0x578484;},__metadata=this&&this[_0x2c7c4a(0x142)]||function(_0x520771,_0x6de696){const _0x157b57=_0x2c7c4a;if(typeof Reflect===_0x157b57(0x117)&&typeof Reflect[_0x157b57(0x15a)]===_0x157b57(0x146))return Reflect['metadata'](_0x520771,_0x6de696);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[_0x2c7c4a(0x183)]=void 0x0;const common_1=require(_0x2c7c4a(0x143)),bcrypt=require(_0x2c7c4a(0x18f)),typeorm_1=require(_0x2c7c4a(0x191));let DatabaseService=class DatabaseService{constructor(_0xa0b97c){const _0x24f1d9=_0x2c7c4a;this[_0x24f1d9(0x195)]=_0xa0b97c;}async[_0x2c7c4a(0x17f)](){const _0x19f288=_0x2c7c4a;await this[_0x19f288(0x172)](),await this[_0x19f288(0x12c)](),await this[_0x19f288(0x16c)](),await this[_0x19f288(0x17a)]();}async[_0x2c7c4a(0x172)](){const _0x2fc603=_0x2c7c4a,_0x244574=await this[_0x2fc603(0x195)][_0x2fc603(0x157)](_0x2fc603(0x137));if(!_0x244574||_0x244574[_0x2fc603(0x198)]===0x0){const _0x4cbbf5=bcrypt[_0x2fc603(0x14f)](_0x2fc603(0x180),0xa),_0x2266e6=bcrypt[_0x2fc603(0x14f)](_0x2fc603(0x180),0xa),_0x25a7f6='super',_0x1f2726='admin',_0xfa958={'username':_0x2fc603(0x12a),'password':_0x4cbbf5,'status':0x1,'email':_0x25a7f6,'sex':0x1,'role':_0x2fc603(0x12a)},_0x305c90={'username':_0x2fc603(0x162),'password':_0x2266e6,'status':0x0,'email':_0x1f2726,'sex':0x1,'role':_0x2fc603(0x162)};await this[_0x2fc603(0x159)](_0xfa958),await this['createDefaultUser'](_0x305c90);}}async[_0x2c7c4a(0x159)](_0x32850c){const _0x22c42c=_0x2c7c4a;try{const {username:_0x79261,password:_0x1859fb,status:_0x192e93,email:_0x3715f4,role:_0x324e7d}=_0x32850c,_0x3c5e35=await this['connection']['query'](_0x22c42c(0x16f)+_0x79261+_0x22c42c(0x197)+_0x1859fb+_0x22c42c(0x197)+_0x192e93+_0x22c42c(0x197)+_0x3715f4+_0x22c42c(0x197)+_0x324e7d+'\x27)'),_0x50160d=_0x3c5e35[_0x22c42c(0x178)];await this['connection'][_0x22c42c(0x157)](_0x22c42c(0x170)+_0x50160d+'\x27,\x200,\x201000,\x20100)'),common_1[_0x22c42c(0x176)][_0x22c42c(0x134)](_0x22c42c(0x118)+_0x324e7d+_0x22c42c(0x132)+_0x79261+_0x22c42c(0x156)+(_0x79261===_0x22c42c(0x12a)?_0x22c42c(0x12a):_0x22c42c(0x180))+_0x22c42c(0x14a),_0x22c42c(0x183));}catch(_0x45b561){console[_0x22c42c(0x134)]('error:\x20',_0x45b561);throw new common_1[(_0x22c42c(0x158))](_0x22c42c(0x186),common_1['HttpStatus'][_0x22c42c(0x150)]);}}async[_0x2c7c4a(0x12c)](){const _0x308605=_0x2c7c4a,_0x2d14c5=[_0x308605(0x141),_0x308605(0x135)],_0x3164d7=await this[_0x308605(0x195)][_0x308605(0x157)](_0x308605(0x13c)+_0x2d14c5[_0x308605(0x122)](_0x19c741=>'\x27'+_0x19c741+'\x27')[_0x308605(0x11f)](',')+')\x0a'),_0x144608=parseInt(_0x3164d7[0x0][_0x308605(0x196)]);_0x144608===0x0&&await this[_0x308605(0x18c)]();}async[_0x2c7c4a(0x18c)](){const _0x499259=_0x2c7c4a;try{const _0xde6031='',_0x31cd40=_0x499259(0x133),_0x1b2c9c=[{'configKey':'siteName','configVal':'','public':0x1,'encry':0x0},{'configKey':_0x499259(0x135),'configVal':'','public':0x1,'encry':0x0},{'configKey':'userDefautlAvatar','configVal':'','public':0x0,'encry':0x0},{'configKey':_0x499259(0x177),'configVal':_0xde6031,'public':0x1,'encry':0x0},{'configKey':_0x499259(0x190),'configVal':'','public':0x0,'encry':0x0},{'configKey':'baiduToken','configVal':'','public':0x0,'encry':0x0},{'configKey':_0x499259(0x12e),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x499259(0x167),'configVal':_0x499259(0x13d),'public':0x0,'encry':0x0},{'configKey':_0x499259(0x125),'configVal':_0x499259(0x139),'public':0x0,'encry':0x0},{'configKey':_0x499259(0x15c),'configVal':_0x499259(0x16b),'public':0x0,'encry':0x0},{'configKey':'mjTranslatePrompt','configVal':_0x499259(0x174),'public':0x0,'encry':0x0},{'configKey':_0x499259(0x15f),'configVal':_0x31cd40,'public':0x1,'encry':0x0},{'configKey':_0x499259(0x13e),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x499259(0x11a),'configVal':'30','public':0x1,'encry':0x0},{'configKey':'registerSendModel4Count','configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x499259(0x161),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x499259(0x14c),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x499259(0x18a),'configVal':'500','public':0x1,'encry':0x0},{'configKey':_0x499259(0x144),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x499259(0x138),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x499259(0x160),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x499259(0x166),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x499259(0x11e),'configVal':'普通积分','public':0x1,'encry':0x0},{'configKey':_0x499259(0x175),'configVal':_0x499259(0x12f),'public':0x1,'encry':0x0},{'configKey':_0x499259(0x188),'configVal':_0x499259(0x17d),'public':0x1,'encry':0x0},{'configKey':_0x499259(0x149),'configVal':_0x499259(0x11b),'public':0x1,'encry':0x0}],_0x403e9c=await this[_0x499259(0x195)][_0x499259(0x157)](_0x499259(0x169)+_0x1b2c9c[_0x499259(0x122)](_0x2ca051=>'(\x27'+_0x2ca051[_0x499259(0x13b)]+_0x499259(0x197)+_0x2ca051[_0x499259(0x16d)][_0x499259(0x168)](/'/g,'\x5c\x27')+_0x499259(0x197)+_0x2ca051[_0x499259(0x15b)]+_0x499259(0x197)+_0x2ca051[_0x499259(0x119)]+'\x27)')[_0x499259(0x11f)](',\x20'));common_1[_0x499259(0x176)][_0x499259(0x134)](_0x499259(0x18d),_0x499259(0x183));}catch(_0x2159f9){console[_0x499259(0x134)](_0x499259(0x182),_0x2159f9);throw new common_1['HttpException']('创建默认网站配置失败！',common_1[_0x499259(0x15e)]['INTERNAL_SERVER_ERROR']);}}async[_0x2c7c4a(0x16c)](){const _0xc0d5f3=_0x2c7c4a,_0x277edc=await this[_0xc0d5f3(0x195)][_0xc0d5f3(0x157)](_0xc0d5f3(0x12b)),_0x1cb73a=parseInt(_0x277edc[0x0][_0xc0d5f3(0x196)]);_0x1cb73a===0x0&&await this[_0xc0d5f3(0x17b)]();}async[_0x2c7c4a(0x17b)](){const _0x33e69c=_0x2c7c4a;try{const _0xf326ec=[{'menuTipText':_0x33e69c(0x17c),'menuIcon':_0x33e69c(0x163),'menuName':_0x33e69c(0x136),'menuPath':_0x33e69c(0x129),'menuType':0x0,'menuPlatform':0x1,'order':0x64,'isShow':!![]},{'menuTipText':_0x33e69c(0x16a),'menuIcon':_0x33e69c(0x153),'menuName':_0x33e69c(0x19a),'menuPath':_0x33e69c(0x164),'menuType':0x0,'menuPlatform':0x1,'order':0xc8,'isShow':!![]},{'menuTipText':_0x33e69c(0x14b),'menuIcon':'ri:landscape-line','menuName':'Midjourney','menuPath':_0x33e69c(0x140),'menuType':0x0,'menuPlatform':0x1,'order':0x12c,'isShow':!![]},{'menuTipText':_0x33e69c(0x179),'menuIcon':'solar:album-line-duotone','menuName':_0x33e69c(0x199),'menuPath':'/market','menuType':0x0,'menuPlatform':0x1,'order':0x190,'isShow':!![]},{'menuTipText':'基础绘画','menuIcon':_0x33e69c(0x121),'menuName':_0x33e69c(0x165),'menuPath':_0x33e69c(0x17e),'menuType':0x0,'menuPlatform':0x1,'order':0x1f4,'isShow':!![]},{'menuTipText':_0x33e69c(0x14e),'menuIcon':_0x33e69c(0x11c),'menuName':_0x33e69c(0x148),'menuPath':_0x33e69c(0x147),'menuType':0x0,'menuPlatform':0x1,'order':0x258,'isShow':!![]},{'menuTipText':_0x33e69c(0x124),'menuIcon':_0x33e69c(0x145),'menuName':_0x33e69c(0x14d),'menuPath':_0x33e69c(0x11d),'menuType':0x0,'menuPlatform':0x1,'order':0x2bc,'isShow':!![]},{'menuTipText':_0x33e69c(0x194),'menuIcon':_0x33e69c(0x154),'menuName':'Share','menuPath':'/share','menuType':0x0,'menuPlatform':0x1,'order':0x320,'isShow':!![]}],_0x4500fc=[{'menuTipText':_0x33e69c(0x17c),'menuIcon':_0x33e69c(0x163),'menuName':_0x33e69c(0x136),'menuPath':_0x33e69c(0x129),'menuType':0x0,'menuPlatform':0x0,'order':0x64,'isShow':!![]},{'menuTipText':_0x33e69c(0x16a),'menuIcon':_0x33e69c(0x153),'menuName':_0x33e69c(0x19a),'menuPath':_0x33e69c(0x164),'menuType':0x0,'menuPlatform':0x0,'order':0xc8,'isShow':!![]},{'menuTipText':_0x33e69c(0x14b),'menuIcon':'ri:landscape-line','menuName':'Midjourney','menuPath':_0x33e69c(0x140),'menuType':0x0,'menuPlatform':0x0,'order':0x12c,'isShow':!![]},{'menuTipText':_0x33e69c(0x14e),'menuIcon':_0x33e69c(0x11c),'menuName':'Mind','menuPath':'/mind','menuType':0x0,'menuPlatform':0x0,'order':0x190,'isShow':!![]},{'menuTipText':_0x33e69c(0x181),'menuIcon':_0x33e69c(0x151),'menuName':_0x33e69c(0x127),'menuPath':'/user-center','menuType':0x0,'menuPlatform':0x0,'order':0x1f4,'isShow':!![]}],_0xdb59d0=[..._0xf326ec,..._0x4500fc];for(const _0x765889 of _0xdb59d0){await this[_0x33e69c(0x195)][_0x33e69c(0x157)](_0x33e69c(0x18b),[_0x765889[_0x33e69c(0x126)],_0x765889[_0x33e69c(0x171)],_0x765889[_0x33e69c(0x173)],_0x765889[_0x33e69c(0x12d)],_0x765889['menuType'],_0x765889['menuPlatform'],null,_0x765889[_0x33e69c(0x187)],_0x765889[_0x33e69c(0x123)],![],![]]);}common_1[_0x33e69c(0x176)][_0x33e69c(0x134)](_0x33e69c(0x184),_0x33e69c(0x183));}catch(_0x110fde){console[_0x33e69c(0x134)](_0x33e69c(0x182),_0x110fde);throw new common_1[(_0x33e69c(0x158))](_0x33e69c(0x13a),common_1[_0x33e69c(0x15e)][_0x33e69c(0x150)]);}}async[_0x2c7c4a(0x17a)](){}};function _0x5906(){const _0x5dabf3=['Market','AppStore','object','初始化创建','encry','registerSendModel3Count','油画风格,像素风格,赛博朋克,动漫,日系,超现实主义,油画,卡通,插画,海报,写实,扁平,中国风,水墨画,唯美二次元,印象派,炫彩插画,像素艺术,艺术创想,色彩主义,数字艺术','icon-park-outline:mindmap-map','/pay','model3Name','join','4082FUbuim','fluent:draw-image-24-regular','map','isShow','会员中心','openaiTimeout','menuName','UserCenter','514uNMpxc','/chat','super','SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20menu','checkSiteBaseConfig','menuTipText','buyCramiAddress','高级积分','defineProperty','Connection','用户成功、用户名为[','\x0a####\x20AIWeb\x20欢迎您\x0a\x20-\x20欢迎使用\x20AIWeb\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','log','robotAvatar','Chat','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','firstRregisterSendModel4Count','300','创建基础菜单配置失败！','configKey','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','https://api.lightai.io','registerSendStatus','2268625nPzten','/midjourney','siteName','__metadata','@nestjs/common','firstRregisterSendModel3Count','icon-park-outline:shopping','function','/mind','Mind','drawingStyles',']\x20==============>\x20请注意查阅','专业绘画','firstRegisterSendStatus','Pay','思维导图','hashSync','INTERNAL_SERVER_ERROR','ri:account-pin-box-line','5026240wIIfep','ant-design:appstore-outlined','uiw:share','1032jUcUEa',']、初始密码为[','query','HttpException','createDefaultUser','metadata','public','openaiBaseKey','5468GZVPOh','HttpStatus','noticeInfo','firstRregisterSendDrawMjCount','registerSendDrawMjCount','admin','ri:message-3-line','/app-store','Draw','isVerifyEmail','openaiBaseUrl','replace','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','应用广场','sk-','checkMenuConfig','configVal','decorate','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','menuPath','checkSuperAdmin','menuIcon','Translate\x20any\x20given\x20phrase\x20from\x20any\x20language\x20into\x20English.\x20For\x20instance,\x20when\x20I\x20input\x20\x27{可爱的熊猫}\x27,\x20you\x20should\x20output\x20\x27{cute\x20panda}\x27,\x20with\x20no\x20period\x20at\x20the\x20end.','model4Name','Logger','baiduCode','insertId','绘画广场','checkGalleryConfig','createBaseMenuConfig','对话聊天','绘画积分','/draw','onModuleInit','123456','个人中心','error:\x20','DatabaseService','初始化菜单配置成功','6074754wVHHXd','创建默认超级管理员失败！','order','drawMjName','4461710lOqddH','firstRegisterSendRank','INSERT\x20INTO\x20menu\x20(menuName,\x20menuPath,\x20menuIcon,\x20menuTipText,\x20menuType,\x20menuPlatform,\x20menuIframeUrl,\x20`order`,\x20isShow,\x20isJump,\x20isNeedAuth,\x20createdAt,\x20updatedAt,\x20deletedAt)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20NOW(),\x20NOW(),\x20NULL)','createBaseSiteConfig','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','21860CTyZxL','bcryptjs','baiduSiteId','typeorm','4311apPxEL','6nzlvvO','推广计划','connection','count','\x27,\x20\x27','length'];_0x5906=function(){return _0x5dabf3;};return _0x5906();}DatabaseService=__decorate([(0x0,common_1['Injectable'])(),__metadata('design:paramtypes',[typeorm_1[_0x2c7c4a(0x131)]])],DatabaseService),exports[_0x2c7c4a(0x183)]=DatabaseService;