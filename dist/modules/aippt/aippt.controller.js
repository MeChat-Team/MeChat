'use strict';function _0x2c70(_0x2bbe56,_0x597a5a){const _0x4ae9e4=_0x4ae9();return _0x2c70=function(_0x2c70ba,_0x174c20){_0x2c70ba=_0x2c70ba-0x129;let _0x5a6d03=_0x4ae9e4[_0x2c70ba];return _0x5a6d03;},_0x2c70(_0x2bbe56,_0x597a5a);}const _0x56423a=_0x2c70;(function(_0x52af8e,_0x479a92){const _0x3787bc=_0x2c70,_0x82715d=_0x52af8e();while(!![]){try{const _0x4f4c24=-parseInt(_0x3787bc(0x14f))/0x1*(parseInt(_0x3787bc(0x134))/0x2)+parseInt(_0x3787bc(0x168))/0x3+parseInt(_0x3787bc(0x178))/0x4+-parseInt(_0x3787bc(0x15b))/0x5*(parseInt(_0x3787bc(0x173))/0x6)+parseInt(_0x3787bc(0x15e))/0x7*(parseInt(_0x3787bc(0x147))/0x8)+-parseInt(_0x3787bc(0x160))/0x9+-parseInt(_0x3787bc(0x12f))/0xa*(-parseInt(_0x3787bc(0x131))/0xb);if(_0x4f4c24===_0x479a92)break;else _0x82715d['push'](_0x82715d['shift']());}catch(_0x164165){_0x82715d['push'](_0x82715d['shift']());}}}(_0x4ae9,0xc9e1d));var __decorate=this&&this[_0x56423a(0x153)]||function(_0x3dc1c6,_0x46fd89,_0x367d5c,_0x59d29c){const _0x21a671=_0x56423a;var _0x155c1d=arguments[_0x21a671(0x150)],_0x39c4ae=_0x155c1d<0x3?_0x46fd89:_0x59d29c===null?_0x59d29c=Object[_0x21a671(0x157)](_0x46fd89,_0x367d5c):_0x59d29c,_0x15983f;if(typeof Reflect===_0x21a671(0x15a)&&typeof Reflect['decorate']==='function')_0x39c4ae=Reflect[_0x21a671(0x16a)](_0x3dc1c6,_0x46fd89,_0x367d5c,_0x59d29c);else{for(var _0x5c01bc=_0x3dc1c6[_0x21a671(0x150)]-0x1;_0x5c01bc>=0x0;_0x5c01bc--)if(_0x15983f=_0x3dc1c6[_0x5c01bc])_0x39c4ae=(_0x155c1d<0x3?_0x15983f(_0x39c4ae):_0x155c1d>0x3?_0x15983f(_0x46fd89,_0x367d5c,_0x39c4ae):_0x15983f(_0x46fd89,_0x367d5c))||_0x39c4ae;}return _0x155c1d>0x3&&_0x39c4ae&&Object[_0x21a671(0x130)](_0x46fd89,_0x367d5c,_0x39c4ae),_0x39c4ae;},__metadata=this&&this[_0x56423a(0x14e)]||function(_0x3f0cef,_0x5ee061){const _0x3f583a=_0x56423a;if(typeof Reflect===_0x3f583a(0x15a)&&typeof Reflect[_0x3f583a(0x14c)]===_0x3f583a(0x159))return Reflect[_0x3f583a(0x14c)](_0x3f0cef,_0x5ee061);},__param=this&&this[_0x56423a(0x179)]||function(_0x43b926,_0x5ef2da){return function(_0x49c586,_0xc83ea3){_0x5ef2da(_0x49c586,_0xc83ea3,_0x43b926);};};Object['defineProperty'](exports,_0x56423a(0x13c),{'value':!![]}),exports[_0x56423a(0x129)]=void 0x0;const common_1=require('@nestjs/common'),aippt_service_1=require('./aippt.service'),generate_ppt_dto_1=require(_0x56423a(0x14a)),generate_content_dto_1=require(_0x56423a(0x174)),swagger_1=require(_0x56423a(0x148));let AipptController=class AipptController{constructor(_0x2e71eb){const _0x1de103=_0x56423a;this[_0x1de103(0x13f)]=_0x2e71eb;}async['generateOutline'](_0x2b5b5c,_0x1899ad){const _0x3ea0ff=_0x56423a;_0x1899ad[_0x3ea0ff(0x12d)]('Content-Type',_0x3ea0ff(0x161)),_0x1899ad[_0x3ea0ff(0x12d)](_0x3ea0ff(0x170),_0x3ea0ff(0x166)),_0x1899ad[_0x3ea0ff(0x12d)](_0x3ea0ff(0x165),_0x3ea0ff(0x146)),_0x1899ad['setHeader'](_0x3ea0ff(0x132),'*');const _0xf6ea25=await this[_0x3ea0ff(0x13f)][_0x3ea0ff(0x13e)](_0x2b5b5c);_0xf6ea25[_0x3ea0ff(0x12c)]({'next':_0xd6e8b8=>{const _0x359834=_0x3ea0ff;try{_0x1899ad[_0x359834(0x142)]('data:\x20'+JSON[_0x359834(0x169)](_0xd6e8b8)+'\x0a\x0a');}catch(_0x53e825){console['error'](_0x359834(0x141),_0x53e825),_0x1899ad[_0x359834(0x16f)]();}},'error':_0x1cc1b8=>{const _0xf75136=_0x3ea0ff;console[_0xf75136(0x13a)](_0xf75136(0x176),_0x1cc1b8),_0x1899ad['end']();},'complete':()=>{const _0x18c9d1=_0x3ea0ff;_0x1899ad[_0x18c9d1(0x16f)]();}});}async['generateContent'](_0x4ddd2e,_0x3609cc){const _0x4f5d4c=_0x56423a;_0x3609cc[_0x4f5d4c(0x12d)]('Content-Type',_0x4f5d4c(0x161)),_0x3609cc[_0x4f5d4c(0x12d)](_0x4f5d4c(0x170),_0x4f5d4c(0x166)),_0x3609cc['setHeader']('Connection','keep-alive'),_0x3609cc[_0x4f5d4c(0x12d)](_0x4f5d4c(0x132),'*');const _0x1d6a25=await this[_0x4f5d4c(0x13f)]['generateContent'](_0x4ddd2e);_0x1d6a25['subscribe']({'next':_0x514af0=>{const _0x1f7bed=_0x4f5d4c;try{_0x3609cc[_0x1f7bed(0x142)](_0x1f7bed(0x13d)+JSON[_0x1f7bed(0x169)](_0x514af0)+'\x0a\x0a');}catch(_0x3fa047){console[_0x1f7bed(0x13a)](_0x1f7bed(0x141),_0x3fa047),_0x3609cc[_0x1f7bed(0x16f)]();}},'error':_0x460829=>{const _0x813520=_0x4f5d4c;console[_0x813520(0x13a)](_0x813520(0x176),_0x460829),_0x3609cc[_0x813520(0x16f)]();},'complete':()=>{_0x3609cc['end']();}});}async[_0x56423a(0x171)](_0x4763fb){const _0x3abe9d=_0x56423a;return this[_0x3abe9d(0x13f)][_0x3abe9d(0x15d)](_0x4763fb);}};__decorate([(0x0,common_1[_0x56423a(0x154)])(_0x56423a(0x163)),(0x0,swagger_1[_0x56423a(0x12a)])({'summary':_0x56423a(0x145),'description':'\x0a\x20\x20\x20\x20流式生成PPT大纲目录markdown。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的文本内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20生成中,\x202:\x20生成完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的大纲结果\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22outline\x22:\x20\x22完整的大纲markdown\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20'}),(0x0,swagger_1[_0x56423a(0x136)])({'type':generate_ppt_dto_1['GenerateOutlineDto'],'description':_0x56423a(0x158),'examples':{'example1':{'value':{'length':0x5,'lang':'zh','prompt':_0x56423a(0x133),'subject':'技术','dataUrl':null},'summary':_0x56423a(0x12b)}}}),(0x0,swagger_1[_0x56423a(0x138)])({'status':0xc8,'description':'返回SSE流，包含实时生成的大纲内容'}),(0x0,swagger_1[_0x56423a(0x138)])({'status':0x190,'description':_0x56423a(0x151)}),(0x0,swagger_1[_0x56423a(0x138)])({'status':0x1f4,'description':_0x56423a(0x155)}),__param(0x0,(0x0,common_1[_0x56423a(0x172)])()),__param(0x1,(0x0,common_1['Response'])()),__metadata(_0x56423a(0x17b),Function),__metadata(_0x56423a(0x164),[generate_ppt_dto_1[_0x56423a(0x16b)],Object]),__metadata(_0x56423a(0x12e),Promise)],AipptController['prototype'],'generateOutline',null),__decorate([(0x0,common_1[_0x56423a(0x154)])(_0x56423a(0x17a)),(0x0,swagger_1['ApiOperation'])({'summary':'生成PPT内容','description':_0x56423a(0x143)}),(0x0,swagger_1[_0x56423a(0x136)])({'type':generate_content_dto_1[_0x56423a(0x177)],'description':_0x56423a(0x149),'examples':{'example1':{'value':{'templateId':_0x56423a(0x137),'outlineMarkdown':_0x56423a(0x13b),'asyncGenPptx':!![],'prompt':_0x56423a(0x139),'dataUrl':null},'summary':_0x56423a(0x12b)}}}),(0x0,swagger_1[_0x56423a(0x138)])({'status':0xc8,'description':_0x56423a(0x140)}),(0x0,swagger_1[_0x56423a(0x138)])({'status':0x190,'description':'参数验证失败'}),(0x0,swagger_1['ApiResponse'])({'status':0x1f4,'description':_0x56423a(0x155)}),__param(0x0,(0x0,common_1[_0x56423a(0x172)])()),__param(0x1,(0x0,common_1['Response'])()),__metadata(_0x56423a(0x17b),Function),__metadata(_0x56423a(0x164),[generate_content_dto_1[_0x56423a(0x177)],Object]),__metadata('design:returntype',Promise)],AipptController[_0x56423a(0x16c)],_0x56423a(0x167),null),__decorate([(0x0,common_1[_0x56423a(0x152)])('ppt-info'),(0x0,swagger_1['ApiOperation'])({'summary':_0x56423a(0x162),'description':_0x56423a(0x175)}),(0x0,swagger_1[_0x56423a(0x16e)])({'name':_0x56423a(0x15f),'description':_0x56423a(0x17d),'required':!![],'type':String,'example':_0x56423a(0x17c)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':'返回PPT生成的状态信息'}),(0x0,swagger_1[_0x56423a(0x138)])({'status':0x190,'description':'pptId参数缺失或格式错误'}),(0x0,swagger_1[_0x56423a(0x138)])({'status':0x194,'description':_0x56423a(0x156)}),__param(0x0,(0x0,common_1[_0x56423a(0x16d)])(_0x56423a(0x15f))),__metadata(_0x56423a(0x17b),Function),__metadata(_0x56423a(0x164),[String]),__metadata(_0x56423a(0x12e),Promise)],AipptController[_0x56423a(0x16c)],'getPptInfo',null),AipptController=__decorate([(0x0,swagger_1[_0x56423a(0x15c)])(_0x56423a(0x14b)),(0x0,common_1[_0x56423a(0x14d)])(_0x56423a(0x144)),__metadata(_0x56423a(0x164),[aippt_service_1[_0x56423a(0x135)]])],AipptController),exports[_0x56423a(0x129)]=AipptController;function _0x4ae9(){const _0x178a8a=['data:\x20','generateOutline','aipptService','返回SSE流，包含实时生成的内容和PPT生成状态','Error\x20writing\x20SSE\x20data:','write','\x0a\x20\x20\x20\x20根据大纲生成完整内容并异步生成PPT。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的内容片段\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20内容生成中,\x202:\x20内容生成完成,\x203:\x20PPT生成中,\x204:\x20全部完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的内容\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22完整的内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为3或4时，返回PPT生成信息\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22pptId\x22:\x20\x22异步生成的PPT\x20ID\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075\x20//\x20PPT生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','aippt','生成PPT大纲','keep-alive','1592056QNZIRR','@nestjs/swagger','生成PPT内容所需的参数','./dto/generate-ppt.dto','AI\x20PPT生成服务','metadata','Controller','__metadata','67QhIHnB','length','参数验证失败','Get','__decorate','Post','服务器内部错误或AI服务调用失败','未找到指定的PPT生成任务','getOwnPropertyDescriptor','生成大纲所需的参数','function','object','616595yXQMlx','ApiTags','asyncPptInfo','7cJYGCX','pptId','9795186BLrVel','text/event-stream','查询PPT生成状态','generate-outline','design:paramtypes','Connection','no-cache','generateContent','4178856wVxAXF','stringify','decorate','GenerateOutlineDto','prototype','Query','ApiQuery','end','Cache-Control','getPptInfo','Body','24twUGgC','./dto/generate-content.dto','\x0a\x20\x20\x20\x20查询异步生成PPT的进度和数据。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回数据格式：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22processing\x22,\x20//\x20processing:\x20生成中,\x20completed:\x20已完成,\x20failed:\x20失败\x0a\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075,\x20//\x20生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20\x22url\x22:\x20\x22https://example.com/ppt/xxx.pptx\x22,\x20//\x20当status为completed时返回下载地址\x0a\x20\x20\x20\x20\x20\x20\x22error\x22:\x20\x22错误信息\x22\x20//\x20当status为failed时返回错误信息\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','Stream\x20error:','GenerateContentDto','2722860EfBkLK','__param','generate-content','design:type','ppt_task_123456','PPT生成任务ID','AipptController','ApiOperation','基本示例','subscribe','setHeader','design:returntype','4916870xzBqZy','defineProperty','33TgcUTd','Access-Control-Allow-Origin','关于人工智能的演讲','39976binheu','AipptService','ApiBody','template_modern','ApiResponse','使用简洁的设计风格','error','#\x20主题\x0a##\x20章节1\x0a###\x20页面1\x0a####\x20内容1','__esModule'];_0x4ae9=function(){return _0x178a8a;};return _0x4ae9();}