'use strict';const _0xa57c90=_0x545e;(function(_0x401c3f,_0x3241ff){const _0x4d9737=_0x545e,_0x5693df=_0x401c3f();while(!![]){try{const _0x57aa54=-parseInt(_0x4d9737(0x123))/0x1*(-parseInt(_0x4d9737(0x10a))/0x2)+parseInt(_0x4d9737(0x10f))/0x3+-parseInt(_0x4d9737(0x159))/0x4+parseInt(_0x4d9737(0x158))/0x5*(parseInt(_0x4d9737(0x156))/0x6)+parseInt(_0x4d9737(0x155))/0x7+parseInt(_0x4d9737(0x154))/0x8+-parseInt(_0x4d9737(0x146))/0x9*(parseInt(_0x4d9737(0x134))/0xa);if(_0x57aa54===_0x3241ff)break;else _0x5693df['push'](_0x5693df['shift']());}catch(_0x441a85){_0x5693df['push'](_0x5693df['shift']());}}}(_0x5b2e,0x6bc25));var __decorate=this&&this[_0xa57c90(0x147)]||function(_0x5111e8,_0x346f84,_0x5859f3,_0x40441e){const _0x50a584=_0xa57c90;var _0x59321e=arguments['length'],_0x2f41f1=_0x59321e<0x3?_0x346f84:_0x40441e===null?_0x40441e=Object[_0x50a584(0x11b)](_0x346f84,_0x5859f3):_0x40441e,_0x3b12e6;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x50a584(0x153))_0x2f41f1=Reflect[_0x50a584(0x138)](_0x5111e8,_0x346f84,_0x5859f3,_0x40441e);else{for(var _0x1768a3=_0x5111e8[_0x50a584(0x14f)]-0x1;_0x1768a3>=0x0;_0x1768a3--)if(_0x3b12e6=_0x5111e8[_0x1768a3])_0x2f41f1=(_0x59321e<0x3?_0x3b12e6(_0x2f41f1):_0x59321e>0x3?_0x3b12e6(_0x346f84,_0x5859f3,_0x2f41f1):_0x3b12e6(_0x346f84,_0x5859f3))||_0x2f41f1;}return _0x59321e>0x3&&_0x2f41f1&&Object[_0x50a584(0x115)](_0x346f84,_0x5859f3,_0x2f41f1),_0x2f41f1;},__metadata=this&&this[_0xa57c90(0x11a)]||function(_0x513bd5,_0x3d05e4){const _0x5692b5=_0xa57c90;if(typeof Reflect===_0x5692b5(0x152)&&typeof Reflect[_0x5692b5(0x121)]===_0x5692b5(0x153))return Reflect[_0x5692b5(0x121)](_0x513bd5,_0x3d05e4);},__param=this&&this[_0xa57c90(0x12d)]||function(_0x228c52,_0x139958){return function(_0x57c213,_0x571712){_0x139958(_0x57c213,_0x571712,_0x228c52);};};Object[_0xa57c90(0x115)](exports,_0xa57c90(0x122),{'value':!![]}),exports[_0xa57c90(0x135)]=void 0x0;const common_1=require('@nestjs/common'),aippt_service_1=require(_0xa57c90(0x10b)),generate_ppt_dto_1=require(_0xa57c90(0x129)),generate_content_dto_1=require('./dto/generate-content.dto'),swagger_1=require('@nestjs/swagger');let AipptController=class AipptController{constructor(_0x554cff){const _0x3bc0c3=_0xa57c90;this[_0x3bc0c3(0x13e)]=_0x554cff;}async['generateOutline'](_0x13805d,_0x4c6f93){const _0x19883d=_0xa57c90;_0x4c6f93['setHeader']('Content-Type','text/event-stream'),_0x4c6f93[_0x19883d(0x116)]('Cache-Control','no-cache'),_0x4c6f93[_0x19883d(0x116)](_0x19883d(0x145),_0x19883d(0x12f)),_0x4c6f93['setHeader']('Access-Control-Allow-Origin','*');const _0x59898b=await this[_0x19883d(0x13e)][_0x19883d(0x14e)](_0x13805d);_0x59898b[_0x19883d(0x143)]({'next':_0x4dae9c=>{const _0x1934be=_0x19883d;try{_0x4c6f93['write'](_0x1934be(0x12e)+JSON[_0x1934be(0x114)](_0x4dae9c)+'\x0a\x0a');}catch(_0x5cefd6){console[_0x1934be(0x124)](_0x1934be(0x10e),_0x5cefd6),_0x4c6f93[_0x1934be(0x136)]();}},'error':_0xb3e409=>{const _0x64cb62=_0x19883d;console['error'](_0x64cb62(0x13f),_0xb3e409),_0x4c6f93['end']();},'complete':()=>{const _0x24a31b=_0x19883d;_0x4c6f93[_0x24a31b(0x136)]();}});}async[_0xa57c90(0x12a)](_0x38beb7,_0x3556a5){const _0x2e179c=_0xa57c90;_0x3556a5['setHeader']('Content-Type','text/event-stream'),_0x3556a5[_0x2e179c(0x116)](_0x2e179c(0x14a),_0x2e179c(0x148)),_0x3556a5[_0x2e179c(0x116)](_0x2e179c(0x145),_0x2e179c(0x12f)),_0x3556a5[_0x2e179c(0x116)](_0x2e179c(0x12c),'*');const _0x5e24ad=await this[_0x2e179c(0x13e)][_0x2e179c(0x12a)](_0x38beb7);_0x5e24ad[_0x2e179c(0x143)]({'next':_0x58a49a=>{const _0x17f3dd=_0x2e179c;try{_0x3556a5['write'](_0x17f3dd(0x12e)+JSON[_0x17f3dd(0x114)](_0x58a49a)+'\x0a\x0a');}catch(_0x29a4c1){console[_0x17f3dd(0x124)](_0x17f3dd(0x10e),_0x29a4c1),_0x3556a5[_0x17f3dd(0x136)]();}},'error':_0x23c356=>{const _0x4056fd=_0x2e179c;console['error'](_0x4056fd(0x13f),_0x23c356),_0x3556a5[_0x4056fd(0x136)]();},'complete':()=>{_0x3556a5['end']();}});}async[_0xa57c90(0x139)](_0x3f298c){const _0x2205e0=_0xa57c90;return this[_0x2205e0(0x13e)][_0x2205e0(0x13c)](_0x3f298c);}};function _0x545e(_0x19df5b,_0x5bf7a6){const _0x5b2ee4=_0x5b2e();return _0x545e=function(_0x545e56,_0x29c94a){_0x545e56=_0x545e56-0x10a;let _0x3b6273=_0x5b2ee4[_0x545e56];return _0x3b6273;},_0x545e(_0x19df5b,_0x5bf7a6);}function _0x5b2e(){const _0x361067=['asyncPptInfo','ApiOperation','aipptService','Stream\x20error:','未找到指定的PPT生成任务','AI\x20PPT生成服务','GenerateContentDto','subscribe','返回SSE流，包含实时生成的内容和PPT生成状态','Connection','3069351AqvUVZ','__decorate','no-cache','prototype','Cache-Control','Response','生成PPT内容','pptId','generateOutline','length','\x0a\x20\x20\x20\x20查询异步生成PPT的进度和数据。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回数据格式：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22processing\x22,\x20//\x20processing:\x20生成中,\x20completed:\x20已完成,\x20failed:\x20失败\x0a\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075,\x20//\x20生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20\x22url\x22:\x20\x22https://example.com/ppt/xxx.pptx\x22,\x20//\x20当status为completed时返回下载地址\x0a\x20\x20\x20\x20\x20\x20\x22error\x22:\x20\x22错误信息\x22\x20//\x20当status为failed时返回错误信息\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','返回PPT生成的状态信息','object','function','2114128JobSyF','4524933eTQMgX','2448408GqDadm','aippt','10GloCKo','1292304RPwPgN','generate-content','962rBKChs','./aippt.service','GenerateOutlineDto','Controller','Error\x20writing\x20SSE\x20data:','404511HlzXhQ','ApiBody','template_modern','design:paramtypes','Get','stringify','defineProperty','setHeader','pptId参数缺失或格式错误','ApiQuery','服务器内部错误或AI服务调用失败','__metadata','getOwnPropertyDescriptor','返回SSE流，包含实时生成的大纲内容','Query','ppt-info','generate-outline','\x0a\x20\x20\x20\x20流式生成PPT大纲目录markdown。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的文本内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20生成中,\x202:\x20生成完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的大纲结果\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22outline\x22:\x20\x22完整的大纲markdown\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','metadata','__esModule','555jAdqUm','error','ApiResponse','生成大纲所需的参数','design:type','参数验证失败','./dto/generate-ppt.dto','generateContent','AipptService','Access-Control-Allow-Origin','__param','data:\x20','keep-alive','Body','生成PPT大纲','ppt_task_123456','Post','40haRCcz','AipptController','end','基本示例','decorate','getPptInfo','design:returntype','\x0a\x20\x20\x20\x20根据大纲生成完整内容并异步生成PPT。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的内容片段\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20内容生成中,\x202:\x20内容生成完成,\x203:\x20PPT生成中,\x204:\x20全部完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的内容\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22完整的内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为3或4时，返回PPT生成信息\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22pptId\x22:\x20\x22异步生成的PPT\x20ID\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075\x20//\x20PPT生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20'];_0x5b2e=function(){return _0x361067;};return _0x5b2e();}__decorate([(0x0,common_1[_0xa57c90(0x133)])(_0xa57c90(0x11f)),(0x0,swagger_1[_0xa57c90(0x13d)])({'summary':_0xa57c90(0x131),'description':_0xa57c90(0x120)}),(0x0,swagger_1[_0xa57c90(0x110)])({'type':generate_ppt_dto_1[_0xa57c90(0x10c)],'description':_0xa57c90(0x126),'examples':{'example1':{'value':{'length':0x5,'lang':'zh','prompt':'关于人工智能的演讲','subject':'技术','dataUrl':null},'summary':_0xa57c90(0x137)}}}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0xa57c90(0x11c)}),(0x0,swagger_1[_0xa57c90(0x125)])({'status':0x190,'description':'参数验证失败'}),(0x0,swagger_1[_0xa57c90(0x125)])({'status':0x1f4,'description':_0xa57c90(0x119)}),__param(0x0,(0x0,common_1[_0xa57c90(0x130)])()),__param(0x1,(0x0,common_1[_0xa57c90(0x14b)])()),__metadata(_0xa57c90(0x127),Function),__metadata(_0xa57c90(0x112),[generate_ppt_dto_1['GenerateOutlineDto'],Object]),__metadata(_0xa57c90(0x13a),Promise)],AipptController[_0xa57c90(0x149)],'generateOutline',null),__decorate([(0x0,common_1[_0xa57c90(0x133)])(_0xa57c90(0x15a)),(0x0,swagger_1['ApiOperation'])({'summary':_0xa57c90(0x14c),'description':_0xa57c90(0x13b)}),(0x0,swagger_1['ApiBody'])({'type':generate_content_dto_1['GenerateContentDto'],'description':'生成PPT内容所需的参数','examples':{'example1':{'value':{'templateId':_0xa57c90(0x111),'outlineMarkdown':'#\x20主题\x0a##\x20章节1\x0a###\x20页面1\x0a####\x20内容1','asyncGenPptx':!![],'prompt':'使用简洁的设计风格','dataUrl':null},'summary':_0xa57c90(0x137)}}}),(0x0,swagger_1[_0xa57c90(0x125)])({'status':0xc8,'description':_0xa57c90(0x144)}),(0x0,swagger_1[_0xa57c90(0x125)])({'status':0x190,'description':_0xa57c90(0x128)}),(0x0,swagger_1['ApiResponse'])({'status':0x1f4,'description':_0xa57c90(0x119)}),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0xa57c90(0x14b)])()),__metadata(_0xa57c90(0x127),Function),__metadata(_0xa57c90(0x112),[generate_content_dto_1[_0xa57c90(0x142)],Object]),__metadata(_0xa57c90(0x13a),Promise)],AipptController[_0xa57c90(0x149)],_0xa57c90(0x12a),null),__decorate([(0x0,common_1[_0xa57c90(0x113)])(_0xa57c90(0x11e)),(0x0,swagger_1[_0xa57c90(0x13d)])({'summary':'查询PPT生成状态','description':_0xa57c90(0x150)}),(0x0,swagger_1[_0xa57c90(0x118)])({'name':_0xa57c90(0x14d),'description':'PPT生成任务ID','required':!![],'type':String,'example':_0xa57c90(0x132)}),(0x0,swagger_1[_0xa57c90(0x125)])({'status':0xc8,'description':_0xa57c90(0x151)}),(0x0,swagger_1[_0xa57c90(0x125)])({'status':0x190,'description':_0xa57c90(0x117)}),(0x0,swagger_1[_0xa57c90(0x125)])({'status':0x194,'description':_0xa57c90(0x140)}),__param(0x0,(0x0,common_1[_0xa57c90(0x11d)])(_0xa57c90(0x14d))),__metadata(_0xa57c90(0x127),Function),__metadata(_0xa57c90(0x112),[String]),__metadata('design:returntype',Promise)],AipptController[_0xa57c90(0x149)],_0xa57c90(0x139),null),AipptController=__decorate([(0x0,swagger_1['ApiTags'])(_0xa57c90(0x141)),(0x0,common_1[_0xa57c90(0x10d)])(_0xa57c90(0x157)),__metadata(_0xa57c90(0x112),[aippt_service_1[_0xa57c90(0x12b)]])],AipptController),exports[_0xa57c90(0x135)]=AipptController;