'use strict';const _0x381c11=_0x4e94;(function(_0x1905d2,_0xe91dda){const _0x4c3856=_0x4e94,_0x5d0430=_0x1905d2();while(!![]){try{const _0x5a5ae7=parseInt(_0x4c3856(0x1a3))/0x1+parseInt(_0x4c3856(0x16a))/0x2+-parseInt(_0x4c3856(0x179))/0x3+-parseInt(_0x4c3856(0x1ad))/0x4+-parseInt(_0x4c3856(0x160))/0x5*(-parseInt(_0x4c3856(0x169))/0x6)+-parseInt(_0x4c3856(0x18e))/0x7*(parseInt(_0x4c3856(0x19d))/0x8)+parseInt(_0x4c3856(0x1a4))/0x9*(parseInt(_0x4c3856(0x165))/0xa);if(_0x5a5ae7===_0xe91dda)break;else _0x5d0430['push'](_0x5d0430['shift']());}catch(_0x77e1ab){_0x5d0430['push'](_0x5d0430['shift']());}}}(_0xe78b,0x9ad87));function _0x4e94(_0x34ca6e,_0xc1d95d){const _0xe78b45=_0xe78b();return _0x4e94=function(_0x4e948d,_0x348942){_0x4e948d=_0x4e948d-0x160;let _0x200985=_0xe78b45[_0x4e948d];return _0x200985;},_0x4e94(_0x34ca6e,_0xc1d95d);}function _0xe78b(){const _0x35cc9b=['Connection','服务器内部错误或AI服务调用失败','Content-Type','design:type','生成PPT大纲','ApiOperation','pptId','PPT生成任务ID','2107679pWGCRI','generate-outline','length','aipptService','Query','GenerateOutlineDto','生成大纲所需的参数','\x0a\x20\x20\x20\x20查询异步生成PPT的进度和数据。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回数据格式：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22processing\x22,\x20//\x20processing:\x20生成中,\x20completed:\x20已完成,\x20failed:\x20失败\x0a\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075,\x20//\x20生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20\x22url\x22:\x20\x22https://example.com/ppt/xxx.pptx\x22,\x20//\x20当status为completed时返回下载地址\x0a\x20\x20\x20\x20\x20\x20\x22error\x22:\x20\x22错误信息\x22\x20//\x20当status为failed时返回错误信息\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','ApiBody','design:returntype','生成PPT内容','error','基本示例','decorate','查询PPT生成状态','24tjfeXh','Post','@nestjs/common','返回SSE流，包含实时生成的大纲内容','__decorate','generateContent','934642hqTEZI','711pxhwvQ','asyncPptInfo','__metadata','keep-alive','Error\x20writing\x20SSE\x20data:','Controller','no-cache','ApiResponse','#\x20主题\x0a##\x20章节1\x0a###\x20页面1\x0a####\x20内容1','3030232IhllEn','./dto/generate-ppt.dto','prototype','使用简洁的设计风格','object','__param','3422230oPQzjm','function','生成PPT内容所需的参数','write','data:\x20','128420gXnQxX','generate-content','Response','setHeader','6ybShjo','1143988fUeHEY','Body','ApiQuery','__esModule','未找到指定的PPT生成任务','design:paramtypes','关于人工智能的演讲','stringify','template_modern','text/event-stream','generateOutline','AipptService','AI\x20PPT生成服务','GenerateContentDto','defineProperty','2731512uRoqyT','Cache-Control','ppt-info','Stream\x20error:','end','metadata','返回SSE流，包含实时生成的内容和PPT生成状态','参数验证失败','./dto/generate-content.dto','Access-Control-Allow-Origin','getPptInfo','AipptController','返回PPT生成的状态信息'];_0xe78b=function(){return _0x35cc9b;};return _0xe78b();}var __decorate=this&&this[_0x381c11(0x1a1)]||function(_0x559958,_0x356b03,_0x2da8d5,_0xde91e6){const _0x467438=_0x381c11;var _0x42f793=arguments[_0x467438(0x190)],_0x11984=_0x42f793<0x3?_0x356b03:_0xde91e6===null?_0xde91e6=Object['getOwnPropertyDescriptor'](_0x356b03,_0x2da8d5):_0xde91e6,_0x4c819c;if(typeof Reflect===_0x467438(0x1b1)&&typeof Reflect['decorate']==='function')_0x11984=Reflect[_0x467438(0x19b)](_0x559958,_0x356b03,_0x2da8d5,_0xde91e6);else{for(var _0x4f97ec=_0x559958[_0x467438(0x190)]-0x1;_0x4f97ec>=0x0;_0x4f97ec--)if(_0x4c819c=_0x559958[_0x4f97ec])_0x11984=(_0x42f793<0x3?_0x4c819c(_0x11984):_0x42f793>0x3?_0x4c819c(_0x356b03,_0x2da8d5,_0x11984):_0x4c819c(_0x356b03,_0x2da8d5))||_0x11984;}return _0x42f793>0x3&&_0x11984&&Object[_0x467438(0x178)](_0x356b03,_0x2da8d5,_0x11984),_0x11984;},__metadata=this&&this[_0x381c11(0x1a6)]||function(_0x29ab25,_0x45195c){const _0x4b894e=_0x381c11;if(typeof Reflect===_0x4b894e(0x1b1)&&typeof Reflect[_0x4b894e(0x17e)]===_0x4b894e(0x161))return Reflect['metadata'](_0x29ab25,_0x45195c);},__param=this&&this[_0x381c11(0x1b2)]||function(_0x494159,_0x1e9d62){return function(_0x479159,_0x2047d9){_0x1e9d62(_0x479159,_0x2047d9,_0x494159);};};Object[_0x381c11(0x178)](exports,_0x381c11(0x16d),{'value':!![]}),exports[_0x381c11(0x184)]=void 0x0;const common_1=require(_0x381c11(0x19f)),aippt_service_1=require('./aippt.service'),generate_ppt_dto_1=require(_0x381c11(0x1ae)),generate_content_dto_1=require(_0x381c11(0x181)),swagger_1=require('@nestjs/swagger');let AipptController=class AipptController{constructor(_0x56e159){this['aipptService']=_0x56e159;}async[_0x381c11(0x174)](_0x5b0063,_0x28a556){const _0x3f5043=_0x381c11;_0x28a556[_0x3f5043(0x168)](_0x3f5043(0x188),_0x3f5043(0x173)),_0x28a556[_0x3f5043(0x168)]('Cache-Control','no-cache'),_0x28a556[_0x3f5043(0x168)]('Connection',_0x3f5043(0x1a7)),_0x28a556[_0x3f5043(0x168)](_0x3f5043(0x182),'*');const _0x32aee8=await this[_0x3f5043(0x191)][_0x3f5043(0x174)](_0x5b0063);_0x32aee8['subscribe']({'next':_0x5d811a=>{const _0x2e057d=_0x3f5043;try{_0x28a556['write'](_0x2e057d(0x164)+JSON[_0x2e057d(0x171)](_0x5d811a)+'\x0a\x0a');}catch(_0x2e0f57){console[_0x2e057d(0x199)](_0x2e057d(0x1a8),_0x2e0f57),_0x28a556[_0x2e057d(0x17d)]();}},'error':_0x1324ef=>{const _0x1ca2b4=_0x3f5043;console[_0x1ca2b4(0x199)](_0x1ca2b4(0x17c),_0x1324ef),_0x28a556[_0x1ca2b4(0x17d)]();},'complete':()=>{const _0x1d879a=_0x3f5043;_0x28a556[_0x1d879a(0x17d)]();}});}async[_0x381c11(0x1a2)](_0x343005,_0x310b79){const _0xb757f0=_0x381c11;_0x310b79[_0xb757f0(0x168)]('Content-Type',_0xb757f0(0x173)),_0x310b79[_0xb757f0(0x168)](_0xb757f0(0x17a),_0xb757f0(0x1aa)),_0x310b79[_0xb757f0(0x168)](_0xb757f0(0x186),_0xb757f0(0x1a7)),_0x310b79[_0xb757f0(0x168)](_0xb757f0(0x182),'*');const _0x37e936=await this[_0xb757f0(0x191)]['generateContent'](_0x343005);_0x37e936['subscribe']({'next':_0x807a9e=>{const _0x121918=_0xb757f0;try{_0x310b79[_0x121918(0x163)](_0x121918(0x164)+JSON['stringify'](_0x807a9e)+'\x0a\x0a');}catch(_0x2865ff){console[_0x121918(0x199)]('Error\x20writing\x20SSE\x20data:',_0x2865ff),_0x310b79[_0x121918(0x17d)]();}},'error':_0x485d06=>{const _0x189971=_0xb757f0;console['error'](_0x189971(0x17c),_0x485d06),_0x310b79[_0x189971(0x17d)]();},'complete':()=>{_0x310b79['end']();}});}async[_0x381c11(0x183)](_0x6d84f2){const _0x3a03cc=_0x381c11;return this['aipptService'][_0x3a03cc(0x1a5)](_0x6d84f2);}};__decorate([(0x0,common_1[_0x381c11(0x19e)])(_0x381c11(0x18f)),(0x0,swagger_1[_0x381c11(0x18b)])({'summary':_0x381c11(0x18a),'description':'\x0a\x20\x20\x20\x20流式生成PPT大纲目录markdown。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的文本内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20生成中,\x202:\x20生成完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的大纲结果\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22outline\x22:\x20\x22完整的大纲markdown\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20'}),(0x0,swagger_1[_0x381c11(0x196)])({'type':generate_ppt_dto_1[_0x381c11(0x193)],'description':_0x381c11(0x194),'examples':{'example1':{'value':{'length':0x5,'lang':'zh','prompt':_0x381c11(0x170),'subject':'技术','dataUrl':null},'summary':_0x381c11(0x19a)}}}),(0x0,swagger_1[_0x381c11(0x1ab)])({'status':0xc8,'description':_0x381c11(0x1a0)}),(0x0,swagger_1[_0x381c11(0x1ab)])({'status':0x190,'description':_0x381c11(0x180)}),(0x0,swagger_1[_0x381c11(0x1ab)])({'status':0x1f4,'description':_0x381c11(0x187)}),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x381c11(0x167)])()),__metadata(_0x381c11(0x189),Function),__metadata('design:paramtypes',[generate_ppt_dto_1['GenerateOutlineDto'],Object]),__metadata(_0x381c11(0x197),Promise)],AipptController[_0x381c11(0x1af)],_0x381c11(0x174),null),__decorate([(0x0,common_1['Post'])(_0x381c11(0x166)),(0x0,swagger_1[_0x381c11(0x18b)])({'summary':_0x381c11(0x198),'description':'\x0a\x20\x20\x20\x20根据大纲生成完整内容并异步生成PPT。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的内容片段\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20内容生成中,\x202:\x20内容生成完成,\x203:\x20PPT生成中,\x204:\x20全部完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的内容\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22完整的内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为3或4时，返回PPT生成信息\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22pptId\x22:\x20\x22异步生成的PPT\x20ID\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075\x20//\x20PPT生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20'}),(0x0,swagger_1[_0x381c11(0x196)])({'type':generate_content_dto_1[_0x381c11(0x177)],'description':_0x381c11(0x162),'examples':{'example1':{'value':{'templateId':_0x381c11(0x172),'outlineMarkdown':_0x381c11(0x1ac),'asyncGenPptx':!![],'prompt':_0x381c11(0x1b0),'dataUrl':null},'summary':_0x381c11(0x19a)}}}),(0x0,swagger_1[_0x381c11(0x1ab)])({'status':0xc8,'description':_0x381c11(0x17f)}),(0x0,swagger_1[_0x381c11(0x1ab)])({'status':0x190,'description':_0x381c11(0x180)}),(0x0,swagger_1[_0x381c11(0x1ab)])({'status':0x1f4,'description':_0x381c11(0x187)}),__param(0x0,(0x0,common_1[_0x381c11(0x16b)])()),__param(0x1,(0x0,common_1[_0x381c11(0x167)])()),__metadata(_0x381c11(0x189),Function),__metadata(_0x381c11(0x16f),[generate_content_dto_1[_0x381c11(0x177)],Object]),__metadata(_0x381c11(0x197),Promise)],AipptController['prototype'],_0x381c11(0x1a2),null),__decorate([(0x0,common_1['Get'])(_0x381c11(0x17b)),(0x0,swagger_1[_0x381c11(0x18b)])({'summary':_0x381c11(0x19c),'description':_0x381c11(0x195)}),(0x0,swagger_1[_0x381c11(0x16c)])({'name':_0x381c11(0x18c),'description':_0x381c11(0x18d),'required':!![],'type':String,'example':'ppt_task_123456'}),(0x0,swagger_1[_0x381c11(0x1ab)])({'status':0xc8,'description':_0x381c11(0x185)}),(0x0,swagger_1[_0x381c11(0x1ab)])({'status':0x190,'description':'pptId参数缺失或格式错误'}),(0x0,swagger_1['ApiResponse'])({'status':0x194,'description':_0x381c11(0x16e)}),__param(0x0,(0x0,common_1[_0x381c11(0x192)])(_0x381c11(0x18c))),__metadata(_0x381c11(0x189),Function),__metadata(_0x381c11(0x16f),[String]),__metadata(_0x381c11(0x197),Promise)],AipptController[_0x381c11(0x1af)],'getPptInfo',null),AipptController=__decorate([(0x0,swagger_1['ApiTags'])(_0x381c11(0x176)),(0x0,common_1[_0x381c11(0x1a9)])('aippt'),__metadata(_0x381c11(0x16f),[aippt_service_1[_0x381c11(0x175)]])],AipptController),exports[_0x381c11(0x184)]=AipptController;