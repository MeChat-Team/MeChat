'use strict';function _0x5dc4(_0x3bfe83,_0x1d1a36){const _0x2b1d37=_0x2b1d();return _0x5dc4=function(_0x5dc4b7,_0x393eca){_0x5dc4b7=_0x5dc4b7-0x7d;let _0x408cb0=_0x2b1d37[_0x5dc4b7];return _0x408cb0;},_0x5dc4(_0x3bfe83,_0x1d1a36);}const _0x1b4933=_0x5dc4;function _0x2b1d(){const _0x84d246=['返回SSE流，包含实时生成的大纲内容','getPptInfo','prototype','3405kPxysG','AipptService','defineProperty','text/event-stream','\x0a\x20\x20\x20\x20流式生成PPT大纲目录markdown。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的文本内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20生成中,\x202:\x20生成完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的大纲结果\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22outline\x22:\x20\x22完整的大纲markdown\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','./aippt.service','基本示例','ApiResponse','Controller','./dto/generate-content.dto','ApiTags','关于人工智能的演讲','length','ApiQuery','4069374jFQusg','@nestjs/swagger','data:\x20','pptId','./dto/generate-ppt.dto','服务器内部错误或AI服务调用失败','ApiBody','5NLBGMx','Access-Control-Allow-Origin','design:paramtypes','\x0a\x20\x20\x20\x20根据大纲生成完整内容并异步生成PPT。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的内容片段\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20内容生成中,\x202:\x20内容生成完成,\x203:\x20PPT生成中,\x204:\x20全部完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的内容\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22完整的内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为3或4时，返回PPT生成信息\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22pptId\x22:\x20\x22异步生成的PPT\x20ID\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075\x20//\x20PPT生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','生成大纲所需的参数','function','Post','error','GenerateOutlineDto','asyncPptInfo','724926bmIbHV','Error\x20writing\x20SSE\x20data:','no-cache','2924agEBFK','返回SSE流，包含实时生成的内容和PPT生成状态','ApiOperation','__esModule','生成PPT内容','design:returntype','metadata','参数验证失败','stringify','3186162PfPcUZ','__param','keep-alive','ppt_task_123456','Stream\x20error:','decorate','477497DlYWsL','write','查询PPT生成状态','getOwnPropertyDescriptor','setHeader','Response','1868290WCbWzm','使用简洁的设计风格','subscribe','#\x20主题\x0a##\x20章节1\x0a###\x20页面1\x0a####\x20内容1','template_modern','design:type','generateContent','__decorate','aipptService','AI\x20PPT生成服务','end','Cache-Control','object','pptId参数缺失或格式错误','549aSErOj','GenerateContentDto','generateOutline','__metadata','返回PPT生成的状态信息','Content-Type','Connection','aippt','AipptController','89288KnUbqh','Body'];_0x2b1d=function(){return _0x84d246;};return _0x2b1d();}(function(_0x1e7b6b,_0x26a943){const _0x1317b9=_0x5dc4,_0x3d4c40=_0x1e7b6b();while(!![]){try{const _0x18af5c=-parseInt(_0x1317b9(0x8b))/0x1+parseInt(_0x1317b9(0xcc))/0x2+parseInt(_0x1317b9(0xad))/0x3*(parseInt(_0x1317b9(0xcf))/0x4)+-parseInt(_0x1317b9(0xc2))/0x5*(-parseInt(_0x1317b9(0xbb))/0x6)+-parseInt(_0x1317b9(0x85))/0x7+-parseInt(_0x1317b9(0xa8))/0x8*(parseInt(_0x1317b9(0x9f))/0x9)+parseInt(_0x1317b9(0x91))/0xa;if(_0x18af5c===_0x26a943)break;else _0x3d4c40['push'](_0x3d4c40['shift']());}catch(_0xffdcf4){_0x3d4c40['push'](_0x3d4c40['shift']());}}}(_0x2b1d,0x6c54a));var __decorate=this&&this[_0x1b4933(0x98)]||function(_0x5c303e,_0x56c323,_0x7aa06a,_0x163076){const _0x248ded=_0x1b4933;var _0x32dffc=arguments['length'],_0x3b35ea=_0x32dffc<0x3?_0x56c323:_0x163076===null?_0x163076=Object[_0x248ded(0x8e)](_0x56c323,_0x7aa06a):_0x163076,_0x1b4874;if(typeof Reflect===_0x248ded(0x9d)&&typeof Reflect['decorate']===_0x248ded(0xc7))_0x3b35ea=Reflect[_0x248ded(0x8a)](_0x5c303e,_0x56c323,_0x7aa06a,_0x163076);else{for(var _0x34315e=_0x5c303e[_0x248ded(0xb9)]-0x1;_0x34315e>=0x0;_0x34315e--)if(_0x1b4874=_0x5c303e[_0x34315e])_0x3b35ea=(_0x32dffc<0x3?_0x1b4874(_0x3b35ea):_0x32dffc>0x3?_0x1b4874(_0x56c323,_0x7aa06a,_0x3b35ea):_0x1b4874(_0x56c323,_0x7aa06a))||_0x3b35ea;}return _0x32dffc>0x3&&_0x3b35ea&&Object[_0x248ded(0xaf)](_0x56c323,_0x7aa06a,_0x3b35ea),_0x3b35ea;},__metadata=this&&this[_0x1b4933(0xa2)]||function(_0x52d8fe,_0x29f987){const _0x307771=_0x1b4933;if(typeof Reflect===_0x307771(0x9d)&&typeof Reflect[_0x307771(0x82)]==='function')return Reflect[_0x307771(0x82)](_0x52d8fe,_0x29f987);},__param=this&&this[_0x1b4933(0x86)]||function(_0xc7716e,_0x5c5f09){return function(_0x30d7cb,_0xa62f05){_0x5c5f09(_0x30d7cb,_0xa62f05,_0xc7716e);};};Object[_0x1b4933(0xaf)](exports,_0x1b4933(0x7f),{'value':!![]}),exports[_0x1b4933(0xa7)]=void 0x0;const common_1=require('@nestjs/common'),aippt_service_1=require(_0x1b4933(0xb2)),generate_ppt_dto_1=require(_0x1b4933(0xbf)),generate_content_dto_1=require(_0x1b4933(0xb6)),swagger_1=require(_0x1b4933(0xbc));let AipptController=class AipptController{constructor(_0x229559){const _0x50159f=_0x1b4933;this[_0x50159f(0x99)]=_0x229559;}async[_0x1b4933(0xa1)](_0x1f44f9,_0x26748f){const _0x2a3182=_0x1b4933;_0x26748f[_0x2a3182(0x8f)](_0x2a3182(0xa4),_0x2a3182(0xb0)),_0x26748f[_0x2a3182(0x8f)](_0x2a3182(0x9c),_0x2a3182(0xce)),_0x26748f['setHeader']('Connection','keep-alive'),_0x26748f[_0x2a3182(0x8f)](_0x2a3182(0xc3),'*');const _0x97af91=await this[_0x2a3182(0x99)][_0x2a3182(0xa1)](_0x1f44f9);_0x97af91['subscribe']({'next':_0x1e179e=>{const _0x5605c2=_0x2a3182;try{_0x26748f['write'](_0x5605c2(0xbd)+JSON[_0x5605c2(0x84)](_0x1e179e)+'\x0a\x0a');}catch(_0x17cb08){console[_0x5605c2(0xc9)](_0x5605c2(0xcd),_0x17cb08),_0x26748f[_0x5605c2(0x9b)]();}},'error':_0x34c1f7=>{const _0x36e6d3=_0x2a3182;console[_0x36e6d3(0xc9)](_0x36e6d3(0x89),_0x34c1f7),_0x26748f[_0x36e6d3(0x9b)]();},'complete':()=>{const _0x131a00=_0x2a3182;_0x26748f[_0x131a00(0x9b)]();}});}async[_0x1b4933(0x97)](_0x43b73e,_0x24c0c3){const _0x2bad9c=_0x1b4933;_0x24c0c3[_0x2bad9c(0x8f)]('Content-Type','text/event-stream'),_0x24c0c3[_0x2bad9c(0x8f)](_0x2bad9c(0x9c),_0x2bad9c(0xce)),_0x24c0c3[_0x2bad9c(0x8f)](_0x2bad9c(0xa5),_0x2bad9c(0x87)),_0x24c0c3[_0x2bad9c(0x8f)](_0x2bad9c(0xc3),'*');const _0x263075=await this[_0x2bad9c(0x99)][_0x2bad9c(0x97)](_0x43b73e);_0x263075[_0x2bad9c(0x93)]({'next':_0x394638=>{const _0x18f7ad=_0x2bad9c;try{_0x24c0c3[_0x18f7ad(0x8c)](_0x18f7ad(0xbd)+JSON[_0x18f7ad(0x84)](_0x394638)+'\x0a\x0a');}catch(_0x56b0b0){console['error'](_0x18f7ad(0xcd),_0x56b0b0),_0x24c0c3['end']();}},'error':_0x405a0d=>{const _0x5f3b7d=_0x2bad9c;console[_0x5f3b7d(0xc9)](_0x5f3b7d(0x89),_0x405a0d),_0x24c0c3[_0x5f3b7d(0x9b)]();},'complete':()=>{const _0xbbc2f9=_0x2bad9c;_0x24c0c3[_0xbbc2f9(0x9b)]();}});}async[_0x1b4933(0xab)](_0x18a568){const _0x5ee176=_0x1b4933;return this[_0x5ee176(0x99)][_0x5ee176(0xcb)](_0x18a568);}};__decorate([(0x0,common_1['Post'])('generate-outline'),(0x0,swagger_1['ApiOperation'])({'summary':'生成PPT大纲','description':_0x1b4933(0xb1)}),(0x0,swagger_1[_0x1b4933(0xc1)])({'type':generate_ppt_dto_1[_0x1b4933(0xca)],'description':_0x1b4933(0xc6),'examples':{'example1':{'value':{'length':0x5,'lang':'zh','prompt':_0x1b4933(0xb8),'subject':'技术','dataUrl':null},'summary':_0x1b4933(0xb3)}}}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x1b4933(0xaa)}),(0x0,swagger_1[_0x1b4933(0xb4)])({'status':0x190,'description':_0x1b4933(0x83)}),(0x0,swagger_1[_0x1b4933(0xb4)])({'status':0x1f4,'description':_0x1b4933(0xc0)}),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1['Response'])()),__metadata(_0x1b4933(0x96),Function),__metadata(_0x1b4933(0xc4),[generate_ppt_dto_1[_0x1b4933(0xca)],Object]),__metadata(_0x1b4933(0x81),Promise)],AipptController['prototype'],_0x1b4933(0xa1),null),__decorate([(0x0,common_1[_0x1b4933(0xc8)])('generate-content'),(0x0,swagger_1[_0x1b4933(0x7e)])({'summary':_0x1b4933(0x80),'description':_0x1b4933(0xc5)}),(0x0,swagger_1[_0x1b4933(0xc1)])({'type':generate_content_dto_1[_0x1b4933(0xa0)],'description':'生成PPT内容所需的参数','examples':{'example1':{'value':{'templateId':_0x1b4933(0x95),'outlineMarkdown':_0x1b4933(0x94),'asyncGenPptx':!![],'prompt':_0x1b4933(0x92),'dataUrl':null},'summary':_0x1b4933(0xb3)}}}),(0x0,swagger_1[_0x1b4933(0xb4)])({'status':0xc8,'description':_0x1b4933(0x7d)}),(0x0,swagger_1[_0x1b4933(0xb4)])({'status':0x190,'description':'参数验证失败'}),(0x0,swagger_1['ApiResponse'])({'status':0x1f4,'description':_0x1b4933(0xc0)}),__param(0x0,(0x0,common_1[_0x1b4933(0xa9)])()),__param(0x1,(0x0,common_1[_0x1b4933(0x90)])()),__metadata(_0x1b4933(0x96),Function),__metadata('design:paramtypes',[generate_content_dto_1[_0x1b4933(0xa0)],Object]),__metadata(_0x1b4933(0x81),Promise)],AipptController[_0x1b4933(0xac)],_0x1b4933(0x97),null),__decorate([(0x0,common_1['Get'])('ppt-info'),(0x0,swagger_1[_0x1b4933(0x7e)])({'summary':_0x1b4933(0x8d),'description':'\x0a\x20\x20\x20\x20查询异步生成PPT的进度和数据。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回数据格式：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22processing\x22,\x20//\x20processing:\x20生成中,\x20completed:\x20已完成,\x20failed:\x20失败\x0a\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075,\x20//\x20生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20\x22url\x22:\x20\x22https://example.com/ppt/xxx.pptx\x22,\x20//\x20当status为completed时返回下载地址\x0a\x20\x20\x20\x20\x20\x20\x22error\x22:\x20\x22错误信息\x22\x20//\x20当status为failed时返回错误信息\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20'}),(0x0,swagger_1[_0x1b4933(0xba)])({'name':_0x1b4933(0xbe),'description':'PPT生成任务ID','required':!![],'type':String,'example':_0x1b4933(0x88)}),(0x0,swagger_1[_0x1b4933(0xb4)])({'status':0xc8,'description':_0x1b4933(0xa3)}),(0x0,swagger_1[_0x1b4933(0xb4)])({'status':0x190,'description':_0x1b4933(0x9e)}),(0x0,swagger_1[_0x1b4933(0xb4)])({'status':0x194,'description':'未找到指定的PPT生成任务'}),__param(0x0,(0x0,common_1['Query'])(_0x1b4933(0xbe))),__metadata(_0x1b4933(0x96),Function),__metadata(_0x1b4933(0xc4),[String]),__metadata(_0x1b4933(0x81),Promise)],AipptController['prototype'],_0x1b4933(0xab),null),AipptController=__decorate([(0x0,swagger_1[_0x1b4933(0xb7)])(_0x1b4933(0x9a)),(0x0,common_1[_0x1b4933(0xb5)])(_0x1b4933(0xa6)),__metadata(_0x1b4933(0xc4),[aippt_service_1[_0x1b4933(0xae)]])],AipptController),exports['AipptController']=AipptController;