'use strict';const _0x59bf31=_0x30c6;(function(_0x2b0906,_0x1dde3f){const _0x4e9bf1=_0x30c6,_0x1a5de2=_0x2b0906();while(!![]){try{const _0x1f0b56=-parseInt(_0x4e9bf1(0x12a))/0x1+-parseInt(_0x4e9bf1(0x166))/0x2*(-parseInt(_0x4e9bf1(0x158))/0x3)+parseInt(_0x4e9bf1(0x133))/0x4+parseInt(_0x4e9bf1(0x16f))/0x5*(parseInt(_0x4e9bf1(0x171))/0x6)+-parseInt(_0x4e9bf1(0x13b))/0x7*(parseInt(_0x4e9bf1(0x176))/0x8)+parseInt(_0x4e9bf1(0x15d))/0x9+-parseInt(_0x4e9bf1(0x151))/0xa;if(_0x1f0b56===_0x1dde3f)break;else _0x1a5de2['push'](_0x1a5de2['shift']());}catch(_0x14092b){_0x1a5de2['push'](_0x1a5de2['shift']());}}}(_0x8bbb,0x556e7));function _0x8bbb(){const _0x458b0e=['生成PPT内容所需的参数','Stream\x20error:','__metadata','prototype','AipptController','203706vqWgVz','__esModule','Cache-Control','Content-Type','@nestjs/common','436464cpzAem','ApiBody','__param','no-cache','pptId参数缺失或格式错误','length','AI\x20PPT生成服务','生成PPT内容','ApiResponse','10qflXOx','keep-alive','ppt-info','metadata','write','返回PPT生成的状态信息','参数验证失败','ApiTags','返回SSE流，包含实时生成的内容和PPT生成状态','3035465kOVSxe','decorate','6KdHmzU','subscribe','aippt','function','asyncPptInfo','399944UEZiSn','生成PPT大纲','GenerateOutlineDto','PPT生成任务ID','getPptInfo','end','496212abUFRA','error','design:paramtypes','GenerateContentDto','ApiQuery','./aippt.service','defineProperty','未找到指定的PPT生成任务','generateContent','215088STjvPH','使用简洁的设计风格','text/event-stream','./dto/generate-content.dto','AipptService','Connection','\x0a\x20\x20\x20\x20根据大纲生成完整内容并异步生成PPT。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的内容片段\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20内容生成中,\x202:\x20内容生成完成,\x203:\x20PPT生成中,\x204:\x20全部完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的内容\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22完整的内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为3或4时，返回PPT生成信息\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22pptId\x22:\x20\x22异步生成的PPT\x20ID\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075\x20//\x20PPT生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20查询异步生成PPT的进度和数据。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回数据格式：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22processing\x22,\x20//\x20processing:\x20生成中,\x20completed:\x20已完成,\x20failed:\x20失败\x0a\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075,\x20//\x20生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20\x22url\x22:\x20\x22https://example.com/ppt/xxx.pptx\x22,\x20//\x20当status为completed时返回下载地址\x0a\x20\x20\x20\x20\x20\x20\x22error\x22:\x20\x22错误信息\x22\x20//\x20当status为failed时返回错误信息\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','14gCVXvX','Body','ApiOperation','object','data:\x20','aipptService','design:returntype','Get','generateOutline','@nestjs/swagger','stringify','生成大纲所需的参数','ppt_task_123456','__decorate','./dto/generate-ppt.dto','design:type','Post','Response','基本示例','setHeader','template_modern','服务器内部错误或AI服务调用失败','1027460Hkohha','返回SSE流，包含实时生成的大纲内容'];_0x8bbb=function(){return _0x458b0e;};return _0x8bbb();}var __decorate=this&&this[_0x59bf31(0x148)]||function(_0x35332f,_0x59a48c,_0x2c35a3,_0xde6611){const _0x11274b=_0x59bf31;var _0x294c62=arguments['length'],_0x50f754=_0x294c62<0x3?_0x59a48c:_0xde6611===null?_0xde6611=Object['getOwnPropertyDescriptor'](_0x59a48c,_0x2c35a3):_0xde6611,_0x3d74f0;if(typeof Reflect===_0x11274b(0x13e)&&typeof Reflect[_0x11274b(0x170)]===_0x11274b(0x174))_0x50f754=Reflect[_0x11274b(0x170)](_0x35332f,_0x59a48c,_0x2c35a3,_0xde6611);else{for(var _0x49b7bb=_0x35332f[_0x11274b(0x162)]-0x1;_0x49b7bb>=0x0;_0x49b7bb--)if(_0x3d74f0=_0x35332f[_0x49b7bb])_0x50f754=(_0x294c62<0x3?_0x3d74f0(_0x50f754):_0x294c62>0x3?_0x3d74f0(_0x59a48c,_0x2c35a3,_0x50f754):_0x3d74f0(_0x59a48c,_0x2c35a3))||_0x50f754;}return _0x294c62>0x3&&_0x50f754&&Object[_0x11274b(0x130)](_0x59a48c,_0x2c35a3,_0x50f754),_0x50f754;},__metadata=this&&this[_0x59bf31(0x155)]||function(_0x1ff6b5,_0x52e0e4){const _0x5cc37a=_0x59bf31;if(typeof Reflect==='object'&&typeof Reflect[_0x5cc37a(0x169)]===_0x5cc37a(0x174))return Reflect[_0x5cc37a(0x169)](_0x1ff6b5,_0x52e0e4);},__param=this&&this[_0x59bf31(0x15f)]||function(_0x52fed1,_0x5bd143){return function(_0x5114f9,_0x2d4c6c){_0x5bd143(_0x5114f9,_0x2d4c6c,_0x52fed1);};};Object[_0x59bf31(0x130)](exports,_0x59bf31(0x159),{'value':!![]}),exports['AipptController']=void 0x0;const common_1=require(_0x59bf31(0x15c)),aippt_service_1=require(_0x59bf31(0x12f)),generate_ppt_dto_1=require(_0x59bf31(0x149)),generate_content_dto_1=require(_0x59bf31(0x136)),swagger_1=require(_0x59bf31(0x144));let AipptController=class AipptController{constructor(_0x1fe5ad){const _0x27c538=_0x59bf31;this[_0x27c538(0x140)]=_0x1fe5ad;}async[_0x59bf31(0x143)](_0x333726,_0x165480){const _0xcb73d8=_0x59bf31;_0x165480[_0xcb73d8(0x14e)](_0xcb73d8(0x15b),'text/event-stream'),_0x165480[_0xcb73d8(0x14e)](_0xcb73d8(0x15a),'no-cache'),_0x165480[_0xcb73d8(0x14e)]('Connection','keep-alive'),_0x165480['setHeader']('Access-Control-Allow-Origin','*');const _0x30725d=await this[_0xcb73d8(0x140)]['generateOutline'](_0x333726);_0x30725d['subscribe']({'next':_0x398ff0=>{const _0x56013b=_0xcb73d8;try{_0x165480['write']('data:\x20'+JSON[_0x56013b(0x145)](_0x398ff0)+'\x0a\x0a');}catch(_0x700841){console[_0x56013b(0x12b)]('Error\x20writing\x20SSE\x20data:',_0x700841),_0x165480[_0x56013b(0x129)]();}},'error':_0x1fab9a=>{const _0x539755=_0xcb73d8;console[_0x539755(0x12b)]('Stream\x20error:',_0x1fab9a),_0x165480[_0x539755(0x129)]();},'complete':()=>{const _0x18fc10=_0xcb73d8;_0x165480[_0x18fc10(0x129)]();}});}async[_0x59bf31(0x132)](_0x26c925,_0x1dda65){const _0x1eedf8=_0x59bf31;_0x1dda65[_0x1eedf8(0x14e)](_0x1eedf8(0x15b),_0x1eedf8(0x135)),_0x1dda65[_0x1eedf8(0x14e)](_0x1eedf8(0x15a),_0x1eedf8(0x160)),_0x1dda65[_0x1eedf8(0x14e)](_0x1eedf8(0x138),_0x1eedf8(0x167)),_0x1dda65['setHeader']('Access-Control-Allow-Origin','*');const _0x513d5e=await this[_0x1eedf8(0x140)][_0x1eedf8(0x132)](_0x26c925);_0x513d5e[_0x1eedf8(0x172)]({'next':_0x426a4b=>{const _0x1b21dd=_0x1eedf8;try{_0x1dda65[_0x1b21dd(0x16a)](_0x1b21dd(0x13f)+JSON[_0x1b21dd(0x145)](_0x426a4b)+'\x0a\x0a');}catch(_0x2ef4be){console[_0x1b21dd(0x12b)]('Error\x20writing\x20SSE\x20data:',_0x2ef4be),_0x1dda65[_0x1b21dd(0x129)]();}},'error':_0x59b092=>{const _0xa5808c=_0x1eedf8;console[_0xa5808c(0x12b)](_0xa5808c(0x154),_0x59b092),_0x1dda65[_0xa5808c(0x129)]();},'complete':()=>{const _0x141cd7=_0x1eedf8;_0x1dda65[_0x141cd7(0x129)]();}});}async[_0x59bf31(0x128)](_0x451cc4){const _0x426195=_0x59bf31;return this['aipptService'][_0x426195(0x175)](_0x451cc4);}};function _0x30c6(_0x36eac,_0x309a46){const _0x8bbb99=_0x8bbb();return _0x30c6=function(_0x30c695,_0x1a7876){_0x30c695=_0x30c695-0x128;let _0x4c8da3=_0x8bbb99[_0x30c695];return _0x4c8da3;},_0x30c6(_0x36eac,_0x309a46);}__decorate([(0x0,common_1[_0x59bf31(0x14b)])('generate-outline'),(0x0,swagger_1[_0x59bf31(0x13d)])({'summary':_0x59bf31(0x177),'description':'\x0a\x20\x20\x20\x20流式生成PPT大纲目录markdown。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的文本内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20生成中,\x202:\x20生成完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的大纲结果\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22outline\x22:\x20\x22完整的大纲markdown\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20'}),(0x0,swagger_1[_0x59bf31(0x15e)])({'type':generate_ppt_dto_1[_0x59bf31(0x178)],'description':_0x59bf31(0x146),'examples':{'example1':{'value':{'length':0x5,'lang':'zh','prompt':'关于人工智能的演讲','subject':'技术','dataUrl':null},'summary':_0x59bf31(0x14d)}}}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x59bf31(0x152)}),(0x0,swagger_1['ApiResponse'])({'status':0x190,'description':_0x59bf31(0x16c)}),(0x0,swagger_1['ApiResponse'])({'status':0x1f4,'description':'服务器内部错误或AI服务调用失败'}),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x59bf31(0x14c)])()),__metadata('design:type',Function),__metadata(_0x59bf31(0x12c),[generate_ppt_dto_1[_0x59bf31(0x178)],Object]),__metadata(_0x59bf31(0x141),Promise)],AipptController[_0x59bf31(0x156)],_0x59bf31(0x143),null),__decorate([(0x0,common_1['Post'])('generate-content'),(0x0,swagger_1[_0x59bf31(0x13d)])({'summary':_0x59bf31(0x164),'description':_0x59bf31(0x139)}),(0x0,swagger_1[_0x59bf31(0x15e)])({'type':generate_content_dto_1[_0x59bf31(0x12d)],'description':_0x59bf31(0x153),'examples':{'example1':{'value':{'templateId':_0x59bf31(0x14f),'outlineMarkdown':'#\x20主题\x0a##\x20章节1\x0a###\x20页面1\x0a####\x20内容1','asyncGenPptx':!![],'prompt':_0x59bf31(0x134),'dataUrl':null},'summary':_0x59bf31(0x14d)}}}),(0x0,swagger_1[_0x59bf31(0x165)])({'status':0xc8,'description':_0x59bf31(0x16e)}),(0x0,swagger_1[_0x59bf31(0x165)])({'status':0x190,'description':'参数验证失败'}),(0x0,swagger_1[_0x59bf31(0x165)])({'status':0x1f4,'description':_0x59bf31(0x150)}),__param(0x0,(0x0,common_1[_0x59bf31(0x13c)])()),__param(0x1,(0x0,common_1[_0x59bf31(0x14c)])()),__metadata(_0x59bf31(0x14a),Function),__metadata(_0x59bf31(0x12c),[generate_content_dto_1[_0x59bf31(0x12d)],Object]),__metadata(_0x59bf31(0x141),Promise)],AipptController['prototype'],_0x59bf31(0x132),null),__decorate([(0x0,common_1[_0x59bf31(0x142)])(_0x59bf31(0x168)),(0x0,swagger_1[_0x59bf31(0x13d)])({'summary':'查询PPT生成状态','description':_0x59bf31(0x13a)}),(0x0,swagger_1[_0x59bf31(0x12e)])({'name':'pptId','description':_0x59bf31(0x179),'required':!![],'type':String,'example':_0x59bf31(0x147)}),(0x0,swagger_1[_0x59bf31(0x165)])({'status':0xc8,'description':_0x59bf31(0x16b)}),(0x0,swagger_1['ApiResponse'])({'status':0x190,'description':_0x59bf31(0x161)}),(0x0,swagger_1[_0x59bf31(0x165)])({'status':0x194,'description':_0x59bf31(0x131)}),__param(0x0,(0x0,common_1['Query'])('pptId')),__metadata('design:type',Function),__metadata(_0x59bf31(0x12c),[String]),__metadata(_0x59bf31(0x141),Promise)],AipptController[_0x59bf31(0x156)],_0x59bf31(0x128),null),AipptController=__decorate([(0x0,swagger_1[_0x59bf31(0x16d)])(_0x59bf31(0x163)),(0x0,common_1['Controller'])(_0x59bf31(0x173)),__metadata('design:paramtypes',[aippt_service_1[_0x59bf31(0x137)]])],AipptController),exports[_0x59bf31(0x157)]=AipptController;