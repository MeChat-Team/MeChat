'use strict';const _0x43219d=_0x2385;(function(_0x5df89b,_0x43cf2b){const _0x2f28c7=_0x2385,_0x3e4573=_0x5df89b();while(!![]){try{const _0x243b50=parseInt(_0x2f28c7(0x1b7))/0x1*(parseInt(_0x2f28c7(0x17d))/0x2)+parseInt(_0x2f28c7(0x1a9))/0x3+-parseInt(_0x2f28c7(0x197))/0x4+parseInt(_0x2f28c7(0x1a4))/0x5*(-parseInt(_0x2f28c7(0x1ba))/0x6)+parseInt(_0x2f28c7(0x19d))/0x7+-parseInt(_0x2f28c7(0x192))/0x8+parseInt(_0x2f28c7(0x18c))/0x9;if(_0x243b50===_0x43cf2b)break;else _0x3e4573['push'](_0x3e4573['shift']());}catch(_0x5ddb09){_0x3e4573['push'](_0x3e4573['shift']());}}}(_0x1484,0xad441));function _0x2385(_0x3d6248,_0x7c0dcf){const _0x14842e=_0x1484();return _0x2385=function(_0x2385f2,_0x52f133){_0x2385f2=_0x2385f2-0x177;let _0x344c07=_0x14842e[_0x2385f2];return _0x344c07;},_0x2385(_0x3d6248,_0x7c0dcf);}function _0x1484(){const _0x2b71be=['ApiBody','data:\x20','prototype','3573528Dyafnu','关于人工智能的演讲','keep-alive','GenerateContentDto','生成大纲所需的参数','5101904qgqbQy','ApiQuery','服务器内部错误或AI服务调用失败','__param','function','defineProperty','998403jctsnK','pptId参数缺失或格式错误','subscribe','PPT生成任务ID','未找到指定的PPT生成任务','stringify','Query','58765hzHguq','\x0a\x20\x20\x20\x20查询异步生成PPT的进度和数据。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回数据格式：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22processing\x22,\x20//\x20processing:\x20生成中,\x20completed:\x20已完成,\x20failed:\x20失败\x0a\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075,\x20//\x20生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20\x22url\x22:\x20\x22https://example.com/ppt/xxx.pptx\x22,\x20//\x20当status为completed时返回下载地址\x0a\x20\x20\x20\x20\x20\x20\x22error\x22:\x20\x22错误信息\x22\x20//\x20当status为failed时返回错误信息\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','参数验证失败','write','ppt-info','499695CcmCft','AipptController','Get','generateContent','Response','__decorate','error','design:returntype','aipptService','asyncPptInfo','\x0a\x20\x20\x20\x20流式生成PPT大纲目录markdown。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的文本内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20生成中,\x202:\x20生成完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的大纲结果\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22outline\x22:\x20\x22完整的大纲markdown\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','decorate','no-cache','pptId','43YyAzMa','ApiResponse','ApiTags','204cLqoWy','object','Cache-Control','getPptInfo','ppt_task_123456','返回SSE流，包含实时生成的内容和PPT生成状态','generateOutline','end','design:paramtypes','length','基本示例','Error\x20writing\x20SSE\x20data:','24484Fnkuic','\x0a\x20\x20\x20\x20根据大纲生成完整内容并异步生成PPT。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的内容片段\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20内容生成中,\x202:\x20内容生成完成,\x203:\x20PPT生成中,\x204:\x20全部完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的内容\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22完整的内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为3或4时，返回PPT生成信息\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22pptId\x22:\x20\x22异步生成的PPT\x20ID\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075\x20//\x20PPT生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','setHeader','Body','Content-Type','metadata','@nestjs/swagger','text/event-stream','Access-Control-Allow-Origin','生成PPT内容所需的参数','getOwnPropertyDescriptor','ApiOperation','GenerateOutlineDto','./aippt.service','design:type','17962794YUCykQ','Stream\x20error:','Post'];_0x1484=function(){return _0x2b71be;};return _0x1484();}var __decorate=this&&this[_0x43219d(0x1ae)]||function(_0x3bf62c,_0x2d649c,_0x6d2afe,_0x4ea38e){const _0x9b3704=_0x43219d;var _0x52eec6=arguments[_0x9b3704(0x17a)],_0x443300=_0x52eec6<0x3?_0x2d649c:_0x4ea38e===null?_0x4ea38e=Object[_0x9b3704(0x187)](_0x2d649c,_0x6d2afe):_0x4ea38e,_0x50522e;if(typeof Reflect===_0x9b3704(0x1bb)&&typeof Reflect[_0x9b3704(0x1b4)]==='function')_0x443300=Reflect[_0x9b3704(0x1b4)](_0x3bf62c,_0x2d649c,_0x6d2afe,_0x4ea38e);else{for(var _0x44a712=_0x3bf62c[_0x9b3704(0x17a)]-0x1;_0x44a712>=0x0;_0x44a712--)if(_0x50522e=_0x3bf62c[_0x44a712])_0x443300=(_0x52eec6<0x3?_0x50522e(_0x443300):_0x52eec6>0x3?_0x50522e(_0x2d649c,_0x6d2afe,_0x443300):_0x50522e(_0x2d649c,_0x6d2afe))||_0x443300;}return _0x52eec6>0x3&&_0x443300&&Object[_0x9b3704(0x19c)](_0x2d649c,_0x6d2afe,_0x443300),_0x443300;},__metadata=this&&this['__metadata']||function(_0x34117f,_0x17a27f){const _0x53f132=_0x43219d;if(typeof Reflect===_0x53f132(0x1bb)&&typeof Reflect['metadata']===_0x53f132(0x19b))return Reflect[_0x53f132(0x182)](_0x34117f,_0x17a27f);},__param=this&&this[_0x43219d(0x19a)]||function(_0x1837c1,_0x463e80){return function(_0x5d5d1f,_0x1d96a7){_0x463e80(_0x5d5d1f,_0x1d96a7,_0x1837c1);};};Object[_0x43219d(0x19c)](exports,'__esModule',{'value':!![]}),exports[_0x43219d(0x1aa)]=void 0x0;const common_1=require('@nestjs/common'),aippt_service_1=require(_0x43219d(0x18a)),generate_ppt_dto_1=require('./dto/generate-ppt.dto'),generate_content_dto_1=require('./dto/generate-content.dto'),swagger_1=require(_0x43219d(0x183));let AipptController=class AipptController{constructor(_0x1bdb32){const _0x2e424f=_0x43219d;this[_0x2e424f(0x1b1)]=_0x1bdb32;}async[_0x43219d(0x177)](_0x39ccbe,_0x12c5e4){const _0x316361=_0x43219d;_0x12c5e4[_0x316361(0x17f)](_0x316361(0x181),_0x316361(0x184)),_0x12c5e4['setHeader'](_0x316361(0x1bc),_0x316361(0x1b5)),_0x12c5e4[_0x316361(0x17f)]('Connection','keep-alive'),_0x12c5e4['setHeader'](_0x316361(0x185),'*');const _0x3ecc32=await this[_0x316361(0x1b1)][_0x316361(0x177)](_0x39ccbe);_0x3ecc32[_0x316361(0x19f)]({'next':_0x3085af=>{const _0x3b6814=_0x316361;try{_0x12c5e4[_0x3b6814(0x1a7)](_0x3b6814(0x190)+JSON[_0x3b6814(0x1a2)](_0x3085af)+'\x0a\x0a');}catch(_0x5d4fd4){console[_0x3b6814(0x1af)](_0x3b6814(0x17c),_0x5d4fd4),_0x12c5e4[_0x3b6814(0x178)]();}},'error':_0xa65ee3=>{console['error']('Stream\x20error:',_0xa65ee3),_0x12c5e4['end']();},'complete':()=>{_0x12c5e4['end']();}});}async['generateContent'](_0x4a7fae,_0x59c47a){const _0x5282f2=_0x43219d;_0x59c47a[_0x5282f2(0x17f)](_0x5282f2(0x181),'text/event-stream'),_0x59c47a[_0x5282f2(0x17f)](_0x5282f2(0x1bc),_0x5282f2(0x1b5)),_0x59c47a[_0x5282f2(0x17f)]('Connection',_0x5282f2(0x194)),_0x59c47a['setHeader'](_0x5282f2(0x185),'*');const _0x1c8d09=await this[_0x5282f2(0x1b1)][_0x5282f2(0x1ac)](_0x4a7fae);_0x1c8d09['subscribe']({'next':_0x36ad4e=>{const _0x3acbbd=_0x5282f2;try{_0x59c47a[_0x3acbbd(0x1a7)](_0x3acbbd(0x190)+JSON['stringify'](_0x36ad4e)+'\x0a\x0a');}catch(_0x4f9adb){console[_0x3acbbd(0x1af)](_0x3acbbd(0x17c),_0x4f9adb),_0x59c47a[_0x3acbbd(0x178)]();}},'error':_0x149bc0=>{const _0x19cd82=_0x5282f2;console[_0x19cd82(0x1af)](_0x19cd82(0x18d),_0x149bc0),_0x59c47a[_0x19cd82(0x178)]();},'complete':()=>{_0x59c47a['end']();}});}async[_0x43219d(0x1bd)](_0x4c5d45){const _0x180690=_0x43219d;return this[_0x180690(0x1b1)][_0x180690(0x1b2)](_0x4c5d45);}};__decorate([(0x0,common_1[_0x43219d(0x18e)])('generate-outline'),(0x0,swagger_1[_0x43219d(0x188)])({'summary':'生成PPT大纲','description':_0x43219d(0x1b3)}),(0x0,swagger_1[_0x43219d(0x18f)])({'type':generate_ppt_dto_1['GenerateOutlineDto'],'description':_0x43219d(0x196),'examples':{'example1':{'value':{'length':0x5,'lang':'zh','prompt':_0x43219d(0x193),'subject':'技术','dataUrl':null},'summary':_0x43219d(0x17b)}}}),(0x0,swagger_1[_0x43219d(0x1b8)])({'status':0xc8,'description':'返回SSE流，包含实时生成的大纲内容'}),(0x0,swagger_1[_0x43219d(0x1b8)])({'status':0x190,'description':_0x43219d(0x1a6)}),(0x0,swagger_1['ApiResponse'])({'status':0x1f4,'description':_0x43219d(0x199)}),__param(0x0,(0x0,common_1[_0x43219d(0x180)])()),__param(0x1,(0x0,common_1['Response'])()),__metadata(_0x43219d(0x18b),Function),__metadata(_0x43219d(0x179),[generate_ppt_dto_1[_0x43219d(0x189)],Object]),__metadata(_0x43219d(0x1b0),Promise)],AipptController[_0x43219d(0x191)],_0x43219d(0x177),null),__decorate([(0x0,common_1[_0x43219d(0x18e)])('generate-content'),(0x0,swagger_1[_0x43219d(0x188)])({'summary':'生成PPT内容','description':_0x43219d(0x17e)}),(0x0,swagger_1[_0x43219d(0x18f)])({'type':generate_content_dto_1[_0x43219d(0x195)],'description':_0x43219d(0x186),'examples':{'example1':{'value':{'templateId':'template_modern','outlineMarkdown':'#\x20主题\x0a##\x20章节1\x0a###\x20页面1\x0a####\x20内容1','asyncGenPptx':!![],'prompt':'使用简洁的设计风格','dataUrl':null},'summary':_0x43219d(0x17b)}}}),(0x0,swagger_1[_0x43219d(0x1b8)])({'status':0xc8,'description':_0x43219d(0x1bf)}),(0x0,swagger_1[_0x43219d(0x1b8)])({'status':0x190,'description':'参数验证失败'}),(0x0,swagger_1['ApiResponse'])({'status':0x1f4,'description':'服务器内部错误或AI服务调用失败'}),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x43219d(0x1ad)])()),__metadata(_0x43219d(0x18b),Function),__metadata(_0x43219d(0x179),[generate_content_dto_1[_0x43219d(0x195)],Object]),__metadata(_0x43219d(0x1b0),Promise)],AipptController[_0x43219d(0x191)],_0x43219d(0x1ac),null),__decorate([(0x0,common_1[_0x43219d(0x1ab)])(_0x43219d(0x1a8)),(0x0,swagger_1[_0x43219d(0x188)])({'summary':'查询PPT生成状态','description':_0x43219d(0x1a5)}),(0x0,swagger_1[_0x43219d(0x198)])({'name':_0x43219d(0x1b6),'description':_0x43219d(0x1a0),'required':!![],'type':String,'example':_0x43219d(0x1be)}),(0x0,swagger_1[_0x43219d(0x1b8)])({'status':0xc8,'description':'返回PPT生成的状态信息'}),(0x0,swagger_1[_0x43219d(0x1b8)])({'status':0x190,'description':_0x43219d(0x19e)}),(0x0,swagger_1[_0x43219d(0x1b8)])({'status':0x194,'description':_0x43219d(0x1a1)}),__param(0x0,(0x0,common_1[_0x43219d(0x1a3)])(_0x43219d(0x1b6))),__metadata('design:type',Function),__metadata('design:paramtypes',[String]),__metadata(_0x43219d(0x1b0),Promise)],AipptController[_0x43219d(0x191)],_0x43219d(0x1bd),null),AipptController=__decorate([(0x0,swagger_1[_0x43219d(0x1b9)])('AI\x20PPT生成服务'),(0x0,common_1['Controller'])('aippt'),__metadata('design:paramtypes',[aippt_service_1['AipptService']])],AipptController),exports['AipptController']=AipptController;