'use strict';const _0x539ec5=_0x1552;function _0x57c5(){const _0x41f3b8=['服务器内部错误或AI服务调用失败','decorate','length','./dto/generate-content.dto','Connection','template_modern','返回SSE流，包含实时生成的大纲内容','aippt','metadata','ApiOperation','使用简洁的设计风格','pptId参数缺失或格式错误','no-cache','#\x20主题\x0a##\x20章节1\x0a###\x20页面1\x0a####\x20内容1','Get','design:returntype','ppt-info','ApiTags','design:type','./aippt.service','error','关于人工智能的演讲','ApiQuery','pptId','Response','Stream\x20error:','未找到指定的PPT生成任务','data:\x20','22StJqZf','基本示例','keep-alive','defineProperty','__param','返回PPT生成的状态信息','generate-content','ApiResponse','__esModule','返回SSE流，包含实时生成的内容和PPT生成状态','Content-Type','text/event-stream','object','getOwnPropertyDescriptor','design:paramtypes','ppt_task_123456','prototype','226228rEcZow','subscribe','Error\x20writing\x20SSE\x20data:','查询PPT生成状态','1083609oZYsCu','生成大纲所需的参数','7535664rORUws','\x0a\x20\x20\x20\x20流式生成PPT大纲目录markdown。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的文本内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20生成中,\x202:\x20生成完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的大纲结果\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22outline\x22:\x20\x22完整的大纲markdown\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','generateOutline','end','Body','12kVHING','Access-Control-Allow-Origin','AipptController','GenerateOutlineDto','Controller','asyncPptInfo','generate-outline','stringify','1833146iGUQSF','Cache-Control','2644472rmpoUN','@nestjs/swagger','generateContent','参数验证失败','./dto/generate-ppt.dto','write','AipptService','生成PPT内容所需的参数','getPptInfo','__decorate','aipptService','\x0a\x20\x20\x20\x20查询异步生成PPT的进度和数据。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回数据格式：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22processing\x22,\x20//\x20processing:\x20生成中,\x20completed:\x20已完成,\x20failed:\x20失败\x0a\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075,\x20//\x20生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20\x22url\x22:\x20\x22https://example.com/ppt/xxx.pptx\x22,\x20//\x20当status为completed时返回下载地址\x0a\x20\x20\x20\x20\x20\x20\x22error\x22:\x20\x22错误信息\x22\x20//\x20当status为failed时返回错误信息\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','Post','\x0a\x20\x20\x20\x20根据大纲生成完整内容并异步生成PPT。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的内容片段\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20内容生成中,\x202:\x20内容生成完成,\x203:\x20PPT生成中,\x204:\x20全部完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的内容\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22完整的内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为3或4时，返回PPT生成信息\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22pptId\x22:\x20\x22异步生成的PPT\x20ID\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075\x20//\x20PPT生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','8801kvwpPC','GenerateContentDto','setHeader','ApiBody','209640MKxsdD'];_0x57c5=function(){return _0x41f3b8;};return _0x57c5();}(function(_0x275d30,_0x438f27){const _0x515def=_0x1552,_0x2cff80=_0x275d30();while(!![]){try{const _0x21847f=-parseInt(_0x515def(0xcc))/0x1*(-parseInt(_0x515def(0x98))/0x2)+parseInt(_0x515def(0xad))/0x3+parseInt(_0x515def(0xa9))/0x4+parseInt(_0x515def(0xd0))/0x5*(-parseInt(_0x515def(0xb4))/0x6)+parseInt(_0x515def(0xbc))/0x7+parseInt(_0x515def(0xbe))/0x8+-parseInt(_0x515def(0xaf))/0x9;if(_0x21847f===_0x438f27)break;else _0x2cff80['push'](_0x2cff80['shift']());}catch(_0x35785f){_0x2cff80['push'](_0x2cff80['shift']());}}}(_0x57c5,0x2d600));function _0x1552(_0x408a12,_0x45c34e){const _0x57c5e5=_0x57c5();return _0x1552=function(_0x155284,_0x5eddcb){_0x155284=_0x155284-0x96;let _0xc95f8b=_0x57c5e5[_0x155284];return _0xc95f8b;},_0x1552(_0x408a12,_0x45c34e);}var __decorate=this&&this[_0x539ec5(0xc7)]||function(_0x5130e2,_0x5af815,_0x32975e,_0x4ee972){const _0x25fd8c=_0x539ec5;var _0x5d2c29=arguments[_0x25fd8c(0xd3)],_0x5b8028=_0x5d2c29<0x3?_0x5af815:_0x4ee972===null?_0x4ee972=Object[_0x25fd8c(0xa5)](_0x5af815,_0x32975e):_0x4ee972,_0x2e3d8f;if(typeof Reflect==='object'&&typeof Reflect[_0x25fd8c(0xd2)]==='function')_0x5b8028=Reflect['decorate'](_0x5130e2,_0x5af815,_0x32975e,_0x4ee972);else{for(var _0x5736e1=_0x5130e2[_0x25fd8c(0xd3)]-0x1;_0x5736e1>=0x0;_0x5736e1--)if(_0x2e3d8f=_0x5130e2[_0x5736e1])_0x5b8028=(_0x5d2c29<0x3?_0x2e3d8f(_0x5b8028):_0x5d2c29>0x3?_0x2e3d8f(_0x5af815,_0x32975e,_0x5b8028):_0x2e3d8f(_0x5af815,_0x32975e))||_0x5b8028;}return _0x5d2c29>0x3&&_0x5b8028&&Object[_0x25fd8c(0x9b)](_0x5af815,_0x32975e,_0x5b8028),_0x5b8028;},__metadata=this&&this['__metadata']||function(_0x2e5d40,_0x5e7198){const _0x534637=_0x539ec5;if(typeof Reflect===_0x534637(0xa4)&&typeof Reflect['metadata']==='function')return Reflect[_0x534637(0xd9)](_0x2e5d40,_0x5e7198);},__param=this&&this[_0x539ec5(0x9c)]||function(_0x103232,_0x506019){return function(_0x3b588f,_0x36e033){_0x506019(_0x3b588f,_0x36e033,_0x103232);};};Object['defineProperty'](exports,_0x539ec5(0xa0),{'value':!![]}),exports[_0x539ec5(0xb6)]=void 0x0;const common_1=require('@nestjs/common'),aippt_service_1=require(_0x539ec5(0xe4)),generate_ppt_dto_1=require(_0x539ec5(0xc2)),generate_content_dto_1=require(_0x539ec5(0xd4)),swagger_1=require(_0x539ec5(0xbf));let AipptController=class AipptController{constructor(_0x4baac6){const _0x4d1986=_0x539ec5;this[_0x4d1986(0xc8)]=_0x4baac6;}async[_0x539ec5(0xb1)](_0x2c4da4,_0x361648){const _0x268343=_0x539ec5;_0x361648[_0x268343(0xce)](_0x268343(0xa2),'text/event-stream'),_0x361648[_0x268343(0xce)](_0x268343(0xbd),'no-cache'),_0x361648[_0x268343(0xce)]('Connection',_0x268343(0x9a)),_0x361648['setHeader'](_0x268343(0xb5),'*');const _0x48e1cf=await this[_0x268343(0xc8)]['generateOutline'](_0x2c4da4);_0x48e1cf[_0x268343(0xaa)]({'next':_0x1c02f4=>{const _0x17ea0a=_0x268343;try{_0x361648[_0x17ea0a(0xc3)](_0x17ea0a(0x97)+JSON[_0x17ea0a(0xbb)](_0x1c02f4)+'\x0a\x0a');}catch(_0x5e559b){console[_0x17ea0a(0xe5)](_0x17ea0a(0xab),_0x5e559b),_0x361648[_0x17ea0a(0xb2)]();}},'error':_0xbe3575=>{const _0xabce18=_0x268343;console[_0xabce18(0xe5)](_0xabce18(0xea),_0xbe3575),_0x361648[_0xabce18(0xb2)]();},'complete':()=>{const _0x28b80a=_0x268343;_0x361648[_0x28b80a(0xb2)]();}});}async[_0x539ec5(0xc0)](_0x13d0df,_0x1b7c22){const _0x277199=_0x539ec5;_0x1b7c22['setHeader'](_0x277199(0xa2),_0x277199(0xa3)),_0x1b7c22[_0x277199(0xce)]('Cache-Control',_0x277199(0xdd)),_0x1b7c22['setHeader'](_0x277199(0xd5),_0x277199(0x9a)),_0x1b7c22[_0x277199(0xce)](_0x277199(0xb5),'*');const _0x170293=await this[_0x277199(0xc8)][_0x277199(0xc0)](_0x13d0df);_0x170293['subscribe']({'next':_0x48dd20=>{const _0x4bb51d=_0x277199;try{_0x1b7c22['write']('data:\x20'+JSON['stringify'](_0x48dd20)+'\x0a\x0a');}catch(_0x38abe5){console[_0x4bb51d(0xe5)](_0x4bb51d(0xab),_0x38abe5),_0x1b7c22[_0x4bb51d(0xb2)]();}},'error':_0x15ed31=>{const _0x4675a8=_0x277199;console[_0x4675a8(0xe5)]('Stream\x20error:',_0x15ed31),_0x1b7c22[_0x4675a8(0xb2)]();},'complete':()=>{_0x1b7c22['end']();}});}async[_0x539ec5(0xc6)](_0x420990){const _0x13cd84=_0x539ec5;return this[_0x13cd84(0xc8)][_0x13cd84(0xb9)](_0x420990);}};__decorate([(0x0,common_1['Post'])(_0x539ec5(0xba)),(0x0,swagger_1[_0x539ec5(0xda)])({'summary':'生成PPT大纲','description':_0x539ec5(0xb0)}),(0x0,swagger_1[_0x539ec5(0xcf)])({'type':generate_ppt_dto_1['GenerateOutlineDto'],'description':_0x539ec5(0xae),'examples':{'example1':{'value':{'length':0x5,'lang':'zh','prompt':_0x539ec5(0xe6),'subject':'技术','dataUrl':null},'summary':_0x539ec5(0x99)}}}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x539ec5(0xd7)}),(0x0,swagger_1[_0x539ec5(0x9f)])({'status':0x190,'description':_0x539ec5(0xc1)}),(0x0,swagger_1[_0x539ec5(0x9f)])({'status':0x1f4,'description':'服务器内部错误或AI服务调用失败'}),__param(0x0,(0x0,common_1[_0x539ec5(0xb3)])()),__param(0x1,(0x0,common_1['Response'])()),__metadata(_0x539ec5(0xe3),Function),__metadata('design:paramtypes',[generate_ppt_dto_1[_0x539ec5(0xb7)],Object]),__metadata('design:returntype',Promise)],AipptController[_0x539ec5(0xa8)],_0x539ec5(0xb1),null),__decorate([(0x0,common_1[_0x539ec5(0xca)])(_0x539ec5(0x9e)),(0x0,swagger_1[_0x539ec5(0xda)])({'summary':'生成PPT内容','description':_0x539ec5(0xcb)}),(0x0,swagger_1[_0x539ec5(0xcf)])({'type':generate_content_dto_1[_0x539ec5(0xcd)],'description':_0x539ec5(0xc5),'examples':{'example1':{'value':{'templateId':_0x539ec5(0xd6),'outlineMarkdown':_0x539ec5(0xde),'asyncGenPptx':!![],'prompt':_0x539ec5(0xdb),'dataUrl':null},'summary':_0x539ec5(0x99)}}}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x539ec5(0xa1)}),(0x0,swagger_1['ApiResponse'])({'status':0x190,'description':_0x539ec5(0xc1)}),(0x0,swagger_1[_0x539ec5(0x9f)])({'status':0x1f4,'description':_0x539ec5(0xd1)}),__param(0x0,(0x0,common_1[_0x539ec5(0xb3)])()),__param(0x1,(0x0,common_1[_0x539ec5(0xe9)])()),__metadata(_0x539ec5(0xe3),Function),__metadata(_0x539ec5(0xa6),[generate_content_dto_1['GenerateContentDto'],Object]),__metadata('design:returntype',Promise)],AipptController[_0x539ec5(0xa8)],'generateContent',null),__decorate([(0x0,common_1[_0x539ec5(0xdf)])(_0x539ec5(0xe1)),(0x0,swagger_1[_0x539ec5(0xda)])({'summary':_0x539ec5(0xac),'description':_0x539ec5(0xc9)}),(0x0,swagger_1[_0x539ec5(0xe7)])({'name':_0x539ec5(0xe8),'description':'PPT生成任务ID','required':!![],'type':String,'example':_0x539ec5(0xa7)}),(0x0,swagger_1[_0x539ec5(0x9f)])({'status':0xc8,'description':_0x539ec5(0x9d)}),(0x0,swagger_1[_0x539ec5(0x9f)])({'status':0x190,'description':_0x539ec5(0xdc)}),(0x0,swagger_1[_0x539ec5(0x9f)])({'status':0x194,'description':_0x539ec5(0x96)}),__param(0x0,(0x0,common_1['Query'])('pptId')),__metadata(_0x539ec5(0xe3),Function),__metadata('design:paramtypes',[String]),__metadata(_0x539ec5(0xe0),Promise)],AipptController[_0x539ec5(0xa8)],_0x539ec5(0xc6),null),AipptController=__decorate([(0x0,swagger_1[_0x539ec5(0xe2)])('AI\x20PPT生成服务'),(0x0,common_1[_0x539ec5(0xb8)])(_0x539ec5(0xd8)),__metadata('design:paramtypes',[aippt_service_1[_0x539ec5(0xc4)]])],AipptController),exports['AipptController']=AipptController;