'use strict';const _0xa8c408=_0x30c6;function _0x458a(){const _0x1665a2=['data:\x20','AipptController','design:paramtypes','ApiOperation','end','getPptInfo','decorate','#\x20主题\x0a##\x20章节1\x0a###\x20页面1\x0a####\x20内容1','pptId参数缺失或格式错误','PPT生成任务ID','__decorate','232726LqNAcG','参数验证失败','length','2087277kYnCNb','design:returntype','subscribe','__param','Response','服务器内部错误或AI服务调用失败','Error\x20writing\x20SSE\x20data:','Connection','216MlzWQr','AipptService','stringify','__esModule','Cache-Control','metadata','template_modern','3705996rlWRZy','keep-alive','ApiBody','pptId','GenerateOutlineDto','基本示例','9488TugDsm','object','generate-content','getOwnPropertyDescriptor','返回SSE流，包含实时生成的内容和PPT生成状态','text/event-stream','generateContent','生成PPT大纲','generateOutline','1669885FyqmLo','aipptService','156092gLWpEy','使用简洁的设计风格','Access-Control-Allow-Origin','返回SSE流，包含实时生成的大纲内容','ApiResponse','Stream\x20error:','Get','write','./dto/generate-ppt.dto','未找到指定的PPT生成任务','Content-Type','生成PPT内容','error','Query','setHeader','@nestjs/common','defineProperty','30UKFLqA','design:type','./aippt.service','Post','asyncPptInfo','prototype','generate-outline','119475QJLxFx','Body','\x0a\x20\x20\x20\x20查询异步生成PPT的进度和数据。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回数据格式：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22processing\x22,\x20//\x20processing:\x20生成中,\x20completed:\x20已完成,\x20failed:\x20失败\x0a\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075,\x20//\x20生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20\x22url\x22:\x20\x22https://example.com/ppt/xxx.pptx\x22,\x20//\x20当status为completed时返回下载地址\x0a\x20\x20\x20\x20\x20\x20\x22error\x22:\x20\x22错误信息\x22\x20//\x20当status为failed时返回错误信息\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','./dto/generate-content.dto'];_0x458a=function(){return _0x1665a2;};return _0x458a();}function _0x30c6(_0x4a2a74,_0x28994d){const _0x458a33=_0x458a();return _0x30c6=function(_0x30c633,_0x2f2e38){_0x30c633=_0x30c633-0x1e4;let _0x3b92e4=_0x458a33[_0x30c633];return _0x3b92e4;},_0x30c6(_0x4a2a74,_0x28994d);}(function(_0xf9e381,_0x2cd825){const _0x2a3151=_0x30c6,_0x5a9879=_0xf9e381();while(!![]){try{const _0x319070=parseInt(_0x2a3151(0x22a))/0x1+-parseInt(_0x2a3151(0x1ef))/0x2+-parseInt(_0x2a3151(0x1f2))/0x3+parseInt(_0x2a3151(0x212))/0x4*(parseInt(_0x2a3151(0x223))/0x5)+parseInt(_0x2a3151(0x201))/0x6+parseInt(_0x2a3151(0x210))/0x7+parseInt(_0x2a3151(0x207))/0x8*(-parseInt(_0x2a3151(0x1fa))/0x9);if(_0x319070===_0x2cd825)break;else _0x5a9879['push'](_0x5a9879['shift']());}catch(_0x2ef9b3){_0x5a9879['push'](_0x5a9879['shift']());}}}(_0x458a,0x5a260));var __decorate=this&&this[_0xa8c408(0x1ee)]||function(_0x3ad598,_0x4b9e24,_0x4e95ca,_0x29687d){const _0xbc67a2=_0xa8c408;var _0xc27efb=arguments[_0xbc67a2(0x1f1)],_0x4b4d00=_0xc27efb<0x3?_0x4b9e24:_0x29687d===null?_0x29687d=Object[_0xbc67a2(0x20a)](_0x4b9e24,_0x4e95ca):_0x29687d,_0x5cdcff;if(typeof Reflect==='object'&&typeof Reflect[_0xbc67a2(0x1ea)]==='function')_0x4b4d00=Reflect[_0xbc67a2(0x1ea)](_0x3ad598,_0x4b9e24,_0x4e95ca,_0x29687d);else{for(var _0x2d8a44=_0x3ad598['length']-0x1;_0x2d8a44>=0x0;_0x2d8a44--)if(_0x5cdcff=_0x3ad598[_0x2d8a44])_0x4b4d00=(_0xc27efb<0x3?_0x5cdcff(_0x4b4d00):_0xc27efb>0x3?_0x5cdcff(_0x4b9e24,_0x4e95ca,_0x4b4d00):_0x5cdcff(_0x4b9e24,_0x4e95ca))||_0x4b4d00;}return _0xc27efb>0x3&&_0x4b4d00&&Object[_0xbc67a2(0x222)](_0x4b9e24,_0x4e95ca,_0x4b4d00),_0x4b4d00;},__metadata=this&&this['__metadata']||function(_0x4b0eed,_0x35bdee){const _0x1f29aa=_0xa8c408;if(typeof Reflect===_0x1f29aa(0x208)&&typeof Reflect[_0x1f29aa(0x1ff)]==='function')return Reflect['metadata'](_0x4b0eed,_0x35bdee);},__param=this&&this[_0xa8c408(0x1f5)]||function(_0x2a1b2a,_0x351c4e){return function(_0x500239,_0x361d30){_0x351c4e(_0x500239,_0x361d30,_0x2a1b2a);};};Object[_0xa8c408(0x222)](exports,_0xa8c408(0x1fd),{'value':!![]}),exports[_0xa8c408(0x1e5)]=void 0x0;const common_1=require(_0xa8c408(0x221)),aippt_service_1=require(_0xa8c408(0x225)),generate_ppt_dto_1=require(_0xa8c408(0x21a)),generate_content_dto_1=require(_0xa8c408(0x22d)),swagger_1=require('@nestjs/swagger');let AipptController=class AipptController{constructor(_0x1a8880){const _0x2cd035=_0xa8c408;this[_0x2cd035(0x211)]=_0x1a8880;}async[_0xa8c408(0x20f)](_0x4084ca,_0x104557){const _0x1c0470=_0xa8c408;_0x104557[_0x1c0470(0x220)](_0x1c0470(0x21c),'text/event-stream'),_0x104557[_0x1c0470(0x220)](_0x1c0470(0x1fe),'no-cache'),_0x104557[_0x1c0470(0x220)](_0x1c0470(0x1f9),_0x1c0470(0x202)),_0x104557['setHeader'](_0x1c0470(0x214),'*');const _0x5d01dd=await this[_0x1c0470(0x211)]['generateOutline'](_0x4084ca);_0x5d01dd[_0x1c0470(0x1f4)]({'next':_0x1058b1=>{const _0x2bfb9d=_0x1c0470;try{_0x104557['write'](_0x2bfb9d(0x1e4)+JSON[_0x2bfb9d(0x1fc)](_0x1058b1)+'\x0a\x0a');}catch(_0x11c0c7){console['error']('Error\x20writing\x20SSE\x20data:',_0x11c0c7),_0x104557[_0x2bfb9d(0x1e8)]();}},'error':_0x5e30cc=>{const _0x4fe9f7=_0x1c0470;console['error'](_0x4fe9f7(0x217),_0x5e30cc),_0x104557[_0x4fe9f7(0x1e8)]();},'complete':()=>{const _0x224cd9=_0x1c0470;_0x104557[_0x224cd9(0x1e8)]();}});}async[_0xa8c408(0x20d)](_0x3dab69,_0x52c043){const _0x2d056c=_0xa8c408;_0x52c043[_0x2d056c(0x220)](_0x2d056c(0x21c),_0x2d056c(0x20c)),_0x52c043['setHeader']('Cache-Control','no-cache'),_0x52c043[_0x2d056c(0x220)](_0x2d056c(0x1f9),'keep-alive'),_0x52c043[_0x2d056c(0x220)](_0x2d056c(0x214),'*');const _0x418b39=await this[_0x2d056c(0x211)][_0x2d056c(0x20d)](_0x3dab69);_0x418b39[_0x2d056c(0x1f4)]({'next':_0x3e7a95=>{const _0x283bbd=_0x2d056c;try{_0x52c043[_0x283bbd(0x219)](_0x283bbd(0x1e4)+JSON[_0x283bbd(0x1fc)](_0x3e7a95)+'\x0a\x0a');}catch(_0x3cd02c){console[_0x283bbd(0x21e)](_0x283bbd(0x1f8),_0x3cd02c),_0x52c043[_0x283bbd(0x1e8)]();}},'error':_0x23a165=>{const _0x5d6b5c=_0x2d056c;console[_0x5d6b5c(0x21e)](_0x5d6b5c(0x217),_0x23a165),_0x52c043[_0x5d6b5c(0x1e8)]();},'complete':()=>{const _0x7a255f=_0x2d056c;_0x52c043[_0x7a255f(0x1e8)]();}});}async[_0xa8c408(0x1e9)](_0x388577){const _0x93ab01=_0xa8c408;return this[_0x93ab01(0x211)][_0x93ab01(0x227)](_0x388577);}};__decorate([(0x0,common_1[_0xa8c408(0x226)])(_0xa8c408(0x229)),(0x0,swagger_1[_0xa8c408(0x1e7)])({'summary':_0xa8c408(0x20e),'description':'\x0a\x20\x20\x20\x20流式生成PPT大纲目录markdown。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的文本内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20生成中,\x202:\x20生成完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的大纲结果\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22outline\x22:\x20\x22完整的大纲markdown\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20'}),(0x0,swagger_1['ApiBody'])({'type':generate_ppt_dto_1[_0xa8c408(0x205)],'description':'生成大纲所需的参数','examples':{'example1':{'value':{'length':0x5,'lang':'zh','prompt':'关于人工智能的演讲','subject':'技术','dataUrl':null},'summary':_0xa8c408(0x206)}}}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0xa8c408(0x215)}),(0x0,swagger_1[_0xa8c408(0x216)])({'status':0x190,'description':_0xa8c408(0x1f0)}),(0x0,swagger_1[_0xa8c408(0x216)])({'status':0x1f4,'description':_0xa8c408(0x1f7)}),__param(0x0,(0x0,common_1[_0xa8c408(0x22b)])()),__param(0x1,(0x0,common_1[_0xa8c408(0x1f6)])()),__metadata(_0xa8c408(0x224),Function),__metadata('design:paramtypes',[generate_ppt_dto_1[_0xa8c408(0x205)],Object]),__metadata(_0xa8c408(0x1f3),Promise)],AipptController['prototype'],_0xa8c408(0x20f),null),__decorate([(0x0,common_1[_0xa8c408(0x226)])(_0xa8c408(0x209)),(0x0,swagger_1[_0xa8c408(0x1e7)])({'summary':_0xa8c408(0x21d),'description':'\x0a\x20\x20\x20\x20根据大纲生成完整内容并异步生成PPT。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的内容片段\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20内容生成中,\x202:\x20内容生成完成,\x203:\x20PPT生成中,\x204:\x20全部完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的内容\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22完整的内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为3或4时，返回PPT生成信息\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22pptId\x22:\x20\x22异步生成的PPT\x20ID\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075\x20//\x20PPT生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20'}),(0x0,swagger_1[_0xa8c408(0x203)])({'type':generate_content_dto_1['GenerateContentDto'],'description':'生成PPT内容所需的参数','examples':{'example1':{'value':{'templateId':_0xa8c408(0x200),'outlineMarkdown':_0xa8c408(0x1eb),'asyncGenPptx':!![],'prompt':_0xa8c408(0x213),'dataUrl':null},'summary':'基本示例'}}}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0xa8c408(0x20b)}),(0x0,swagger_1[_0xa8c408(0x216)])({'status':0x190,'description':_0xa8c408(0x1f0)}),(0x0,swagger_1[_0xa8c408(0x216)])({'status':0x1f4,'description':_0xa8c408(0x1f7)}),__param(0x0,(0x0,common_1[_0xa8c408(0x22b)])()),__param(0x1,(0x0,common_1[_0xa8c408(0x1f6)])()),__metadata('design:type',Function),__metadata(_0xa8c408(0x1e6),[generate_content_dto_1['GenerateContentDto'],Object]),__metadata('design:returntype',Promise)],AipptController[_0xa8c408(0x228)],_0xa8c408(0x20d),null),__decorate([(0x0,common_1[_0xa8c408(0x218)])('ppt-info'),(0x0,swagger_1[_0xa8c408(0x1e7)])({'summary':'查询PPT生成状态','description':_0xa8c408(0x22c)}),(0x0,swagger_1['ApiQuery'])({'name':_0xa8c408(0x204),'description':_0xa8c408(0x1ed),'required':!![],'type':String,'example':'ppt_task_123456'}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':'返回PPT生成的状态信息'}),(0x0,swagger_1[_0xa8c408(0x216)])({'status':0x190,'description':_0xa8c408(0x1ec)}),(0x0,swagger_1[_0xa8c408(0x216)])({'status':0x194,'description':_0xa8c408(0x21b)}),__param(0x0,(0x0,common_1[_0xa8c408(0x21f)])(_0xa8c408(0x204))),__metadata(_0xa8c408(0x224),Function),__metadata(_0xa8c408(0x1e6),[String]),__metadata(_0xa8c408(0x1f3),Promise)],AipptController[_0xa8c408(0x228)],_0xa8c408(0x1e9),null),AipptController=__decorate([(0x0,swagger_1['ApiTags'])('AI\x20PPT生成服务'),(0x0,common_1['Controller'])('aippt'),__metadata(_0xa8c408(0x1e6),[aippt_service_1[_0xa8c408(0x1fb)]])],AipptController),exports[_0xa8c408(0x1e5)]=AipptController;