'use strict';function _0x318c(_0x139b4e,_0x5222a1){const _0x2f1ed0=_0x2f1e();return _0x318c=function(_0x318c86,_0x127b0a){_0x318c86=_0x318c86-0xeb;let _0x50c8ab=_0x2f1ed0[_0x318c86];return _0x50c8ab;},_0x318c(_0x139b4e,_0x5222a1);}const _0x1572d5=_0x318c;(function(_0x26833e,_0x1e5f9b){const _0x5c1917=_0x318c,_0x52c0cc=_0x26833e();while(!![]){try{const _0x13e45b=parseInt(_0x5c1917(0x120))/0x1+parseInt(_0x5c1917(0xf7))/0x2+parseInt(_0x5c1917(0x103))/0x3+-parseInt(_0x5c1917(0xf1))/0x4*(parseInt(_0x5c1917(0x125))/0x5)+-parseInt(_0x5c1917(0x115))/0x6*(parseInt(_0x5c1917(0x102))/0x7)+-parseInt(_0x5c1917(0xf2))/0x8+-parseInt(_0x5c1917(0x10a))/0x9;if(_0x13e45b===_0x1e5f9b)break;else _0x52c0cc['push'](_0x52c0cc['shift']());}catch(_0x9fdaa5){_0x52c0cc['push'](_0x52c0cc['shift']());}}}(_0x2f1e,0x7f1e9));function _0x2f1e(){const _0x38afce=['data:\x20','7yhDtoX','866340fqHKmm','Cache-Control','error','使用简洁的设计风格','aipptService','generate-outline','ApiQuery','7793784zlBilN','Body','template_modern','pptId参数缺失或格式错误','PPT生成任务ID','stringify','Get','no-cache','Post','\x0a\x20\x20\x20\x20查询异步生成PPT的进度和数据。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回数据格式：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22processing\x22,\x20//\x20processing:\x20生成中,\x20completed:\x20已完成,\x20failed:\x20失败\x0a\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075,\x20//\x20生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20\x22url\x22:\x20\x22https://example.com/ppt/xxx.pptx\x22,\x20//\x20当status为completed时返回下载地址\x0a\x20\x20\x20\x20\x20\x20\x22error\x22:\x20\x22错误信息\x22\x20//\x20当status为failed时返回错误信息\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','AipptService','784152MJvsZM','generateOutline','ppt_task_123456','#\x20主题\x0a##\x20章节1\x0a###\x20页面1\x0a####\x20内容1','./dto/generate-content.dto','查询PPT生成状态','返回SSE流，包含实时生成的内容和PPT生成状态','function','text/event-stream','end','getOwnPropertyDescriptor','737713fQqIVB','aippt','AipptController','参数验证失败','design:returntype','306815VfjFwx','返回PPT生成的状态信息','\x0a\x20\x20\x20\x20根据大纲生成完整内容并异步生成PPT。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的内容片段\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20内容生成中,\x202:\x20内容生成完成,\x203:\x20PPT生成中,\x204:\x20全部完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的内容\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22完整的内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为3或4时，返回PPT生成信息\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22pptId\x22:\x20\x22异步生成的PPT\x20ID\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075\x20//\x20PPT生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','./dto/generate-ppt.dto','GenerateContentDto','ApiOperation','@nestjs/common','Query','subscribe','关于人工智能的演讲','GenerateOutlineDto','metadata','基本示例','object','Connection','ApiBody','generateContent','generate-content','defineProperty','pptId','setHeader','ApiResponse','Error\x20writing\x20SSE\x20data:','decorate','asyncPptInfo','keep-alive','prototype','length','\x0a\x20\x20\x20\x20流式生成PPT大纲目录markdown。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的文本内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20生成中,\x202:\x20生成完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的大纲结果\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22outline\x22:\x20\x22完整的大纲markdown\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','Stream\x20error:','4oIfCCG','1431752gThxjL','design:paramtypes','服务器内部错误或AI服务调用失败','Controller','Response','1462376KKMxrw','Content-Type','write','__decorate','生成大纲所需的参数','__esModule','@nestjs/swagger','design:type','getPptInfo','ppt-info'];_0x2f1e=function(){return _0x38afce;};return _0x2f1e();}var __decorate=this&&this[_0x1572d5(0xfa)]||function(_0x241909,_0x59f6bf,_0x307a60,_0x1ac94c){const _0x491356=_0x1572d5;var _0x54f56a=arguments[_0x491356(0xee)],_0x5ddc89=_0x54f56a<0x3?_0x59f6bf:_0x1ac94c===null?_0x1ac94c=Object[_0x491356(0x11f)](_0x59f6bf,_0x307a60):_0x1ac94c,_0x40db5d;if(typeof Reflect===_0x491356(0x132)&&typeof Reflect[_0x491356(0x13c)]===_0x491356(0x11c))_0x5ddc89=Reflect['decorate'](_0x241909,_0x59f6bf,_0x307a60,_0x1ac94c);else{for(var _0x5807db=_0x241909['length']-0x1;_0x5807db>=0x0;_0x5807db--)if(_0x40db5d=_0x241909[_0x5807db])_0x5ddc89=(_0x54f56a<0x3?_0x40db5d(_0x5ddc89):_0x54f56a>0x3?_0x40db5d(_0x59f6bf,_0x307a60,_0x5ddc89):_0x40db5d(_0x59f6bf,_0x307a60))||_0x5ddc89;}return _0x54f56a>0x3&&_0x5ddc89&&Object[_0x491356(0x137)](_0x59f6bf,_0x307a60,_0x5ddc89),_0x5ddc89;},__metadata=this&&this['__metadata']||function(_0x45ab1e,_0xe4fd62){const _0x4a9752=_0x1572d5;if(typeof Reflect===_0x4a9752(0x132)&&typeof Reflect[_0x4a9752(0x130)]===_0x4a9752(0x11c))return Reflect['metadata'](_0x45ab1e,_0xe4fd62);},__param=this&&this['__param']||function(_0x51d23d,_0x5d8a18){return function(_0x82e619,_0xfc1df0){_0x5d8a18(_0x82e619,_0xfc1df0,_0x51d23d);};};Object[_0x1572d5(0x137)](exports,_0x1572d5(0xfc),{'value':!![]}),exports[_0x1572d5(0x122)]=void 0x0;const common_1=require(_0x1572d5(0x12b)),aippt_service_1=require('./aippt.service'),generate_ppt_dto_1=require(_0x1572d5(0x128)),generate_content_dto_1=require(_0x1572d5(0x119)),swagger_1=require(_0x1572d5(0xfd));let AipptController=class AipptController{constructor(_0x2f84c1){this['aipptService']=_0x2f84c1;}async[_0x1572d5(0x116)](_0x514ed2,_0x1da9a0){const _0x1e265d=_0x1572d5;_0x1da9a0[_0x1e265d(0x139)](_0x1e265d(0xf8),_0x1e265d(0x11d)),_0x1da9a0[_0x1e265d(0x139)]('Cache-Control',_0x1e265d(0x111)),_0x1da9a0['setHeader'](_0x1e265d(0x133),_0x1e265d(0xec)),_0x1da9a0[_0x1e265d(0x139)]('Access-Control-Allow-Origin','*');const _0x1941b8=await this['aipptService'][_0x1e265d(0x116)](_0x514ed2);_0x1941b8[_0x1e265d(0x12d)]({'next':_0x31c5b4=>{const _0x505132=_0x1e265d;try{_0x1da9a0['write'](_0x505132(0x101)+JSON[_0x505132(0x10f)](_0x31c5b4)+'\x0a\x0a');}catch(_0x535337){console[_0x505132(0x105)]('Error\x20writing\x20SSE\x20data:',_0x535337),_0x1da9a0[_0x505132(0x11e)]();}},'error':_0x2313f0=>{const _0xf002df=_0x1e265d;console[_0xf002df(0x105)](_0xf002df(0xf0),_0x2313f0),_0x1da9a0[_0xf002df(0x11e)]();},'complete':()=>{_0x1da9a0['end']();}});}async[_0x1572d5(0x135)](_0x358361,_0x4d1e3e){const _0x27a7e4=_0x1572d5;_0x4d1e3e['setHeader'](_0x27a7e4(0xf8),_0x27a7e4(0x11d)),_0x4d1e3e[_0x27a7e4(0x139)](_0x27a7e4(0x104),_0x27a7e4(0x111)),_0x4d1e3e[_0x27a7e4(0x139)](_0x27a7e4(0x133),_0x27a7e4(0xec)),_0x4d1e3e[_0x27a7e4(0x139)]('Access-Control-Allow-Origin','*');const _0x11f5ba=await this[_0x27a7e4(0x107)][_0x27a7e4(0x135)](_0x358361);_0x11f5ba[_0x27a7e4(0x12d)]({'next':_0x2bea37=>{const _0x127637=_0x27a7e4;try{_0x4d1e3e[_0x127637(0xf9)]('data:\x20'+JSON[_0x127637(0x10f)](_0x2bea37)+'\x0a\x0a');}catch(_0x5f5a2a){console[_0x127637(0x105)](_0x127637(0x13b),_0x5f5a2a),_0x4d1e3e['end']();}},'error':_0x364d31=>{const _0x1dcbf0=_0x27a7e4;console[_0x1dcbf0(0x105)](_0x1dcbf0(0xf0),_0x364d31),_0x4d1e3e[_0x1dcbf0(0x11e)]();},'complete':()=>{const _0x5a3cac=_0x27a7e4;_0x4d1e3e[_0x5a3cac(0x11e)]();}});}async[_0x1572d5(0xff)](_0x313e07){const _0x39b497=_0x1572d5;return this['aipptService'][_0x39b497(0xeb)](_0x313e07);}};__decorate([(0x0,common_1['Post'])(_0x1572d5(0x108)),(0x0,swagger_1[_0x1572d5(0x12a)])({'summary':'生成PPT大纲','description':_0x1572d5(0xef)}),(0x0,swagger_1[_0x1572d5(0x134)])({'type':generate_ppt_dto_1[_0x1572d5(0x12f)],'description':_0x1572d5(0xfb),'examples':{'example1':{'value':{'length':0x5,'lang':'zh','prompt':_0x1572d5(0x12e),'subject':'技术','dataUrl':null},'summary':_0x1572d5(0x131)}}}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':'返回SSE流，包含实时生成的大纲内容'}),(0x0,swagger_1[_0x1572d5(0x13a)])({'status':0x190,'description':'参数验证失败'}),(0x0,swagger_1[_0x1572d5(0x13a)])({'status':0x1f4,'description':_0x1572d5(0xf4)}),__param(0x0,(0x0,common_1[_0x1572d5(0x10b)])()),__param(0x1,(0x0,common_1[_0x1572d5(0xf6)])()),__metadata(_0x1572d5(0xfe),Function),__metadata(_0x1572d5(0xf3),[generate_ppt_dto_1[_0x1572d5(0x12f)],Object]),__metadata(_0x1572d5(0x124),Promise)],AipptController['prototype'],'generateOutline',null),__decorate([(0x0,common_1[_0x1572d5(0x112)])(_0x1572d5(0x136)),(0x0,swagger_1[_0x1572d5(0x12a)])({'summary':'生成PPT内容','description':_0x1572d5(0x127)}),(0x0,swagger_1[_0x1572d5(0x134)])({'type':generate_content_dto_1[_0x1572d5(0x129)],'description':'生成PPT内容所需的参数','examples':{'example1':{'value':{'templateId':_0x1572d5(0x10c),'outlineMarkdown':_0x1572d5(0x118),'asyncGenPptx':!![],'prompt':_0x1572d5(0x106),'dataUrl':null},'summary':_0x1572d5(0x131)}}}),(0x0,swagger_1[_0x1572d5(0x13a)])({'status':0xc8,'description':_0x1572d5(0x11b)}),(0x0,swagger_1['ApiResponse'])({'status':0x190,'description':_0x1572d5(0x123)}),(0x0,swagger_1[_0x1572d5(0x13a)])({'status':0x1f4,'description':_0x1572d5(0xf4)}),__param(0x0,(0x0,common_1[_0x1572d5(0x10b)])()),__param(0x1,(0x0,common_1[_0x1572d5(0xf6)])()),__metadata('design:type',Function),__metadata(_0x1572d5(0xf3),[generate_content_dto_1[_0x1572d5(0x129)],Object]),__metadata(_0x1572d5(0x124),Promise)],AipptController['prototype'],_0x1572d5(0x135),null),__decorate([(0x0,common_1[_0x1572d5(0x110)])(_0x1572d5(0x100)),(0x0,swagger_1[_0x1572d5(0x12a)])({'summary':_0x1572d5(0x11a),'description':_0x1572d5(0x113)}),(0x0,swagger_1[_0x1572d5(0x109)])({'name':_0x1572d5(0x138),'description':_0x1572d5(0x10e),'required':!![],'type':String,'example':_0x1572d5(0x117)}),(0x0,swagger_1[_0x1572d5(0x13a)])({'status':0xc8,'description':_0x1572d5(0x126)}),(0x0,swagger_1['ApiResponse'])({'status':0x190,'description':_0x1572d5(0x10d)}),(0x0,swagger_1[_0x1572d5(0x13a)])({'status':0x194,'description':'未找到指定的PPT生成任务'}),__param(0x0,(0x0,common_1[_0x1572d5(0x12c)])(_0x1572d5(0x138))),__metadata('design:type',Function),__metadata('design:paramtypes',[String]),__metadata('design:returntype',Promise)],AipptController[_0x1572d5(0xed)],_0x1572d5(0xff),null),AipptController=__decorate([(0x0,swagger_1['ApiTags'])('AI\x20PPT生成服务'),(0x0,common_1[_0x1572d5(0xf5)])(_0x1572d5(0x121)),__metadata(_0x1572d5(0xf3),[aippt_service_1[_0x1572d5(0x114)]])],AipptController),exports[_0x1572d5(0x122)]=AipptController;