'use strict';const _0x1b423e=_0x244f;(function(_0x372156,_0x5c5472){const _0x495e3a=_0x244f,_0xbdd31a=_0x372156();while(!![]){try{const _0x147738=parseInt(_0x495e3a(0x15d))/0x1+-parseInt(_0x495e3a(0x16d))/0x2*(parseInt(_0x495e3a(0x12f))/0x3)+-parseInt(_0x495e3a(0x153))/0x4+-parseInt(_0x495e3a(0x132))/0x5+parseInt(_0x495e3a(0x137))/0x6*(-parseInt(_0x495e3a(0x12e))/0x7)+parseInt(_0x495e3a(0x131))/0x8*(parseInt(_0x495e3a(0x155))/0x9)+parseInt(_0x495e3a(0x17a))/0xa;if(_0x147738===_0x5c5472)break;else _0xbdd31a['push'](_0xbdd31a['shift']());}catch(_0x2f57b3){_0xbdd31a['push'](_0xbdd31a['shift']());}}}(_0x421d,0xf3c42));function _0x244f(_0x7a2ef8,_0x47b275){const _0x421d57=_0x421d();return _0x244f=function(_0x244fd4,_0x5ae520){_0x244fd4=_0x244fd4-0x12b;let _0x9c193d=_0x421d57[_0x244fd4];return _0x9c193d;},_0x244f(_0x7a2ef8,_0x47b275);}var __decorate=this&&this[_0x1b423e(0x149)]||function(_0x3c5f10,_0x47e32f,_0x1b0ba6,_0x4faf13){const _0x1156c7=_0x1b423e;var _0x4998d3=arguments['length'],_0x22481f=_0x4998d3<0x3?_0x47e32f:_0x4faf13===null?_0x4faf13=Object['getOwnPropertyDescriptor'](_0x47e32f,_0x1b0ba6):_0x4faf13,_0x3d934f;if(typeof Reflect===_0x1156c7(0x141)&&typeof Reflect[_0x1156c7(0x148)]===_0x1156c7(0x136))_0x22481f=Reflect[_0x1156c7(0x148)](_0x3c5f10,_0x47e32f,_0x1b0ba6,_0x4faf13);else{for(var _0x4424a9=_0x3c5f10[_0x1156c7(0x16e)]-0x1;_0x4424a9>=0x0;_0x4424a9--)if(_0x3d934f=_0x3c5f10[_0x4424a9])_0x22481f=(_0x4998d3<0x3?_0x3d934f(_0x22481f):_0x4998d3>0x3?_0x3d934f(_0x47e32f,_0x1b0ba6,_0x22481f):_0x3d934f(_0x47e32f,_0x1b0ba6))||_0x22481f;}return _0x4998d3>0x3&&_0x22481f&&Object[_0x1156c7(0x15c)](_0x47e32f,_0x1b0ba6,_0x22481f),_0x22481f;},__metadata=this&&this[_0x1b423e(0x172)]||function(_0x3f31e0,_0x23670b){const _0x114ff7=_0x1b423e;if(typeof Reflect===_0x114ff7(0x141)&&typeof Reflect[_0x114ff7(0x14d)]===_0x114ff7(0x136))return Reflect['metadata'](_0x3f31e0,_0x23670b);},__param=this&&this[_0x1b423e(0x15f)]||function(_0x5e3c9c,_0x215056){return function(_0x12c004,_0x3146ea){_0x215056(_0x12c004,_0x3146ea,_0x5e3c9c);};};function _0x421d(){const _0x110a78=['ppt_task_123456','返回SSE流，包含实时生成的大纲内容','生成PPT大纲','defineProperty','447059wAznaF','keep-alive','__param','ppt-info','aipptService','参数验证失败','end','ApiOperation','GenerateContentDto','基本示例','aippt','生成PPT内容','./dto/generate-ppt.dto','ApiResponse','ApiBody','ApiTags','6gGIlkL','length','generateOutline','返回SSE流，包含实时生成的内容和PPT生成状态','design:paramtypes','__metadata','generate-outline','Body','\x0a\x20\x20\x20\x20根据大纲生成完整内容并异步生成PPT。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的内容片段\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20内容生成中,\x202:\x20内容生成完成,\x203:\x20PPT生成中,\x204:\x20全部完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的内容\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22完整的内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为3或4时，返回PPT生成信息\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22pptId\x22:\x20\x22异步生成的PPT\x20ID\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075\x20//\x20PPT生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','stringify','未找到指定的PPT生成任务','design:type','prototype','51137650ihMVKL','Access-Control-Allow-Origin','生成大纲所需的参数','Stream\x20error:','getPptInfo','Error\x20writing\x20SSE\x20data:','259jOrdGt','885585xlyRJy','PPT生成任务ID','144atPCNy','9272610XDTKDA','服务器内部错误或AI服务调用失败','template_modern','AI\x20PPT生成服务','function','223746kJjEjV','text/event-stream','Query','./dto/generate-content.dto','Post','@nestjs/swagger','pptId参数缺失或格式错误','#\x20主题\x0a##\x20章节1\x0a###\x20页面1\x0a####\x20内容1','生成PPT内容所需的参数','generate-content','object','setHeader','generateContent','data:\x20','Content-Type','返回PPT生成的状态信息','Cache-Control','decorate','__decorate','subscribe','Connection','AipptController','metadata','@nestjs/common','error','design:returntype','write','Get','2531264EOKJFM','pptId','95166PabdSM','AipptService','查询PPT生成状态','Response'];_0x421d=function(){return _0x110a78;};return _0x421d();}Object[_0x1b423e(0x15c)](exports,'__esModule',{'value':!![]}),exports['AipptController']=void 0x0;const common_1=require(_0x1b423e(0x14e)),aippt_service_1=require('./aippt.service'),generate_ppt_dto_1=require(_0x1b423e(0x169)),generate_content_dto_1=require(_0x1b423e(0x13a)),swagger_1=require(_0x1b423e(0x13c));let AipptController=class AipptController{constructor(_0x5dd3ca){const _0x4f8b93=_0x1b423e;this[_0x4f8b93(0x161)]=_0x5dd3ca;}async[_0x1b423e(0x16f)](_0x494577,_0x498d96){const _0x14e745=_0x1b423e;_0x498d96[_0x14e745(0x142)](_0x14e745(0x145),_0x14e745(0x138)),_0x498d96[_0x14e745(0x142)](_0x14e745(0x147),'no-cache'),_0x498d96['setHeader']('Connection',_0x14e745(0x15e)),_0x498d96[_0x14e745(0x142)](_0x14e745(0x17b),'*');const _0x8c3ce8=await this['aipptService'][_0x14e745(0x16f)](_0x494577);_0x8c3ce8[_0x14e745(0x14a)]({'next':_0x2ca204=>{const _0x1a612c=_0x14e745;try{_0x498d96[_0x1a612c(0x151)](_0x1a612c(0x144)+JSON[_0x1a612c(0x176)](_0x2ca204)+'\x0a\x0a');}catch(_0x5297a9){console[_0x1a612c(0x14f)]('Error\x20writing\x20SSE\x20data:',_0x5297a9),_0x498d96['end']();}},'error':_0x51f9fc=>{const _0x969dbb=_0x14e745;console[_0x969dbb(0x14f)](_0x969dbb(0x12b),_0x51f9fc),_0x498d96['end']();},'complete':()=>{const _0x286fc2=_0x14e745;_0x498d96[_0x286fc2(0x163)]();}});}async[_0x1b423e(0x143)](_0x5c0790,_0x3b8c63){const _0x1586bc=_0x1b423e;_0x3b8c63[_0x1586bc(0x142)](_0x1586bc(0x145),_0x1586bc(0x138)),_0x3b8c63[_0x1586bc(0x142)](_0x1586bc(0x147),'no-cache'),_0x3b8c63[_0x1586bc(0x142)](_0x1586bc(0x14b),'keep-alive'),_0x3b8c63[_0x1586bc(0x142)](_0x1586bc(0x17b),'*');const _0x333fba=await this[_0x1586bc(0x161)][_0x1586bc(0x143)](_0x5c0790);_0x333fba['subscribe']({'next':_0x3d0842=>{const _0x3c6901=_0x1586bc;try{_0x3b8c63[_0x3c6901(0x151)](_0x3c6901(0x144)+JSON[_0x3c6901(0x176)](_0x3d0842)+'\x0a\x0a');}catch(_0x4c92a1){console['error'](_0x3c6901(0x12d),_0x4c92a1),_0x3b8c63[_0x3c6901(0x163)]();}},'error':_0x71b609=>{const _0x360fae=_0x1586bc;console[_0x360fae(0x14f)](_0x360fae(0x12b),_0x71b609),_0x3b8c63[_0x360fae(0x163)]();},'complete':()=>{const _0x4e4981=_0x1586bc;_0x3b8c63[_0x4e4981(0x163)]();}});}async[_0x1b423e(0x12c)](_0x15bb0a){const _0x58ee1e=_0x1b423e;return this[_0x58ee1e(0x161)]['asyncPptInfo'](_0x15bb0a);}};__decorate([(0x0,common_1[_0x1b423e(0x13b)])(_0x1b423e(0x173)),(0x0,swagger_1[_0x1b423e(0x164)])({'summary':_0x1b423e(0x15b),'description':'\x0a\x20\x20\x20\x20流式生成PPT大纲目录markdown。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的文本内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20生成中,\x202:\x20生成完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的大纲结果\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22outline\x22:\x20\x22完整的大纲markdown\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20'}),(0x0,swagger_1[_0x1b423e(0x16b)])({'type':generate_ppt_dto_1['GenerateOutlineDto'],'description':_0x1b423e(0x17c),'examples':{'example1':{'value':{'length':0x5,'lang':'zh','prompt':'关于人工智能的演讲','subject':'技术','dataUrl':null},'summary':_0x1b423e(0x166)}}}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x1b423e(0x15a)}),(0x0,swagger_1[_0x1b423e(0x16a)])({'status':0x190,'description':_0x1b423e(0x162)}),(0x0,swagger_1[_0x1b423e(0x16a)])({'status':0x1f4,'description':_0x1b423e(0x133)}),__param(0x0,(0x0,common_1[_0x1b423e(0x174)])()),__param(0x1,(0x0,common_1[_0x1b423e(0x158)])()),__metadata(_0x1b423e(0x178),Function),__metadata('design:paramtypes',[generate_ppt_dto_1['GenerateOutlineDto'],Object]),__metadata(_0x1b423e(0x150),Promise)],AipptController[_0x1b423e(0x179)],_0x1b423e(0x16f),null),__decorate([(0x0,common_1['Post'])(_0x1b423e(0x140)),(0x0,swagger_1['ApiOperation'])({'summary':_0x1b423e(0x168),'description':_0x1b423e(0x175)}),(0x0,swagger_1[_0x1b423e(0x16b)])({'type':generate_content_dto_1['GenerateContentDto'],'description':_0x1b423e(0x13f),'examples':{'example1':{'value':{'templateId':_0x1b423e(0x134),'outlineMarkdown':_0x1b423e(0x13e),'asyncGenPptx':!![],'prompt':'使用简洁的设计风格','dataUrl':null},'summary':_0x1b423e(0x166)}}}),(0x0,swagger_1[_0x1b423e(0x16a)])({'status':0xc8,'description':_0x1b423e(0x170)}),(0x0,swagger_1[_0x1b423e(0x16a)])({'status':0x190,'description':_0x1b423e(0x162)}),(0x0,swagger_1[_0x1b423e(0x16a)])({'status':0x1f4,'description':'服务器内部错误或AI服务调用失败'}),__param(0x0,(0x0,common_1[_0x1b423e(0x174)])()),__param(0x1,(0x0,common_1['Response'])()),__metadata(_0x1b423e(0x178),Function),__metadata('design:paramtypes',[generate_content_dto_1[_0x1b423e(0x165)],Object]),__metadata(_0x1b423e(0x150),Promise)],AipptController['prototype'],_0x1b423e(0x143),null),__decorate([(0x0,common_1[_0x1b423e(0x152)])(_0x1b423e(0x160)),(0x0,swagger_1[_0x1b423e(0x164)])({'summary':_0x1b423e(0x157),'description':'\x0a\x20\x20\x20\x20查询异步生成PPT的进度和数据。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回数据格式：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22processing\x22,\x20//\x20processing:\x20生成中,\x20completed:\x20已完成,\x20failed:\x20失败\x0a\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075,\x20//\x20生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20\x22url\x22:\x20\x22https://example.com/ppt/xxx.pptx\x22,\x20//\x20当status为completed时返回下载地址\x0a\x20\x20\x20\x20\x20\x20\x22error\x22:\x20\x22错误信息\x22\x20//\x20当status为failed时返回错误信息\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20'}),(0x0,swagger_1['ApiQuery'])({'name':_0x1b423e(0x154),'description':_0x1b423e(0x130),'required':!![],'type':String,'example':_0x1b423e(0x159)}),(0x0,swagger_1[_0x1b423e(0x16a)])({'status':0xc8,'description':_0x1b423e(0x146)}),(0x0,swagger_1[_0x1b423e(0x16a)])({'status':0x190,'description':_0x1b423e(0x13d)}),(0x0,swagger_1['ApiResponse'])({'status':0x194,'description':_0x1b423e(0x177)}),__param(0x0,(0x0,common_1[_0x1b423e(0x139)])(_0x1b423e(0x154))),__metadata('design:type',Function),__metadata(_0x1b423e(0x171),[String]),__metadata(_0x1b423e(0x150),Promise)],AipptController['prototype'],_0x1b423e(0x12c),null),AipptController=__decorate([(0x0,swagger_1[_0x1b423e(0x16c)])(_0x1b423e(0x135)),(0x0,common_1['Controller'])(_0x1b423e(0x167)),__metadata(_0x1b423e(0x171),[aippt_service_1[_0x1b423e(0x156)]])],AipptController),exports[_0x1b423e(0x14c)]=AipptController;