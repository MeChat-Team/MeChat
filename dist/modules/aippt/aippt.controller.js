'use strict';const _0x3e3ab9=_0x244f;(function(_0x217569,_0x1003a5){const _0x4a9264=_0x244f,_0x47cc2f=_0x217569();while(!![]){try{const _0x509fd5=parseInt(_0x4a9264(0x1be))/0x1+-parseInt(_0x4a9264(0x1b8))/0x2+parseInt(_0x4a9264(0x1d0))/0x3*(parseInt(_0x4a9264(0x1b2))/0x4)+-parseInt(_0x4a9264(0x19d))/0x5+-parseInt(_0x4a9264(0x1e5))/0x6*(-parseInt(_0x4a9264(0x1cd))/0x7)+parseInt(_0x4a9264(0x1ca))/0x8*(parseInt(_0x4a9264(0x1a3))/0x9)+-parseInt(_0x4a9264(0x1d1))/0xa;if(_0x509fd5===_0x1003a5)break;else _0x47cc2f['push'](_0x47cc2f['shift']());}catch(_0x387fa4){_0x47cc2f['push'](_0x47cc2f['shift']());}}}(_0x1ef7,0x762ac));var __decorate=this&&this[_0x3e3ab9(0x1a2)]||function(_0x1d6382,_0x5d6fd5,_0x26e190,_0x448b71){const _0x3ba8ed=_0x3e3ab9;var _0x231c22=arguments['length'],_0x52ed21=_0x231c22<0x3?_0x5d6fd5:_0x448b71===null?_0x448b71=Object[_0x3ba8ed(0x1dd)](_0x5d6fd5,_0x26e190):_0x448b71,_0x5f20d0;if(typeof Reflect===_0x3ba8ed(0x196)&&typeof Reflect[_0x3ba8ed(0x1ce)]===_0x3ba8ed(0x199))_0x52ed21=Reflect[_0x3ba8ed(0x1ce)](_0x1d6382,_0x5d6fd5,_0x26e190,_0x448b71);else{for(var _0x426fc2=_0x1d6382[_0x3ba8ed(0x1c9)]-0x1;_0x426fc2>=0x0;_0x426fc2--)if(_0x5f20d0=_0x1d6382[_0x426fc2])_0x52ed21=(_0x231c22<0x3?_0x5f20d0(_0x52ed21):_0x231c22>0x3?_0x5f20d0(_0x5d6fd5,_0x26e190,_0x52ed21):_0x5f20d0(_0x5d6fd5,_0x26e190))||_0x52ed21;}return _0x231c22>0x3&&_0x52ed21&&Object[_0x3ba8ed(0x1dc)](_0x5d6fd5,_0x26e190,_0x52ed21),_0x52ed21;},__metadata=this&&this[_0x3e3ab9(0x1d4)]||function(_0x355517,_0x22a472){const _0x4f8db0=_0x3e3ab9;if(typeof Reflect===_0x4f8db0(0x196)&&typeof Reflect[_0x4f8db0(0x1a8)]===_0x4f8db0(0x199))return Reflect[_0x4f8db0(0x1a8)](_0x355517,_0x22a472);},__param=this&&this['__param']||function(_0x37c0b5,_0xfc3623){return function(_0x73ad53,_0x34220e){_0xfc3623(_0x73ad53,_0x34220e,_0x37c0b5);};};function _0x244f(_0x548aee,_0x4572ad){const _0x1ef7d4=_0x1ef7();return _0x244f=function(_0x244fef,_0x2ccd59){_0x244fef=_0x244fef-0x191;let _0xca4a73=_0x1ef7d4[_0x244fef];return _0xca4a73;},_0x244f(_0x548aee,_0x4572ad);}Object[_0x3e3ab9(0x1dc)](exports,_0x3e3ab9(0x1af),{'value':!![]}),exports[_0x3e3ab9(0x1c3)]=void 0x0;const common_1=require(_0x3e3ab9(0x1b6)),aippt_service_1=require(_0x3e3ab9(0x193)),generate_ppt_dto_1=require('./dto/generate-ppt.dto'),generate_content_dto_1=require(_0x3e3ab9(0x1a1)),swagger_1=require(_0x3e3ab9(0x1e1));let AipptController=class AipptController{constructor(_0x4074fc){const _0x13a7e7=_0x3e3ab9;this[_0x13a7e7(0x191)]=_0x4074fc;}async[_0x3e3ab9(0x1c5)](_0x25794b,_0x362a0a){const _0x13f4cc=_0x3e3ab9;_0x362a0a['setHeader'](_0x13f4cc(0x1a4),_0x13f4cc(0x1ac)),_0x362a0a['setHeader']('Cache-Control',_0x13f4cc(0x1b0)),_0x362a0a[_0x13f4cc(0x1a6)](_0x13f4cc(0x1b4),_0x13f4cc(0x1df)),_0x362a0a['setHeader'](_0x13f4cc(0x19e),'*');const _0x5b2bce=await this[_0x13f4cc(0x191)][_0x13f4cc(0x1c5)](_0x25794b);_0x5b2bce[_0x13f4cc(0x1c1)]({'next':_0x2baca7=>{const _0x44c0c3=_0x13f4cc;try{_0x362a0a['write'](_0x44c0c3(0x1c7)+JSON[_0x44c0c3(0x1ae)](_0x2baca7)+'\x0a\x0a');}catch(_0x1dc09b){console[_0x44c0c3(0x1d7)](_0x44c0c3(0x1b9),_0x1dc09b),_0x362a0a[_0x44c0c3(0x1d6)]();}},'error':_0x120382=>{const _0x36bbd8=_0x13f4cc;console[_0x36bbd8(0x1d7)](_0x36bbd8(0x1e0),_0x120382),_0x362a0a[_0x36bbd8(0x1d6)]();},'complete':()=>{const _0x61c235=_0x13f4cc;_0x362a0a[_0x61c235(0x1d6)]();}});}async['generateContent'](_0x40532a,_0x249482){const _0x1b7cc1=_0x3e3ab9;_0x249482[_0x1b7cc1(0x1a6)](_0x1b7cc1(0x1a4),_0x1b7cc1(0x1ac)),_0x249482[_0x1b7cc1(0x1a6)](_0x1b7cc1(0x1c0),_0x1b7cc1(0x1b0)),_0x249482['setHeader'](_0x1b7cc1(0x1b4),_0x1b7cc1(0x1df)),_0x249482[_0x1b7cc1(0x1a6)](_0x1b7cc1(0x19e),'*');const _0x1b06f4=await this[_0x1b7cc1(0x191)][_0x1b7cc1(0x1b3)](_0x40532a);_0x1b06f4[_0x1b7cc1(0x1c1)]({'next':_0x22f424=>{const _0x3663b5=_0x1b7cc1;try{_0x249482[_0x3663b5(0x19f)](_0x3663b5(0x1c7)+JSON['stringify'](_0x22f424)+'\x0a\x0a');}catch(_0x2c816e){console[_0x3663b5(0x1d7)]('Error\x20writing\x20SSE\x20data:',_0x2c816e),_0x249482[_0x3663b5(0x1d6)]();}},'error':_0x11963b=>{const _0x702b8f=_0x1b7cc1;console[_0x702b8f(0x1d7)]('Stream\x20error:',_0x11963b),_0x249482['end']();},'complete':()=>{const _0x5c415c=_0x1b7cc1;_0x249482[_0x5c415c(0x1d6)]();}});}async['getPptInfo'](_0x1f1d73){const _0x58fc42=_0x3e3ab9;return this[_0x58fc42(0x191)][_0x58fc42(0x1d3)](_0x1f1d73);}};function _0x1ef7(){const _0x565307=['#\x20主题\x0a##\x20章节1\x0a###\x20页面1\x0a####\x20内容1','114117hxlrlc','6846190NKhUJq','Get','asyncPptInfo','__metadata','参数验证失败','end','error','生成PPT内容','ApiQuery','\x0a\x20\x20\x20\x20根据大纲生成完整内容并异步生成PPT。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的内容片段\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20内容生成中,\x202:\x20内容生成完成,\x203:\x20PPT生成中,\x204:\x20全部完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的内容\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22完整的内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为3或4时，返回PPT生成信息\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22pptId\x22:\x20\x22异步生成的PPT\x20ID\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075\x20//\x20PPT生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','生成PPT内容所需的参数','defineProperty','getOwnPropertyDescriptor','prototype','keep-alive','Stream\x20error:','@nestjs/swagger','template_modern','ppt_task_123456','返回SSE流，包含实时生成的内容和PPT生成状态','42XunoLy','aipptService','ApiTags','./aippt.service','\x0a\x20\x20\x20\x20查询异步生成PPT的进度和数据。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回数据格式：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22processing\x22,\x20//\x20processing:\x20生成中,\x20completed:\x20已完成,\x20failed:\x20失败\x0a\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075,\x20//\x20生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20\x22url\x22:\x20\x22https://example.com/ppt/xxx.pptx\x22,\x20//\x20当status为completed时返回下载地址\x0a\x20\x20\x20\x20\x20\x20\x22error\x22:\x20\x22错误信息\x22\x20//\x20当status为failed时返回错误信息\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','服务器内部错误或AI服务调用失败','object','generate-outline','AI\x20PPT生成服务','function','GenerateContentDto','返回SSE流，包含实时生成的大纲内容','ApiResponse','2021540ydowSs','Access-Control-Allow-Origin','write','基本示例','./dto/generate-content.dto','__decorate','29277NUKLde','Content-Type','GenerateOutlineDto','setHeader','使用简洁的设计风格','metadata','Post','pptId','ApiOperation','text/event-stream','\x0a\x20\x20\x20\x20流式生成PPT大纲目录markdown。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的文本内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20生成中,\x202:\x20生成完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的大纲结果\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22outline\x22:\x20\x22完整的大纲markdown\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','stringify','__esModule','no-cache','PPT生成任务ID','56onTUCy','generateContent','Connection','返回PPT生成的状态信息','@nestjs/common','ppt-info','708442cnbqwR','Error\x20writing\x20SSE\x20data:','design:type','查询PPT生成状态','Response','AipptService','67490RDfnTq','Body','Cache-Control','subscribe','Query','AipptController','ApiBody','generateOutline','design:paramtypes','data:\x20','aippt','length','1368TiPHPs','design:returntype','Controller','770861zEQlnM','decorate'];_0x1ef7=function(){return _0x565307;};return _0x1ef7();}__decorate([(0x0,common_1[_0x3e3ab9(0x1a9)])(_0x3e3ab9(0x197)),(0x0,swagger_1[_0x3e3ab9(0x1ab)])({'summary':'生成PPT大纲','description':_0x3e3ab9(0x1ad)}),(0x0,swagger_1[_0x3e3ab9(0x1c4)])({'type':generate_ppt_dto_1[_0x3e3ab9(0x1a5)],'description':'生成大纲所需的参数','examples':{'example1':{'value':{'length':0x5,'lang':'zh','prompt':'关于人工智能的演讲','subject':'技术','dataUrl':null},'summary':_0x3e3ab9(0x1a0)}}}),(0x0,swagger_1[_0x3e3ab9(0x19c)])({'status':0xc8,'description':_0x3e3ab9(0x19b)}),(0x0,swagger_1[_0x3e3ab9(0x19c)])({'status':0x190,'description':_0x3e3ab9(0x1d5)}),(0x0,swagger_1[_0x3e3ab9(0x19c)])({'status':0x1f4,'description':'服务器内部错误或AI服务调用失败'}),__param(0x0,(0x0,common_1[_0x3e3ab9(0x1bf)])()),__param(0x1,(0x0,common_1[_0x3e3ab9(0x1bc)])()),__metadata(_0x3e3ab9(0x1ba),Function),__metadata('design:paramtypes',[generate_ppt_dto_1[_0x3e3ab9(0x1a5)],Object]),__metadata(_0x3e3ab9(0x1cb),Promise)],AipptController[_0x3e3ab9(0x1de)],_0x3e3ab9(0x1c5),null),__decorate([(0x0,common_1[_0x3e3ab9(0x1a9)])('generate-content'),(0x0,swagger_1['ApiOperation'])({'summary':_0x3e3ab9(0x1d8),'description':_0x3e3ab9(0x1da)}),(0x0,swagger_1['ApiBody'])({'type':generate_content_dto_1[_0x3e3ab9(0x19a)],'description':_0x3e3ab9(0x1db),'examples':{'example1':{'value':{'templateId':_0x3e3ab9(0x1e2),'outlineMarkdown':_0x3e3ab9(0x1cf),'asyncGenPptx':!![],'prompt':_0x3e3ab9(0x1a7),'dataUrl':null},'summary':'基本示例'}}}),(0x0,swagger_1[_0x3e3ab9(0x19c)])({'status':0xc8,'description':_0x3e3ab9(0x1e4)}),(0x0,swagger_1[_0x3e3ab9(0x19c)])({'status':0x190,'description':_0x3e3ab9(0x1d5)}),(0x0,swagger_1[_0x3e3ab9(0x19c)])({'status':0x1f4,'description':_0x3e3ab9(0x195)}),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x3e3ab9(0x1bc)])()),__metadata(_0x3e3ab9(0x1ba),Function),__metadata(_0x3e3ab9(0x1c6),[generate_content_dto_1[_0x3e3ab9(0x19a)],Object]),__metadata(_0x3e3ab9(0x1cb),Promise)],AipptController[_0x3e3ab9(0x1de)],_0x3e3ab9(0x1b3),null),__decorate([(0x0,common_1[_0x3e3ab9(0x1d2)])(_0x3e3ab9(0x1b7)),(0x0,swagger_1[_0x3e3ab9(0x1ab)])({'summary':_0x3e3ab9(0x1bb),'description':_0x3e3ab9(0x194)}),(0x0,swagger_1[_0x3e3ab9(0x1d9)])({'name':_0x3e3ab9(0x1aa),'description':_0x3e3ab9(0x1b1),'required':!![],'type':String,'example':_0x3e3ab9(0x1e3)}),(0x0,swagger_1[_0x3e3ab9(0x19c)])({'status':0xc8,'description':_0x3e3ab9(0x1b5)}),(0x0,swagger_1[_0x3e3ab9(0x19c)])({'status':0x190,'description':'pptId参数缺失或格式错误'}),(0x0,swagger_1[_0x3e3ab9(0x19c)])({'status':0x194,'description':'未找到指定的PPT生成任务'}),__param(0x0,(0x0,common_1[_0x3e3ab9(0x1c2)])(_0x3e3ab9(0x1aa))),__metadata(_0x3e3ab9(0x1ba),Function),__metadata(_0x3e3ab9(0x1c6),[String]),__metadata('design:returntype',Promise)],AipptController['prototype'],'getPptInfo',null),AipptController=__decorate([(0x0,swagger_1[_0x3e3ab9(0x192)])(_0x3e3ab9(0x198)),(0x0,common_1[_0x3e3ab9(0x1cc)])(_0x3e3ab9(0x1c8)),__metadata(_0x3e3ab9(0x1c6),[aippt_service_1[_0x3e3ab9(0x1bd)]])],AipptController),exports[_0x3e3ab9(0x1c3)]=AipptController;