'use strict';function _0xed94(_0x4ed300,_0x289683){const _0x1f100a=_0x1f10();return _0xed94=function(_0xed9473,_0x40b2a7){_0xed9473=_0xed9473-0x73;let _0x53ed76=_0x1f100a[_0xed9473];return _0x53ed76;},_0xed94(_0x4ed300,_0x289683);}const _0x3bf776=_0xed94;(function(_0xb40c43,_0x2286b9){const _0x2b7121=_0xed94,_0x1a7c84=_0xb40c43();while(!![]){try{const _0x1210c7=-parseInt(_0x2b7121(0x77))/0x1*(parseInt(_0x2b7121(0x93))/0x2)+-parseInt(_0x2b7121(0x86))/0x3+-parseInt(_0x2b7121(0x99))/0x4*(parseInt(_0x2b7121(0x9c))/0x5)+parseInt(_0x2b7121(0x78))/0x6+-parseInt(_0x2b7121(0xbc))/0x7*(-parseInt(_0x2b7121(0x74))/0x8)+-parseInt(_0x2b7121(0xae))/0x9+parseInt(_0x2b7121(0xad))/0xa;if(_0x1210c7===_0x2286b9)break;else _0x1a7c84['push'](_0x1a7c84['shift']());}catch(_0x3890f8){_0x1a7c84['push'](_0x1a7c84['shift']());}}}(_0x1f10,0x6bfd0));var __decorate=this&&this[_0x3bf776(0x9e)]||function(_0x2ad40a,_0xa08b5,_0x55e516,_0x12c25e){const _0x545e58=_0x3bf776;var _0x3e37c1=arguments[_0x545e58(0xa3)],_0x2bc13c=_0x3e37c1<0x3?_0xa08b5:_0x12c25e===null?_0x12c25e=Object[_0x545e58(0xb5)](_0xa08b5,_0x55e516):_0x12c25e,_0x1f588a;if(typeof Reflect===_0x545e58(0x92)&&typeof Reflect['decorate']==='function')_0x2bc13c=Reflect['decorate'](_0x2ad40a,_0xa08b5,_0x55e516,_0x12c25e);else{for(var _0x206770=_0x2ad40a[_0x545e58(0xa3)]-0x1;_0x206770>=0x0;_0x206770--)if(_0x1f588a=_0x2ad40a[_0x206770])_0x2bc13c=(_0x3e37c1<0x3?_0x1f588a(_0x2bc13c):_0x3e37c1>0x3?_0x1f588a(_0xa08b5,_0x55e516,_0x2bc13c):_0x1f588a(_0xa08b5,_0x55e516))||_0x2bc13c;}return _0x3e37c1>0x3&&_0x2bc13c&&Object['defineProperty'](_0xa08b5,_0x55e516,_0x2bc13c),_0x2bc13c;},__metadata=this&&this[_0x3bf776(0x9d)]||function(_0x586663,_0x406529){const _0x22b9e5=_0x3bf776;if(typeof Reflect===_0x22b9e5(0x92)&&typeof Reflect[_0x22b9e5(0xbd)]===_0x22b9e5(0xb1))return Reflect[_0x22b9e5(0xbd)](_0x586663,_0x406529);},__param=this&&this['__param']||function(_0x15ecd0,_0x5dca70){return function(_0x53de83,_0x395024){_0x5dca70(_0x53de83,_0x395024,_0x15ecd0);};};function _0x1f10(){const _0x255f7f=['generateContent','1911QChCPp','metadata','generate-content','no-cache','asyncPptInfo','GenerateOutlineDto','生成大纲所需的参数','defineProperty','生成PPT大纲','744ILbkUq','text/event-stream','Body','3TGkggp','529584AOAcWs','design:paramtypes','pptId','参数验证失败','aippt','getPptInfo','Access-Control-Allow-Origin','AipptController','end','Response','ApiQuery','Content-Type','服务器内部错误或AI服务调用失败','./aippt.service','1354380CBCJxd','./dto/generate-content.dto','AipptService','Query','data:\x20','查询PPT生成状态','generateOutline','template_modern','返回SSE流，包含实时生成的大纲内容','Stream\x20error:','AI\x20PPT生成服务','ApiResponse','object','498342RaaEkw','\x0a\x20\x20\x20\x20查询异步生成PPT的进度和数据。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回数据格式：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22processing\x22,\x20//\x20processing:\x20生成中,\x20completed:\x20已完成,\x20failed:\x20失败\x0a\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075,\x20//\x20生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20\x22url\x22:\x20\x22https://example.com/ppt/xxx.pptx\x22,\x20//\x20当status为completed时返回下载地址\x0a\x20\x20\x20\x20\x20\x20\x22error\x22:\x20\x22错误信息\x22\x20//\x20当status为failed时返回错误信息\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20','./dto/generate-ppt.dto','使用简洁的设计风格','ApiOperation','__esModule','135084XKBXoK','ppt-info','prototype','55cMUbwe','__metadata','__decorate','生成PPT内容所需的参数','关于人工智能的演讲','@nestjs/common','Cache-Control','length','Controller','PPT生成任务ID','GenerateContentDto','基本示例','Post','返回PPT生成的状态信息','generate-outline','aipptService','Error\x20writing\x20SSE\x20data:','22632290mpYqbR','3276972XZAyIZ','error','@nestjs/swagger','function','design:type','Connection','setHeader','getOwnPropertyDescriptor','生成PPT内容','design:returntype','write','ppt_task_123456','ApiTags'];_0x1f10=function(){return _0x255f7f;};return _0x1f10();}Object[_0x3bf776(0xc3)](exports,_0x3bf776(0x98),{'value':!![]}),exports[_0x3bf776(0x7f)]=void 0x0;const common_1=require(_0x3bf776(0xa1)),aippt_service_1=require(_0x3bf776(0x85)),generate_ppt_dto_1=require(_0x3bf776(0x95)),generate_content_dto_1=require(_0x3bf776(0x87)),swagger_1=require(_0x3bf776(0xb0));let AipptController=class AipptController{constructor(_0x544d0e){const _0x2acb7c=_0x3bf776;this[_0x2acb7c(0xab)]=_0x544d0e;}async['generateOutline'](_0x9dc815,_0x33e318){const _0x7b0e0d=_0x3bf776;_0x33e318[_0x7b0e0d(0xb4)]('Content-Type',_0x7b0e0d(0x75)),_0x33e318['setHeader'](_0x7b0e0d(0xa2),'no-cache'),_0x33e318[_0x7b0e0d(0xb4)](_0x7b0e0d(0xb3),'keep-alive'),_0x33e318['setHeader']('Access-Control-Allow-Origin','*');const _0x1bda54=await this[_0x7b0e0d(0xab)]['generateOutline'](_0x9dc815);_0x1bda54['subscribe']({'next':_0x544b82=>{const _0x22d79e=_0x7b0e0d;try{_0x33e318[_0x22d79e(0xb8)](_0x22d79e(0x8a)+JSON['stringify'](_0x544b82)+'\x0a\x0a');}catch(_0x34adb4){console['error'](_0x22d79e(0xac),_0x34adb4),_0x33e318[_0x22d79e(0x80)]();}},'error':_0x4b7c46=>{const _0x2222f8=_0x7b0e0d;console['error'](_0x2222f8(0x8f),_0x4b7c46),_0x33e318[_0x2222f8(0x80)]();},'complete':()=>{const _0x2e6632=_0x7b0e0d;_0x33e318[_0x2e6632(0x80)]();}});}async['generateContent'](_0x46df5f,_0x42f1b4){const _0x5c4db2=_0x3bf776;_0x42f1b4['setHeader'](_0x5c4db2(0x83),_0x5c4db2(0x75)),_0x42f1b4[_0x5c4db2(0xb4)](_0x5c4db2(0xa2),_0x5c4db2(0xbf)),_0x42f1b4[_0x5c4db2(0xb4)]('Connection','keep-alive'),_0x42f1b4['setHeader'](_0x5c4db2(0x7e),'*');const _0x17a649=await this[_0x5c4db2(0xab)][_0x5c4db2(0xbb)](_0x46df5f);_0x17a649['subscribe']({'next':_0x431c35=>{const _0x2c1913=_0x5c4db2;try{_0x42f1b4[_0x2c1913(0xb8)](_0x2c1913(0x8a)+JSON['stringify'](_0x431c35)+'\x0a\x0a');}catch(_0x134e1e){console['error'](_0x2c1913(0xac),_0x134e1e),_0x42f1b4[_0x2c1913(0x80)]();}},'error':_0x5f1668=>{const _0xdb5af=_0x5c4db2;console[_0xdb5af(0xaf)](_0xdb5af(0x8f),_0x5f1668),_0x42f1b4['end']();},'complete':()=>{const _0x461e95=_0x5c4db2;_0x42f1b4[_0x461e95(0x80)]();}});}async['getPptInfo'](_0x4ee187){const _0x33efb7=_0x3bf776;return this['aipptService'][_0x33efb7(0xc0)](_0x4ee187);}};__decorate([(0x0,common_1['Post'])(_0x3bf776(0xaa)),(0x0,swagger_1[_0x3bf776(0x97)])({'summary':_0x3bf776(0x73),'description':'\x0a\x20\x20\x20\x20流式生成PPT大纲目录markdown。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的文本内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20生成中,\x202:\x20生成完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的大纲结果\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22outline\x22:\x20\x22完整的大纲markdown\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20'}),(0x0,swagger_1['ApiBody'])({'type':generate_ppt_dto_1[_0x3bf776(0xc1)],'description':_0x3bf776(0xc2),'examples':{'example1':{'value':{'length':0x5,'lang':'zh','prompt':_0x3bf776(0xa0),'subject':'技术','dataUrl':null},'summary':_0x3bf776(0xa7)}}}),(0x0,swagger_1[_0x3bf776(0x91)])({'status':0xc8,'description':_0x3bf776(0x8e)}),(0x0,swagger_1[_0x3bf776(0x91)])({'status':0x190,'description':_0x3bf776(0x7b)}),(0x0,swagger_1['ApiResponse'])({'status':0x1f4,'description':_0x3bf776(0x84)}),__param(0x0,(0x0,common_1[_0x3bf776(0x76)])()),__param(0x1,(0x0,common_1[_0x3bf776(0x81)])()),__metadata(_0x3bf776(0xb2),Function),__metadata(_0x3bf776(0x79),[generate_ppt_dto_1[_0x3bf776(0xc1)],Object]),__metadata(_0x3bf776(0xb7),Promise)],AipptController['prototype'],_0x3bf776(0x8c),null),__decorate([(0x0,common_1[_0x3bf776(0xa8)])(_0x3bf776(0xbe)),(0x0,swagger_1[_0x3bf776(0x97)])({'summary':_0x3bf776(0xb6),'description':'\x0a\x20\x20\x20\x20根据大纲生成完整内容并异步生成PPT。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20返回的SSE流中，每条数据格式为：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22text\x22:\x20\x22生成的内容片段\x22,\x0a\x20\x20\x20\x20\x20\x20\x22status\x22:\x201,\x20//\x201:\x20内容生成中,\x202:\x20内容生成完成,\x203:\x20PPT生成中,\x204:\x20全部完成\x0a\x20\x20\x20\x20\x20\x20\x22result\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为2时，返回完整的内容\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22完整的内容\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20当status为3或4时，返回PPT生成信息\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22pptId\x22:\x20\x22异步生成的PPT\x20ID\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22progress\x22:\x2075\x20//\x20PPT生成进度(0-100)\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20'}),(0x0,swagger_1['ApiBody'])({'type':generate_content_dto_1[_0x3bf776(0xa6)],'description':_0x3bf776(0x9f),'examples':{'example1':{'value':{'templateId':_0x3bf776(0x8d),'outlineMarkdown':'#\x20主题\x0a##\x20章节1\x0a###\x20页面1\x0a####\x20内容1','asyncGenPptx':!![],'prompt':_0x3bf776(0x96),'dataUrl':null},'summary':_0x3bf776(0xa7)}}}),(0x0,swagger_1[_0x3bf776(0x91)])({'status':0xc8,'description':'返回SSE流，包含实时生成的内容和PPT生成状态'}),(0x0,swagger_1[_0x3bf776(0x91)])({'status':0x190,'description':_0x3bf776(0x7b)}),(0x0,swagger_1[_0x3bf776(0x91)])({'status':0x1f4,'description':_0x3bf776(0x84)}),__param(0x0,(0x0,common_1[_0x3bf776(0x76)])()),__param(0x1,(0x0,common_1[_0x3bf776(0x81)])()),__metadata(_0x3bf776(0xb2),Function),__metadata(_0x3bf776(0x79),[generate_content_dto_1['GenerateContentDto'],Object]),__metadata(_0x3bf776(0xb7),Promise)],AipptController['prototype'],_0x3bf776(0xbb),null),__decorate([(0x0,common_1['Get'])(_0x3bf776(0x9a)),(0x0,swagger_1['ApiOperation'])({'summary':_0x3bf776(0x8b),'description':_0x3bf776(0x94)}),(0x0,swagger_1[_0x3bf776(0x82)])({'name':_0x3bf776(0x7a),'description':_0x3bf776(0xa5),'required':!![],'type':String,'example':_0x3bf776(0xb9)}),(0x0,swagger_1[_0x3bf776(0x91)])({'status':0xc8,'description':_0x3bf776(0xa9)}),(0x0,swagger_1[_0x3bf776(0x91)])({'status':0x190,'description':'pptId参数缺失或格式错误'}),(0x0,swagger_1[_0x3bf776(0x91)])({'status':0x194,'description':'未找到指定的PPT生成任务'}),__param(0x0,(0x0,common_1[_0x3bf776(0x89)])(_0x3bf776(0x7a))),__metadata(_0x3bf776(0xb2),Function),__metadata(_0x3bf776(0x79),[String]),__metadata('design:returntype',Promise)],AipptController[_0x3bf776(0x9b)],_0x3bf776(0x7d),null),AipptController=__decorate([(0x0,swagger_1[_0x3bf776(0xba)])(_0x3bf776(0x90)),(0x0,common_1[_0x3bf776(0xa4)])(_0x3bf776(0x7c)),__metadata('design:paramtypes',[aippt_service_1[_0x3bf776(0x88)]])],AipptController),exports['AipptController']=AipptController;