'use strict';const _0x5b389a=_0x240d;function _0x48fa(){const _0x4bba86=['20QhzWTU','parse','configService','10892JIOymE','no-cache','4000NnyeBN','text/event-stream','pipe','ConfigService','4345350NolShW','object','decorate','/ppt/generateContent','1411788SSLUMh','580140YRQXrn','/ppt/generateOutline','complete','templateId','189208yGOmIE','map','698825LjyjXD','get','@nestjs/axios','toString','next','startsWith','post','20RhXZmA','data:\x20','mergeMap','__decorate','HttpService','toPromise','defineProperty','lang','rxjs/operators','297lHnzkq','Failed\x20to\x20parse\x20SSE\x20data:','__esModule','947190ScFWmM','handleSSEStream','metadata','destroy','getOwnPropertyDescriptor','generateContent','dataUrl','AipptService','DOCMEE_API_URL','Observable','/ppt/asyncPptInfo','data','rxjs','end','outlineMarkdown','prompt','generateOutline','httpService','apiToken','length','apiBaseUrl','6fVSZMo','Failed\x20to\x20parse\x20remaining\x20SSE\x20data:','error','slice','stream','trim'];_0x48fa=function(){return _0x4bba86;};return _0x48fa();}function _0x240d(_0x1483f0,_0x261ba8){const _0x48faac=_0x48fa();return _0x240d=function(_0x240d38,_0x1c4696){_0x240d38=_0x240d38-0x1ae;let _0x526e92=_0x48faac[_0x240d38];return _0x526e92;},_0x240d(_0x1483f0,_0x261ba8);}(function(_0x6b3338,_0x5567ea){const _0x2fea66=_0x240d,_0x1d233b=_0x6b3338();while(!![]){try{const _0x3d2933=parseInt(_0x2fea66(0x1c3))/0x1*(-parseInt(_0x2fea66(0x1db))/0x2)+parseInt(_0x2fea66(0x1ae))/0x3+parseInt(_0x2fea66(0x1e4))/0x4*(-parseInt(_0x2fea66(0x1dd))/0x5)+-parseInt(_0x2fea66(0x1d2))/0x6+-parseInt(_0x2fea66(0x1cc))/0x7*(parseInt(_0x2fea66(0x1ce))/0x8)+-parseInt(_0x2fea66(0x1d7))/0x9*(-parseInt(_0x2fea66(0x1c9))/0xa)+-parseInt(_0x2fea66(0x1ed))/0xb*(-parseInt(_0x2fea66(0x1d6))/0xc);if(_0x3d2933===_0x5567ea)break;else _0x1d233b['push'](_0x1d233b['shift']());}catch(_0x5ac08a){_0x1d233b['push'](_0x1d233b['shift']());}}}(_0x48fa,0xd0213));var __decorate=this&&this[_0x5b389a(0x1e7)]||function(_0x484a31,_0xdd1952,_0x22753c,_0x352999){const _0x36a211=_0x5b389a;var _0xe4673f=arguments[_0x36a211(0x1c1)],_0x29bb6c=_0xe4673f<0x3?_0xdd1952:_0x352999===null?_0x352999=Object[_0x36a211(0x1b2)](_0xdd1952,_0x22753c):_0x352999,_0x2d6b63;if(typeof Reflect===_0x36a211(0x1d3)&&typeof Reflect[_0x36a211(0x1d4)]==='function')_0x29bb6c=Reflect['decorate'](_0x484a31,_0xdd1952,_0x22753c,_0x352999);else{for(var _0x320be6=_0x484a31[_0x36a211(0x1c1)]-0x1;_0x320be6>=0x0;_0x320be6--)if(_0x2d6b63=_0x484a31[_0x320be6])_0x29bb6c=(_0xe4673f<0x3?_0x2d6b63(_0x29bb6c):_0xe4673f>0x3?_0x2d6b63(_0xdd1952,_0x22753c,_0x29bb6c):_0x2d6b63(_0xdd1952,_0x22753c))||_0x29bb6c;}return _0xe4673f>0x3&&_0x29bb6c&&Object[_0x36a211(0x1ea)](_0xdd1952,_0x22753c,_0x29bb6c),_0x29bb6c;},__metadata=this&&this['__metadata']||function(_0x964c96,_0x2eab8b){const _0x4b2cdd=_0x5b389a;if(typeof Reflect===_0x4b2cdd(0x1d3)&&typeof Reflect['metadata']==='function')return Reflect[_0x4b2cdd(0x1b0)](_0x964c96,_0x2eab8b);};Object[_0x5b389a(0x1ea)](exports,_0x5b389a(0x1ef),{'value':!![]}),exports[_0x5b389a(0x1b5)]=void 0x0;const common_1=require('@nestjs/common'),rxjs_1=require(_0x5b389a(0x1ba)),config_1=require('@nestjs/config'),axios_1=require(_0x5b389a(0x1df)),operators_1=require(_0x5b389a(0x1ec));let AipptService=class AipptService{constructor(_0x1e5dec,_0x16daae){const _0x46f83f=_0x5b389a;this['configService']=_0x1e5dec,this[_0x46f83f(0x1bf)]=_0x16daae,this[_0x46f83f(0x1c0)]=this['configService'][_0x46f83f(0x1de)]('DOCMEE_API_TOKEN'),this[_0x46f83f(0x1c2)]=this[_0x46f83f(0x1cb)][_0x46f83f(0x1de)](_0x46f83f(0x1b6));}[_0x5b389a(0x1af)](_0x59b8ac){const _0x3bccf2=_0x5b389a;return new rxjs_1[(_0x3bccf2(0x1b7))](_0x2651dd=>{const _0x46d68b=_0x3bccf2;let _0x5df053='';return _0x59b8ac['on'](_0x46d68b(0x1b9),_0xe390c5=>{const _0x4dce0d=_0x46d68b;_0x5df053+=_0xe390c5[_0x4dce0d(0x1e0)]();const _0x1d1a98=_0x5df053['split']('\x0a');_0x5df053=_0x1d1a98['pop']()||'';for(const _0x2bb360 of _0x1d1a98){if(_0x2bb360[_0x4dce0d(0x1c8)]()&&_0x2bb360[_0x4dce0d(0x1e2)](_0x4dce0d(0x1e5)))try{const _0x37c247=JSON[_0x4dce0d(0x1ca)](_0x2bb360[_0x4dce0d(0x1c6)](0x6));_0x2651dd['next'](_0x37c247);}catch(_0x4e6f6e){console[_0x4dce0d(0x1c5)](_0x4dce0d(0x1ee),_0x4e6f6e);}}}),_0x59b8ac['on'](_0x46d68b(0x1bb),()=>{const _0x4f56db=_0x46d68b;if(_0x5df053[_0x4f56db(0x1c8)]())try{const _0x1365c3=JSON[_0x4f56db(0x1ca)](_0x5df053[_0x4f56db(0x1c6)](0x6));_0x2651dd[_0x4f56db(0x1e1)](_0x1365c3);}catch(_0x188b8d){console[_0x4f56db(0x1c5)](_0x4f56db(0x1c4),_0x188b8d);}_0x2651dd[_0x4f56db(0x1d9)]();}),_0x59b8ac['on'](_0x46d68b(0x1c5),_0x3970fa=>{_0x2651dd['error'](_0x3970fa);}),()=>{const _0x3f3653=_0x46d68b;_0x59b8ac[_0x3f3653(0x1b1)]();};});}[_0x5b389a(0x1be)](_0x19fb7d){const _0x5df7de=_0x5b389a,_0x1f47f7=this[_0x5df7de(0x1c2)]+_0x5df7de(0x1d8),_0x1373fc={'stream':!![],'length':_0x19fb7d[_0x5df7de(0x1c1)],'lang':_0x19fb7d[_0x5df7de(0x1eb)],'prompt':_0x19fb7d[_0x5df7de(0x1bd)],'subject':_0x19fb7d['subject'],'dataUrl':_0x19fb7d[_0x5df7de(0x1b4)]};return this[_0x5df7de(0x1bf)][_0x5df7de(0x1e3)](_0x1f47f7,_0x1373fc,{'headers':{'Authorization':this[_0x5df7de(0x1c0)],'Accept':_0x5df7de(0x1cf),'Cache-Control':_0x5df7de(0x1cd),'Connection':'keep-alive'},'responseType':_0x5df7de(0x1c7)})[_0x5df7de(0x1d0)]((0x0,operators_1['map'])(_0x9b5d5b=>_0x9b5d5b[_0x5df7de(0x1b9)]),(0x0,operators_1[_0x5df7de(0x1e6)])(_0x1608a3=>this[_0x5df7de(0x1af)](_0x1608a3)));}[_0x5b389a(0x1b3)](_0x1508fe){const _0x29ae0d=_0x5b389a,_0x50675b=this[_0x29ae0d(0x1c2)]+_0x29ae0d(0x1d5);return this['httpService']['post'](_0x50675b,{'templateId':_0x1508fe[_0x29ae0d(0x1da)],'outlineMarkdown':_0x1508fe[_0x29ae0d(0x1bc)],'asyncGenPptx':!![],'prompt':_0x1508fe[_0x29ae0d(0x1bd)],'dataUrl':_0x1508fe[_0x29ae0d(0x1b4)]},{'headers':{'Authorization':this[_0x29ae0d(0x1c0)],'Accept':_0x29ae0d(0x1cf),'Cache-Control':'no-cache','Connection':'keep-alive'},'responseType':'stream'})['pipe']((0x0,operators_1[_0x29ae0d(0x1dc)])(_0x56c7d2=>_0x56c7d2['data']),(0x0,operators_1[_0x29ae0d(0x1e6)])(_0x254543=>this[_0x29ae0d(0x1af)](_0x254543)));}async['asyncPptInfo'](_0x54c9f8){const _0x5e22d8=_0x5b389a,_0x18c14e=this[_0x5e22d8(0x1c2)]+_0x5e22d8(0x1b8),_0x4c5fe9=await this['httpService'][_0x5e22d8(0x1de)](_0x18c14e,{'params':{'pptId':_0x54c9f8},'headers':{'Authorization':this[_0x5e22d8(0x1c0)]}})[_0x5e22d8(0x1e9)]();return _0x4c5fe9[_0x5e22d8(0x1b9)];}};AipptService=__decorate([(0x0,common_1['Injectable'])(),__metadata('design:paramtypes',[config_1[_0x5b389a(0x1d1)],axios_1[_0x5b389a(0x1e8)]])],AipptService),exports[_0x5b389a(0x1b5)]=AipptService;