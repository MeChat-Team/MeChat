'use strict';const _0x28bd17=_0xa41c;(function(_0xacb3df,_0x59725b){const _0x2183bc=_0xa41c,_0x25128b=_0xacb3df();while(!![]){try{const _0x253a18=-parseInt(_0x2183bc(0x18d))/0x1+-parseInt(_0x2183bc(0x1a3))/0x2*(-parseInt(_0x2183bc(0x1b7))/0x3)+parseInt(_0x2183bc(0x1c5))/0x4*(-parseInt(_0x2183bc(0x1c2))/0x5)+-parseInt(_0x2183bc(0x1b2))/0x6*(-parseInt(_0x2183bc(0x186))/0x7)+parseInt(_0x2183bc(0x1ae))/0x8+-parseInt(_0x2183bc(0x19e))/0x9*(parseInt(_0x2183bc(0x189))/0xa)+parseInt(_0x2183bc(0x1c1))/0xb*(-parseInt(_0x2183bc(0x195))/0xc);if(_0x253a18===_0x59725b)break;else _0x25128b['push'](_0x25128b['shift']());}catch(_0x242e44){_0x25128b['push'](_0x25128b['shift']());}}}(_0x55d8,0x1a04f));var __decorate=this&&this[_0x28bd17(0x1c6)]||function(_0x6e236c,_0x52ac59,_0x308109,_0x4a2a1f){const _0x2735ea=_0x28bd17;var _0x512528=arguments['length'],_0x2d3361=_0x512528<0x3?_0x52ac59:_0x4a2a1f===null?_0x4a2a1f=Object[_0x2735ea(0x193)](_0x52ac59,_0x308109):_0x4a2a1f,_0x1f4158;if(typeof Reflect==='object'&&typeof Reflect[_0x2735ea(0x1af)]==='function')_0x2d3361=Reflect[_0x2735ea(0x1af)](_0x6e236c,_0x52ac59,_0x308109,_0x4a2a1f);else{for(var _0x1b5792=_0x6e236c[_0x2735ea(0x188)]-0x1;_0x1b5792>=0x0;_0x1b5792--)if(_0x1f4158=_0x6e236c[_0x1b5792])_0x2d3361=(_0x512528<0x3?_0x1f4158(_0x2d3361):_0x512528>0x3?_0x1f4158(_0x52ac59,_0x308109,_0x2d3361):_0x1f4158(_0x52ac59,_0x308109))||_0x2d3361;}return _0x512528>0x3&&_0x2d3361&&Object[_0x2735ea(0x19a)](_0x52ac59,_0x308109,_0x2d3361),_0x2d3361;},__metadata=this&&this['__metadata']||function(_0x43f839,_0xdc194f){const _0x430a8d=_0x28bd17;if(typeof Reflect===_0x430a8d(0x1bc)&&typeof Reflect[_0x430a8d(0x1b5)]===_0x430a8d(0x1ad))return Reflect[_0x430a8d(0x1b5)](_0x43f839,_0xdc194f);};function _0xa41c(_0x1d56af,_0x1742a0){const _0x55d82c=_0x55d8();return _0xa41c=function(_0xa41c3,_0x306b3b){_0xa41c3=_0xa41c3-0x185;let _0x154b82=_0x55d82c[_0xa41c3];return _0x154b82;},_0xa41c(_0x1d56af,_0x1742a0);}Object['defineProperty'](exports,_0x28bd17(0x197),{'value':!![]}),exports['AipptService']=void 0x0;function _0x55d8(){const _0xd4f731=['rxjs/operators','split','@nestjs/config','11ImCtdQ','5kiIQLL','next','pop','74036NXcKDV','__decorate','mergeMap','103306ohLgJz','trim','length','1010JLTcff','/ppt/generateOutline','lang','/ppt/asyncPptInfo','58215wPtbsa','text/event-stream','apiToken','apiBaseUrl','parse','@nestjs/axios','getOwnPropertyDescriptor','rxjs','589956YgaAht','data:\x20','__esModule','prompt','Failed\x20to\x20parse\x20SSE\x20data:','defineProperty','Observable','subject','generateOutline','12591vSkBnr','/ppt/generateContent','keep-alive','httpService','configService','278kOeJXx','error','no-cache','map','ConfigService','stream','startsWith','asyncPptInfo','get','templateId','function','1011264vBOshf','decorate','DOCMEE_API_URL','HttpService','18yFbsLc','data','handleSSEStream','metadata','slice','4383ZcNjHF','destroy','post','pipe','end','object','design:paramtypes'];_0x55d8=function(){return _0xd4f731;};return _0x55d8();}const common_1=require('@nestjs/common'),rxjs_1=require(_0x28bd17(0x194)),config_1=require(_0x28bd17(0x1c0)),axios_1=require(_0x28bd17(0x192)),operators_1=require(_0x28bd17(0x1be));let AipptService=class AipptService{constructor(_0x9f0d72,_0x414f73){const _0x239b8b=_0x28bd17;this[_0x239b8b(0x1a2)]=_0x9f0d72,this[_0x239b8b(0x1a1)]=_0x414f73,this[_0x239b8b(0x18f)]=this[_0x239b8b(0x1a2)]['get']('DOCMEE_API_TOKEN'),this['apiBaseUrl']=this['configService']['get'](_0x239b8b(0x1b0));}[_0x28bd17(0x1b4)](_0x4623f1){const _0x1b1a88=_0x28bd17;return new rxjs_1[(_0x1b1a88(0x19b))](_0x1bc939=>{const _0x1181db=_0x1b1a88;let _0x48d0bd='';return _0x4623f1['on'](_0x1181db(0x1b3),_0x4b4dcb=>{const _0x222a12=_0x1181db;_0x48d0bd+=_0x4b4dcb['toString']();const _0x19bf92=_0x48d0bd[_0x222a12(0x1bf)]('\x0a');_0x48d0bd=_0x19bf92[_0x222a12(0x1c4)]()||'';for(const _0x40af54 of _0x19bf92){if(_0x40af54[_0x222a12(0x187)]()&&_0x40af54[_0x222a12(0x1a9)](_0x222a12(0x196)))try{const _0x4b77b6=JSON[_0x222a12(0x191)](_0x40af54[_0x222a12(0x1b6)](0x6));_0x1bc939[_0x222a12(0x1c3)](_0x4b77b6);}catch(_0x1b8237){console['error'](_0x222a12(0x199),_0x1b8237);}}}),_0x4623f1['on'](_0x1181db(0x1bb),()=>{const _0x62e3b2=_0x1181db;if(_0x48d0bd['trim']())try{const _0x47318e=JSON[_0x62e3b2(0x191)](_0x48d0bd['slice'](0x6));_0x1bc939['next'](_0x47318e);}catch(_0x45a951){console[_0x62e3b2(0x1a4)]('Failed\x20to\x20parse\x20remaining\x20SSE\x20data:',_0x45a951);}_0x1bc939['complete']();}),_0x4623f1['on']('error',_0x38073b=>{_0x1bc939['error'](_0x38073b);}),()=>{const _0x9c6b2b=_0x1181db;_0x4623f1[_0x9c6b2b(0x1b8)]();};});}[_0x28bd17(0x19d)](_0x1d0227){const _0x55405a=_0x28bd17,_0xe1b021=this[_0x55405a(0x190)]+_0x55405a(0x18a),_0x51feca={'stream':!![],'length':_0x1d0227[_0x55405a(0x188)],'lang':_0x1d0227[_0x55405a(0x18b)],'prompt':_0x1d0227[_0x55405a(0x198)],'subject':_0x1d0227[_0x55405a(0x19c)],'dataUrl':_0x1d0227['dataUrl']};return this[_0x55405a(0x1a1)][_0x55405a(0x1b9)](_0xe1b021,_0x51feca,{'headers':{'Authorization':this[_0x55405a(0x18f)],'Accept':_0x55405a(0x18e),'Cache-Control':_0x55405a(0x1a5),'Connection':_0x55405a(0x1a0)},'responseType':_0x55405a(0x1a8)})[_0x55405a(0x1ba)]((0x0,operators_1['map'])(_0x1ef8f9=>_0x1ef8f9[_0x55405a(0x1b3)]),(0x0,operators_1[_0x55405a(0x185)])(_0x875b66=>this['handleSSEStream'](_0x875b66)));}['generateContent'](_0x5a72ae){const _0x2a4480=_0x28bd17,_0x1dbfb7=this[_0x2a4480(0x190)]+_0x2a4480(0x19f);return this[_0x2a4480(0x1a1)]['post'](_0x1dbfb7,{'templateId':_0x5a72ae[_0x2a4480(0x1ac)],'outlineMarkdown':_0x5a72ae['outlineMarkdown'],'asyncGenPptx':!![],'prompt':_0x5a72ae[_0x2a4480(0x198)],'dataUrl':_0x5a72ae['dataUrl']},{'headers':{'Authorization':this['apiToken'],'Accept':_0x2a4480(0x18e),'Cache-Control':'no-cache','Connection':_0x2a4480(0x1a0)},'responseType':_0x2a4480(0x1a8)})[_0x2a4480(0x1ba)]((0x0,operators_1[_0x2a4480(0x1a6)])(_0x5a8f89=>_0x5a8f89['data']),(0x0,operators_1[_0x2a4480(0x185)])(_0x323666=>this[_0x2a4480(0x1b4)](_0x323666)));}async[_0x28bd17(0x1aa)](_0x962f2b){const _0x11c582=_0x28bd17,_0xad9a56=this[_0x11c582(0x190)]+_0x11c582(0x18c),_0x33e613=await this['httpService'][_0x11c582(0x1ab)](_0xad9a56,{'params':{'pptId':_0x962f2b},'headers':{'Authorization':this[_0x11c582(0x18f)]}})['toPromise']();return _0x33e613['data'];}};AipptService=__decorate([(0x0,common_1['Injectable'])(),__metadata(_0x28bd17(0x1bd),[config_1[_0x28bd17(0x1a7)],axios_1[_0x28bd17(0x1b1)]])],AipptService),exports['AipptService']=AipptService;