'use strict';function _0x1507(_0x3ef155,_0x3a68aa){const _0x3c75db=_0x3c75();return _0x1507=function(_0x15074f,_0x485de0){_0x15074f=_0x15074f-0xba;let _0x43224a=_0x3c75db[_0x15074f];return _0x43224a;},_0x1507(_0x3ef155,_0x3a68aa);}const _0x48f5c8=_0x1507;function _0x3c75(){const _0x194c47=['length','parse','map','metadata','keep-alive','end','445PVhxge','__esModule','httpService','split','trim','no-cache','364101eeIGIY','20XqtDDz','object','slice','function','stream','toString','DOCMEE_API_URL','generateContent','configService','handleSSEStream','@nestjs/common','asyncPptInfo','4661006pDYKvc','Failed\x20to\x20parse\x20remaining\x20SSE\x20data:','getOwnPropertyDescriptor','dataUrl','defineProperty','HttpService','12097810ipKxJe','error','next','lang','8QAUfUr','design:paramtypes','1264478vmrHgb','apiToken','post','apiBaseUrl','/ppt/generateContent','__decorate','Failed\x20to\x20parse\x20SSE\x20data:','745392LbuubS','12738JqsyqN','text/event-stream','startsWith','pop','subject','/ppt/asyncPptInfo','pipe','AipptService','mergeMap','__metadata','6999903icqKnB','decorate','Injectable','data','prompt','generateOutline'];_0x3c75=function(){return _0x194c47;};return _0x3c75();}(function(_0x54941b,_0x3b2c30){const _0x1665fd=_0x1507,_0x30bbdd=_0x54941b();while(!![]){try{const _0x1e9c35=parseInt(_0x1665fd(0xe6))/0x1+-parseInt(_0x1665fd(0xdf))/0x2+-parseInt(_0x1665fd(0xc6))/0x3*(parseInt(_0x1665fd(0xc7))/0x4)+parseInt(_0x1665fd(0xc0))/0x5*(-parseInt(_0x1665fd(0xe7))/0x6)+parseInt(_0x1665fd(0xd3))/0x7+parseInt(_0x1665fd(0xdd))/0x8*(-parseInt(_0x1665fd(0xf1))/0x9)+parseInt(_0x1665fd(0xd9))/0xa;if(_0x1e9c35===_0x3b2c30)break;else _0x30bbdd['push'](_0x30bbdd['shift']());}catch(_0x409a9e){_0x30bbdd['push'](_0x30bbdd['shift']());}}}(_0x3c75,0x6560b));var __decorate=this&&this[_0x48f5c8(0xe4)]||function(_0xa6fb45,_0x162a66,_0x45093b,_0x358c33){const _0x4b934b=_0x48f5c8;var _0x59112d=arguments[_0x4b934b(0xba)],_0x38dc05=_0x59112d<0x3?_0x162a66:_0x358c33===null?_0x358c33=Object[_0x4b934b(0xd5)](_0x162a66,_0x45093b):_0x358c33,_0x49cc19;if(typeof Reflect===_0x4b934b(0xc8)&&typeof Reflect[_0x4b934b(0xf2)]===_0x4b934b(0xca))_0x38dc05=Reflect[_0x4b934b(0xf2)](_0xa6fb45,_0x162a66,_0x45093b,_0x358c33);else{for(var _0xf2b7dc=_0xa6fb45[_0x4b934b(0xba)]-0x1;_0xf2b7dc>=0x0;_0xf2b7dc--)if(_0x49cc19=_0xa6fb45[_0xf2b7dc])_0x38dc05=(_0x59112d<0x3?_0x49cc19(_0x38dc05):_0x59112d>0x3?_0x49cc19(_0x162a66,_0x45093b,_0x38dc05):_0x49cc19(_0x162a66,_0x45093b))||_0x38dc05;}return _0x59112d>0x3&&_0x38dc05&&Object[_0x4b934b(0xd7)](_0x162a66,_0x45093b,_0x38dc05),_0x38dc05;},__metadata=this&&this[_0x48f5c8(0xf0)]||function(_0xb588b1,_0x42a763){const _0x284757=_0x48f5c8;if(typeof Reflect==='object'&&typeof Reflect[_0x284757(0xbd)]===_0x284757(0xca))return Reflect['metadata'](_0xb588b1,_0x42a763);};Object[_0x48f5c8(0xd7)](exports,_0x48f5c8(0xc1),{'value':!![]}),exports[_0x48f5c8(0xee)]=void 0x0;const common_1=require(_0x48f5c8(0xd1)),rxjs_1=require('rxjs'),config_1=require('@nestjs/config'),axios_1=require('@nestjs/axios'),operators_1=require('rxjs/operators');let AipptService=class AipptService{constructor(_0x47bfd0,_0x380bd8){const _0x5dcc34=_0x48f5c8;this[_0x5dcc34(0xcf)]=_0x47bfd0,this[_0x5dcc34(0xc2)]=_0x380bd8,this[_0x5dcc34(0xe0)]=this['configService']['get']('DOCMEE_API_TOKEN'),this[_0x5dcc34(0xe2)]=this[_0x5dcc34(0xcf)]['get'](_0x5dcc34(0xcd));}[_0x48f5c8(0xd0)](_0x52521c){return new rxjs_1['Observable'](_0x3405f1=>{const _0x851da9=_0x1507;let _0x1332b1='';return _0x52521c['on'](_0x851da9(0xf4),_0x38fe71=>{const _0xcd8f59=_0x851da9;_0x1332b1+=_0x38fe71[_0xcd8f59(0xcc)]();const _0x553273=_0x1332b1[_0xcd8f59(0xc3)]('\x0a');_0x1332b1=_0x553273[_0xcd8f59(0xea)]()||'';for(const _0x6445b4 of _0x553273){if(_0x6445b4[_0xcd8f59(0xc4)]()&&_0x6445b4[_0xcd8f59(0xe9)]('data:\x20'))try{const _0x2cf2ab=JSON[_0xcd8f59(0xbb)](_0x6445b4[_0xcd8f59(0xc9)](0x6));_0x3405f1[_0xcd8f59(0xdb)](_0x2cf2ab);}catch(_0x3a16d1){console[_0xcd8f59(0xda)](_0xcd8f59(0xe5),_0x3a16d1);}}}),_0x52521c['on'](_0x851da9(0xbf),()=>{const _0xf04227=_0x851da9;if(_0x1332b1['trim']())try{const _0x78f47f=JSON[_0xf04227(0xbb)](_0x1332b1['slice'](0x6));_0x3405f1[_0xf04227(0xdb)](_0x78f47f);}catch(_0x3985d9){console['error'](_0xf04227(0xd4),_0x3985d9);}_0x3405f1['complete']();}),_0x52521c['on'](_0x851da9(0xda),_0x20812e=>{const _0x5e67d2=_0x851da9;_0x3405f1[_0x5e67d2(0xda)](_0x20812e);}),()=>{_0x52521c['destroy']();};});}[_0x48f5c8(0xf6)](_0x238fa3){const _0x3f91ff=_0x48f5c8,_0x42a172=this[_0x3f91ff(0xe2)]+'/ppt/generateOutline',_0x216961={'stream':!![],'length':_0x238fa3['length'],'lang':_0x238fa3[_0x3f91ff(0xdc)],'prompt':_0x238fa3[_0x3f91ff(0xf5)],'subject':_0x238fa3[_0x3f91ff(0xeb)],'dataUrl':_0x238fa3['dataUrl']};return this[_0x3f91ff(0xc2)][_0x3f91ff(0xe1)](_0x42a172,_0x216961,{'headers':{'Authorization':this['apiToken'],'Accept':_0x3f91ff(0xe8),'Cache-Control':_0x3f91ff(0xc5),'Connection':_0x3f91ff(0xbe)},'responseType':_0x3f91ff(0xcb)})['pipe']((0x0,operators_1[_0x3f91ff(0xbc)])(_0x58c2f1=>_0x58c2f1[_0x3f91ff(0xf4)]),(0x0,operators_1['mergeMap'])(_0x2a7b4f=>this['handleSSEStream'](_0x2a7b4f)));}[_0x48f5c8(0xce)](_0x2c36af){const _0x1b2aa4=_0x48f5c8,_0x41d3a3=this[_0x1b2aa4(0xe2)]+_0x1b2aa4(0xe3);return this[_0x1b2aa4(0xc2)]['post'](_0x41d3a3,{'templateId':_0x2c36af['templateId'],'outlineMarkdown':_0x2c36af['outlineMarkdown'],'asyncGenPptx':!![],'prompt':_0x2c36af['prompt'],'dataUrl':_0x2c36af[_0x1b2aa4(0xd6)]},{'headers':{'Authorization':this['apiToken'],'Accept':_0x1b2aa4(0xe8),'Cache-Control':'no-cache','Connection':_0x1b2aa4(0xbe)},'responseType':_0x1b2aa4(0xcb)})[_0x1b2aa4(0xed)]((0x0,operators_1[_0x1b2aa4(0xbc)])(_0x5b910b=>_0x5b910b['data']),(0x0,operators_1[_0x1b2aa4(0xef)])(_0x314f42=>this[_0x1b2aa4(0xd0)](_0x314f42)));}async[_0x48f5c8(0xd2)](_0x3992d1){const _0x200cc7=_0x48f5c8,_0x3a70e8=this[_0x200cc7(0xe2)]+_0x200cc7(0xec),_0x28c301=await this['httpService']['get'](_0x3a70e8,{'params':{'pptId':_0x3992d1},'headers':{'Authorization':this[_0x200cc7(0xe0)]}})['toPromise']();return _0x28c301[_0x200cc7(0xf4)];}};AipptService=__decorate([(0x0,common_1[_0x48f5c8(0xf3)])(),__metadata(_0x48f5c8(0xde),[config_1['ConfigService'],axios_1[_0x48f5c8(0xd8)]])],AipptService),exports['AipptService']=AipptService;