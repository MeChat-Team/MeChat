'use strict';const _0x2268d2=_0x1757;(function(_0x3515a3,_0x404d99){const _0x21dc4a=_0x1757,_0x4d4677=_0x3515a3();while(!![]){try{const _0x299de3=parseInt(_0x21dc4a(0x191))/0x1+-parseInt(_0x21dc4a(0x17a))/0x2+parseInt(_0x21dc4a(0x18b))/0x3*(parseInt(_0x21dc4a(0x18f))/0x4)+parseInt(_0x21dc4a(0x19c))/0x5*(parseInt(_0x21dc4a(0x175))/0x6)+parseInt(_0x21dc4a(0x170))/0x7*(parseInt(_0x21dc4a(0x18d))/0x8)+-parseInt(_0x21dc4a(0x171))/0x9+parseInt(_0x21dc4a(0x190))/0xa*(-parseInt(_0x21dc4a(0x163))/0xb);if(_0x299de3===_0x404d99)break;else _0x4d4677['push'](_0x4d4677['shift']());}catch(_0x468bbf){_0x4d4677['push'](_0x4d4677['shift']());}}}(_0x54cc,0xad743));function _0x1757(_0x56c188,_0xf909c2){const _0x54cc0f=_0x54cc();return _0x1757=function(_0x175761,_0x163eb2){_0x175761=_0x175761-0x15e;let _0x29812b=_0x54cc0f[_0x175761];return _0x29812b;},_0x1757(_0x56c188,_0xf909c2);}var __decorate=this&&this[_0x2268d2(0x15f)]||function(_0x2b162f,_0x2088b0,_0x48d145,_0x1a97fc){const _0x5dd68b=_0x2268d2;var _0x11cacb=arguments[_0x5dd68b(0x16d)],_0x1878f9=_0x11cacb<0x3?_0x2088b0:_0x1a97fc===null?_0x1a97fc=Object[_0x5dd68b(0x16f)](_0x2088b0,_0x48d145):_0x1a97fc,_0xf3049e;if(typeof Reflect===_0x5dd68b(0x187)&&typeof Reflect[_0x5dd68b(0x186)]==='function')_0x1878f9=Reflect[_0x5dd68b(0x186)](_0x2b162f,_0x2088b0,_0x48d145,_0x1a97fc);else{for(var _0x39f019=_0x2b162f[_0x5dd68b(0x16d)]-0x1;_0x39f019>=0x0;_0x39f019--)if(_0xf3049e=_0x2b162f[_0x39f019])_0x1878f9=(_0x11cacb<0x3?_0xf3049e(_0x1878f9):_0x11cacb>0x3?_0xf3049e(_0x2088b0,_0x48d145,_0x1878f9):_0xf3049e(_0x2088b0,_0x48d145))||_0x1878f9;}return _0x11cacb>0x3&&_0x1878f9&&Object[_0x5dd68b(0x16e)](_0x2088b0,_0x48d145,_0x1878f9),_0x1878f9;},__metadata=this&&this[_0x2268d2(0x19a)]||function(_0x4429de,_0x578ec9){const _0x2563cf=_0x2268d2;if(typeof Reflect==='object'&&typeof Reflect[_0x2563cf(0x16c)]===_0x2563cf(0x16a))return Reflect[_0x2563cf(0x16c)](_0x4429de,_0x578ec9);};function _0x54cc(){const _0x1443d5=['end','apiBaseUrl','text/event-stream','ConfigService','generateContent','data','__decorate','templateId','outlineMarkdown','rxjs','1182324OpGxLR','Injectable','error','slice','no-cache','apiToken','configService','function','prompt','metadata','length','defineProperty','getOwnPropertyDescriptor','2807203VjOGyu','611280rrsFVb','dataUrl','AipptService','/ppt/generateContent','6XCbbAO','rxjs/operators','parse','keep-alive','Failed\x20to\x20parse\x20SSE\x20data:','639706mYLNts','pipe','complete','split','httpService','@nestjs/axios','mergeMap','next','get','HttpService','subject','/ppt/asyncPptInfo','decorate','object','DOCMEE_API_URL','toPromise','lang','1424238CBXnOp','stream','8hgQYvU','DOCMEE_API_TOKEN','8zkbLdP','180jmpfII','301365jqRefb','startsWith','map','design:paramtypes','handleSSEStream','trim','generateOutline','pop','Failed\x20to\x20parse\x20remaining\x20SSE\x20data:','__metadata','__esModule','6905330ohILVm'];_0x54cc=function(){return _0x1443d5;};return _0x54cc();}Object[_0x2268d2(0x16e)](exports,_0x2268d2(0x19b),{'value':!![]}),exports[_0x2268d2(0x173)]=void 0x0;const common_1=require('@nestjs/common'),rxjs_1=require(_0x2268d2(0x162)),config_1=require('@nestjs/config'),axios_1=require(_0x2268d2(0x17f)),operators_1=require(_0x2268d2(0x176));let AipptService=class AipptService{constructor(_0x2da911,_0x1f0728){const _0x2beeae=_0x2268d2;this['configService']=_0x2da911,this[_0x2beeae(0x17e)]=_0x1f0728,this[_0x2beeae(0x168)]=this[_0x2beeae(0x169)][_0x2beeae(0x182)](_0x2beeae(0x18e)),this[_0x2beeae(0x19e)]=this[_0x2beeae(0x169)]['get'](_0x2beeae(0x188));}['handleSSEStream'](_0x4166e7){return new rxjs_1['Observable'](_0x122470=>{const _0x7942ef=_0x1757;let _0x5369fa='';return _0x4166e7['on'](_0x7942ef(0x15e),_0x35dd31=>{const _0x20edbc=_0x7942ef;_0x5369fa+=_0x35dd31['toString']();const _0xd35071=_0x5369fa[_0x20edbc(0x17d)]('\x0a');_0x5369fa=_0xd35071[_0x20edbc(0x198)]()||'';for(const _0x149d9a of _0xd35071){if(_0x149d9a[_0x20edbc(0x196)]()&&_0x149d9a[_0x20edbc(0x192)]('data:\x20'))try{const _0x43f272=JSON[_0x20edbc(0x177)](_0x149d9a[_0x20edbc(0x166)](0x6));_0x122470['next'](_0x43f272);}catch(_0x2dac97){console[_0x20edbc(0x165)](_0x20edbc(0x179),_0x2dac97);}}}),_0x4166e7['on'](_0x7942ef(0x19d),()=>{const _0x5ed236=_0x7942ef;if(_0x5369fa[_0x5ed236(0x196)]())try{const _0x5ee33a=JSON[_0x5ed236(0x177)](_0x5369fa['slice'](0x6));_0x122470[_0x5ed236(0x181)](_0x5ee33a);}catch(_0x550c87){console[_0x5ed236(0x165)](_0x5ed236(0x199),_0x550c87);}_0x122470[_0x5ed236(0x17c)]();}),_0x4166e7['on']('error',_0x4b6c81=>{const _0x32b12f=_0x7942ef;_0x122470[_0x32b12f(0x165)](_0x4b6c81);}),()=>{_0x4166e7['destroy']();};});}[_0x2268d2(0x197)](_0x2eaf9e){const _0xe6d913=_0x2268d2,_0x223c06=this[_0xe6d913(0x19e)]+'/ppt/generateOutline',_0x5885d9={'stream':!![],'length':_0x2eaf9e['length'],'lang':_0x2eaf9e[_0xe6d913(0x18a)],'prompt':_0x2eaf9e[_0xe6d913(0x16b)],'subject':_0x2eaf9e[_0xe6d913(0x184)],'dataUrl':_0x2eaf9e[_0xe6d913(0x172)]};return this['httpService']['post'](_0x223c06,_0x5885d9,{'headers':{'Authorization':this[_0xe6d913(0x168)],'Accept':_0xe6d913(0x19f),'Cache-Control':_0xe6d913(0x167),'Connection':_0xe6d913(0x178)},'responseType':'stream'})['pipe']((0x0,operators_1[_0xe6d913(0x193)])(_0x5f23fb=>_0x5f23fb[_0xe6d913(0x15e)]),(0x0,operators_1['mergeMap'])(_0x50dc0c=>this['handleSSEStream'](_0x50dc0c)));}[_0x2268d2(0x1a1)](_0x4e4dd6){const _0x4f209d=_0x2268d2,_0x10ea01=this[_0x4f209d(0x19e)]+_0x4f209d(0x174);return this[_0x4f209d(0x17e)]['post'](_0x10ea01,{'templateId':_0x4e4dd6[_0x4f209d(0x160)],'outlineMarkdown':_0x4e4dd6[_0x4f209d(0x161)],'asyncGenPptx':!![],'prompt':_0x4e4dd6[_0x4f209d(0x16b)],'dataUrl':_0x4e4dd6[_0x4f209d(0x172)]},{'headers':{'Authorization':this['apiToken'],'Accept':_0x4f209d(0x19f),'Cache-Control':'no-cache','Connection':_0x4f209d(0x178)},'responseType':_0x4f209d(0x18c)})[_0x4f209d(0x17b)]((0x0,operators_1[_0x4f209d(0x193)])(_0x25544b=>_0x25544b['data']),(0x0,operators_1[_0x4f209d(0x180)])(_0x49eab8=>this[_0x4f209d(0x195)](_0x49eab8)));}async['asyncPptInfo'](_0x23a4cb){const _0x1bbf20=_0x2268d2,_0x805874=this['apiBaseUrl']+_0x1bbf20(0x185),_0x429cea=await this[_0x1bbf20(0x17e)][_0x1bbf20(0x182)](_0x805874,{'params':{'pptId':_0x23a4cb},'headers':{'Authorization':this['apiToken']}})[_0x1bbf20(0x189)]();return _0x429cea[_0x1bbf20(0x15e)];}};AipptService=__decorate([(0x0,common_1[_0x2268d2(0x164)])(),__metadata(_0x2268d2(0x194),[config_1[_0x2268d2(0x1a0)],axios_1[_0x2268d2(0x183)]])],AipptService),exports[_0x2268d2(0x173)]=AipptService;