'use strict';const _0x149491=_0x5a66;(function(_0x899dc5,_0x4fa972){const _0x30747a=_0x5a66,_0x1ba963=_0x899dc5();while(!![]){try{const _0x287042=-parseInt(_0x30747a(0xeb))/0x1+parseInt(_0x30747a(0xfe))/0x2*(parseInt(_0x30747a(0x115))/0x3)+-parseInt(_0x30747a(0xf1))/0x4*(-parseInt(_0x30747a(0xf6))/0x5)+-parseInt(_0x30747a(0x104))/0x6*(parseInt(_0x30747a(0xf4))/0x7)+parseInt(_0x30747a(0xe7))/0x8+-parseInt(_0x30747a(0x10d))/0x9+-parseInt(_0x30747a(0x113))/0xa;if(_0x287042===_0x4fa972)break;else _0x1ba963['push'](_0x1ba963['shift']());}catch(_0x5c12e8){_0x1ba963['push'](_0x1ba963['shift']());}}}(_0x29f2,0x24b7f));function _0x29f2(){const _0x4c23b9=['@nestjs/axios','design:paramtypes','generateOutline','apiBaseUrl','/ppt/asyncPptInfo','@nestjs/config','destroy','1657840sVmqia','asyncPptInfo','generateContent','apiToken','16009HfTjTA','dataUrl','next','slice','split','toPromise','33624uvhWYR','__metadata','metadata','30506UmSRpK','rxjs/operators','140EXsHOv','keep-alive','function','object','text/event-stream','trim','parse','configService','2iILsYI','post','no-cache','map','Failed\x20to\x20parse\x20remaining\x20SSE\x20data:','__decorate','258rSYtFp','mergeMap','rxjs','@nestjs/common','Failed\x20to\x20parse\x20SSE\x20data:','stream','lang','handleSSEStream','length','2028474Dhwhae','pipe','AipptService','complete','error','templateId','747240CuwAvz','data','633942hYKMnn','get','defineProperty','httpService','subject','end'];_0x29f2=function(){return _0x4c23b9;};return _0x29f2();}var __decorate=this&&this[_0x149491(0x103)]||function(_0x241968,_0x143c5d,_0x8e4049,_0x5ad0d2){const _0x40ef74=_0x149491;var _0x1327ab=arguments['length'],_0x3a87df=_0x1327ab<0x3?_0x143c5d:_0x5ad0d2===null?_0x5ad0d2=Object['getOwnPropertyDescriptor'](_0x143c5d,_0x8e4049):_0x5ad0d2,_0x364893;if(typeof Reflect===_0x40ef74(0xf9)&&typeof Reflect['decorate']===_0x40ef74(0xf8))_0x3a87df=Reflect['decorate'](_0x241968,_0x143c5d,_0x8e4049,_0x5ad0d2);else{for(var _0x18ffb6=_0x241968[_0x40ef74(0x10c)]-0x1;_0x18ffb6>=0x0;_0x18ffb6--)if(_0x364893=_0x241968[_0x18ffb6])_0x3a87df=(_0x1327ab<0x3?_0x364893(_0x3a87df):_0x1327ab>0x3?_0x364893(_0x143c5d,_0x8e4049,_0x3a87df):_0x364893(_0x143c5d,_0x8e4049))||_0x3a87df;}return _0x1327ab>0x3&&_0x3a87df&&Object[_0x40ef74(0x117)](_0x143c5d,_0x8e4049,_0x3a87df),_0x3a87df;},__metadata=this&&this[_0x149491(0xf2)]||function(_0x5213ad,_0x3f11b0){const _0x4bbbf0=_0x149491;if(typeof Reflect===_0x4bbbf0(0xf9)&&typeof Reflect[_0x4bbbf0(0xf3)]==='function')return Reflect[_0x4bbbf0(0xf3)](_0x5213ad,_0x3f11b0);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['AipptService']=void 0x0;function _0x5a66(_0x2b1d2d,_0xddf1e8){const _0x29f212=_0x29f2();return _0x5a66=function(_0x5a6610,_0x450230){_0x5a6610=_0x5a6610-0xe6;let _0x30f4a1=_0x29f212[_0x5a6610];return _0x30f4a1;},_0x5a66(_0x2b1d2d,_0xddf1e8);}const common_1=require(_0x149491(0x107)),rxjs_1=require(_0x149491(0x106)),config_1=require(_0x149491(0x120)),axios_1=require(_0x149491(0x11b)),operators_1=require(_0x149491(0xf5));let AipptService=class AipptService{constructor(_0x105493,_0x1ffc62){const _0x5d5a17=_0x149491;this[_0x5d5a17(0xfd)]=_0x105493,this[_0x5d5a17(0x118)]=_0x1ffc62,this[_0x5d5a17(0xea)]=this['configService']['get']('DOCMEE_API_TOKEN'),this['apiBaseUrl']=this[_0x5d5a17(0xfd)]['get']('DOCMEE_API_URL');}[_0x149491(0x10b)](_0x4464db){return new rxjs_1['Observable'](_0x1c4d88=>{const _0x4b5786=_0x5a66;let _0x4e6184='';return _0x4464db['on']('data',_0x39655a=>{const _0x1acd18=_0x5a66;_0x4e6184+=_0x39655a['toString']();const _0x30afb8=_0x4e6184[_0x1acd18(0xef)]('\x0a');_0x4e6184=_0x30afb8['pop']()||'';for(const _0x45c656 of _0x30afb8){if(_0x45c656[_0x1acd18(0xfb)]()&&_0x45c656['startsWith']('data:\x20'))try{const _0x1ec813=JSON[_0x1acd18(0xfc)](_0x45c656[_0x1acd18(0xee)](0x6));_0x1c4d88[_0x1acd18(0xed)](_0x1ec813);}catch(_0x4f084c){console[_0x1acd18(0x111)](_0x1acd18(0x108),_0x4f084c);}}}),_0x4464db['on'](_0x4b5786(0x11a),()=>{const _0x354d30=_0x4b5786;if(_0x4e6184[_0x354d30(0xfb)]())try{const _0x336dbe=JSON[_0x354d30(0xfc)](_0x4e6184[_0x354d30(0xee)](0x6));_0x1c4d88['next'](_0x336dbe);}catch(_0x28eca4){console[_0x354d30(0x111)](_0x354d30(0x102),_0x28eca4);}_0x1c4d88[_0x354d30(0x110)]();}),_0x4464db['on'](_0x4b5786(0x111),_0x131e12=>{const _0x23ab77=_0x4b5786;_0x1c4d88[_0x23ab77(0x111)](_0x131e12);}),()=>{const _0x5c4df4=_0x4b5786;_0x4464db[_0x5c4df4(0xe6)]();};});}[_0x149491(0x11d)](_0x3a82f4){const _0x39eacb=_0x149491,_0x545826=this[_0x39eacb(0x11e)]+'/ppt/generateOutline',_0x40b627={'stream':!![],'length':_0x3a82f4[_0x39eacb(0x10c)],'lang':_0x3a82f4[_0x39eacb(0x10a)],'prompt':_0x3a82f4['prompt'],'subject':_0x3a82f4[_0x39eacb(0x119)],'dataUrl':_0x3a82f4['dataUrl']};return this['httpService'][_0x39eacb(0xff)](_0x545826,_0x40b627,{'headers':{'Authorization':this['apiToken'],'Accept':_0x39eacb(0xfa),'Cache-Control':_0x39eacb(0x100),'Connection':_0x39eacb(0xf7)},'responseType':_0x39eacb(0x109)})[_0x39eacb(0x10e)]((0x0,operators_1[_0x39eacb(0x101)])(_0x188f66=>_0x188f66[_0x39eacb(0x114)]),(0x0,operators_1[_0x39eacb(0x105)])(_0x7798c=>this[_0x39eacb(0x10b)](_0x7798c)));}[_0x149491(0xe9)](_0x451365){const _0x10f92e=_0x149491,_0x2a2b91=this[_0x10f92e(0x11e)]+'/ppt/generateContent';return this[_0x10f92e(0x118)]['post'](_0x2a2b91,{'templateId':_0x451365[_0x10f92e(0x112)],'outlineMarkdown':_0x451365['outlineMarkdown'],'asyncGenPptx':!![],'prompt':_0x451365['prompt'],'dataUrl':_0x451365[_0x10f92e(0xec)]},{'headers':{'Authorization':this[_0x10f92e(0xea)],'Accept':'text/event-stream','Cache-Control':_0x10f92e(0x100),'Connection':_0x10f92e(0xf7)},'responseType':_0x10f92e(0x109)})[_0x10f92e(0x10e)]((0x0,operators_1[_0x10f92e(0x101)])(_0x34b0d2=>_0x34b0d2['data']),(0x0,operators_1['mergeMap'])(_0x388434=>this['handleSSEStream'](_0x388434)));}async[_0x149491(0xe8)](_0x3710bc){const _0x516546=_0x149491,_0x4e6080=this[_0x516546(0x11e)]+_0x516546(0x11f),_0x156a0a=await this[_0x516546(0x118)][_0x516546(0x116)](_0x4e6080,{'params':{'pptId':_0x3710bc},'headers':{'Authorization':this['apiToken']}})[_0x516546(0xf0)]();return _0x156a0a[_0x516546(0x114)];}};AipptService=__decorate([(0x0,common_1['Injectable'])(),__metadata(_0x149491(0x11c),[config_1['ConfigService'],axios_1['HttpService']])],AipptService),exports[_0x149491(0x10f)]=AipptService;