'use strict';const _0xacc528=_0x52b8;(function(_0x348862,_0x50d84e){const _0x41657a=_0x52b8,_0x37a29f=_0x348862();while(!![]){try{const _0x1e48ec=parseInt(_0x41657a(0x10f))/0x1*(-parseInt(_0x41657a(0x13d))/0x2)+-parseInt(_0x41657a(0x12e))/0x3*(parseInt(_0x41657a(0x111))/0x4)+parseInt(_0x41657a(0x10d))/0x5*(parseInt(_0x41657a(0x11a))/0x6)+parseInt(_0x41657a(0x122))/0x7+parseInt(_0x41657a(0x127))/0x8+parseInt(_0x41657a(0x13c))/0x9+parseInt(_0x41657a(0x133))/0xa*(-parseInt(_0x41657a(0x118))/0xb);if(_0x1e48ec===_0x50d84e)break;else _0x37a29f['push'](_0x37a29f['shift']());}catch(_0x254572){_0x37a29f['push'](_0x37a29f['shift']());}}}(_0x4d0b,0x7ac43));var __decorate=this&&this['__decorate']||function(_0x467831,_0x2eb73f,_0x3bb833,_0x413476){const _0x4602e9=_0x52b8;var _0x453f3e=arguments[_0x4602e9(0x11d)],_0x462c4d=_0x453f3e<0x3?_0x2eb73f:_0x413476===null?_0x413476=Object[_0x4602e9(0x10c)](_0x2eb73f,_0x3bb833):_0x413476,_0x206c4d;if(typeof Reflect===_0x4602e9(0x132)&&typeof Reflect[_0x4602e9(0x13a)]==='function')_0x462c4d=Reflect[_0x4602e9(0x13a)](_0x467831,_0x2eb73f,_0x3bb833,_0x413476);else{for(var _0x4873b0=_0x467831[_0x4602e9(0x11d)]-0x1;_0x4873b0>=0x0;_0x4873b0--)if(_0x206c4d=_0x467831[_0x4873b0])_0x462c4d=(_0x453f3e<0x3?_0x206c4d(_0x462c4d):_0x453f3e>0x3?_0x206c4d(_0x2eb73f,_0x3bb833,_0x462c4d):_0x206c4d(_0x2eb73f,_0x3bb833))||_0x462c4d;}return _0x453f3e>0x3&&_0x462c4d&&Object[_0x4602e9(0x12f)](_0x2eb73f,_0x3bb833,_0x462c4d),_0x462c4d;},__metadata=this&&this[_0xacc528(0x142)]||function(_0x37ec5e,_0x4e48ee){const _0x1cea0b=_0xacc528;if(typeof Reflect===_0x1cea0b(0x132)&&typeof Reflect[_0x1cea0b(0x13b)]==='function')return Reflect[_0x1cea0b(0x13b)](_0x37ec5e,_0x4e48ee);};Object[_0xacc528(0x12f)](exports,_0xacc528(0x134),{'value':!![]}),exports['AipptService']=void 0x0;function _0x4d0b(){const _0x15bc7e=['slice','@nestjs/axios','6HxRgyx','defineProperty','pipe','get','object','509970zOETkH','__esModule','HttpService','DOCMEE_API_TOKEN','design:paramtypes','Observable','no-cache','decorate','metadata','5752728OgMZoG','34102AcoOwy','/ppt/generateContent','DOCMEE_API_URL','dataUrl','error','__metadata','toString','asyncPptInfo','/ppt/generateOutline','prompt','subject','destroy','toPromise','data','outlineMarkdown','getOwnPropertyDescriptor','2821855xUqefw','Failed\x20to\x20parse\x20SSE\x20data:','5SvWSCM','stream','1592232FgaskR','apiBaseUrl','generateOutline','handleSSEStream','httpService','/ppt/asyncPptInfo','startsWith','99LWibIf','@nestjs/config','6VOVyOZ','templateId','map','length','trim','generateContent','parse','keep-alive','3462564AjeiCg','complete','next','configService','AipptService','1159840trSJym','lang','pop','apiToken','rxjs'];_0x4d0b=function(){return _0x15bc7e;};return _0x4d0b();}const common_1=require('@nestjs/common'),rxjs_1=require(_0xacc528(0x12b)),config_1=require(_0xacc528(0x119)),axios_1=require(_0xacc528(0x12d)),operators_1=require('rxjs/operators');function _0x52b8(_0x3ee097,_0x344d51){const _0x4d0b83=_0x4d0b();return _0x52b8=function(_0x52b81e,_0x2366bd){_0x52b81e=_0x52b81e-0x106;let _0x12162b=_0x4d0b83[_0x52b81e];return _0x12162b;},_0x52b8(_0x3ee097,_0x344d51);}let AipptService=class AipptService{constructor(_0x2a7d83,_0x221e33){const _0x53bd8f=_0xacc528;this[_0x53bd8f(0x125)]=_0x2a7d83,this[_0x53bd8f(0x115)]=_0x221e33,this['apiToken']=this[_0x53bd8f(0x125)][_0x53bd8f(0x131)](_0x53bd8f(0x136)),this[_0x53bd8f(0x112)]=this[_0x53bd8f(0x125)][_0x53bd8f(0x131)](_0x53bd8f(0x13f));}['handleSSEStream'](_0x5e5d3e){const _0x1ef0b3=_0xacc528;return new rxjs_1[(_0x1ef0b3(0x138))](_0x4c9839=>{const _0x77e847=_0x1ef0b3;let _0x5aa591='';return _0x5e5d3e['on']('data',_0x21f7e6=>{const _0x26be37=_0x52b8;_0x5aa591+=_0x21f7e6[_0x26be37(0x143)]();const _0x41496e=_0x5aa591['split']('\x0a');_0x5aa591=_0x41496e[_0x26be37(0x129)]()||'';for(const _0x5d63a3 of _0x41496e){if(_0x5d63a3[_0x26be37(0x11e)]()&&_0x5d63a3[_0x26be37(0x117)]('data:\x20'))try{const _0x2a8ced=JSON[_0x26be37(0x120)](_0x5d63a3[_0x26be37(0x12c)](0x6));_0x4c9839[_0x26be37(0x124)](_0x2a8ced);}catch(_0x5e17d3){console[_0x26be37(0x141)](_0x26be37(0x10e),_0x5e17d3);}}}),_0x5e5d3e['on']('end',()=>{const _0x12459f=_0x52b8;if(_0x5aa591['trim']())try{const _0x7de3fc=JSON[_0x12459f(0x120)](_0x5aa591['slice'](0x6));_0x4c9839[_0x12459f(0x124)](_0x7de3fc);}catch(_0x18b4b7){console[_0x12459f(0x141)]('Failed\x20to\x20parse\x20remaining\x20SSE\x20data:',_0x18b4b7);}_0x4c9839[_0x12459f(0x123)]();}),_0x5e5d3e['on'](_0x77e847(0x141),_0x51d5de=>{const _0x400057=_0x77e847;_0x4c9839[_0x400057(0x141)](_0x51d5de);}),()=>{const _0x32981d=_0x77e847;_0x5e5d3e[_0x32981d(0x108)]();};});}[_0xacc528(0x113)](_0x1e8998){const _0x176c88=_0xacc528,_0x4ddfea=this['apiBaseUrl']+_0x176c88(0x145),_0x4612c0={'stream':!![],'length':_0x1e8998[_0x176c88(0x11d)],'lang':_0x1e8998[_0x176c88(0x128)],'prompt':_0x1e8998['prompt'],'subject':_0x1e8998[_0x176c88(0x107)],'dataUrl':_0x1e8998[_0x176c88(0x140)]};return this[_0x176c88(0x115)]['post'](_0x4ddfea,_0x4612c0,{'headers':{'Authorization':this[_0x176c88(0x12a)],'Accept':'text/event-stream','Cache-Control':_0x176c88(0x139),'Connection':_0x176c88(0x121)},'responseType':'stream'})[_0x176c88(0x130)]((0x0,operators_1[_0x176c88(0x11c)])(_0x4da3eb=>_0x4da3eb[_0x176c88(0x10a)]),(0x0,operators_1['mergeMap'])(_0x3de2a2=>this[_0x176c88(0x114)](_0x3de2a2)));}[_0xacc528(0x11f)](_0x44ef7a){const _0xa89d25=_0xacc528,_0xb9a2ec=this[_0xa89d25(0x112)]+_0xa89d25(0x13e);return this[_0xa89d25(0x115)]['post'](_0xb9a2ec,{'templateId':_0x44ef7a[_0xa89d25(0x11b)],'outlineMarkdown':_0x44ef7a[_0xa89d25(0x10b)],'asyncGenPptx':!![],'prompt':_0x44ef7a[_0xa89d25(0x106)],'dataUrl':_0x44ef7a[_0xa89d25(0x140)]},{'headers':{'Authorization':this['apiToken'],'Accept':'text/event-stream','Cache-Control':_0xa89d25(0x139),'Connection':'keep-alive'},'responseType':_0xa89d25(0x110)})['pipe']((0x0,operators_1[_0xa89d25(0x11c)])(_0xecfa49=>_0xecfa49[_0xa89d25(0x10a)]),(0x0,operators_1['mergeMap'])(_0x880a00=>this[_0xa89d25(0x114)](_0x880a00)));}async[_0xacc528(0x144)](_0x483037){const _0x30f41b=_0xacc528,_0x57b090=this[_0x30f41b(0x112)]+_0x30f41b(0x116),_0x1065bb=await this[_0x30f41b(0x115)][_0x30f41b(0x131)](_0x57b090,{'params':{'pptId':_0x483037},'headers':{'Authorization':this[_0x30f41b(0x12a)]}})[_0x30f41b(0x109)]();return _0x1065bb[_0x30f41b(0x10a)];}};AipptService=__decorate([(0x0,common_1['Injectable'])(),__metadata(_0xacc528(0x137),[config_1['ConfigService'],axios_1[_0xacc528(0x135)]])],AipptService),exports[_0xacc528(0x126)]=AipptService;