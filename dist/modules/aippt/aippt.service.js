'use strict';function _0x3f78(_0x4ea37d,_0x3556a5){const _0x26ca80=_0x26ca();return _0x3f78=function(_0x3f788c,_0xefcf25){_0x3f788c=_0x3f788c-0x1e9;let _0x11ceca=_0x26ca80[_0x3f788c];return _0x11ceca;},_0x3f78(_0x4ea37d,_0x3556a5);}const _0x498fb2=_0x3f78;(function(_0x337364,_0x3378c6){const _0x371411=_0x3f78,_0x358874=_0x337364();while(!![]){try{const _0x8c9880=parseInt(_0x371411(0x1fa))/0x1+-parseInt(_0x371411(0x220))/0x2*(-parseInt(_0x371411(0x207))/0x3)+parseInt(_0x371411(0x225))/0x4*(-parseInt(_0x371411(0x215))/0x5)+-parseInt(_0x371411(0x21f))/0x6+parseInt(_0x371411(0x22b))/0x7*(-parseInt(_0x371411(0x1fb))/0x8)+-parseInt(_0x371411(0x226))/0x9+parseInt(_0x371411(0x213))/0xa*(parseInt(_0x371411(0x1f2))/0xb);if(_0x8c9880===_0x3378c6)break;else _0x358874['push'](_0x358874['shift']());}catch(_0x47145b){_0x358874['push'](_0x358874['shift']());}}}(_0x26ca,0x1d6cb));var __decorate=this&&this[_0x498fb2(0x21b)]||function(_0x5a5bbe,_0x36ac73,_0x43a6b1,_0xeeea53){const _0x12676b=_0x498fb2;var _0x4585ce=arguments[_0x12676b(0x218)],_0x4005ac=_0x4585ce<0x3?_0x36ac73:_0xeeea53===null?_0xeeea53=Object[_0x12676b(0x22c)](_0x36ac73,_0x43a6b1):_0xeeea53,_0x5616a9;if(typeof Reflect===_0x12676b(0x202)&&typeof Reflect[_0x12676b(0x228)]===_0x12676b(0x1ee))_0x4005ac=Reflect[_0x12676b(0x228)](_0x5a5bbe,_0x36ac73,_0x43a6b1,_0xeeea53);else{for(var _0x27231=_0x5a5bbe[_0x12676b(0x218)]-0x1;_0x27231>=0x0;_0x27231--)if(_0x5616a9=_0x5a5bbe[_0x27231])_0x4005ac=(_0x4585ce<0x3?_0x5616a9(_0x4005ac):_0x4585ce>0x3?_0x5616a9(_0x36ac73,_0x43a6b1,_0x4005ac):_0x5616a9(_0x36ac73,_0x43a6b1))||_0x4005ac;}return _0x4585ce>0x3&&_0x4005ac&&Object[_0x12676b(0x214)](_0x36ac73,_0x43a6b1,_0x4005ac),_0x4005ac;},__metadata=this&&this[_0x498fb2(0x22a)]||function(_0x18bc09,_0x46a6ab){const _0x5ed515=_0x498fb2;if(typeof Reflect===_0x5ed515(0x202)&&typeof Reflect['metadata']==='function')return Reflect[_0x5ed515(0x1ff)](_0x18bc09,_0x46a6ab);};Object[_0x498fb2(0x214)](exports,_0x498fb2(0x1f6),{'value':!![]}),exports[_0x498fb2(0x1f0)]=void 0x0;const common_1=require(_0x498fb2(0x221)),rxjs_1=require(_0x498fb2(0x1fe)),config_1=require('@nestjs/config'),axios_1=require(_0x498fb2(0x201)),operators_1=require('rxjs/operators');let AipptService=class AipptService{constructor(_0x3cedc3,_0x3f042d){const _0x48126c=_0x498fb2;this['configService']=_0x3cedc3,this[_0x48126c(0x1e9)]=_0x3f042d,this[_0x48126c(0x1fc)]=this[_0x48126c(0x1ec)][_0x48126c(0x20a)]('DOCMEE_API_TOKEN'),this['apiBaseUrl']=this[_0x48126c(0x1ec)][_0x48126c(0x20a)](_0x48126c(0x21d));}[_0x498fb2(0x1ea)](_0x482186){const _0x483bf9=_0x498fb2;return new rxjs_1[(_0x483bf9(0x206))](_0x22df9b=>{const _0x387320=_0x483bf9;let _0xb9c570='';return _0x482186['on'](_0x387320(0x209),_0x5ec494=>{const _0x91fd50=_0x387320;_0xb9c570+=_0x5ec494[_0x91fd50(0x217)]();const _0x57174d=_0xb9c570[_0x91fd50(0x208)]('\x0a');_0xb9c570=_0x57174d[_0x91fd50(0x1ef)]()||'';for(const _0x36ba4d of _0x57174d){if(_0x36ba4d[_0x91fd50(0x200)]()&&_0x36ba4d[_0x91fd50(0x1ed)](_0x91fd50(0x203)))try{const _0x339c8c=JSON[_0x91fd50(0x216)](_0x36ba4d[_0x91fd50(0x1f5)](0x6));_0x22df9b[_0x91fd50(0x1f7)](_0x339c8c);}catch(_0x18c624){console[_0x91fd50(0x21a)](_0x91fd50(0x20e),_0x18c624);}}}),_0x482186['on'](_0x387320(0x1f1),()=>{const _0x2ce6dc=_0x387320;if(_0xb9c570[_0x2ce6dc(0x200)]())try{const _0x113154=JSON[_0x2ce6dc(0x216)](_0xb9c570['slice'](0x6));_0x22df9b[_0x2ce6dc(0x1f7)](_0x113154);}catch(_0x119d84){console['error'](_0x2ce6dc(0x224),_0x119d84);}_0x22df9b[_0x2ce6dc(0x211)]();}),_0x482186['on'](_0x387320(0x21a),_0x5b73b2=>{const _0x192790=_0x387320;_0x22df9b[_0x192790(0x21a)](_0x5b73b2);}),()=>{const _0x3f7de2=_0x387320;_0x482186[_0x3f7de2(0x223)]();};});}[_0x498fb2(0x1f9)](_0x549ad5){const _0x1dfc02=_0x498fb2,_0x4fc013=this[_0x1dfc02(0x20d)]+'/ppt/generateOutline',_0x4ba5b1={'stream':!![],'length':_0x549ad5['length'],'lang':_0x549ad5['lang'],'prompt':_0x549ad5['prompt'],'subject':_0x549ad5[_0x1dfc02(0x20b)],'dataUrl':_0x549ad5[_0x1dfc02(0x205)]};return this['httpService'][_0x1dfc02(0x1f4)](_0x4fc013,_0x4ba5b1,{'headers':{'Authorization':this[_0x1dfc02(0x1fc)],'Accept':'text/event-stream','Cache-Control':'no-cache','Connection':_0x1dfc02(0x227)},'responseType':'stream'})['pipe']((0x0,operators_1[_0x1dfc02(0x1f8)])(_0x38fa53=>_0x38fa53['data']),(0x0,operators_1[_0x1dfc02(0x219)])(_0x354574=>this[_0x1dfc02(0x1ea)](_0x354574)));}['generateContent'](_0x2863f7){const _0x27d7f0=_0x498fb2,_0x2ebd06=this['apiBaseUrl']+_0x27d7f0(0x1fd);return this[_0x27d7f0(0x1e9)][_0x27d7f0(0x1f4)](_0x2ebd06,{'templateId':_0x2863f7[_0x27d7f0(0x1eb)],'outlineMarkdown':_0x2863f7[_0x27d7f0(0x222)],'asyncGenPptx':!![],'prompt':_0x2863f7[_0x27d7f0(0x210)],'dataUrl':_0x2863f7[_0x27d7f0(0x205)]},{'headers':{'Authorization':this[_0x27d7f0(0x1fc)],'Accept':_0x27d7f0(0x1f3),'Cache-Control':_0x27d7f0(0x204),'Connection':_0x27d7f0(0x227)},'responseType':_0x27d7f0(0x21e)})['pipe']((0x0,operators_1['map'])(_0x829516=>_0x829516[_0x27d7f0(0x209)]),(0x0,operators_1['mergeMap'])(_0x4af5e1=>this[_0x27d7f0(0x1ea)](_0x4af5e1)));}async[_0x498fb2(0x21c)](_0x2a222d){const _0x2e77ea=_0x498fb2,_0x501415=this[_0x2e77ea(0x20d)]+_0x2e77ea(0x20c),_0x3d4547=await this[_0x2e77ea(0x1e9)][_0x2e77ea(0x20a)](_0x501415,{'params':{'pptId':_0x2a222d},'headers':{'Authorization':this[_0x2e77ea(0x1fc)]}})[_0x2e77ea(0x20f)]();return _0x3d4547[_0x2e77ea(0x209)];}};AipptService=__decorate([(0x0,common_1['Injectable'])(),__metadata(_0x498fb2(0x212),[config_1[_0x498fb2(0x22d)],axios_1[_0x498fb2(0x229)]])],AipptService),exports[_0x498fb2(0x1f0)]=AipptService;function _0x26ca(){const _0x15a691=['HttpService','__metadata','399FNNkce','getOwnPropertyDescriptor','ConfigService','httpService','handleSSEStream','templateId','configService','startsWith','function','pop','AipptService','end','57871ykGreW','text/event-stream','post','slice','__esModule','next','map','generateOutline','223546FWyPRd','20312gjlTWO','apiToken','/ppt/generateContent','rxjs','metadata','trim','@nestjs/axios','object','data:\x20','no-cache','dataUrl','Observable','536001lBhSlN','split','data','get','subject','/ppt/asyncPptInfo','apiBaseUrl','Failed\x20to\x20parse\x20SSE\x20data:','toPromise','prompt','complete','design:paramtypes','290pAaaVq','defineProperty','25CGGNdl','parse','toString','length','mergeMap','error','__decorate','asyncPptInfo','DOCMEE_API_URL','stream','520728Jqzrdi','2CsyIld','@nestjs/common','outlineMarkdown','destroy','Failed\x20to\x20parse\x20remaining\x20SSE\x20data:','1028MRvrbE','1813167WLqVUu','keep-alive','decorate'];_0x26ca=function(){return _0x15a691;};return _0x26ca();}