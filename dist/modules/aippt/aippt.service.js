'use strict';const _0x22d66b=_0x2146;function _0x1dad(){const _0x1830ec=['destroy','getOwnPropertyDescriptor','apiBaseUrl','mergeMap','rxjs','post','__decorate','967444MlIlVG','slice','1402290aYENis','HttpService','1081044ZtjHQB','metadata','httpService','prompt','design:paramtypes','1305354FlfCpJ','156460DYGDFn','parse','get','ConfigService','/ppt/asyncPptInfo','outlineMarkdown','8029350RHtqrm','Failed\x20to\x20parse\x20SSE\x20data:','handleSSEStream','templateId','Failed\x20to\x20parse\x20remaining\x20SSE\x20data:','854436iGbEXN','map','decorate','end','DOCMEE_API_TOKEN','object','toPromise','Observable','pop','__esModule','/ppt/generateContent','configService','asyncPptInfo','no-cache','trim','apiToken','error','__metadata','function','defineProperty','keep-alive','generateContent','stream','text/event-stream','data','@nestjs/config','next','split','length','pipe'];_0x1dad=function(){return _0x1830ec;};return _0x1dad();}(function(_0x17dd9d,_0x3e43d8){const _0x2c5f2c=_0x2146,_0x40af91=_0x17dd9d();while(!![]){try{const _0x51065d=-parseInt(_0x2c5f2c(0xfa))/0x1+parseInt(_0x2c5f2c(0x12a))/0x2+parseInt(_0x2c5f2c(0xf9))/0x3+parseInt(_0x2c5f2c(0x105))/0x4+parseInt(_0x2c5f2c(0x12c))/0x5+parseInt(_0x2c5f2c(0x12e))/0x6+-parseInt(_0x2c5f2c(0x100))/0x7;if(_0x51065d===_0x3e43d8)break;else _0x40af91['push'](_0x40af91['shift']());}catch(_0x34f7a0){_0x40af91['push'](_0x40af91['shift']());}}}(_0x1dad,0x46b23));var __decorate=this&&this[_0x22d66b(0x129)]||function(_0x1929de,_0x4b5fd7,_0x584a65,_0x2befa8){const _0x1272d0=_0x22d66b;var _0x6190bc=arguments[_0x1272d0(0x121)],_0x200dcd=_0x6190bc<0x3?_0x4b5fd7:_0x2befa8===null?_0x2befa8=Object[_0x1272d0(0x124)](_0x4b5fd7,_0x584a65):_0x2befa8,_0x145384;if(typeof Reflect===_0x1272d0(0x10a)&&typeof Reflect[_0x1272d0(0x107)]===_0x1272d0(0x117))_0x200dcd=Reflect[_0x1272d0(0x107)](_0x1929de,_0x4b5fd7,_0x584a65,_0x2befa8);else{for(var _0x2dc5e9=_0x1929de[_0x1272d0(0x121)]-0x1;_0x2dc5e9>=0x0;_0x2dc5e9--)if(_0x145384=_0x1929de[_0x2dc5e9])_0x200dcd=(_0x6190bc<0x3?_0x145384(_0x200dcd):_0x6190bc>0x3?_0x145384(_0x4b5fd7,_0x584a65,_0x200dcd):_0x145384(_0x4b5fd7,_0x584a65))||_0x200dcd;}return _0x6190bc>0x3&&_0x200dcd&&Object[_0x1272d0(0x118)](_0x4b5fd7,_0x584a65,_0x200dcd),_0x200dcd;},__metadata=this&&this[_0x22d66b(0x116)]||function(_0x291bde,_0x13f4b3){const _0x2c9413=_0x22d66b;if(typeof Reflect===_0x2c9413(0x10a)&&typeof Reflect[_0x2c9413(0x12f)]===_0x2c9413(0x117))return Reflect[_0x2c9413(0x12f)](_0x291bde,_0x13f4b3);};Object[_0x22d66b(0x118)](exports,_0x22d66b(0x10e),{'value':!![]}),exports['AipptService']=void 0x0;const common_1=require('@nestjs/common'),rxjs_1=require(_0x22d66b(0x127)),config_1=require(_0x22d66b(0x11e)),axios_1=require('@nestjs/axios'),operators_1=require('rxjs/operators');let AipptService=class AipptService{constructor(_0x21fa18,_0x356ff6){const _0x2abcf7=_0x22d66b;this[_0x2abcf7(0x110)]=_0x21fa18,this[_0x2abcf7(0x130)]=_0x356ff6,this[_0x2abcf7(0x114)]=this[_0x2abcf7(0x110)][_0x2abcf7(0xfc)](_0x2abcf7(0x109)),this[_0x2abcf7(0x125)]=this[_0x2abcf7(0x110)][_0x2abcf7(0xfc)]('DOCMEE_API_URL');}[_0x22d66b(0x102)](_0x10c37f){const _0x2cde41=_0x22d66b;return new rxjs_1[(_0x2cde41(0x10c))](_0x5dfaaa=>{const _0xc3c410=_0x2cde41;let _0x261d7c='';return _0x10c37f['on'](_0xc3c410(0x11d),_0x39a245=>{const _0x4939a0=_0xc3c410;_0x261d7c+=_0x39a245['toString']();const _0x1ff69f=_0x261d7c[_0x4939a0(0x120)]('\x0a');_0x261d7c=_0x1ff69f[_0x4939a0(0x10d)]()||'';for(const _0x5c9869 of _0x1ff69f){if(_0x5c9869[_0x4939a0(0x113)]()&&_0x5c9869['startsWith']('data:\x20'))try{const _0x587f4=JSON[_0x4939a0(0xfb)](_0x5c9869[_0x4939a0(0x12b)](0x6));_0x5dfaaa[_0x4939a0(0x11f)](_0x587f4);}catch(_0x3859b9){console[_0x4939a0(0x115)](_0x4939a0(0x101),_0x3859b9);}}}),_0x10c37f['on'](_0xc3c410(0x108),()=>{const _0x3fc7d3=_0xc3c410;if(_0x261d7c['trim']())try{const _0x220542=JSON[_0x3fc7d3(0xfb)](_0x261d7c[_0x3fc7d3(0x12b)](0x6));_0x5dfaaa[_0x3fc7d3(0x11f)](_0x220542);}catch(_0x1b3626){console[_0x3fc7d3(0x115)](_0x3fc7d3(0x104),_0x1b3626);}_0x5dfaaa['complete']();}),_0x10c37f['on'](_0xc3c410(0x115),_0x45a976=>{const _0x26943a=_0xc3c410;_0x5dfaaa[_0x26943a(0x115)](_0x45a976);}),()=>{const _0x3f4f40=_0xc3c410;_0x10c37f[_0x3f4f40(0x123)]();};});}['generateOutline'](_0x2e2a0e){const _0x43a95f=_0x22d66b,_0x5201b7=this[_0x43a95f(0x125)]+'/ppt/generateOutline',_0x45ce7e={'stream':!![],'length':_0x2e2a0e[_0x43a95f(0x121)],'lang':_0x2e2a0e['lang'],'prompt':_0x2e2a0e[_0x43a95f(0xf7)],'subject':_0x2e2a0e['subject'],'dataUrl':_0x2e2a0e['dataUrl']};return this[_0x43a95f(0x130)][_0x43a95f(0x128)](_0x5201b7,_0x45ce7e,{'headers':{'Authorization':this[_0x43a95f(0x114)],'Accept':_0x43a95f(0x11c),'Cache-Control':_0x43a95f(0x112),'Connection':_0x43a95f(0x119)},'responseType':'stream'})[_0x43a95f(0x122)]((0x0,operators_1[_0x43a95f(0x106)])(_0x449084=>_0x449084[_0x43a95f(0x11d)]),(0x0,operators_1[_0x43a95f(0x126)])(_0xbd24aa=>this[_0x43a95f(0x102)](_0xbd24aa)));}[_0x22d66b(0x11a)](_0xa19a7c){const _0x2d94b8=_0x22d66b,_0x27c2cc=this[_0x2d94b8(0x125)]+_0x2d94b8(0x10f);return this[_0x2d94b8(0x130)][_0x2d94b8(0x128)](_0x27c2cc,{'templateId':_0xa19a7c[_0x2d94b8(0x103)],'outlineMarkdown':_0xa19a7c[_0x2d94b8(0xff)],'asyncGenPptx':!![],'prompt':_0xa19a7c[_0x2d94b8(0xf7)],'dataUrl':_0xa19a7c['dataUrl']},{'headers':{'Authorization':this[_0x2d94b8(0x114)],'Accept':_0x2d94b8(0x11c),'Cache-Control':_0x2d94b8(0x112),'Connection':_0x2d94b8(0x119)},'responseType':_0x2d94b8(0x11b)})[_0x2d94b8(0x122)]((0x0,operators_1[_0x2d94b8(0x106)])(_0x413b42=>_0x413b42[_0x2d94b8(0x11d)]),(0x0,operators_1[_0x2d94b8(0x126)])(_0xb3fe29=>this[_0x2d94b8(0x102)](_0xb3fe29)));}async[_0x22d66b(0x111)](_0x146297){const _0x33f229=_0x22d66b,_0x3f2454=this[_0x33f229(0x125)]+_0x33f229(0xfe),_0x9428b4=await this[_0x33f229(0x130)]['get'](_0x3f2454,{'params':{'pptId':_0x146297},'headers':{'Authorization':this[_0x33f229(0x114)]}})[_0x33f229(0x10b)]();return _0x9428b4[_0x33f229(0x11d)];}};function _0x2146(_0x24b9e9,_0x575917){const _0x1dadd2=_0x1dad();return _0x2146=function(_0x2146df,_0xf66142){_0x2146df=_0x2146df-0xf7;let _0x417209=_0x1dadd2[_0x2146df];return _0x417209;},_0x2146(_0x24b9e9,_0x575917);}AipptService=__decorate([(0x0,common_1['Injectable'])(),__metadata(_0x22d66b(0xf8),[config_1[_0x22d66b(0xfd)],axios_1[_0x22d66b(0x12d)]])],AipptService),exports['AipptService']=AipptService;