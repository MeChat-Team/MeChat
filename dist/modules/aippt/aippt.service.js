'use strict';const _0x5c279a=_0x2feb;function _0x2131(){const _0x5adfa2=['455706ZmMWUq','toPromise','data','AipptService','apiToken','destroy','dataUrl','asyncPptInfo','/ppt/asyncPptInfo','handleSSEStream','127500vJjusm','/ppt/generateContent','trim','object','DOCMEE_API_URL','Injectable','Observable','30drTKOV','Failed\x20to\x20parse\x20SSE\x20data:','getOwnPropertyDescriptor','generateOutline','defineProperty','24785isqofQ','end','generateContent','split','apiBaseUrl','Failed\x20to\x20parse\x20remaining\x20SSE\x20data:','keep-alive','@nestjs/common','HttpService','error','248nefjah','/ppt/generateOutline','slice','metadata','21078IvZpDR','mergeMap','__esModule','httpService','outlineMarkdown','12009AgsFID','DOCMEE_API_TOKEN','319cSYOvi','get','templateId','length','pipe','text/event-stream','@nestjs/axios','__metadata','24QTfnUN','no-cache','toString','decorate','18681mXcHHa','configService','rxjs/operators','7YruNDk','__decorate','stream','function','map','849088WnDMcT','subject','prompt','parse'];_0x2131=function(){return _0x5adfa2;};return _0x2131();}function _0x2feb(_0x242366,_0x1a52dd){const _0x213141=_0x2131();return _0x2feb=function(_0x2feb3d,_0x3cfd7f){_0x2feb3d=_0x2feb3d-0xae;let _0x5c9edd=_0x213141[_0x2feb3d];return _0x5c9edd;},_0x2feb(_0x242366,_0x1a52dd);}(function(_0x34ed8a,_0x3a72cd){const _0x4bcba2=_0x2feb,_0x42feff=_0x34ed8a();while(!![]){try{const _0x399fb1=parseInt(_0x4bcba2(0xda))/0x1*(parseInt(_0x4bcba2(0xe4))/0x2)+parseInt(_0x4bcba2(0xe8))/0x3+-parseInt(_0x4bcba2(0xd1))/0x4*(-parseInt(_0x4bcba2(0xc7))/0x5)+-parseInt(_0x4bcba2(0xb1))/0x6+-parseInt(_0x4bcba2(0xeb))/0x7*(-parseInt(_0x4bcba2(0xf0))/0x8)+-parseInt(_0x4bcba2(0xd5))/0x9*(-parseInt(_0x4bcba2(0xc2))/0xa)+-parseInt(_0x4bcba2(0xdc))/0xb*(parseInt(_0x4bcba2(0xbb))/0xc);if(_0x399fb1===_0x3a72cd)break;else _0x42feff['push'](_0x42feff['shift']());}catch(_0x4aa7e6){_0x42feff['push'](_0x42feff['shift']());}}}(_0x2131,0x2d983));var __decorate=this&&this[_0x5c279a(0xec)]||function(_0x36b5d1,_0x44ecee,_0x4b1c80,_0x246198){const _0x1b1dbc=_0x5c279a;var _0x5d6dbc=arguments[_0x1b1dbc(0xdf)],_0x597929=_0x5d6dbc<0x3?_0x44ecee:_0x246198===null?_0x246198=Object[_0x1b1dbc(0xc4)](_0x44ecee,_0x4b1c80):_0x246198,_0x36cd0c;if(typeof Reflect===_0x1b1dbc(0xbe)&&typeof Reflect[_0x1b1dbc(0xe7)]===_0x1b1dbc(0xee))_0x597929=Reflect['decorate'](_0x36b5d1,_0x44ecee,_0x4b1c80,_0x246198);else{for(var _0x54e246=_0x36b5d1[_0x1b1dbc(0xdf)]-0x1;_0x54e246>=0x0;_0x54e246--)if(_0x36cd0c=_0x36b5d1[_0x54e246])_0x597929=(_0x5d6dbc<0x3?_0x36cd0c(_0x597929):_0x5d6dbc>0x3?_0x36cd0c(_0x44ecee,_0x4b1c80,_0x597929):_0x36cd0c(_0x44ecee,_0x4b1c80))||_0x597929;}return _0x5d6dbc>0x3&&_0x597929&&Object[_0x1b1dbc(0xc6)](_0x44ecee,_0x4b1c80,_0x597929),_0x597929;},__metadata=this&&this[_0x5c279a(0xe3)]||function(_0x2d3101,_0x23fdf2){const _0x1b0a7=_0x5c279a;if(typeof Reflect===_0x1b0a7(0xbe)&&typeof Reflect['metadata']===_0x1b0a7(0xee))return Reflect[_0x1b0a7(0xd4)](_0x2d3101,_0x23fdf2);};Object[_0x5c279a(0xc6)](exports,_0x5c279a(0xd7),{'value':!![]}),exports[_0x5c279a(0xb4)]=void 0x0;const common_1=require(_0x5c279a(0xce)),rxjs_1=require('rxjs'),config_1=require('@nestjs/config'),axios_1=require(_0x5c279a(0xe2)),operators_1=require(_0x5c279a(0xea));let AipptService=class AipptService{constructor(_0x5696b1,_0x9160ee){const _0x5302c7=_0x5c279a;this[_0x5302c7(0xe9)]=_0x5696b1,this[_0x5302c7(0xd8)]=_0x9160ee,this['apiToken']=this[_0x5302c7(0xe9)]['get'](_0x5302c7(0xdb)),this[_0x5302c7(0xcb)]=this[_0x5302c7(0xe9)]['get'](_0x5302c7(0xbf));}[_0x5c279a(0xba)](_0xdebc6c){const _0x38a600=_0x5c279a;return new rxjs_1[(_0x38a600(0xc1))](_0x4ae558=>{const _0x459051=_0x38a600;let _0x46dc11='';return _0xdebc6c['on'](_0x459051(0xb3),_0x48a9f4=>{const _0x428bd6=_0x459051;_0x46dc11+=_0x48a9f4[_0x428bd6(0xe6)]();const _0x2431f6=_0x46dc11[_0x428bd6(0xca)]('\x0a');_0x46dc11=_0x2431f6['pop']()||'';for(const _0x53bf17 of _0x2431f6){if(_0x53bf17[_0x428bd6(0xbd)]()&&_0x53bf17['startsWith']('data:\x20'))try{const _0x3c32db=JSON[_0x428bd6(0xb0)](_0x53bf17[_0x428bd6(0xd3)](0x6));_0x4ae558['next'](_0x3c32db);}catch(_0x2f78fb){console['error'](_0x428bd6(0xc3),_0x2f78fb);}}}),_0xdebc6c['on'](_0x459051(0xc8),()=>{const _0x2ae30d=_0x459051;if(_0x46dc11[_0x2ae30d(0xbd)]())try{const _0x403bd0=JSON[_0x2ae30d(0xb0)](_0x46dc11[_0x2ae30d(0xd3)](0x6));_0x4ae558['next'](_0x403bd0);}catch(_0x2d2f5e){console[_0x2ae30d(0xd0)](_0x2ae30d(0xcc),_0x2d2f5e);}_0x4ae558['complete']();}),_0xdebc6c['on']('error',_0x121cf3=>{const _0x305740=_0x459051;_0x4ae558[_0x305740(0xd0)](_0x121cf3);}),()=>{const _0x4f98c1=_0x459051;_0xdebc6c[_0x4f98c1(0xb6)]();};});}[_0x5c279a(0xc5)](_0x436427){const _0x33622a=_0x5c279a,_0x51b68b=this[_0x33622a(0xcb)]+_0x33622a(0xd2),_0x14903e={'stream':!![],'length':_0x436427[_0x33622a(0xdf)],'lang':_0x436427['lang'],'prompt':_0x436427['prompt'],'subject':_0x436427[_0x33622a(0xae)],'dataUrl':_0x436427[_0x33622a(0xb7)]};return this[_0x33622a(0xd8)]['post'](_0x51b68b,_0x14903e,{'headers':{'Authorization':this['apiToken'],'Accept':_0x33622a(0xe1),'Cache-Control':_0x33622a(0xe5),'Connection':_0x33622a(0xcd)},'responseType':_0x33622a(0xed)})[_0x33622a(0xe0)]((0x0,operators_1[_0x33622a(0xef)])(_0x5c9539=>_0x5c9539[_0x33622a(0xb3)]),(0x0,operators_1['mergeMap'])(_0x1174c7=>this[_0x33622a(0xba)](_0x1174c7)));}[_0x5c279a(0xc9)](_0x24c553){const _0x7413b2=_0x5c279a,_0xc2581=this[_0x7413b2(0xcb)]+_0x7413b2(0xbc);return this[_0x7413b2(0xd8)]['post'](_0xc2581,{'templateId':_0x24c553[_0x7413b2(0xde)],'outlineMarkdown':_0x24c553[_0x7413b2(0xd9)],'asyncGenPptx':!![],'prompt':_0x24c553[_0x7413b2(0xaf)],'dataUrl':_0x24c553[_0x7413b2(0xb7)]},{'headers':{'Authorization':this['apiToken'],'Accept':_0x7413b2(0xe1),'Cache-Control':'no-cache','Connection':_0x7413b2(0xcd)},'responseType':_0x7413b2(0xed)})[_0x7413b2(0xe0)]((0x0,operators_1[_0x7413b2(0xef)])(_0x40e025=>_0x40e025[_0x7413b2(0xb3)]),(0x0,operators_1[_0x7413b2(0xd6)])(_0x267e37=>this[_0x7413b2(0xba)](_0x267e37)));}async[_0x5c279a(0xb8)](_0x39800c){const _0x282b8e=_0x5c279a,_0x310ad8=this['apiBaseUrl']+_0x282b8e(0xb9),_0x43ebef=await this[_0x282b8e(0xd8)][_0x282b8e(0xdd)](_0x310ad8,{'params':{'pptId':_0x39800c},'headers':{'Authorization':this[_0x282b8e(0xb5)]}})[_0x282b8e(0xb2)]();return _0x43ebef[_0x282b8e(0xb3)];}};AipptService=__decorate([(0x0,common_1[_0x5c279a(0xc0)])(),__metadata('design:paramtypes',[config_1['ConfigService'],axios_1[_0x5c279a(0xcf)]])],AipptService),exports[_0x5c279a(0xb4)]=AipptService;