'use strict';const _0x1e94b7=_0x5741;function _0x132a(){const _0x18804d=['trim','configService','keep-alive','dataUrl','get','__esModule','Observable','/ppt/generateContent','map','867rhkgEC','error','text/event-stream','621796iFErCK','slice','mergeMap','decorate','lang','httpService','prompt','toPromise','6699177jkMenA','/ppt/generateOutline','rxjs/operators','Injectable','outlineMarkdown','generateOutline','split','defineProperty','@nestjs/config','apiToken','/ppt/asyncPptInfo','data','pop','data:\x20','templateId','end','complete','rxjs','object','length','356631oKgpyF','296760MOdGmD','DOCMEE_API_TOKEN','subject','AipptService','handleSSEStream','ConfigService','366aXvxQJ','@nestjs/common','metadata','1330655ijbazb','61719XzxiWk','destroy','post','DOCMEE_API_URL','564RiMdAN','next','getOwnPropertyDescriptor','no-cache','HttpService','startsWith','Failed\x20to\x20parse\x20SSE\x20data:','generateContent','stream','apiBaseUrl','design:paramtypes','@nestjs/axios','parse','__metadata'];_0x132a=function(){return _0x18804d;};return _0x132a();}(function(_0x3da0ef,_0x3ba957){const _0x4d8511=_0x5741,_0x188302=_0x3da0ef();while(!![]){try{const _0x29923a=parseInt(_0x4d8511(0x12e))/0x1+parseInt(_0x4d8511(0x112))/0x2+parseInt(_0x4d8511(0x10f))/0x3*(parseInt(_0x4d8511(0x13d))/0x4)+-parseInt(_0x4d8511(0x138))/0x5+parseInt(_0x4d8511(0x135))/0x6*(-parseInt(_0x4d8511(0x139))/0x7)+-parseInt(_0x4d8511(0x12f))/0x8+parseInt(_0x4d8511(0x11a))/0x9;if(_0x29923a===_0x3ba957)break;else _0x188302['push'](_0x188302['shift']());}catch(_0x5334bd){_0x188302['push'](_0x188302['shift']());}}}(_0x132a,0x954f0));function _0x5741(_0x2c03f8,_0x2b3226){const _0x132a70=_0x132a();return _0x5741=function(_0x57410c,_0xb1c980){_0x57410c=_0x57410c-0x10d;let _0xbbb3c3=_0x132a70[_0x57410c];return _0xbbb3c3;},_0x5741(_0x2c03f8,_0x2b3226);}var __decorate=this&&this['__decorate']||function(_0x2b6b9c,_0x1043b5,_0xc0151c,_0x182cd0){const _0x5ad36b=_0x5741;var _0x35da70=arguments[_0x5ad36b(0x12d)],_0x2e58e6=_0x35da70<0x3?_0x1043b5:_0x182cd0===null?_0x182cd0=Object[_0x5ad36b(0x13f)](_0x1043b5,_0xc0151c):_0x182cd0,_0x32411b;if(typeof Reflect===_0x5ad36b(0x12c)&&typeof Reflect['decorate']==='function')_0x2e58e6=Reflect[_0x5ad36b(0x115)](_0x2b6b9c,_0x1043b5,_0xc0151c,_0x182cd0);else{for(var _0x57a372=_0x2b6b9c[_0x5ad36b(0x12d)]-0x1;_0x57a372>=0x0;_0x57a372--)if(_0x32411b=_0x2b6b9c[_0x57a372])_0x2e58e6=(_0x35da70<0x3?_0x32411b(_0x2e58e6):_0x35da70>0x3?_0x32411b(_0x1043b5,_0xc0151c,_0x2e58e6):_0x32411b(_0x1043b5,_0xc0151c))||_0x2e58e6;}return _0x35da70>0x3&&_0x2e58e6&&Object[_0x5ad36b(0x121)](_0x1043b5,_0xc0151c,_0x2e58e6),_0x2e58e6;},__metadata=this&&this[_0x1e94b7(0x14a)]||function(_0x33c1f6,_0x4922d1){const _0x220fac=_0x1e94b7;if(typeof Reflect===_0x220fac(0x12c)&&typeof Reflect[_0x220fac(0x137)]==='function')return Reflect[_0x220fac(0x137)](_0x33c1f6,_0x4922d1);};Object[_0x1e94b7(0x121)](exports,_0x1e94b7(0x150),{'value':!![]}),exports[_0x1e94b7(0x132)]=void 0x0;const common_1=require(_0x1e94b7(0x136)),rxjs_1=require(_0x1e94b7(0x12b)),config_1=require(_0x1e94b7(0x122)),axios_1=require(_0x1e94b7(0x148)),operators_1=require(_0x1e94b7(0x11c));let AipptService=class AipptService{constructor(_0x1cff38,_0x219535){const _0x451c92=_0x1e94b7;this['configService']=_0x1cff38,this['httpService']=_0x219535,this['apiToken']=this['configService'][_0x451c92(0x14f)](_0x451c92(0x130)),this[_0x451c92(0x146)]=this[_0x451c92(0x14c)][_0x451c92(0x14f)](_0x451c92(0x13c));}[_0x1e94b7(0x133)](_0x5c15e4){const _0x4a773f=_0x1e94b7;return new rxjs_1[(_0x4a773f(0x151))](_0x35bd50=>{const _0x5e4289=_0x4a773f;let _0x21d9e9='';return _0x5c15e4['on'](_0x5e4289(0x125),_0x24d87c=>{const _0x2f1372=_0x5e4289;_0x21d9e9+=_0x24d87c['toString']();const _0x314328=_0x21d9e9[_0x2f1372(0x120)]('\x0a');_0x21d9e9=_0x314328[_0x2f1372(0x126)]()||'';for(const _0x1d94e5 of _0x314328){if(_0x1d94e5[_0x2f1372(0x14b)]()&&_0x1d94e5[_0x2f1372(0x142)](_0x2f1372(0x127)))try{const _0x49e64a=JSON['parse'](_0x1d94e5[_0x2f1372(0x113)](0x6));_0x35bd50[_0x2f1372(0x13e)](_0x49e64a);}catch(_0x4bd93c){console['error'](_0x2f1372(0x143),_0x4bd93c);}}}),_0x5c15e4['on'](_0x5e4289(0x129),()=>{const _0x2ace6d=_0x5e4289;if(_0x21d9e9[_0x2ace6d(0x14b)]())try{const _0x3fd3ec=JSON[_0x2ace6d(0x149)](_0x21d9e9[_0x2ace6d(0x113)](0x6));_0x35bd50[_0x2ace6d(0x13e)](_0x3fd3ec);}catch(_0x6780d5){console[_0x2ace6d(0x110)]('Failed\x20to\x20parse\x20remaining\x20SSE\x20data:',_0x6780d5);}_0x35bd50[_0x2ace6d(0x12a)]();}),_0x5c15e4['on'](_0x5e4289(0x110),_0x4f7159=>{const _0x23bd9a=_0x5e4289;_0x35bd50[_0x23bd9a(0x110)](_0x4f7159);}),()=>{const _0x41d18e=_0x5e4289;_0x5c15e4[_0x41d18e(0x13a)]();};});}[_0x1e94b7(0x11f)](_0x4eae44){const _0x474c46=_0x1e94b7,_0xf6eeb5=this[_0x474c46(0x146)]+_0x474c46(0x11b),_0x48bfd4={'stream':!![],'length':_0x4eae44['length'],'lang':_0x4eae44[_0x474c46(0x116)],'prompt':_0x4eae44[_0x474c46(0x118)],'subject':_0x4eae44[_0x474c46(0x131)],'dataUrl':_0x4eae44[_0x474c46(0x14e)]};return this[_0x474c46(0x117)][_0x474c46(0x13b)](_0xf6eeb5,_0x48bfd4,{'headers':{'Authorization':this[_0x474c46(0x123)],'Accept':'text/event-stream','Cache-Control':_0x474c46(0x140),'Connection':_0x474c46(0x14d)},'responseType':_0x474c46(0x145)})['pipe']((0x0,operators_1[_0x474c46(0x10e)])(_0x55f480=>_0x55f480[_0x474c46(0x125)]),(0x0,operators_1[_0x474c46(0x114)])(_0x3da726=>this[_0x474c46(0x133)](_0x3da726)));}[_0x1e94b7(0x144)](_0x19bb7a){const _0x33d198=_0x1e94b7,_0x3bb772=this[_0x33d198(0x146)]+_0x33d198(0x10d);return this[_0x33d198(0x117)][_0x33d198(0x13b)](_0x3bb772,{'templateId':_0x19bb7a[_0x33d198(0x128)],'outlineMarkdown':_0x19bb7a[_0x33d198(0x11e)],'asyncGenPptx':!![],'prompt':_0x19bb7a[_0x33d198(0x118)],'dataUrl':_0x19bb7a['dataUrl']},{'headers':{'Authorization':this['apiToken'],'Accept':_0x33d198(0x111),'Cache-Control':_0x33d198(0x140),'Connection':_0x33d198(0x14d)},'responseType':_0x33d198(0x145)})['pipe']((0x0,operators_1['map'])(_0x2e2cc4=>_0x2e2cc4['data']),(0x0,operators_1['mergeMap'])(_0x338306=>this[_0x33d198(0x133)](_0x338306)));}async['asyncPptInfo'](_0x4b6247){const _0x2bc8db=_0x1e94b7,_0x2f144c=this[_0x2bc8db(0x146)]+_0x2bc8db(0x124),_0x38c380=await this[_0x2bc8db(0x117)][_0x2bc8db(0x14f)](_0x2f144c,{'params':{'pptId':_0x4b6247},'headers':{'Authorization':this['apiToken']}})[_0x2bc8db(0x119)]();return _0x38c380['data'];}};AipptService=__decorate([(0x0,common_1[_0x1e94b7(0x11d)])(),__metadata(_0x1e94b7(0x147),[config_1[_0x1e94b7(0x134)],axios_1[_0x1e94b7(0x141)]])],AipptService),exports[_0x1e94b7(0x132)]=AipptService;