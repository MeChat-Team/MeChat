'use strict';const _0x4f0583=_0x2443;(function(_0x35ee1d,_0x4a005e){const _0x5a0b4b=_0x2443,_0x46ea7e=_0x35ee1d();while(!![]){try{const _0x1e6b3e=parseInt(_0x5a0b4b(0x19d))/0x1*(parseInt(_0x5a0b4b(0x1b4))/0x2)+-parseInt(_0x5a0b4b(0x18b))/0x3+-parseInt(_0x5a0b4b(0x19b))/0x4*(parseInt(_0x5a0b4b(0x18a))/0x5)+-parseInt(_0x5a0b4b(0x1ad))/0x6*(parseInt(_0x5a0b4b(0x1b0))/0x7)+parseInt(_0x5a0b4b(0x1a4))/0x8+-parseInt(_0x5a0b4b(0x1ae))/0x9*(parseInt(_0x5a0b4b(0x194))/0xa)+parseInt(_0x5a0b4b(0x189))/0xb*(parseInt(_0x5a0b4b(0x184))/0xc);if(_0x1e6b3e===_0x4a005e)break;else _0x46ea7e['push'](_0x46ea7e['shift']());}catch(_0x4364f6){_0x46ea7e['push'](_0x46ea7e['shift']());}}}(_0x2e1f,0x68797));var __decorate=this&&this[_0x4f0583(0x1b7)]||function(_0x2331d6,_0x45bc03,_0x37d2f1,_0x22e002){const _0x143688=_0x4f0583;var _0x5cb126=arguments[_0x143688(0x1b2)],_0x5ee8ac=_0x5cb126<0x3?_0x45bc03:_0x22e002===null?_0x22e002=Object['getOwnPropertyDescriptor'](_0x45bc03,_0x37d2f1):_0x22e002,_0x40b2a3;if(typeof Reflect===_0x143688(0x193)&&typeof Reflect[_0x143688(0x191)]===_0x143688(0x1a2))_0x5ee8ac=Reflect['decorate'](_0x2331d6,_0x45bc03,_0x37d2f1,_0x22e002);else{for(var _0xcbfe04=_0x2331d6[_0x143688(0x1b2)]-0x1;_0xcbfe04>=0x0;_0xcbfe04--)if(_0x40b2a3=_0x2331d6[_0xcbfe04])_0x5ee8ac=(_0x5cb126<0x3?_0x40b2a3(_0x5ee8ac):_0x5cb126>0x3?_0x40b2a3(_0x45bc03,_0x37d2f1,_0x5ee8ac):_0x40b2a3(_0x45bc03,_0x37d2f1))||_0x5ee8ac;}return _0x5cb126>0x3&&_0x5ee8ac&&Object[_0x143688(0x1ba)](_0x45bc03,_0x37d2f1,_0x5ee8ac),_0x5ee8ac;},__metadata=this&&this[_0x4f0583(0x1a1)]||function(_0xdd3c44,_0x277e9f){const _0x43fcb9=_0x4f0583;if(typeof Reflect===_0x43fcb9(0x193)&&typeof Reflect['metadata']===_0x43fcb9(0x1a2))return Reflect[_0x43fcb9(0x18d)](_0xdd3c44,_0x277e9f);},__param=this&&this[_0x4f0583(0x1a9)]||function(_0x50b04b,_0x2ea0cb){return function(_0x440e9f,_0x2313ba){_0x2ea0cb(_0x440e9f,_0x2313ba,_0x50b04b);};};function _0x2443(_0x1e04ec,_0xf5a958){const _0x2e1f3d=_0x2e1f();return _0x2443=function(_0x2443e6,_0x395c75){_0x2443e6=_0x2443e6-0x183;let _0x3b0edc=_0x2e1f3d[_0x2443e6];return _0x3b0edc;},_0x2443(_0x1e04ec,_0xf5a958);}Object[_0x4f0583(0x1ba)](exports,_0x4f0583(0x19f),{'value':!![]}),exports[_0x4f0583(0x18e)]=void 0x0;const common_1=require(_0x4f0583(0x186));function _0x2e1f(){const _0x228922=['wishGet','8dkXYCK','getJwtSecret','redisClient','__decorate','您已在其他设备覆盖登录、请您重新登录！','get','defineProperty','invalidateTokens','407388tFBJQS','HttpStatus','@nestjs/common','expire','visitor','121OzKjxv','5lEsbhq','95178kEABZD','forEach','metadata','RedisCacheService','HttpException','includes','decorate','set','object','10pygkYh','parse','super','del','Injectable','checkTokenAuth','saveToken','3240612xmkoyd','ttl','212097DJYKye','JWT_SECRET','__esModule','tokens:','__metadata','function','admin','3249168PmJZwq','design:paramtypes','REDIS_CLIENT','wishSet','JWT\x20secret\x20not\x20found\x20in\x20Redis','__param','Inject','token:','string','2136UYuTfI','2073267IjNAEL','stringify','2513TheUgP','zRange','length'];_0x2e1f=function(){return _0x228922;};return _0x2e1f();}let RedisCacheService=class RedisCacheService{constructor(_0x39cef7){const _0x2c7b6d=_0x4f0583;this[_0x2c7b6d(0x1b6)]=_0x39cef7;}async[_0x4f0583(0x1b9)](_0x4b92d0){const _0x333577=_0x4f0583,{key:_0x4b5a44}=_0x4b92d0,_0x541fab=await this[_0x333577(0x1b6)][_0x333577(0x1b9)](_0x4b5a44);return await this[_0x333577(0x1b6)][_0x333577(0x1b9)](_0x4b5a44);}async[_0x4f0583(0x192)](_0x2a5cde,_0x4ccc08){const _0xa9e0b7=_0x4f0583;try{const {key:_0x30e3f6,val:_0x4e7b14}=_0x2a5cde;await this[_0xa9e0b7(0x1b6)][_0xa9e0b7(0x192)](_0x30e3f6,_0x4e7b14),_0x4ccc08&&await this[_0xa9e0b7(0x1b6)][_0xa9e0b7(0x187)](_0x30e3f6,_0x4ccc08);return;}catch(_0x5e068e){throw new common_1[(_0xa9e0b7(0x18f))](_0x5e068e,common_1[_0xa9e0b7(0x185)]['BAD_REQUEST']);}}async[_0x4f0583(0x1b5)](){const _0x16b7a6=_0x4f0583,_0x442514=await this[_0x16b7a6(0x1b6)]['get'](_0x16b7a6(0x19e));if(!_0x442514)throw new Error(_0x16b7a6(0x1a8));return _0x442514;}async[_0x4f0583(0x19c)](_0x705981){const _0x152384=_0x4f0583;return await this[_0x152384(0x1b6)][_0x152384(0x19c)](_0x705981);}async['del'](_0x22151b){const _0x31f783=_0x4f0583,{key:_0x1ac24d}=_0x22151b;await this['redisClient'][_0x31f783(0x197)](_0x1ac24d);return;}async[_0x4f0583(0x19a)](_0x4dfea9,_0xd298fc){const _0x5c47c3=_0x4f0583,_0x132aff=await this[_0x5c47c3(0x1b6)][_0x5c47c3(0x1b1)](_0x5c47c3(0x1a0)+_0x4dfea9,0x0,-0x1);await this[_0x5c47c3(0x183)](_0x4dfea9,_0x132aff),this[_0x5c47c3(0x1b6)][_0x5c47c3(0x192)](_0x5c47c3(0x1ab)+_0x4dfea9,_0xd298fc);}async[_0x4f0583(0x183)](_0x43bbf9,_0x36cd51){const _0x409908=_0x4f0583;_0x36cd51[_0x409908(0x18c)](_0x4966b9=>{const _0x1ee4b7=_0x409908;this[_0x1ee4b7(0x1b6)][_0x1ee4b7(0x197)](_0x1ee4b7(0x1ab)+_0x43bbf9+':'+_0x4966b9);});}async[_0x4f0583(0x199)](_0x15df13,_0x947e49){const _0x18f63a=_0x4f0583,{id:_0x290dab,role:_0x5826b7}=_0x947e49['user'];if(_0x5826b7===_0x18f63a(0x188))return!![];const _0x99d84d=await this[_0x18f63a(0x1b6)][_0x18f63a(0x1b9)](_0x18f63a(0x1ab)+_0x290dab);if(_0x99d84d===null)return await this[_0x18f63a(0x1b6)][_0x18f63a(0x192)](_0x18f63a(0x1ab)+_0x290dab,_0x15df13),!![];if(_0x99d84d!==_0x15df13){if([_0x18f63a(0x196),_0x18f63a(0x1a3)][_0x18f63a(0x190)](_0x5826b7))return!![];throw new common_1[(_0x18f63a(0x18f))](_0x18f63a(0x1b8),common_1[_0x18f63a(0x185)]['UNAUTHORIZED']);}}async[_0x4f0583(0x1b3)](_0x46b3d3){const _0x336e57=_0x4f0583,_0x27f366=await this['redisClient'][_0x336e57(0x1b9)](_0x46b3d3);try{return JSON[_0x336e57(0x195)](_0x27f366);}catch(_0x282eb3){}return _0x27f366;}async[_0x4f0583(0x1a7)](_0x2d7d15,_0x4f4076,_0x5819a5){const _0x4897f6=_0x4f0583,_0x6b38c6=typeof _0x4f4076===_0x4897f6(0x1ac)?_0x4f4076:JSON[_0x4897f6(0x1af)](_0x4f4076);await this[_0x4897f6(0x1b6)]['set'](_0x2d7d15,_0x6b38c6),_0x5819a5&&await this[_0x4897f6(0x1b6)][_0x4897f6(0x187)](_0x2d7d15,_0x5819a5);}};RedisCacheService=__decorate([(0x0,common_1[_0x4f0583(0x198)])(),__param(0x0,(0x0,common_1[_0x4f0583(0x1aa)])(_0x4f0583(0x1a6))),__metadata(_0x4f0583(0x1a5),[Object])],RedisCacheService),exports[_0x4f0583(0x18e)]=RedisCacheService;