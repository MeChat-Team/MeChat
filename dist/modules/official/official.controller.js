'use strict';const _0xc1fa98=_0x33fc;function _0x33fc(_0x22abf1,_0x5904f9){const _0x5c5aa6=_0x5c5a();return _0x33fc=function(_0x33fc7b,_0x1baa99){_0x33fc7b=_0x33fc7b-0x15e;let _0x238f21=_0x5c5aa6[_0x33fc7b];return _0x238f21;},_0x33fc(_0x22abf1,_0x5904f9);}(function(_0x5d2bcb,_0x32c2e4){const _0x61a3d0=_0x33fc,_0x303281=_0x5d2bcb();while(!![]){try{const _0x1356ef=parseInt(_0x61a3d0(0x185))/0x1*(parseInt(_0x61a3d0(0x169))/0x2)+parseInt(_0x61a3d0(0x192))/0x3*(parseInt(_0x61a3d0(0x1ab))/0x4)+-parseInt(_0x61a3d0(0x1ae))/0x5+parseInt(_0x61a3d0(0x16b))/0x6*(parseInt(_0x61a3d0(0x1a9))/0x7)+-parseInt(_0x61a3d0(0x1a2))/0x8+parseInt(_0x61a3d0(0x179))/0x9+parseInt(_0x61a3d0(0x177))/0xa*(parseInt(_0x61a3d0(0x16c))/0xb);if(_0x1356ef===_0x32c2e4)break;else _0x303281['push'](_0x303281['shift']());}catch(_0x3cbca4){_0x303281['push'](_0x303281['shift']());}}}(_0x5c5a,0xa971a));function _0x5c5a(){const _0x214d17=['Post','8DbtZku','__metadata','aotoPlay','6462500fURfhi','GetQrCodeDto','prototype','./dto/getQrCode.dto','length','CLICK','Controller','defineProperty','OfficialController','getRedirectUrl','扫码绑定轮询查询','获取登录跳转地址','decorate','Req','ApiTags','获取绑定二维码的sceneStr','unsubscribe','msgtype','nonce','design:type','sceneStr:\x20','ApiOperation','Query','Get','getQRCodeTicket','eventkey','22644tSBzya','qrscene_','6fyqkBX','33HqynkI','getQRSceneStrByBind','getJsapiTicket','code','genXmlMsg','status','genXmlMsgByConfig','../../common/utils','metadata','UseGuards','getQRCode','1803330TiQXHP','__param','5644197DHtrRr','design:paramtypes','send','design:returntype','获取登录二维码sceneStr','公众号通知接口POST','notify','getQRSceneStr','object','@nestjs/common','content','fromusername','52SaEYSl','获取二维码','officialSubscribeText','get\x20通知>>>','function','公众号通知接口GET','sceneStr','JwtAuthGuard','success','echostr','https://mp.weixin.qq.com','scanBindWx','signature','375132iGYtMC','/cgi-bin/showqrcode?ticket=','event','../../common/auth/jwtAuth.guard','env','officialScanLoginText','officialService','official','loginBySceneStr','./official.service','扫码登录轮询查询','log','url','notifyPost','loginByCode','公众号静默登录','4851408XyLioi','Res','OfficialService','bindWxBySceneStr','Body','TRUE','getOwnPropertyDescriptor','4102028OIDYnF'];_0x5c5a=function(){return _0x214d17;};return _0x5c5a();}var __decorate=this&&this['__decorate']||function(_0x3ac863,_0x24de98,_0x5075fe,_0x209e99){const _0x5da10d=_0x33fc;var _0x28337d=arguments['length'],_0x406e49=_0x28337d<0x3?_0x24de98:_0x209e99===null?_0x209e99=Object[_0x5da10d(0x1a8)](_0x24de98,_0x5075fe):_0x209e99,_0x55838b;if(typeof Reflect===_0x5da10d(0x181)&&typeof Reflect[_0x5da10d(0x1ba)]===_0x5da10d(0x189))_0x406e49=Reflect[_0x5da10d(0x1ba)](_0x3ac863,_0x24de98,_0x5075fe,_0x209e99);else{for(var _0xf5c56e=_0x3ac863[_0x5da10d(0x1b2)]-0x1;_0xf5c56e>=0x0;_0xf5c56e--)if(_0x55838b=_0x3ac863[_0xf5c56e])_0x406e49=(_0x28337d<0x3?_0x55838b(_0x406e49):_0x28337d>0x3?_0x55838b(_0x24de98,_0x5075fe,_0x406e49):_0x55838b(_0x24de98,_0x5075fe))||_0x406e49;}return _0x28337d>0x3&&_0x406e49&&Object['defineProperty'](_0x24de98,_0x5075fe,_0x406e49),_0x406e49;},__metadata=this&&this[_0xc1fa98(0x1ac)]||function(_0x580ae7,_0x56334a){const _0x4176df=_0xc1fa98;if(typeof Reflect===_0x4176df(0x181)&&typeof Reflect[_0x4176df(0x174)]==='function')return Reflect['metadata'](_0x580ae7,_0x56334a);},__param=this&&this[_0xc1fa98(0x178)]||function(_0x4d7b66,_0x14c352){return function(_0xfd43f7,_0x1b8ab5){_0x14c352(_0xfd43f7,_0x1b8ab5,_0x4d7b66);};};Object[_0xc1fa98(0x1b5)](exports,'__esModule',{'value':!![]}),exports[_0xc1fa98(0x1b6)]=void 0x0;const jwtAuth_guard_1=require(_0xc1fa98(0x195)),utils_1=require(_0xc1fa98(0x173)),common_1=require(_0xc1fa98(0x182)),swagger_1=require('@nestjs/swagger'),getQrCode_dto_1=require(_0xc1fa98(0x1b1)),official_service_1=require(_0xc1fa98(0x19b));let OfficialController=class OfficialController{constructor(_0x23a8f4){const _0xc13b53=_0xc1fa98;this[_0xc13b53(0x198)]=_0x23a8f4;}async[_0xc1fa98(0x17f)](_0x74b32f,_0x2cafc7,_0x515e70){const _0x4b8f03=_0xc1fa98;console['log'](_0x4b8f03(0x188),_0x2cafc7,_0x515e70);const _0x32352c=await this[_0x4b8f03(0x198)]['verify'](_0x2cafc7[_0x4b8f03(0x191)],_0x2cafc7[_0x4b8f03(0x161)],_0x2cafc7['timestamp']);return _0x32352c?_0x2cafc7[_0x4b8f03(0x18e)]:'';}async[_0xc1fa98(0x19f)](_0x481b71,_0x4b6fe8,_0x3559c7,_0x323e71){const _0x28e6b7=_0xc1fa98,{xml:_0x332ea7}=_0x3559c7;console[_0x28e6b7(0x19d)]('xml:\x20',_0x332ea7);if(_0x332ea7[_0x28e6b7(0x160)][0x0]=='event'){if(_0x332ea7['event'][0x0]=='VIEW'||_0x332ea7[_0x28e6b7(0x194)][0x0]==_0x28e6b7(0x1b3))return _0x323e71[_0x28e6b7(0x171)](0xc8)[_0x28e6b7(0x17b)]('');if(_0x332ea7[_0x28e6b7(0x194)][0x0]=='SCAN'){console[_0x28e6b7(0x19d)]('扫码');const _0x59f19a=_0x332ea7['eventkey'][0x0];if(_0x59f19a['includes']('/')){this['officialService'][_0x28e6b7(0x190)](_0x332ea7[_0x28e6b7(0x184)][0x0],_0x59f19a);const _0x5c4146=await this[_0x28e6b7(0x198)][_0x28e6b7(0x172)](_0x332ea7,'officialBindAccountText');return _0x323e71[_0x28e6b7(0x171)](0xc8)[_0x28e6b7(0x17b)](_0x5c4146);}this[_0x28e6b7(0x198)]['scan'](_0x332ea7['fromusername'][0x0],_0x59f19a);const _0x3f6cc1=await this[_0x28e6b7(0x198)][_0x28e6b7(0x172)](_0x332ea7,_0x28e6b7(0x197));return _0x323e71[_0x28e6b7(0x171)](0xc8)[_0x28e6b7(0x17b)](_0x3f6cc1);}if(_0x332ea7[_0x28e6b7(0x194)][0x0]=='subscribe'){console['log']('订阅',_0x332ea7[_0x28e6b7(0x168)][0x0]);const _0xae0458=_0x332ea7[_0x28e6b7(0x168)][0x0]['split'](_0x28e6b7(0x16a))[0x1];console[_0x28e6b7(0x19d)](_0x28e6b7(0x163),_0xae0458);if(!_0xae0458){const _0x610a0b=await this['officialService']['genXmlMsgByConfig'](_0x332ea7,_0x28e6b7(0x187));return _0x323e71[_0x28e6b7(0x171)](0xc8)['send'](_0x610a0b);}if(_0xae0458['includes']('/')){this[_0x28e6b7(0x198)][_0x28e6b7(0x190)](_0x332ea7[_0x28e6b7(0x184)][0x0],_0xae0458);const _0x26d8c9=await this[_0x28e6b7(0x198)][_0x28e6b7(0x172)](_0x332ea7,'officialBindAccountText');return _0x323e71[_0x28e6b7(0x171)](0xc8)[_0x28e6b7(0x17b)](_0x26d8c9);}this[_0x28e6b7(0x198)]['scan'](_0x332ea7[_0x28e6b7(0x184)][0x0],_0xae0458);const _0x18f9a6=await this[_0x28e6b7(0x198)][_0x28e6b7(0x172)](_0x332ea7,_0x28e6b7(0x187));return _0x323e71['status'](0xc8)[_0x28e6b7(0x17b)](_0x18f9a6);}if(_0x332ea7['event'][0x0]==_0x28e6b7(0x15f))return _0x323e71[_0x28e6b7(0x171)](0xc8)['send']('');}if(_0x332ea7[_0x28e6b7(0x160)][0x0]=='text'){const _0x8a033b=await this[_0x28e6b7(0x198)][_0x28e6b7(0x1ad)](_0x332ea7[_0x28e6b7(0x183)][0x0]),_0x1e32e9=await this['officialService'][_0x28e6b7(0x170)](_0x332ea7,_0x8a033b);return _0x323e71['status'](0xc8)[_0x28e6b7(0x17b)](_0x1e32e9);}return _0x28e6b7(0x18d);}async[_0xc1fa98(0x180)](){const _0x5e41ae=_0xc1fa98;return this[_0x5e41ae(0x198)]['getQRSceneStr']();}async['getQRSceneStrByBind'](_0x19ec04){const _0x20d261=_0xc1fa98;return this[_0x20d261(0x198)][_0x20d261(0x16d)](_0x19ec04);}async[_0xc1fa98(0x176)](_0x332502){const _0x5edf89=_0xc1fa98;if(process[_0x5edf89(0x196)]['ISDEV']===_0x5edf89(0x1a7))return'';const _0x23c506=await this[_0x5edf89(0x198)][_0x5edf89(0x167)](_0x332502[_0x5edf89(0x18b)]),_0x3e937b=(0x0,utils_1['formatUrl'])(process[_0x5edf89(0x196)]['weChatMpUrl']||_0x5edf89(0x18f));return _0x3e937b+_0x5edf89(0x193)+encodeURIComponent(_0x23c506);}async['loginBySceneStr'](_0x8b6a87,_0x38edd0){const _0x55d52d=_0xc1fa98;return this[_0x55d52d(0x198)]['loginBySceneStr'](_0x8b6a87,_0x38edd0);}async[_0xc1fa98(0x1a5)](_0x3e1667,_0x3fb746){const _0x24288b=_0xc1fa98;return this[_0x24288b(0x198)][_0x24288b(0x1a5)](_0x3e1667,_0x3fb746[_0x24288b(0x18b)]);}async['getRedirectUrl'](_0x501d4a){const _0x3a2c4f=_0xc1fa98;return this['officialService']['getRedirectUrl'](_0x501d4a[_0x3a2c4f(0x19e)]);}async[_0xc1fa98(0x16e)](_0x102bb5){const _0x1eeafe=_0xc1fa98;return this['officialService'][_0x1eeafe(0x16e)](_0x102bb5[_0x1eeafe(0x19e)]);}async[_0xc1fa98(0x1a0)](_0x4e3ee0,_0x4042cb){const _0x414aa1=_0xc1fa98;return this[_0x414aa1(0x198)][_0x414aa1(0x1a0)](_0x4e3ee0,_0x4042cb[_0x414aa1(0x16f)]);}};__decorate([(0x0,common_1[_0xc1fa98(0x166)])('notify'),(0x0,swagger_1[_0xc1fa98(0x164)])({'summary':_0xc1fa98(0x18a)}),__param(0x0,(0x0,common_1[_0xc1fa98(0x1bb)])()),__param(0x1,(0x0,common_1[_0xc1fa98(0x165)])()),__param(0x2,(0x0,common_1[_0xc1fa98(0x1a6)])()),__metadata(_0xc1fa98(0x162),Function),__metadata(_0xc1fa98(0x17a),[Object,Object,Object]),__metadata(_0xc1fa98(0x17c),Promise)],OfficialController[_0xc1fa98(0x1b0)],_0xc1fa98(0x17f),null),__decorate([(0x0,common_1[_0xc1fa98(0x1aa)])(_0xc1fa98(0x17f)),(0x0,swagger_1['ApiOperation'])({'summary':_0xc1fa98(0x17e)}),__param(0x0,(0x0,common_1[_0xc1fa98(0x1bb)])()),__param(0x1,(0x0,common_1[_0xc1fa98(0x165)])()),__param(0x2,(0x0,common_1[_0xc1fa98(0x1a6)])()),__param(0x3,(0x0,common_1[_0xc1fa98(0x1a3)])()),__metadata(_0xc1fa98(0x162),Function),__metadata(_0xc1fa98(0x17a),[Object,Object,Object,Object]),__metadata(_0xc1fa98(0x17c),Promise)],OfficialController[_0xc1fa98(0x1b0)],_0xc1fa98(0x19f),null),__decorate([(0x0,common_1['Post'])(_0xc1fa98(0x180)),(0x0,swagger_1[_0xc1fa98(0x164)])({'summary':_0xc1fa98(0x17d)}),__metadata(_0xc1fa98(0x162),Function),__metadata(_0xc1fa98(0x17a),[]),__metadata(_0xc1fa98(0x17c),Promise)],OfficialController[_0xc1fa98(0x1b0)],_0xc1fa98(0x180),null),__decorate([(0x0,common_1['Post'])(_0xc1fa98(0x16d)),(0x0,swagger_1['ApiOperation'])({'summary':_0xc1fa98(0x15e)}),(0x0,common_1[_0xc1fa98(0x175)])(jwtAuth_guard_1[_0xc1fa98(0x18c)]),__param(0x0,(0x0,common_1[_0xc1fa98(0x1bb)])()),__metadata(_0xc1fa98(0x162),Function),__metadata(_0xc1fa98(0x17a),[Object]),__metadata(_0xc1fa98(0x17c),Promise)],OfficialController[_0xc1fa98(0x1b0)],'getQRSceneStrByBind',null),__decorate([(0x0,common_1['Get'])('getQRCode'),(0x0,swagger_1[_0xc1fa98(0x164)])({'summary':_0xc1fa98(0x186)}),__param(0x0,(0x0,common_1[_0xc1fa98(0x165)])()),__metadata(_0xc1fa98(0x162),Function),__metadata(_0xc1fa98(0x17a),[getQrCode_dto_1['GetQrCodeDto']]),__metadata(_0xc1fa98(0x17c),Promise)],OfficialController['prototype'],_0xc1fa98(0x176),null),__decorate([(0x0,common_1[_0xc1fa98(0x1aa)])('loginBySceneStr'),(0x0,swagger_1[_0xc1fa98(0x164)])({'summary':_0xc1fa98(0x19c)}),__param(0x0,(0x0,common_1[_0xc1fa98(0x1bb)])()),__param(0x1,(0x0,common_1[_0xc1fa98(0x1a6)])()),__metadata(_0xc1fa98(0x162),Function),__metadata(_0xc1fa98(0x17a),[Object,Object]),__metadata(_0xc1fa98(0x17c),Promise)],OfficialController[_0xc1fa98(0x1b0)],_0xc1fa98(0x19a),null),__decorate([(0x0,common_1['Post'])(_0xc1fa98(0x1a5)),(0x0,swagger_1['ApiOperation'])({'summary':_0xc1fa98(0x1b8)}),(0x0,common_1[_0xc1fa98(0x175)])(jwtAuth_guard_1[_0xc1fa98(0x18c)]),__param(0x0,(0x0,common_1[_0xc1fa98(0x1bb)])()),__param(0x1,(0x0,common_1['Body'])()),__metadata(_0xc1fa98(0x162),Function),__metadata(_0xc1fa98(0x17a),[Object,getQrCode_dto_1[_0xc1fa98(0x1af)]]),__metadata(_0xc1fa98(0x17c),Promise)],OfficialController[_0xc1fa98(0x1b0)],'bindWxBySceneStr',null),__decorate([(0x0,common_1[_0xc1fa98(0x1aa)])(_0xc1fa98(0x1b7)),(0x0,swagger_1[_0xc1fa98(0x164)])({'summary':_0xc1fa98(0x1b9)}),__param(0x0,(0x0,common_1[_0xc1fa98(0x1a6)])()),__metadata('design:type',Function),__metadata(_0xc1fa98(0x17a),[Object]),__metadata(_0xc1fa98(0x17c),Promise)],OfficialController['prototype'],_0xc1fa98(0x1b7),null),__decorate([(0x0,common_1[_0xc1fa98(0x1aa)])(_0xc1fa98(0x16e)),(0x0,swagger_1['ApiOperation'])({'summary':'获取注册配置'}),__param(0x0,(0x0,common_1[_0xc1fa98(0x1a6)])()),__metadata('design:type',Function),__metadata(_0xc1fa98(0x17a),[Object]),__metadata(_0xc1fa98(0x17c),Promise)],OfficialController[_0xc1fa98(0x1b0)],_0xc1fa98(0x16e),null),__decorate([(0x0,common_1[_0xc1fa98(0x1aa)])(_0xc1fa98(0x1a0)),(0x0,swagger_1[_0xc1fa98(0x164)])({'summary':_0xc1fa98(0x1a1)}),__param(0x0,(0x0,common_1[_0xc1fa98(0x1bb)])()),__param(0x1,(0x0,common_1[_0xc1fa98(0x1a6)])()),__metadata(_0xc1fa98(0x162),Function),__metadata(_0xc1fa98(0x17a),[Object,Object]),__metadata(_0xc1fa98(0x17c),Promise)],OfficialController[_0xc1fa98(0x1b0)],_0xc1fa98(0x1a0),null),OfficialController=__decorate([(0x0,swagger_1[_0xc1fa98(0x1bc)])('official'),(0x0,common_1[_0xc1fa98(0x1b4)])(_0xc1fa98(0x199)),__metadata(_0xc1fa98(0x17a),[official_service_1[_0xc1fa98(0x1a4)]])],OfficialController),exports[_0xc1fa98(0x1b6)]=OfficialController;