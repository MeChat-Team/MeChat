'use strict';function _0x2b23(){const _0x4def65=['eventkey','37856gCwoQq','timestamp','VIEW','loginByCode','获取登录二维码sceneStr','sceneStr:\x20','split','design:type','7jKzMPX','公众号通知接口POST','event','9259100irBwNN','853460PHyQyC','Res','9vZfYju','log','status','officialSubscribeText','url','unsubscribe','3aLrlnM','获取登录跳转地址','GetQrCodeDto','get\x20通知>>>','getRedirectUrl','fromusername','getQRSceneStrByBind','getQRCodeTicket','OfficialService','__decorate','Body','object','Controller','loginBySceneStr','596090amisrP','Query','bindWxBySceneStr','JwtAuthGuard','formatUrl','prototype','officialBindAccountText','official','decorate','send','length','404384HJMwtk','__esModule','Post','notifyPost','officialService','OfficialController','defineProperty','xml:\x20','genXmlMsg','getJsapiTicket','metadata','includes','scanBindWx','UseGuards','获取注册配置','843342fTcDYw','公众号静默登录','@nestjs/swagger','scan','success','扫码登录轮询查询','subscribe','function','content','Req','nonce','aotoPlay','code','weChatMpUrl','ApiOperation','design:returntype','公众号通知接口GET','CLICK','ApiTags','获取二维码','notify','./dto/getQrCode.dto','Get','genXmlMsgByConfig','design:paramtypes','env','ISDEV','text','getQRCode','msgtype','../../common/auth/jwtAuth.guard','/cgi-bin/showqrcode?ticket=','getQRSceneStr','./official.service','225610MEpTkW','sceneStr','signature'];_0x2b23=function(){return _0x4def65;};return _0x2b23();}const _0x10a80a=_0x2522;function _0x2522(_0xdb52f5,_0x2a5197){const _0x2b23ec=_0x2b23();return _0x2522=function(_0x252298,_0xc1f3fa){_0x252298=_0x252298-0x16e;let _0xaca8f6=_0x2b23ec[_0x252298];return _0xaca8f6;},_0x2522(_0xdb52f5,_0x2a5197);}(function(_0x2a310b,_0x2e237){const _0x1c8d1b=_0x2522,_0x22cba3=_0x2a310b();while(!![]){try{const _0x175e8a=-parseInt(_0x1c8d1b(0x1cf))/0x1+-parseInt(_0x1c8d1b(0x171))/0x2+parseInt(_0x1c8d1b(0x185))/0x3*(-parseInt(_0x1c8d1b(0x17d))/0x4)+-parseInt(_0x1c8d1b(0x193))/0x5+-parseInt(_0x1c8d1b(0x1ad))/0x6*(parseInt(_0x1c8d1b(0x179))/0x7)+-parseInt(_0x1c8d1b(0x19e))/0x8+parseInt(_0x1c8d1b(0x17f))/0x9*(parseInt(_0x1c8d1b(0x17c))/0xa);if(_0x175e8a===_0x2e237)break;else _0x22cba3['push'](_0x22cba3['shift']());}catch(_0x31f2df){_0x22cba3['push'](_0x22cba3['shift']());}}}(_0x2b23,0x267f4));var __decorate=this&&this[_0x10a80a(0x18e)]||function(_0x1516de,_0xb294f2,_0x4e4527,_0x5a0a8e){const _0x126d04=_0x10a80a;var _0x96057a=arguments[_0x126d04(0x19d)],_0x32cc5e=_0x96057a<0x3?_0xb294f2:_0x5a0a8e===null?_0x5a0a8e=Object['getOwnPropertyDescriptor'](_0xb294f2,_0x4e4527):_0x5a0a8e,_0x1593d9;if(typeof Reflect==='object'&&typeof Reflect[_0x126d04(0x19b)]==='function')_0x32cc5e=Reflect[_0x126d04(0x19b)](_0x1516de,_0xb294f2,_0x4e4527,_0x5a0a8e);else{for(var _0x25280b=_0x1516de[_0x126d04(0x19d)]-0x1;_0x25280b>=0x0;_0x25280b--)if(_0x1593d9=_0x1516de[_0x25280b])_0x32cc5e=(_0x96057a<0x3?_0x1593d9(_0x32cc5e):_0x96057a>0x3?_0x1593d9(_0xb294f2,_0x4e4527,_0x32cc5e):_0x1593d9(_0xb294f2,_0x4e4527))||_0x32cc5e;}return _0x96057a>0x3&&_0x32cc5e&&Object['defineProperty'](_0xb294f2,_0x4e4527,_0x32cc5e),_0x32cc5e;},__metadata=this&&this['__metadata']||function(_0x17a472,_0x5b8820){const _0x389453=_0x10a80a;if(typeof Reflect===_0x389453(0x190)&&typeof Reflect[_0x389453(0x1a8)]===_0x389453(0x1b4))return Reflect[_0x389453(0x1a8)](_0x17a472,_0x5b8820);},__param=this&&this['__param']||function(_0x52c325,_0x168e92){return function(_0x49a529,_0x31c5ca){_0x168e92(_0x49a529,_0x31c5ca,_0x52c325);};};Object[_0x10a80a(0x1a4)](exports,_0x10a80a(0x19f),{'value':!![]}),exports[_0x10a80a(0x1a3)]=void 0x0;const jwtAuth_guard_1=require(_0x10a80a(0x1cb)),utils_1=require('../../common/utils'),common_1=require('@nestjs/common'),swagger_1=require(_0x10a80a(0x1af)),getQrCode_dto_1=require(_0x10a80a(0x1c2)),official_service_1=require(_0x10a80a(0x1ce));let OfficialController=class OfficialController{constructor(_0x5b8b59){const _0x38af46=_0x10a80a;this[_0x38af46(0x1a2)]=_0x5b8b59;}async[_0x10a80a(0x1c1)](_0x2abfee,_0x1858e1,_0x4c39b3){const _0x39e72d=_0x10a80a;console[_0x39e72d(0x180)](_0x39e72d(0x188),_0x1858e1,_0x4c39b3);const _0x56fcb1=await this['officialService']['verify'](_0x1858e1[_0x39e72d(0x16f)],_0x1858e1[_0x39e72d(0x1b7)],_0x1858e1[_0x39e72d(0x172)]);return _0x56fcb1?_0x1858e1['echostr']:'';}async[_0x10a80a(0x1a1)](_0x281116,_0x2001a5,_0x15ea0c,_0x99bf18){const _0x483f1b=_0x10a80a,{xml:_0x3a605a}=_0x15ea0c;console[_0x483f1b(0x180)](_0x483f1b(0x1a5),_0x3a605a);if(_0x3a605a[_0x483f1b(0x1ca)][0x0]=='event'){if(_0x3a605a[_0x483f1b(0x17b)][0x0]==_0x483f1b(0x173)||_0x3a605a[_0x483f1b(0x17b)][0x0]==_0x483f1b(0x1be))return _0x99bf18['status'](0xc8)[_0x483f1b(0x19c)]('');if(_0x3a605a[_0x483f1b(0x17b)][0x0]=='SCAN'){console[_0x483f1b(0x180)]('扫码');const _0x2fc841=_0x3a605a[_0x483f1b(0x170)][0x0];if(_0x2fc841[_0x483f1b(0x1a9)]('/')){this[_0x483f1b(0x1a2)][_0x483f1b(0x1aa)](_0x3a605a[_0x483f1b(0x18a)][0x0],_0x2fc841);const _0x457c58=await this[_0x483f1b(0x1a2)]['genXmlMsgByConfig'](_0x3a605a,_0x483f1b(0x199));return _0x99bf18[_0x483f1b(0x181)](0xc8)[_0x483f1b(0x19c)](_0x457c58);}this[_0x483f1b(0x1a2)]['scan'](_0x3a605a[_0x483f1b(0x18a)][0x0],_0x2fc841);const _0x250582=await this[_0x483f1b(0x1a2)][_0x483f1b(0x1c4)](_0x3a605a,'officialScanLoginText');return _0x99bf18[_0x483f1b(0x181)](0xc8)[_0x483f1b(0x19c)](_0x250582);}if(_0x3a605a[_0x483f1b(0x17b)][0x0]==_0x483f1b(0x1b3)){console[_0x483f1b(0x180)]('订阅',_0x3a605a[_0x483f1b(0x170)][0x0]);const _0x291dff=_0x3a605a['eventkey'][0x0][_0x483f1b(0x177)]('qrscene_')[0x1];console['log'](_0x483f1b(0x176),_0x291dff);if(!_0x291dff){const _0x156c66=await this[_0x483f1b(0x1a2)][_0x483f1b(0x1c4)](_0x3a605a,_0x483f1b(0x182));return _0x99bf18['status'](0xc8)['send'](_0x156c66);}if(_0x291dff[_0x483f1b(0x1a9)]('/')){this[_0x483f1b(0x1a2)][_0x483f1b(0x1aa)](_0x3a605a[_0x483f1b(0x18a)][0x0],_0x291dff);const _0x3c5338=await this[_0x483f1b(0x1a2)][_0x483f1b(0x1c4)](_0x3a605a,_0x483f1b(0x199));return _0x99bf18[_0x483f1b(0x181)](0xc8)[_0x483f1b(0x19c)](_0x3c5338);}this[_0x483f1b(0x1a2)][_0x483f1b(0x1b0)](_0x3a605a['fromusername'][0x0],_0x291dff);const _0x2ddf7e=await this['officialService'][_0x483f1b(0x1c4)](_0x3a605a,'officialSubscribeText');return _0x99bf18['status'](0xc8)['send'](_0x2ddf7e);}if(_0x3a605a[_0x483f1b(0x17b)][0x0]==_0x483f1b(0x184))return _0x99bf18[_0x483f1b(0x181)](0xc8)[_0x483f1b(0x19c)]('');}if(_0x3a605a[_0x483f1b(0x1ca)][0x0]==_0x483f1b(0x1c8)){const _0x8b082f=await this[_0x483f1b(0x1a2)][_0x483f1b(0x1b8)](_0x3a605a[_0x483f1b(0x1b5)][0x0]),_0x37add4=await this[_0x483f1b(0x1a2)][_0x483f1b(0x1a6)](_0x3a605a,_0x8b082f);return _0x99bf18[_0x483f1b(0x181)](0xc8)[_0x483f1b(0x19c)](_0x37add4);}return _0x483f1b(0x1b1);}async[_0x10a80a(0x1cd)](){const _0x1df72f=_0x10a80a;return this[_0x1df72f(0x1a2)][_0x1df72f(0x1cd)]();}async[_0x10a80a(0x18b)](_0x59b64d){const _0x19bd32=_0x10a80a;return this[_0x19bd32(0x1a2)][_0x19bd32(0x18b)](_0x59b64d);}async[_0x10a80a(0x1c9)](_0xeeab0a){const _0x356c5c=_0x10a80a;if(process[_0x356c5c(0x1c6)][_0x356c5c(0x1c7)]==='TRUE')return'';const _0x194c81=await this[_0x356c5c(0x1a2)][_0x356c5c(0x18c)](_0xeeab0a[_0x356c5c(0x16e)]),_0x2a8c81=(0x0,utils_1[_0x356c5c(0x197)])(process[_0x356c5c(0x1c6)][_0x356c5c(0x1ba)]||'https://mp.weixin.qq.com');return _0x2a8c81+_0x356c5c(0x1cc)+encodeURIComponent(_0x194c81);}async[_0x10a80a(0x192)](_0x5684bd,_0x3da7bf){const _0xe34ab1=_0x10a80a;return this[_0xe34ab1(0x1a2)][_0xe34ab1(0x192)](_0x5684bd,_0x3da7bf);}async[_0x10a80a(0x195)](_0x1a7434,_0x249805){const _0x2528ec=_0x10a80a;return this['officialService']['bindWxBySceneStr'](_0x1a7434,_0x249805[_0x2528ec(0x16e)]);}async[_0x10a80a(0x189)](_0x47eaa4){const _0x5706d8=_0x10a80a;return this['officialService'][_0x5706d8(0x189)](_0x47eaa4[_0x5706d8(0x183)]);}async[_0x10a80a(0x1a7)](_0x646255){const _0x38ff9b=_0x10a80a;return this[_0x38ff9b(0x1a2)][_0x38ff9b(0x1a7)](_0x646255[_0x38ff9b(0x183)]);}async['loginByCode'](_0x1f8b74,_0x5ef53f){const _0x1e01f1=_0x10a80a;return this[_0x1e01f1(0x1a2)][_0x1e01f1(0x174)](_0x1f8b74,_0x5ef53f[_0x1e01f1(0x1b9)]);}};__decorate([(0x0,common_1['Get'])(_0x10a80a(0x1c1)),(0x0,swagger_1[_0x10a80a(0x1bb)])({'summary':_0x10a80a(0x1bd)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1['Query'])()),__param(0x2,(0x0,common_1[_0x10a80a(0x18f)])()),__metadata(_0x10a80a(0x178),Function),__metadata(_0x10a80a(0x1c5),[Object,Object,Object]),__metadata('design:returntype',Promise)],OfficialController[_0x10a80a(0x198)],_0x10a80a(0x1c1),null),__decorate([(0x0,common_1[_0x10a80a(0x1a0)])('notify'),(0x0,swagger_1[_0x10a80a(0x1bb)])({'summary':_0x10a80a(0x17a)}),__param(0x0,(0x0,common_1[_0x10a80a(0x1b6)])()),__param(0x1,(0x0,common_1[_0x10a80a(0x194)])()),__param(0x2,(0x0,common_1[_0x10a80a(0x18f)])()),__param(0x3,(0x0,common_1[_0x10a80a(0x17e)])()),__metadata(_0x10a80a(0x178),Function),__metadata('design:paramtypes',[Object,Object,Object,Object]),__metadata(_0x10a80a(0x1bc),Promise)],OfficialController['prototype'],'notifyPost',null),__decorate([(0x0,common_1[_0x10a80a(0x1a0)])(_0x10a80a(0x1cd)),(0x0,swagger_1[_0x10a80a(0x1bb)])({'summary':_0x10a80a(0x175)}),__metadata(_0x10a80a(0x178),Function),__metadata(_0x10a80a(0x1c5),[]),__metadata(_0x10a80a(0x1bc),Promise)],OfficialController[_0x10a80a(0x198)],_0x10a80a(0x1cd),null),__decorate([(0x0,common_1[_0x10a80a(0x1a0)])(_0x10a80a(0x18b)),(0x0,swagger_1['ApiOperation'])({'summary':'获取绑定二维码的sceneStr'}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1['JwtAuthGuard']),__param(0x0,(0x0,common_1[_0x10a80a(0x1b6)])()),__metadata(_0x10a80a(0x178),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x10a80a(0x1bc),Promise)],OfficialController[_0x10a80a(0x198)],'getQRSceneStrByBind',null),__decorate([(0x0,common_1[_0x10a80a(0x1c3)])(_0x10a80a(0x1c9)),(0x0,swagger_1[_0x10a80a(0x1bb)])({'summary':_0x10a80a(0x1c0)}),__param(0x0,(0x0,common_1['Query'])()),__metadata(_0x10a80a(0x178),Function),__metadata(_0x10a80a(0x1c5),[getQrCode_dto_1[_0x10a80a(0x187)]]),__metadata(_0x10a80a(0x1bc),Promise)],OfficialController[_0x10a80a(0x198)],'getQRCode',null),__decorate([(0x0,common_1[_0x10a80a(0x1a0)])('loginBySceneStr'),(0x0,swagger_1[_0x10a80a(0x1bb)])({'summary':_0x10a80a(0x1b2)}),__param(0x0,(0x0,common_1[_0x10a80a(0x1b6)])()),__param(0x1,(0x0,common_1['Body'])()),__metadata('design:type',Function),__metadata(_0x10a80a(0x1c5),[Object,Object]),__metadata('design:returntype',Promise)],OfficialController[_0x10a80a(0x198)],_0x10a80a(0x192),null),__decorate([(0x0,common_1[_0x10a80a(0x1a0)])(_0x10a80a(0x195)),(0x0,swagger_1[_0x10a80a(0x1bb)])({'summary':'扫码绑定轮询查询'}),(0x0,common_1[_0x10a80a(0x1ab)])(jwtAuth_guard_1[_0x10a80a(0x196)]),__param(0x0,(0x0,common_1[_0x10a80a(0x1b6)])()),__param(0x1,(0x0,common_1[_0x10a80a(0x18f)])()),__metadata('design:type',Function),__metadata(_0x10a80a(0x1c5),[Object,getQrCode_dto_1['GetQrCodeDto']]),__metadata(_0x10a80a(0x1bc),Promise)],OfficialController['prototype'],_0x10a80a(0x195),null),__decorate([(0x0,common_1['Post'])('getRedirectUrl'),(0x0,swagger_1['ApiOperation'])({'summary':_0x10a80a(0x186)}),__param(0x0,(0x0,common_1[_0x10a80a(0x18f)])()),__metadata(_0x10a80a(0x178),Function),__metadata(_0x10a80a(0x1c5),[Object]),__metadata(_0x10a80a(0x1bc),Promise)],OfficialController[_0x10a80a(0x198)],_0x10a80a(0x189),null),__decorate([(0x0,common_1['Post'])(_0x10a80a(0x1a7)),(0x0,swagger_1[_0x10a80a(0x1bb)])({'summary':_0x10a80a(0x1ac)}),__param(0x0,(0x0,common_1[_0x10a80a(0x18f)])()),__metadata(_0x10a80a(0x178),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x10a80a(0x1bc),Promise)],OfficialController[_0x10a80a(0x198)],_0x10a80a(0x1a7),null),__decorate([(0x0,common_1['Post'])('loginByCode'),(0x0,swagger_1[_0x10a80a(0x1bb)])({'summary':_0x10a80a(0x1ae)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x10a80a(0x18f)])()),__metadata(_0x10a80a(0x178),Function),__metadata(_0x10a80a(0x1c5),[Object,Object]),__metadata('design:returntype',Promise)],OfficialController[_0x10a80a(0x198)],_0x10a80a(0x174),null),OfficialController=__decorate([(0x0,swagger_1[_0x10a80a(0x1bf)])(_0x10a80a(0x19a)),(0x0,common_1[_0x10a80a(0x191)])(_0x10a80a(0x19a)),__metadata(_0x10a80a(0x1c5),[official_service_1[_0x10a80a(0x18d)]])],OfficialController),exports['OfficialController']=OfficialController;