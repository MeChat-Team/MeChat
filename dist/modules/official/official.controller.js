'use strict';const _0x3aade7=_0x48d3;(function(_0x33d48d,_0xb83ab1){const _0x54734d=_0x48d3,_0x56c493=_0x33d48d();while(!![]){try{const _0x5b5f00=-parseInt(_0x54734d(0x75))/0x1*(-parseInt(_0x54734d(0xd1))/0x2)+parseInt(_0x54734d(0x82))/0x3*(-parseInt(_0x54734d(0x97))/0x4)+parseInt(_0x54734d(0xc9))/0x5*(-parseInt(_0x54734d(0xc5))/0x6)+parseInt(_0x54734d(0xaf))/0x7+parseInt(_0x54734d(0xb6))/0x8+-parseInt(_0x54734d(0xa4))/0x9+-parseInt(_0x54734d(0x94))/0xa*(parseInt(_0x54734d(0xd0))/0xb);if(_0x5b5f00===_0xb83ab1)break;else _0x56c493['push'](_0x56c493['shift']());}catch(_0x5c29e3){_0x56c493['push'](_0x56c493['shift']());}}}(_0x26e3,0xea710));function _0x48d3(_0xbcbfbe,_0x4e2074){const _0x26e3ac=_0x26e3();return _0x48d3=function(_0x48d3ae,_0x50d238){_0x48d3ae=_0x48d3ae-0x71;let _0x333afd=_0x26e3ac[_0x48d3ae];return _0x333afd;},_0x48d3(_0xbcbfbe,_0x4e2074);}var __decorate=this&&this[_0x3aade7(0x9e)]||function(_0x1b9127,_0x37b159,_0xa0eb10,_0x2fcbb3){const _0x3a10c3=_0x3aade7;var _0x5ecd63=arguments[_0x3a10c3(0xb0)],_0x5d656a=_0x5ecd63<0x3?_0x37b159:_0x2fcbb3===null?_0x2fcbb3=Object[_0x3a10c3(0xcc)](_0x37b159,_0xa0eb10):_0x2fcbb3,_0x1485bb;if(typeof Reflect===_0x3a10c3(0x9d)&&typeof Reflect[_0x3a10c3(0xa5)]===_0x3a10c3(0x99))_0x5d656a=Reflect[_0x3a10c3(0xa5)](_0x1b9127,_0x37b159,_0xa0eb10,_0x2fcbb3);else{for(var _0x13f69c=_0x1b9127[_0x3a10c3(0xb0)]-0x1;_0x13f69c>=0x0;_0x13f69c--)if(_0x1485bb=_0x1b9127[_0x13f69c])_0x5d656a=(_0x5ecd63<0x3?_0x1485bb(_0x5d656a):_0x5ecd63>0x3?_0x1485bb(_0x37b159,_0xa0eb10,_0x5d656a):_0x1485bb(_0x37b159,_0xa0eb10))||_0x5d656a;}return _0x5ecd63>0x3&&_0x5d656a&&Object[_0x3a10c3(0xc1)](_0x37b159,_0xa0eb10,_0x5d656a),_0x5d656a;},__metadata=this&&this[_0x3aade7(0xc6)]||function(_0x5ecfff,_0x4f92f6){const _0x112778=_0x3aade7;if(typeof Reflect===_0x112778(0x9d)&&typeof Reflect[_0x112778(0x78)]===_0x112778(0x99))return Reflect[_0x112778(0x78)](_0x5ecfff,_0x4f92f6);},__param=this&&this[_0x3aade7(0x93)]||function(_0x1c13c3,_0x16d6b5){return function(_0x27d7ed,_0x244639){_0x16d6b5(_0x27d7ed,_0x244639,_0x1c13c3);};};Object[_0x3aade7(0xc1)](exports,'__esModule',{'value':!![]}),exports['OfficialController']=void 0x0;function _0x26e3(){const _0x3b2c8f=['GetQrCodeDto','getQRSceneStr','17600TRZzkf','42NOVXqz','getQRSceneStrByBind','SCAN','Post','Get','loginBySceneStr','eventkey','officialSubscribeText','69279JyBELQ','aotoPlay','officialBindAccountText','metadata','scan','Res','official','Body','design:paramtypes','xml:\x20','split','msgtype','公众号通知接口POST','102ASXems','bindWxBySceneStr','subscribe','url','log','Req','status','@nestjs/swagger','获取二维码','getQRCodeTicket','OfficialService','officialService','../../common/utils','Query','ISDEV','./official.service','send','__param','1970OzllMf','timestamp','genXmlMsgByConfig','84852SezAsl','扫码绑定轮询查询','function','weChatMpUrl','includes','env','object','__decorate','nonce','fromusername','loginByCode','获取绑定二维码的sceneStr','OfficialController','1872810rTyTzN','decorate','echostr','公众号静默登录','CLICK','design:returntype','getQRCode','https://mp.weixin.qq.com','officialScanLoginText','unsubscribe','获取登录二维码sceneStr','12386472sOxjRN','length','scanBindWx','/cgi-bin/showqrcode?ticket=','design:type','ApiTags','sceneStr','2884304TKqUvJ','sceneStr:\x20','prototype','success','getRedirectUrl','@nestjs/common','getJsapiTicket','公众号通知接口GET','notifyPost','text','ApiOperation','defineProperty','JwtAuthGuard','content','genXmlMsg','267114mfGvWx','__metadata','notify','UseGuards','155Lysvuf','event','VIEW','getOwnPropertyDescriptor','TRUE'];_0x26e3=function(){return _0x3b2c8f;};return _0x26e3();}const jwtAuth_guard_1=require('../../common/auth/jwtAuth.guard'),utils_1=require(_0x3aade7(0x8e)),common_1=require(_0x3aade7(0xbb)),swagger_1=require(_0x3aade7(0x89)),getQrCode_dto_1=require('./dto/getQrCode.dto'),official_service_1=require(_0x3aade7(0x91));let OfficialController=class OfficialController{constructor(_0xde9349){const _0x204464=_0x3aade7;this[_0x204464(0x8d)]=_0xde9349;}async['notify'](_0x57b3e1,_0x2e8bec,_0x598f0c){const _0x33eeb9=_0x3aade7;console[_0x33eeb9(0x86)]('get\x20通知>>>',_0x2e8bec,_0x598f0c);const _0x98413a=await this[_0x33eeb9(0x8d)]['verify'](_0x2e8bec['signature'],_0x2e8bec[_0x33eeb9(0x9f)],_0x2e8bec[_0x33eeb9(0x95)]);return _0x98413a?_0x2e8bec[_0x33eeb9(0xa6)]:'';}async['notifyPost'](_0x19efb0,_0x4260fe,_0x2628d5,_0xcb2162){const _0xd55e4f=_0x3aade7,{xml:_0x3952a6}=_0x2628d5;console[_0xd55e4f(0x86)](_0xd55e4f(0x7e),_0x3952a6);if(_0x3952a6[_0xd55e4f(0x80)][0x0]=='event'){if(_0x3952a6['event'][0x0]==_0xd55e4f(0xcb)||_0x3952a6[_0xd55e4f(0xca)][0x0]==_0xd55e4f(0xa8))return _0xcb2162[_0xd55e4f(0x88)](0xc8)[_0xd55e4f(0x92)]('');if(_0x3952a6['event'][0x0]==_0xd55e4f(0xd3)){console[_0xd55e4f(0x86)]('扫码');const _0x2532e2=_0x3952a6[_0xd55e4f(0x73)][0x0];if(_0x2532e2['includes']('/')){this[_0xd55e4f(0x8d)][_0xd55e4f(0xb1)](_0x3952a6['fromusername'][0x0],_0x2532e2);const _0x248530=await this[_0xd55e4f(0x8d)][_0xd55e4f(0x96)](_0x3952a6,_0xd55e4f(0x77));return _0xcb2162[_0xd55e4f(0x88)](0xc8)[_0xd55e4f(0x92)](_0x248530);}this[_0xd55e4f(0x8d)][_0xd55e4f(0x79)](_0x3952a6[_0xd55e4f(0xa0)][0x0],_0x2532e2);const _0x15135b=await this[_0xd55e4f(0x8d)][_0xd55e4f(0x96)](_0x3952a6,_0xd55e4f(0xac));return _0xcb2162['status'](0xc8)['send'](_0x15135b);}if(_0x3952a6[_0xd55e4f(0xca)][0x0]==_0xd55e4f(0x84)){console[_0xd55e4f(0x86)]('订阅',_0x3952a6[_0xd55e4f(0x73)][0x0]);const _0x2bbcb4=_0x3952a6[_0xd55e4f(0x73)][0x0][_0xd55e4f(0x7f)]('qrscene_')[0x1];console['log'](_0xd55e4f(0xb7),_0x2bbcb4);if(!_0x2bbcb4){const _0x394e45=await this[_0xd55e4f(0x8d)]['genXmlMsgByConfig'](_0x3952a6,_0xd55e4f(0x74));return _0xcb2162[_0xd55e4f(0x88)](0xc8)[_0xd55e4f(0x92)](_0x394e45);}if(_0x2bbcb4[_0xd55e4f(0x9b)]('/')){this[_0xd55e4f(0x8d)][_0xd55e4f(0xb1)](_0x3952a6[_0xd55e4f(0xa0)][0x0],_0x2bbcb4);const _0x2ca09d=await this[_0xd55e4f(0x8d)][_0xd55e4f(0x96)](_0x3952a6,'officialBindAccountText');return _0xcb2162[_0xd55e4f(0x88)](0xc8)[_0xd55e4f(0x92)](_0x2ca09d);}this[_0xd55e4f(0x8d)][_0xd55e4f(0x79)](_0x3952a6[_0xd55e4f(0xa0)][0x0],_0x2bbcb4);const _0x596945=await this['officialService'][_0xd55e4f(0x96)](_0x3952a6,_0xd55e4f(0x74));return _0xcb2162[_0xd55e4f(0x88)](0xc8)[_0xd55e4f(0x92)](_0x596945);}if(_0x3952a6[_0xd55e4f(0xca)][0x0]==_0xd55e4f(0xad))return _0xcb2162[_0xd55e4f(0x88)](0xc8)[_0xd55e4f(0x92)]('');}if(_0x3952a6[_0xd55e4f(0x80)][0x0]==_0xd55e4f(0xbf)){const _0x527761=await this[_0xd55e4f(0x8d)][_0xd55e4f(0x76)](_0x3952a6[_0xd55e4f(0xc3)][0x0]),_0x285f5f=await this[_0xd55e4f(0x8d)][_0xd55e4f(0xc4)](_0x3952a6,_0x527761);return _0xcb2162[_0xd55e4f(0x88)](0xc8)[_0xd55e4f(0x92)](_0x285f5f);}return _0xd55e4f(0xb9);}async[_0x3aade7(0xcf)](){const _0x1c54ef=_0x3aade7;return this[_0x1c54ef(0x8d)][_0x1c54ef(0xcf)]();}async[_0x3aade7(0xd2)](_0x48815b){const _0x449053=_0x3aade7;return this['officialService'][_0x449053(0xd2)](_0x48815b);}async[_0x3aade7(0xaa)](_0x3b0125){const _0x2c5a37=_0x3aade7;if(process[_0x2c5a37(0x9c)][_0x2c5a37(0x90)]===_0x2c5a37(0xcd))return'';const _0x1a6e89=await this[_0x2c5a37(0x8d)][_0x2c5a37(0x8b)](_0x3b0125[_0x2c5a37(0xb5)]),_0x7ecdc3=(0x0,utils_1['formatUrl'])(process[_0x2c5a37(0x9c)][_0x2c5a37(0x9a)]||_0x2c5a37(0xab));return _0x7ecdc3+_0x2c5a37(0xb2)+encodeURIComponent(_0x1a6e89);}async['loginBySceneStr'](_0x3c36eb,_0x1806be){const _0x49499c=_0x3aade7;return this[_0x49499c(0x8d)]['loginBySceneStr'](_0x3c36eb,_0x1806be);}async['bindWxBySceneStr'](_0xabc3d9,_0x5961dd){const _0x59b6a9=_0x3aade7;return this[_0x59b6a9(0x8d)][_0x59b6a9(0x83)](_0xabc3d9,_0x5961dd[_0x59b6a9(0xb5)]);}async[_0x3aade7(0xba)](_0x4ac4d3){const _0x1c51b7=_0x3aade7;return this[_0x1c51b7(0x8d)][_0x1c51b7(0xba)](_0x4ac4d3[_0x1c51b7(0x85)]);}async[_0x3aade7(0xbc)](_0x9832f7){const _0x5d972a=_0x3aade7;return this[_0x5d972a(0x8d)]['getJsapiTicket'](_0x9832f7[_0x5d972a(0x85)]);}async[_0x3aade7(0xa1)](_0x54f532,_0x9bb57c){const _0x4966e9=_0x3aade7;return this[_0x4966e9(0x8d)][_0x4966e9(0xa1)](_0x54f532,_0x9bb57c['code']);}};__decorate([(0x0,common_1[_0x3aade7(0x71)])(_0x3aade7(0xc7)),(0x0,swagger_1[_0x3aade7(0xc0)])({'summary':_0x3aade7(0xbd)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x3aade7(0x8f)])()),__param(0x2,(0x0,common_1[_0x3aade7(0x7c)])()),__metadata(_0x3aade7(0xb3),Function),__metadata('design:paramtypes',[Object,Object,Object]),__metadata('design:returntype',Promise)],OfficialController[_0x3aade7(0xb8)],_0x3aade7(0xc7),null),__decorate([(0x0,common_1['Post'])(_0x3aade7(0xc7)),(0x0,swagger_1[_0x3aade7(0xc0)])({'summary':_0x3aade7(0x81)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x3aade7(0x8f)])()),__param(0x2,(0x0,common_1[_0x3aade7(0x7c)])()),__param(0x3,(0x0,common_1[_0x3aade7(0x7a)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,Object,Object,Object]),__metadata('design:returntype',Promise)],OfficialController[_0x3aade7(0xb8)],_0x3aade7(0xbe),null),__decorate([(0x0,common_1['Post'])(_0x3aade7(0xcf)),(0x0,swagger_1[_0x3aade7(0xc0)])({'summary':_0x3aade7(0xae)}),__metadata(_0x3aade7(0xb3),Function),__metadata(_0x3aade7(0x7d),[]),__metadata(_0x3aade7(0xa9),Promise)],OfficialController[_0x3aade7(0xb8)],_0x3aade7(0xcf),null),__decorate([(0x0,common_1[_0x3aade7(0xd4)])('getQRSceneStrByBind'),(0x0,swagger_1[_0x3aade7(0xc0)])({'summary':_0x3aade7(0xa2)}),(0x0,common_1[_0x3aade7(0xc8)])(jwtAuth_guard_1[_0x3aade7(0xc2)]),__param(0x0,(0x0,common_1['Req'])()),__metadata(_0x3aade7(0xb3),Function),__metadata(_0x3aade7(0x7d),[Object]),__metadata(_0x3aade7(0xa9),Promise)],OfficialController[_0x3aade7(0xb8)],'getQRSceneStrByBind',null),__decorate([(0x0,common_1[_0x3aade7(0x71)])('getQRCode'),(0x0,swagger_1[_0x3aade7(0xc0)])({'summary':_0x3aade7(0x8a)}),__param(0x0,(0x0,common_1[_0x3aade7(0x8f)])()),__metadata(_0x3aade7(0xb3),Function),__metadata(_0x3aade7(0x7d),[getQrCode_dto_1['GetQrCodeDto']]),__metadata(_0x3aade7(0xa9),Promise)],OfficialController['prototype'],_0x3aade7(0xaa),null),__decorate([(0x0,common_1['Post'])(_0x3aade7(0x72)),(0x0,swagger_1['ApiOperation'])({'summary':'扫码登录轮询查询'}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x3aade7(0x7c)])()),__metadata(_0x3aade7(0xb3),Function),__metadata('design:paramtypes',[Object,Object]),__metadata(_0x3aade7(0xa9),Promise)],OfficialController[_0x3aade7(0xb8)],_0x3aade7(0x72),null),__decorate([(0x0,common_1[_0x3aade7(0xd4)])('bindWxBySceneStr'),(0x0,swagger_1['ApiOperation'])({'summary':_0x3aade7(0x98)}),(0x0,common_1[_0x3aade7(0xc8)])(jwtAuth_guard_1[_0x3aade7(0xc2)]),__param(0x0,(0x0,common_1[_0x3aade7(0x87)])()),__param(0x1,(0x0,common_1[_0x3aade7(0x7c)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,getQrCode_dto_1[_0x3aade7(0xce)]]),__metadata(_0x3aade7(0xa9),Promise)],OfficialController[_0x3aade7(0xb8)],'bindWxBySceneStr',null),__decorate([(0x0,common_1['Post'])('getRedirectUrl'),(0x0,swagger_1[_0x3aade7(0xc0)])({'summary':'获取登录跳转地址'}),__param(0x0,(0x0,common_1[_0x3aade7(0x7c)])()),__metadata(_0x3aade7(0xb3),Function),__metadata(_0x3aade7(0x7d),[Object]),__metadata(_0x3aade7(0xa9),Promise)],OfficialController[_0x3aade7(0xb8)],_0x3aade7(0xba),null),__decorate([(0x0,common_1[_0x3aade7(0xd4)])(_0x3aade7(0xbc)),(0x0,swagger_1['ApiOperation'])({'summary':'获取注册配置'}),__param(0x0,(0x0,common_1[_0x3aade7(0x7c)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata(_0x3aade7(0xa9),Promise)],OfficialController[_0x3aade7(0xb8)],_0x3aade7(0xbc),null),__decorate([(0x0,common_1[_0x3aade7(0xd4)])('loginByCode'),(0x0,swagger_1['ApiOperation'])({'summary':_0x3aade7(0xa7)}),__param(0x0,(0x0,common_1[_0x3aade7(0x87)])()),__param(0x1,(0x0,common_1[_0x3aade7(0x7c)])()),__metadata(_0x3aade7(0xb3),Function),__metadata(_0x3aade7(0x7d),[Object,Object]),__metadata(_0x3aade7(0xa9),Promise)],OfficialController[_0x3aade7(0xb8)],'loginByCode',null),OfficialController=__decorate([(0x0,swagger_1[_0x3aade7(0xb4)])(_0x3aade7(0x7b)),(0x0,common_1['Controller'])(_0x3aade7(0x7b)),__metadata(_0x3aade7(0x7d),[official_service_1[_0x3aade7(0x8c)]])],OfficialController),exports[_0x3aade7(0xa3)]=OfficialController;