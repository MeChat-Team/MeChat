'use strict';const _0x2ea234=_0xda16;(function(_0x3cf731,_0x9c7a68){const _0xf24cf7=_0xda16,_0x1c5af0=_0x3cf731();while(!![]){try{const _0x1f2525=parseInt(_0xf24cf7(0x1df))/0x1+-parseInt(_0xf24cf7(0x1b5))/0x2+-parseInt(_0xf24cf7(0x1b1))/0x3*(-parseInt(_0xf24cf7(0x1c9))/0x4)+parseInt(_0xf24cf7(0x1b0))/0x5*(parseInt(_0xf24cf7(0x1ea))/0x6)+-parseInt(_0xf24cf7(0x1f7))/0x7*(parseInt(_0xf24cf7(0x1d5))/0x8)+parseInt(_0xf24cf7(0x1ef))/0x9+-parseInt(_0xf24cf7(0x1c6))/0xa*(parseInt(_0xf24cf7(0x201))/0xb);if(_0x1f2525===_0x9c7a68)break;else _0x1c5af0['push'](_0x1c5af0['shift']());}catch(_0x329f92){_0x1c5af0['push'](_0x1c5af0['shift']());}}}(_0x4bdb,0x37d11));var __decorate=this&&this[_0x2ea234(0x1d0)]||function(_0x1bcbb1,_0x48618c,_0x517d9e,_0x50a0f0){const _0x2bd12d=_0x2ea234;var _0x3292b4=arguments['length'],_0x573c83=_0x3292b4<0x3?_0x48618c:_0x50a0f0===null?_0x50a0f0=Object[_0x2bd12d(0x1b4)](_0x48618c,_0x517d9e):_0x50a0f0,_0x4fc6e8;if(typeof Reflect===_0x2bd12d(0x1ac)&&typeof Reflect['decorate']===_0x2bd12d(0x1c4))_0x573c83=Reflect['decorate'](_0x1bcbb1,_0x48618c,_0x517d9e,_0x50a0f0);else{for(var _0x5d6add=_0x1bcbb1[_0x2bd12d(0x1f8)]-0x1;_0x5d6add>=0x0;_0x5d6add--)if(_0x4fc6e8=_0x1bcbb1[_0x5d6add])_0x573c83=(_0x3292b4<0x3?_0x4fc6e8(_0x573c83):_0x3292b4>0x3?_0x4fc6e8(_0x48618c,_0x517d9e,_0x573c83):_0x4fc6e8(_0x48618c,_0x517d9e))||_0x573c83;}return _0x3292b4>0x3&&_0x573c83&&Object[_0x2bd12d(0x200)](_0x48618c,_0x517d9e,_0x573c83),_0x573c83;},__metadata=this&&this['__metadata']||function(_0x248a1e,_0x3789d4){const _0x98e17e=_0x2ea234;if(typeof Reflect===_0x98e17e(0x1ac)&&typeof Reflect[_0x98e17e(0x1a4)]===_0x98e17e(0x1c4))return Reflect[_0x98e17e(0x1a4)](_0x248a1e,_0x3789d4);},__param=this&&this['__param']||function(_0x388bad,_0x382d46){return function(_0x19836d,_0x5d878e){_0x382d46(_0x19836d,_0x5d878e,_0x388bad);};};function _0x4bdb(){const _0x5d3e68=['fromusername','getQRSceneStrByBind','notifyPost','get\x20通知>>>','env','1477xFqIQX','length','获取二维码','getQRCodeTicket','VIEW','getQRSceneStr','getQRCode','code','/cgi-bin/showqrcode?ticket=','defineProperty','410223dySXAx','log','xml:\x20','Body','Get','ISDEV','metadata','design:paramtypes','eventkey','notify','officialBindAccountText','qrscene_','bindWxBySceneStr','CLICK','object','officialSubscribeText','includes','@nestjs/swagger','5UsvYkk','338442EQnDwL','./dto/getQrCode.dto','JwtAuthGuard','getOwnPropertyDescriptor','330412rmGmxt','aotoPlay','ApiOperation','echostr','officialService','公众号静默登录','content','Query','@nestjs/common','getRedirectUrl','genXmlMsgByConfig','verify','公众号通知接口GET','msgtype','扫码登录轮询查询','function','TRUE','30lhRDNW','OfficialController','loginBySceneStr','4fMvpfP','url','Controller','design:type','loginByCode','officialScanLoginText','getJsapiTicket','__decorate','GetQrCodeDto','Post','https://mp.weixin.qq.com','success','7328caVWyK','sceneStr:\x20','unsubscribe','获取绑定二维码的sceneStr','split','event','nonce','./official.service','genXmlMsg','prototype','35748RoZuyC','official','sceneStr','scanBindWx','status','公众号通知接口POST','design:returntype','subscribe','Req','SCAN','ApiTags','2155866OqnQui','获取登录二维码sceneStr','formatUrl','send','../../common/auth/jwtAuth.guard','1720017TKstmU','UseGuards','weChatMpUrl'];_0x4bdb=function(){return _0x5d3e68;};return _0x4bdb();}Object[_0x2ea234(0x200)](exports,'__esModule',{'value':!![]}),exports[_0x2ea234(0x1c7)]=void 0x0;const jwtAuth_guard_1=require(_0x2ea234(0x1ee)),utils_1=require('../../common/utils'),common_1=require(_0x2ea234(0x1bd)),swagger_1=require(_0x2ea234(0x1af)),getQrCode_dto_1=require(_0x2ea234(0x1b2)),official_service_1=require(_0x2ea234(0x1dc));let OfficialController=class OfficialController{constructor(_0x2807ee){const _0x5aa575=_0x2ea234;this[_0x5aa575(0x1b9)]=_0x2807ee;}async['notify'](_0xd70169,_0x5d87c1,_0xabe079){const _0xfec23d=_0x2ea234;console[_0xfec23d(0x19f)](_0xfec23d(0x1f5),_0x5d87c1,_0xabe079);const _0x116c55=await this[_0xfec23d(0x1b9)][_0xfec23d(0x1c0)](_0x5d87c1['signature'],_0x5d87c1[_0xfec23d(0x1db)],_0x5d87c1['timestamp']);return _0x116c55?_0x5d87c1[_0xfec23d(0x1b8)]:'';}async['notifyPost'](_0x272513,_0x5f183a,_0x5038f5,_0x303e9b){const _0x4fdea9=_0x2ea234,{xml:_0x18c013}=_0x5038f5;console[_0x4fdea9(0x19f)](_0x4fdea9(0x1a0),_0x18c013);if(_0x18c013[_0x4fdea9(0x1c2)][0x0]=='event'){if(_0x18c013[_0x4fdea9(0x1da)][0x0]==_0x4fdea9(0x1fb)||_0x18c013['event'][0x0]==_0x4fdea9(0x1ab))return _0x303e9b[_0x4fdea9(0x1e3)](0xc8)[_0x4fdea9(0x1ed)]('');if(_0x18c013[_0x4fdea9(0x1da)][0x0]==_0x4fdea9(0x1e8)){console[_0x4fdea9(0x19f)]('扫码');const _0xf753c5=_0x18c013['eventkey'][0x0];if(_0xf753c5[_0x4fdea9(0x1ae)]('/')){this[_0x4fdea9(0x1b9)][_0x4fdea9(0x1e2)](_0x18c013[_0x4fdea9(0x1f2)][0x0],_0xf753c5);const _0x519082=await this['officialService']['genXmlMsgByConfig'](_0x18c013,'officialBindAccountText');return _0x303e9b[_0x4fdea9(0x1e3)](0xc8)[_0x4fdea9(0x1ed)](_0x519082);}this['officialService']['scan'](_0x18c013[_0x4fdea9(0x1f2)][0x0],_0xf753c5);const _0x8ffa8b=await this[_0x4fdea9(0x1b9)][_0x4fdea9(0x1bf)](_0x18c013,_0x4fdea9(0x1ce));return _0x303e9b['status'](0xc8)['send'](_0x8ffa8b);}if(_0x18c013[_0x4fdea9(0x1da)][0x0]==_0x4fdea9(0x1e6)){console[_0x4fdea9(0x19f)]('订阅',_0x18c013['eventkey'][0x0]);const _0x5ad843=_0x18c013[_0x4fdea9(0x1a6)][0x0][_0x4fdea9(0x1d9)](_0x4fdea9(0x1a9))[0x1];console['log'](_0x4fdea9(0x1d6),_0x5ad843);if(!_0x5ad843){const _0x70a80b=await this['officialService'][_0x4fdea9(0x1bf)](_0x18c013,_0x4fdea9(0x1ad));return _0x303e9b[_0x4fdea9(0x1e3)](0xc8)[_0x4fdea9(0x1ed)](_0x70a80b);}if(_0x5ad843[_0x4fdea9(0x1ae)]('/')){this[_0x4fdea9(0x1b9)][_0x4fdea9(0x1e2)](_0x18c013[_0x4fdea9(0x1f2)][0x0],_0x5ad843);const _0x363f44=await this['officialService'][_0x4fdea9(0x1bf)](_0x18c013,_0x4fdea9(0x1a8));return _0x303e9b[_0x4fdea9(0x1e3)](0xc8)['send'](_0x363f44);}this[_0x4fdea9(0x1b9)]['scan'](_0x18c013[_0x4fdea9(0x1f2)][0x0],_0x5ad843);const _0x365119=await this[_0x4fdea9(0x1b9)]['genXmlMsgByConfig'](_0x18c013,_0x4fdea9(0x1ad));return _0x303e9b[_0x4fdea9(0x1e3)](0xc8)[_0x4fdea9(0x1ed)](_0x365119);}if(_0x18c013[_0x4fdea9(0x1da)][0x0]==_0x4fdea9(0x1d7))return _0x303e9b[_0x4fdea9(0x1e3)](0xc8)[_0x4fdea9(0x1ed)]('');}if(_0x18c013['msgtype'][0x0]=='text'){const _0xbf1f7c=await this[_0x4fdea9(0x1b9)][_0x4fdea9(0x1b6)](_0x18c013[_0x4fdea9(0x1bb)][0x0]),_0x404401=await this[_0x4fdea9(0x1b9)][_0x4fdea9(0x1dd)](_0x18c013,_0xbf1f7c);return _0x303e9b[_0x4fdea9(0x1e3)](0xc8)[_0x4fdea9(0x1ed)](_0x404401);}return _0x4fdea9(0x1d4);}async[_0x2ea234(0x1fc)](){const _0x49ce9e=_0x2ea234;return this[_0x49ce9e(0x1b9)]['getQRSceneStr']();}async[_0x2ea234(0x1f3)](_0x52cde1){return this['officialService']['getQRSceneStrByBind'](_0x52cde1);}async[_0x2ea234(0x1fd)](_0x18328d){const _0x262a66=_0x2ea234;if(process[_0x262a66(0x1f6)][_0x262a66(0x1a3)]===_0x262a66(0x1c5))return'';const _0x5a3c28=await this['officialService'][_0x262a66(0x1fa)](_0x18328d['sceneStr']),_0x457a02=(0x0,utils_1[_0x262a66(0x1ec)])(process[_0x262a66(0x1f6)][_0x262a66(0x1f1)]||_0x262a66(0x1d3));return _0x457a02+_0x262a66(0x1ff)+encodeURIComponent(_0x5a3c28);}async[_0x2ea234(0x1c8)](_0x14473e,_0xd5cc17){const _0x22011a=_0x2ea234;return this[_0x22011a(0x1b9)][_0x22011a(0x1c8)](_0x14473e,_0xd5cc17);}async[_0x2ea234(0x1aa)](_0x480afc,_0x392918){const _0x572cdc=_0x2ea234;return this['officialService'][_0x572cdc(0x1aa)](_0x480afc,_0x392918[_0x572cdc(0x1e1)]);}async[_0x2ea234(0x1be)](_0x296e82){const _0xeb678c=_0x2ea234;return this[_0xeb678c(0x1b9)][_0xeb678c(0x1be)](_0x296e82['url']);}async[_0x2ea234(0x1cf)](_0x1bb58c){const _0x2e82d7=_0x2ea234;return this[_0x2e82d7(0x1b9)][_0x2e82d7(0x1cf)](_0x1bb58c[_0x2e82d7(0x1ca)]);}async[_0x2ea234(0x1cd)](_0x32831d,_0xff61d5){const _0x3a3259=_0x2ea234;return this[_0x3a3259(0x1b9)][_0x3a3259(0x1cd)](_0x32831d,_0xff61d5[_0x3a3259(0x1fe)]);}};function _0xda16(_0x1f3279,_0x57f958){const _0x4bdb0e=_0x4bdb();return _0xda16=function(_0xda16ee,_0x47ce9d){_0xda16ee=_0xda16ee-0x19f;let _0x1df119=_0x4bdb0e[_0xda16ee];return _0x1df119;},_0xda16(_0x1f3279,_0x57f958);}__decorate([(0x0,common_1[_0x2ea234(0x1a2)])(_0x2ea234(0x1a7)),(0x0,swagger_1[_0x2ea234(0x1b7)])({'summary':_0x2ea234(0x1c1)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1['Query'])()),__param(0x2,(0x0,common_1[_0x2ea234(0x1a1)])()),__metadata('design:type',Function),__metadata(_0x2ea234(0x1a5),[Object,Object,Object]),__metadata(_0x2ea234(0x1e5),Promise)],OfficialController[_0x2ea234(0x1de)],_0x2ea234(0x1a7),null),__decorate([(0x0,common_1['Post'])(_0x2ea234(0x1a7)),(0x0,swagger_1[_0x2ea234(0x1b7)])({'summary':_0x2ea234(0x1e4)}),__param(0x0,(0x0,common_1[_0x2ea234(0x1e7)])()),__param(0x1,(0x0,common_1[_0x2ea234(0x1bc)])()),__param(0x2,(0x0,common_1[_0x2ea234(0x1a1)])()),__param(0x3,(0x0,common_1['Res'])()),__metadata(_0x2ea234(0x1cc),Function),__metadata(_0x2ea234(0x1a5),[Object,Object,Object,Object]),__metadata(_0x2ea234(0x1e5),Promise)],OfficialController[_0x2ea234(0x1de)],_0x2ea234(0x1f4),null),__decorate([(0x0,common_1[_0x2ea234(0x1d2)])(_0x2ea234(0x1fc)),(0x0,swagger_1[_0x2ea234(0x1b7)])({'summary':_0x2ea234(0x1eb)}),__metadata('design:type',Function),__metadata(_0x2ea234(0x1a5),[]),__metadata(_0x2ea234(0x1e5),Promise)],OfficialController[_0x2ea234(0x1de)],_0x2ea234(0x1fc),null),__decorate([(0x0,common_1[_0x2ea234(0x1d2)])(_0x2ea234(0x1f3)),(0x0,swagger_1['ApiOperation'])({'summary':_0x2ea234(0x1d8)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1['JwtAuthGuard']),__param(0x0,(0x0,common_1[_0x2ea234(0x1e7)])()),__metadata(_0x2ea234(0x1cc),Function),__metadata(_0x2ea234(0x1a5),[Object]),__metadata(_0x2ea234(0x1e5),Promise)],OfficialController[_0x2ea234(0x1de)],_0x2ea234(0x1f3),null),__decorate([(0x0,common_1[_0x2ea234(0x1a2)])(_0x2ea234(0x1fd)),(0x0,swagger_1['ApiOperation'])({'summary':_0x2ea234(0x1f9)}),__param(0x0,(0x0,common_1[_0x2ea234(0x1bc)])()),__metadata(_0x2ea234(0x1cc),Function),__metadata('design:paramtypes',[getQrCode_dto_1['GetQrCodeDto']]),__metadata('design:returntype',Promise)],OfficialController['prototype'],_0x2ea234(0x1fd),null),__decorate([(0x0,common_1[_0x2ea234(0x1d2)])('loginBySceneStr'),(0x0,swagger_1['ApiOperation'])({'summary':_0x2ea234(0x1c3)}),__param(0x0,(0x0,common_1[_0x2ea234(0x1e7)])()),__param(0x1,(0x0,common_1[_0x2ea234(0x1a1)])()),__metadata('design:type',Function),__metadata(_0x2ea234(0x1a5),[Object,Object]),__metadata(_0x2ea234(0x1e5),Promise)],OfficialController[_0x2ea234(0x1de)],_0x2ea234(0x1c8),null),__decorate([(0x0,common_1[_0x2ea234(0x1d2)])('bindWxBySceneStr'),(0x0,swagger_1[_0x2ea234(0x1b7)])({'summary':'扫码绑定轮询查询'}),(0x0,common_1[_0x2ea234(0x1f0)])(jwtAuth_guard_1[_0x2ea234(0x1b3)]),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x2ea234(0x1a1)])()),__metadata(_0x2ea234(0x1cc),Function),__metadata(_0x2ea234(0x1a5),[Object,getQrCode_dto_1[_0x2ea234(0x1d1)]]),__metadata(_0x2ea234(0x1e5),Promise)],OfficialController['prototype'],'bindWxBySceneStr',null),__decorate([(0x0,common_1[_0x2ea234(0x1d2)])(_0x2ea234(0x1be)),(0x0,swagger_1[_0x2ea234(0x1b7)])({'summary':'获取登录跳转地址'}),__param(0x0,(0x0,common_1[_0x2ea234(0x1a1)])()),__metadata(_0x2ea234(0x1cc),Function),__metadata(_0x2ea234(0x1a5),[Object]),__metadata(_0x2ea234(0x1e5),Promise)],OfficialController[_0x2ea234(0x1de)],_0x2ea234(0x1be),null),__decorate([(0x0,common_1[_0x2ea234(0x1d2)])(_0x2ea234(0x1cf)),(0x0,swagger_1[_0x2ea234(0x1b7)])({'summary':'获取注册配置'}),__param(0x0,(0x0,common_1[_0x2ea234(0x1a1)])()),__metadata(_0x2ea234(0x1cc),Function),__metadata(_0x2ea234(0x1a5),[Object]),__metadata(_0x2ea234(0x1e5),Promise)],OfficialController['prototype'],_0x2ea234(0x1cf),null),__decorate([(0x0,common_1[_0x2ea234(0x1d2)])(_0x2ea234(0x1cd)),(0x0,swagger_1['ApiOperation'])({'summary':_0x2ea234(0x1ba)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x2ea234(0x1a1)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,Object]),__metadata(_0x2ea234(0x1e5),Promise)],OfficialController['prototype'],_0x2ea234(0x1cd),null),OfficialController=__decorate([(0x0,swagger_1[_0x2ea234(0x1e9)])(_0x2ea234(0x1e0)),(0x0,common_1[_0x2ea234(0x1cb)])(_0x2ea234(0x1e0)),__metadata(_0x2ea234(0x1a5),[official_service_1['OfficialService']])],OfficialController),exports[_0x2ea234(0x1c7)]=OfficialController;