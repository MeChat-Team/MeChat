'use strict';const _0xa9196c=_0x2f33;function _0xa5f9(){const _0x248dbc=['configVal','fetchBaseAccessToken','ISDEV','registerSendDrawMjCount','mjProxyImgUrl','response','isAutoOpenAgreement','getAuthInfo','firstRegisterSendRank','getConfigs','手机验证码功能暂未开放!','/cgi-bin/token?grant_type=client_credential&appid=','mjProxy','还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！','NAMESPACE','AIWeb','652730nDuckv','./config.entity','defineProperty','../../common/utils/baseRequest','aliPhoneSignName','签到功能暂未开放!','isHideModel3Point','baiduTextAccessToken','reduce','robotAvatar','firstRregisterSendModel4Count','assign','length','getWechatAccessToken','ConfigEntity','weChatApiUrl','gpt','cos','model3Name','Status','isHideDefaultPreset','includes','支付功能暂未开放!','HttpException','companyName','wechatOfficialAppSecret','设置配置信息错误！','payLtzfStatus','isHideDrawMjPoint','queryAllConfig','filingNumber','domain','initBaiduSensitive','fetchJsapiTicket','&client_secret=','clientLogoPath','signInModel4Count','clientHomePath','registerSendStatus','design:paramtypes','getNamespace','clientFavoIconPath','http://authorization.nodeai.cn/api/domainAuth/checkDomain/rocket','tencent','siteRobotName','code','&secret=','getPhoneVerifyConfig','isHideTts','decorate','getSensitiveConfig','payEpayApiPayUrl','isModelInherited','noVerifyRegister','payWeChatPublicKey','modelsService','pay','baiduCode','ali','payMpayChannel','Key','application/json','data','queryFrontConfig','noticeTitle','rocketAiKey','wechat\x20refresh\x20access_token\x20\x20==>\x20','请配置正确的秘钥、当前秘钥检测不通过！','thirdPartyAuthExpir','emailLoginStatus','error:\x20','../../common/utils','aliPhoneAccessKeyId','https://aip.baidubce.com/oauth/2.0/token?client_id=','showWatermark','createOrUpdate','&grant_type=client_credentials','4337385dSrrSe','firstRegisterSendStatus','configEntity','getOwnPropertyDescriptor','function','baidu','InjectRepository','ltzf','HttpStatus','\x20current\x20use\x20version\x20in\x20------>:\x20','baiduTextSecretKey','8sCqWVp','wechatSilentLoginStatus','wechatRegisterStatus','metadata','ModelsService','BAD_REQUEST','noticeInfo','map','access_token','mpay','获取微信access_token失败、错误信息：','payWechatStatus','isVerifyEmail','Repository','buyCramiAddress','域名与授权码不匹配！','registerSendModel3Count','registerSendModel4Count','1951074RQQexj','1028126hqsstG','salesSeniorRatio','error','appMenuHeaderTips','find','payHupiStatus','@nestjs/common','auth','setConfig','every','signInModel3Count','966243yqQedt','siteName','Logger','url','baiduTextStatus','__param','findOne','payMpayStatus','log','get','hupi','第三方应用认证码过期时间（秒）','aliPhoneAccessKeySecret','parse','configKey','phoneLoginStatus','object','设置完成！','hideString','baiduTextApiKey','chatLogEntity','initDefaultConfigs','isHideModel4Point','3fxTaua','243MRDKoi','post','user','model4Name','OfficialService','wechatJsapiTicket','getSignatureGiftConfig','initGetAllConfig','8685817yLNJqF','mindDefaultData','globalConfigs','queryPayType','__decorate','queryConfig','firstRregisterSendDrawMjCount','save','wechatOfficialAppId','typeorm','isUseWxLogin','341556xCTciB','wechatAccessToken','aliPhoneTemplateCode','salesBaseRatio','已添加默认配置:\x20','signInStatus','mjHideWorkIn','感谢您使用AIWeb，祝您使用愉快~','super','GlobalConfigService','TRUE','isShowAppCatIcon','env','onModuleInit','drawingStyles','mjHideNotBlock','signInMjDrawToken','default','payEpayStatus','json'];_0xa5f9=function(){return _0x248dbc;};return _0xa5f9();}(function(_0x43dfe8,_0x2c82d1){const _0x4fc247=_0x2f33,_0x169cd7=_0x43dfe8();while(!![]){try{const _0x49fc47=parseInt(_0x4fc247(0xe3))/0x1+parseInt(_0x4fc247(0xd8))/0x2+-parseInt(_0x4fc247(0xfa))/0x3*(parseInt(_0x4fc247(0x10e))/0x4)+-parseInt(_0x4fc247(0x17f))/0x5+-parseInt(_0x4fc247(0xd7))/0x6+parseInt(_0x4fc247(0x103))/0x7*(-parseInt(_0x4fc247(0x18a))/0x8)+-parseInt(_0x4fc247(0xfb))/0x9*(-parseInt(_0x4fc247(0x132))/0xa);if(_0x49fc47===_0x2c82d1)break;else _0x169cd7['push'](_0x169cd7['shift']());}catch(_0x3ab846){_0x169cd7['push'](_0x169cd7['shift']());}}}(_0xa5f9,0xb0b59));function _0x2f33(_0x258e9e,_0x28945a){const _0xa5f9fa=_0xa5f9();return _0x2f33=function(_0x2f3365,_0x21afb1){_0x2f3365=_0x2f3365-0xd3;let _0x4db159=_0xa5f9fa[_0x2f3365];return _0x4db159;},_0x2f33(_0x258e9e,_0x28945a);}var __decorate=this&&this[_0xa9196c(0x107)]||function(_0x4048cd,_0x1c1e39,_0x46df1c,_0x4e8036){const _0x2b0baa=_0xa9196c;var _0x3b741d=arguments[_0x2b0baa(0x13e)],_0x4b720d=_0x3b741d<0x3?_0x1c1e39:_0x4e8036===null?_0x4e8036=Object[_0x2b0baa(0x182)](_0x1c1e39,_0x46df1c):_0x4e8036,_0x3fd08d;if(typeof Reflect===_0x2b0baa(0xf3)&&typeof Reflect[_0x2b0baa(0x163)]===_0x2b0baa(0x183))_0x4b720d=Reflect[_0x2b0baa(0x163)](_0x4048cd,_0x1c1e39,_0x46df1c,_0x4e8036);else{for(var _0x6b2dc0=_0x4048cd[_0x2b0baa(0x13e)]-0x1;_0x6b2dc0>=0x0;_0x6b2dc0--)if(_0x3fd08d=_0x4048cd[_0x6b2dc0])_0x4b720d=(_0x3b741d<0x3?_0x3fd08d(_0x4b720d):_0x3b741d>0x3?_0x3fd08d(_0x1c1e39,_0x46df1c,_0x4b720d):_0x3fd08d(_0x1c1e39,_0x46df1c))||_0x4b720d;}return _0x3b741d>0x3&&_0x4b720d&&Object[_0x2b0baa(0x134)](_0x1c1e39,_0x46df1c,_0x4b720d),_0x4b720d;},__metadata=this&&this['__metadata']||function(_0x51a33e,_0x2cfa36){const _0x304bb1=_0xa9196c;if(typeof Reflect===_0x304bb1(0xf3)&&typeof Reflect['metadata']==='function')return Reflect[_0x304bb1(0x18d)](_0x51a33e,_0x2cfa36);},__param=this&&this[_0xa9196c(0xe8)]||function(_0x1d7967,_0x5dc738){return function(_0x5126e0,_0x1eaeb9){_0x5dc738(_0x5126e0,_0x1eaeb9,_0x1d7967);};};Object[_0xa9196c(0x134)](exports,'__esModule',{'value':!![]}),exports['GlobalConfigService']=void 0x0;const utils_1=require(_0xa9196c(0x179)),baseRequest_1=require(_0xa9196c(0x135)),common_1=require(_0xa9196c(0xde)),typeorm_1=require('@nestjs/typeorm'),axios_1=require('axios'),fs=require('fs'),typeorm_2=require(_0xa9196c(0x10c)),chatLog_entity_1=require('./../chatLog/chatLog.entity'),models_service_1=require('./../models/models.service'),config_entity_1=require(_0xa9196c(0x133)),packageJsonContent=fs['readFileSync']('package.json','utf-8'),packageJson=JSON[_0xa9196c(0xf0)](packageJsonContent),version=packageJson['version'];console[_0xa9196c(0xeb)](_0xa9196c(0x188),version);let GlobalConfigService=class GlobalConfigService{constructor(_0x7cb5da,_0x3d1c73,_0x4f76d1){const _0x8ce21b=_0xa9196c;this[_0x8ce21b(0x181)]=_0x7cb5da,this[_0x8ce21b(0xf7)]=_0x3d1c73,this[_0x8ce21b(0x169)]=_0x4f76d1,this[_0x8ce21b(0x105)]={};}async[_0xa9196c(0x11b)](){const _0x301244=_0xa9196c;await this[_0x301244(0x102)](),await this[_0x301244(0xf8)]();}async[_0xa9196c(0x12b)](_0x32d0e3){const _0x34c36f=_0xa9196c;if(_0x32d0e3[_0x34c36f(0x13e)]===0x0)return;if(_0x32d0e3[_0x34c36f(0x147)]('wechatAccessToken')&&_0x32d0e3[_0x34c36f(0x13e)]===0x1)return this[_0x34c36f(0x10f)];if(_0x32d0e3[_0x34c36f(0x147)](_0x34c36f(0x100))&&_0x32d0e3[_0x34c36f(0x13e)]===0x1)return this[_0x34c36f(0x100)];if(_0x32d0e3[_0x34c36f(0x13e)]===0x1)return this['globalConfigs'][_0x32d0e3[0x0]];else{const _0x124cce={};return _0x32d0e3['forEach'](_0x518544=>_0x124cce[_0x518544]=this[_0x34c36f(0x105)][_0x518544]),_0x124cce;}}async[_0xa9196c(0x102)](){const _0x26400a=_0xa9196c,_0x1a2fa5=await this[_0x26400a(0x181)][_0x26400a(0xdc)]();this['globalConfigs']=_0x1a2fa5[_0x26400a(0x13a)]((_0x1a0305,_0x10712f)=>{const _0x228781=_0x26400a;return _0x1a0305[_0x10712f['configKey']]=_0x10712f[_0x228781(0x122)],_0x1a0305;},{}),this[_0x26400a(0x152)]();}async[_0xa9196c(0x152)](_0x1a8e8c=!![]){const _0x20cac2=_0xa9196c,{baiduTextApiKey:_0x19b593,baiduTextSecretKey:_0x205752}=await this[_0x20cac2(0x12b)]([_0x20cac2(0xf6),_0x20cac2(0x189)]);if(!_0x19b593||!_0x205752)return;const _0x44b99e={'Content-Type':'application/json','Accept':_0x20cac2(0x16f)},_0x18c75c=_0x20cac2(0x17b)+_0x19b593+_0x20cac2(0x154)+_0x205752+_0x20cac2(0x17e);try{const _0x59e052=await axios_1[_0x20cac2(0x11f)]['post'](_0x18c75c,{'headers':_0x44b99e});this[_0x20cac2(0x105)][_0x20cac2(0x139)]=_0x59e052[_0x20cac2(0x170)][_0x20cac2(0x192)];}catch(_0x55c376){if(_0x1a8e8c){}else throw new common_1[(_0x20cac2(0x149))](_0x55c376[_0x20cac2(0x127)]['data']['error_description'],common_1[_0x20cac2(0x187)][_0x20cac2(0x18f)]);}}async[_0xa9196c(0x13f)](_0x39c9b7=![]){const _0x58ba5c=_0xa9196c,{wechatOfficialAppId:_0x1fdb43,wechatOfficialAppSecret:_0x495e39}=await this[_0x58ba5c(0x12b)]([_0x58ba5c(0x10b),_0x58ba5c(0x14b)]);if(!_0x1fdb43||!_0x495e39)return common_1[_0x58ba5c(0xe5)][_0x58ba5c(0xda)](_0x58ba5c(0x12f),_0x58ba5c(0xff));this[_0x58ba5c(0x10f)]=await this[_0x58ba5c(0x123)](_0x1fdb43,_0x495e39,_0x39c9b7),this[_0x58ba5c(0x100)]=await this[_0x58ba5c(0x153)](this[_0x58ba5c(0x10f)]),common_1['Logger'][_0x58ba5c(0xeb)](_0x58ba5c(0x174)+this[_0x58ba5c(0x10f)],'OfficialService');}async[_0xa9196c(0x123)](_0x5b0b63,_0x27d8d8,_0x267752=![]){const _0x177579=_0xa9196c;if(process[_0x177579(0x11a)][_0x177579(0x124)]==='TRUE'){this[_0x177579(0x10f)]='';return;}const _0x4b5b82=(0x0,utils_1['formatUrl'])(process['env'][_0x177579(0x141)]||'https://api.weixin.qq.com'),{data:{errmsg:_0x2ae0ae,access_token:_0x8f9652}}=await axios_1['default'][_0x177579(0xec)](_0x4b5b82+_0x177579(0x12d)+_0x5b0b63+_0x177579(0x160)+_0x27d8d8);if(_0x2ae0ae){if(_0x267752)common_1[_0x177579(0xe5)][_0x177579(0xda)](_0x177579(0x194)+_0x2ae0ae,_0x177579(0xff));else throw new common_1[(_0x177579(0x149))](_0x177579(0x175),common_1['HttpStatus'][_0x177579(0x18f)]);return'';}return _0x8f9652;}async[_0xa9196c(0x153)](_0x36df7f){const _0x1acdd7=_0xa9196c;var _0x49b726;if(process[_0x1acdd7(0x11a)][_0x1acdd7(0x124)]===_0x1acdd7(0x118)){this[_0x1acdd7(0x100)]='';return;}const _0x2b17d6=(0x0,utils_1['formatUrl'])(process[_0x1acdd7(0x11a)][_0x1acdd7(0x141)]||'https://api.weixin.qq.com'),_0x14f63c=await axios_1['default'][_0x1acdd7(0xec)](_0x2b17d6+'/cgi-bin/ticket/getticket?access_token='+_0x36df7f+'&type=jsapi');return(_0x49b726=_0x14f63c===null||_0x14f63c===void 0x0?void 0x0:_0x14f63c['data'])===null||_0x49b726===void 0x0?void 0x0:_0x49b726['ticket'];}async[_0xa9196c(0x14f)](_0x57dbf6){const _0x2f89f8=_0xa9196c,{role:_0x3ca853}=_0x57dbf6[_0x2f89f8(0xfd)];return this['globalConfigs'];}async[_0xa9196c(0x171)](_0x460031,_0xa776e7){const _0x4445b8=_0xa9196c,_0x5aca3d=[_0x4445b8(0x158),_0x4445b8(0xd5),_0x4445b8(0xd6),_0x4445b8(0x125),_0x4445b8(0x180),_0x4445b8(0x12a),'firstRregisterSendModel3Count',_0x4445b8(0x13c),_0x4445b8(0x109),_0x4445b8(0x157),_0x4445b8(0x155),_0x4445b8(0x15b),_0x4445b8(0x11c),_0x4445b8(0x10d),'siteName',_0x4445b8(0x13b),_0x4445b8(0x15e),_0x4445b8(0xd3),_0x4445b8(0x104),_0x4445b8(0x16b),'payEpayChannel',_0x4445b8(0x16d),_0x4445b8(0x165),'payEpayStatus',_0x4445b8(0xdd),_0x4445b8(0x195),_0x4445b8(0xea),_0x4445b8(0x14d),'isAutoOpenNotice',_0x4445b8(0x119),_0x4445b8(0x111),_0x4445b8(0xd9),'salesAllowDrawMoney',_0x4445b8(0x14a),_0x4445b8(0x150),_0x4445b8(0x177),_0x4445b8(0xf2),_0x4445b8(0x18c),_0x4445b8(0x18b),_0x4445b8(0x113),_0x4445b8(0xe2),_0x4445b8(0x156),'signInMjDrawToken',_0x4445b8(0xdb),'pluginFirst','mjUseBaiduFy',_0x4445b8(0x11d),_0x4445b8(0x114),_0x4445b8(0x196),_0x4445b8(0x17c),_0x4445b8(0x162),_0x4445b8(0x146),_0x4445b8(0x138),_0x4445b8(0xf9),_0x4445b8(0x14e),'isHidePlugin',_0x4445b8(0x144),_0x4445b8(0xfe),'drawMjName',_0x4445b8(0x166),_0x4445b8(0x167),'noticeInfo','homeHtml',_0x4445b8(0x128),'agreementInfo','agreementTitle'],_0x531008=await this[_0x4445b8(0x181)]['find']({'where':{'configKey':(0x0,typeorm_2['In'])(_0x5aca3d)}}),{domain:_0x56c099}=_0x460031,_0x577d84=this[_0x4445b8(0x105)][_0x4445b8(0x151)];_0x577d84!==_0x56c099&&(this[_0x4445b8(0x17d)]({'configKey':'domain','configVal':_0x56c099,'status':0x1}),await this['initGetAllConfig']());const _0x48866f=_0x531008[_0x4445b8(0x13a)]((_0xd5437d,_0x7d296c)=>{const _0x498619=_0x4445b8;return _0xd5437d[_0x7d296c[_0x498619(0xf1)]]=_0x7d296c[_0x498619(0x122)],_0xd5437d;},{}),{wechatOfficialAppId:_0x333d66,wechatOfficialAppSecret:_0x1b6da2}=await this[_0x4445b8(0x12b)](['wechatOfficialAppId',_0x4445b8(0x14b)]),_0x56a252=!!(_0x333d66&&_0x1b6da2);return Object[_0x4445b8(0x13d)](Object['assign']({},_0x48866f),{'isUseWxLogin':_0x56a252});}async[_0xa9196c(0x108)](_0x5c7be4,_0x124705){const _0x3efb7e=_0xa9196c,{role:_0x53bf8c}=_0x124705['user'],{keys:_0x5ae199}=_0x5c7be4,_0x225bb9=await this[_0x3efb7e(0x181)][_0x3efb7e(0xdc)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x5ae199)}});return _0x53bf8c!==_0x3efb7e(0x116)&&_0x225bb9['forEach'](_0x5e7123=>{const _0x119bf9=_0x3efb7e;if(_0x5e7123[_0x119bf9(0xf1)]['includes']('mj')||_0x5e7123[_0x119bf9(0xf1)]['includes'](_0x119bf9(0x16e))||_0x5e7123[_0x119bf9(0xf1)][_0x119bf9(0x147)](_0x119bf9(0x142))||_0x5e7123[_0x119bf9(0xf1)][_0x119bf9(0x147)](_0x119bf9(0x143))||_0x5e7123[_0x119bf9(0xf1)][_0x119bf9(0x147)](_0x119bf9(0x184))||_0x5e7123['configKey'][_0x119bf9(0x147)](_0x119bf9(0x16c))||_0x5e7123[_0x119bf9(0xf1)][_0x119bf9(0x147)](_0x119bf9(0x15d))||_0x5e7123[_0x119bf9(0xf1)][_0x119bf9(0x147)](_0x119bf9(0x16a))||_0x5e7123['configKey']['includes']('wechat')||_0x5e7123['configKey'][_0x119bf9(0x147)](_0x119bf9(0x126))||_0x5e7123[_0x119bf9(0xf1)]==='openaiBaseUrl'){const _0x3be836=[_0x119bf9(0x168),'payWeChatPrivateKey'];if(_0x3be836['includes'](_0x5e7123[_0x119bf9(0xf1)]))return _0x5e7123[_0x119bf9(0x122)]=(0x0,utils_1[_0x119bf9(0xf5)])(_0x5e7123[_0x119bf9(0x122)],'隐私内容、非超级管理员无权查看');const _0x36a671=[_0x119bf9(0x120),'payHupiStatus',_0x119bf9(0x12e),_0x119bf9(0x14d)];!_0x36a671[_0x119bf9(0x147)](_0x5e7123[_0x119bf9(0xf1)])&&!_0x5e7123[_0x119bf9(0xf1)]['includes'](_0x119bf9(0x145))&&(_0x5e7123[_0x119bf9(0x122)]=(0x0,utils_1[_0x119bf9(0xf5)])(_0x5e7123[_0x119bf9(0x122)]));}}),_0x225bb9[_0x3efb7e(0x13a)]((_0x25000c,_0x1483fc)=>{const _0x4bdb26=_0x3efb7e;return _0x25000c[_0x1483fc[_0x4bdb26(0xf1)]]=_0x1483fc[_0x4bdb26(0x122)],_0x25000c;},{});}async[_0xa9196c(0xe0)](_0x484fba){const _0x4265eb=_0xa9196c;try{const {settings:_0x21bb09}=_0x484fba;for(const _0x568ea2 of _0x21bb09){await this[_0x4265eb(0x17d)](_0x568ea2);}await this[_0x4265eb(0x102)]();const _0x5794fa=_0x21bb09[_0x4265eb(0x191)](_0x41a793=>_0x41a793[_0x4265eb(0xf1)]);return(_0x5794fa[_0x4265eb(0x147)](_0x4265eb(0xf6))||_0x5794fa[_0x4265eb(0x147)](_0x4265eb(0x189)))&&await this[_0x4265eb(0x152)](![]),(_0x5794fa[_0x4265eb(0x147)]('wechatOfficialAppId')||_0x5794fa[_0x4265eb(0x147)](_0x4265eb(0x14b)))&&await this[_0x4265eb(0x13f)](),'设置完成！';}catch(_0x2f9b39){console[_0x4265eb(0xeb)]('error:\x20',_0x2f9b39);}}async[_0xa9196c(0x17d)](_0x11f3f7){const _0x46496e=_0xa9196c;if(_0x11f3f7[_0x46496e(0xf1)]==_0x46496e(0x173)){const _0x2c5e62=_0x11f3f7[_0x46496e(0xe6)],_0x1d2789=await(0x0,baseRequest_1['baseRequest'])({'method':_0x46496e(0xfc),'url':_0x46496e(0x15c),'data':{'domain':_0x2c5e62,'authCode':_0x11f3f7[_0x46496e(0x122)]}});if(_0x1d2789[_0x46496e(0x15f)]===0x7)throw new common_1['HttpException'](_0x46496e(0xd4),common_1[_0x46496e(0x187)][_0x46496e(0x18f)]);}try{const {configKey:_0x38aafd,configVal:_0xb0749c,status:status=0x1}=_0x11f3f7,_0x21a99a=await this['configEntity'][_0x46496e(0xe9)]({'where':{'configKey':_0x38aafd}});return _0x21a99a?await this[_0x46496e(0x181)]['update']({'configKey':_0x38aafd},{'configVal':_0xb0749c,'status':status}):await this[_0x46496e(0x181)][_0x46496e(0x10a)]({'configKey':_0x38aafd,'configVal':_0xb0749c,'status':status}),await this[_0x46496e(0x102)](),_0x46496e(0xf4);}catch(_0x588f24){console[_0x46496e(0xeb)](_0x46496e(0x178),_0x588f24);throw new common_1['HttpException'](_0x46496e(0x14c),common_1['HttpStatus']['BAD_REQUEST']);}}async['queryNotice'](){const _0x429d08=_0xa9196c;return await this[_0x429d08(0x12b)]([_0x429d08(0x190),_0x429d08(0x172)]);}async[_0xa9196c(0x106)](){const _0x599ddf=_0xa9196c,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0,payLtzfStatus:payLtzfStatus=0x0}=await this[_0x599ddf(0x12b)](['payHupiStatus',_0x599ddf(0x120),_0x599ddf(0xea),_0x599ddf(0x195),_0x599ddf(0x14d)]);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus,payLtzfStatus][_0x599ddf(0xe1)](_0x3ccb9e=>_0x3ccb9e===0x0))throw new common_1[(_0x599ddf(0x149))](_0x599ddf(0x148),common_1[_0x599ddf(0x187)][_0x599ddf(0x18f)]);if(Number(payWechatStatus)===0x1)return'wechat';if(Number(payEpayStatus)===0x1)return'epay';if(Number(payMpayStatus)===0x1)return _0x599ddf(0x193);if(Number(payHupiStatus)===0x1)return _0x599ddf(0xed);if(Number(payLtzfStatus)===0x1)return _0x599ddf(0x186);}async[_0xa9196c(0x129)](){const _0x40c73f=_0xa9196c,{siteName:_0x6b2e7a,registerBaseUrl:_0x4feaf4,domain:_0x551f1b}=await this[_0x40c73f(0x12b)]([_0x40c73f(0xe4),'registerBaseUrl','domain']);return{'siteName':_0x6b2e7a,'registerBaseUrl':_0x4feaf4,'domain':_0x551f1b};}async[_0xa9196c(0x161)](){const _0x576ec0=_0xa9196c,{phoneLoginStatus:_0x3ca0e0,aliPhoneAccessKeyId:_0x55c109,aliPhoneAccessKeySecret:_0x458d1c,aliPhoneSignName:_0x3afe98,aliPhoneTemplateCode:_0x3d9fb9}=await this[_0x576ec0(0x12b)]([_0x576ec0(0xf2),_0x576ec0(0x17a),_0x576ec0(0xef),_0x576ec0(0x136),_0x576ec0(0x110)]);if(Number(_0x3ca0e0)!==0x1)throw new common_1[(_0x576ec0(0x149))](_0x576ec0(0x12c),common_1[_0x576ec0(0x187)]['BAD_REQUEST']);return{'accessKeyId':_0x55c109,'accessKeySecret':_0x458d1c,'SignName':_0x3afe98,'TemplateCode':_0x3d9fb9};}[_0xa9196c(0x15a)](){const _0x48cf1d=_0xa9196c;return process[_0x48cf1d(0x11a)][_0x48cf1d(0x130)]||_0x48cf1d(0x131);}async[_0xa9196c(0x101)](){const _0x359201=_0xa9196c,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this[_0x359201(0x12b)](['signInStatus','signInModel3Count',_0x359201(0x156),_0x359201(0x11e)]);if(Number(signInStatus)!==0x1)throw new common_1['HttpException'](_0x359201(0x137),common_1[_0x359201(0x187)]['BAD_REQUEST']);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async[_0xa9196c(0xdf)](){const _0x800a97=_0xa9196c,_0x292f4d='',_0x30fd00=await fetch(_0x292f4d,{}),_0x349c47=await _0x30fd00[_0x800a97(0x121)](),{success:success=!![],message:_0xd92fd5}=_0x349c47;common_1[_0x800a97(0xe5)]['debug'](_0x800a97(0x115));}async[_0xa9196c(0x164)](){const _0x29c74f=_0xa9196c,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x172fe1}=await this[_0x29c74f(0x12b)]([_0x29c74f(0xe7),'baiduTextAccessToken']);if(Number(baiduTextStatus)===0x1)return{'useType':'baidu','baiduTextAccessToken':_0x172fe1};return null;}async[_0xa9196c(0xf8)](){const _0x4456fa=_0xa9196c,_0x1f3549=[{'configKey':_0x4456fa(0x176),'configVal':'60','public':0x0,'encrypt':0x0,'remark':_0x4456fa(0xee)}];for(const _0x1aa636 of _0x1f3549){const _0x33023b=await this[_0x4456fa(0x181)]['findOne']({'where':{'configKey':_0x1aa636[_0x4456fa(0xf1)]}});!_0x33023b&&(await this[_0x4456fa(0x181)][_0x4456fa(0x10a)](_0x1aa636),this['globalConfigs'][_0x1aa636[_0x4456fa(0xf1)]]=_0x1aa636['configVal'],common_1['Logger'][_0x4456fa(0xeb)](_0x4456fa(0x112)+_0x1aa636['configKey']+'='+_0x1aa636[_0x4456fa(0x122)],_0x4456fa(0x117)));}}};GlobalConfigService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_1[_0xa9196c(0x185)])(config_entity_1[_0xa9196c(0x140)])),__param(0x1,(0x0,typeorm_1['InjectRepository'])(chatLog_entity_1['ChatLogEntity'])),__metadata(_0xa9196c(0x159),[typeorm_2[_0xa9196c(0x197)],typeorm_2[_0xa9196c(0x197)],models_service_1[_0xa9196c(0x18e)]])],GlobalConfigService),exports[_0xa9196c(0x117)]=GlobalConfigService;