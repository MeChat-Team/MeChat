'use strict';const _0x4c719b=_0x4087;(function(_0x53b30e,_0x19e82a){const _0x496463=_0x4087,_0x5ecd51=_0x53b30e();while(!![]){try{const _0x4d32b0=parseInt(_0x496463(0xc6))/0x1*(parseInt(_0x496463(0x105))/0x2)+parseInt(_0x496463(0xc5))/0x3*(-parseInt(_0x496463(0xa9))/0x4)+-parseInt(_0x496463(0xa6))/0x5+parseInt(_0x496463(0x162))/0x6*(parseInt(_0x496463(0x163))/0x7)+parseInt(_0x496463(0x120))/0x8+parseInt(_0x496463(0x118))/0x9*(-parseInt(_0x496463(0xb3))/0xa)+-parseInt(_0x496463(0x111))/0xb;if(_0x4d32b0===_0x19e82a)break;else _0x5ecd51['push'](_0x5ecd51['shift']());}catch(_0x324a9f){_0x5ecd51['push'](_0x5ecd51['shift']());}}}(_0xc2ad,0xcf0b1));function _0x4087(_0xdda9b7,_0x1a0b71){const _0xc2adb1=_0xc2ad();return _0x4087=function(_0x40877c,_0x46f298){_0x40877c=_0x40877c-0x9b;let _0x329e73=_0xc2adb1[_0x40877c];return _0x329e73;},_0x4087(_0xdda9b7,_0x1a0b71);}var __decorate=this&&this[_0x4c719b(0x14d)]||function(_0x5195fc,_0x5abf46,_0x2c7992,_0x500acd){const _0x493820=_0x4c719b;var _0x1fc767=arguments[_0x493820(0x10d)],_0x3e1aeb=_0x1fc767<0x3?_0x5abf46:_0x500acd===null?_0x500acd=Object[_0x493820(0x153)](_0x5abf46,_0x2c7992):_0x500acd,_0x118655;if(typeof Reflect===_0x493820(0x150)&&typeof Reflect[_0x493820(0xef)]===_0x493820(0x13a))_0x3e1aeb=Reflect[_0x493820(0xef)](_0x5195fc,_0x5abf46,_0x2c7992,_0x500acd);else{for(var _0xbb0062=_0x5195fc[_0x493820(0x10d)]-0x1;_0xbb0062>=0x0;_0xbb0062--)if(_0x118655=_0x5195fc[_0xbb0062])_0x3e1aeb=(_0x1fc767<0x3?_0x118655(_0x3e1aeb):_0x1fc767>0x3?_0x118655(_0x5abf46,_0x2c7992,_0x3e1aeb):_0x118655(_0x5abf46,_0x2c7992))||_0x3e1aeb;}return _0x1fc767>0x3&&_0x3e1aeb&&Object[_0x493820(0xff)](_0x5abf46,_0x2c7992,_0x3e1aeb),_0x3e1aeb;},__metadata=this&&this[_0x4c719b(0x143)]||function(_0x4717ee,_0x1b742f){const _0x15228a=_0x4c719b;if(typeof Reflect===_0x15228a(0x150)&&typeof Reflect[_0x15228a(0x14c)]===_0x15228a(0x13a))return Reflect[_0x15228a(0x14c)](_0x4717ee,_0x1b742f);},__param=this&&this['__param']||function(_0xe494a4,_0x47f0b1){return function(_0x4cebd3,_0x2300b3){_0x47f0b1(_0x4cebd3,_0x2300b3,_0xe494a4);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[_0x4c719b(0x132)]=void 0x0;const utils_1=require(_0x4c719b(0xe7)),baseRequest_1=require(_0x4c719b(0xcc)),common_1=require(_0x4c719b(0xda)),typeorm_1=require('@nestjs/typeorm'),axios_1=require('axios'),fs=require('fs'),typeorm_2=require(_0x4c719b(0x13b)),chatLog_entity_1=require('./../chatLog/chatLog.entity'),models_service_1=require('./../models/models.service'),config_entity_1=require(_0x4c719b(0x147)),packageJsonContent=fs[_0x4c719b(0x157)](_0x4c719b(0xf8),_0x4c719b(0x119)),packageJson=JSON[_0x4c719b(0x149)](packageJsonContent),version=packageJson['version'];console[_0x4c719b(0x142)]('\x20current\x20use\x20version\x20in\x20------>:\x20',version);function _0xc2ad(){const _0x584699=['baiduTextSecretKey','every','./config.entity','configVal','parse','queryConfig','modelsService','metadata','__decorate','hupi','支付功能暂未开放!','object','getConfigs','ChatLogEntity','getOwnPropertyDescriptor','agreementInfo','感谢您使用AIWeb，祝您使用愉快~','noVerifyRegister','readFileSync','aliPhoneTemplateCode','reduce','queryNotice','NAMESPACE','get','Key','aliPhoneAccessKeyId','emailHost','ISDEV','globalConfigs','13470BoTVNe','5229QBoWUS','&type=jsapi','aliPhoneAccessKeySecret','access_token','baiduTextAccessToken','isHideTts','HttpException','wechatOfficialAppId','wechat','data','隐私内容、非超级管理员无权查看','firstRregisterSendModel4Count','getPhoneVerifyConfig','325815BHYFvQ','isHideModel4Point','companyName','3188732CcnFxY','ltzf','salesSeniorRatio','signInMjDrawToken','error_description','设置完成！','showWatermark','initDefaultConfigs','isAutoOpenAgreement','aliPhoneSignName','1205350isJBuX','isHidePlugin','https://api.weixin.qq.com','pay','签到功能暂未开放!','baiduTextStatus','createOrUpdate','findOne','includes','getAuthInfo','epay','signInStatus','json','getEmailConfig','ConfigEntity','isUseWxLogin','find','ModelsService','3QViEEd','236818KizhMQ','signInModel3Count','baidu','debug','emailUser','TRUE','../../common/utils/baseRequest','salesBaseRatio','onModuleInit','initBaiduSensitive','&secret=','https://aip.baidubce.com/oauth/2.0/token?client_id=','response','code','payEpayApiPayUrl','url','registerSendModel4Count','setConfig','auth','http://authorization.nodeai.cn/api/domainAuth/checkDomain/rocket','@nestjs/common','Repository','appMenuHeaderTips','assign','registerSendDrawMjCount','payMpayStatus','weChatApiUrl','configEntity','drawMjName','noticeInfo','filingNumber','baiduTextApiKey','noticeTitle','../../common/utils','InjectRepository','map','Logger','error:\x20','super','env','application/json','decorate','formatUrl','payEpayStatus','AIWeb','fetchBaseAccessToken','registerBaseUrl','baiduCode','/cgi-bin/token?grant_type=client_credential&appid=','设置配置信息错误！','package.json','payHupiStatus','isModelInherited','mjHideWorkIn','isHideModel3Point','rocketAiKey','save','defineProperty','isShowAppCatIcon','请配置正确的秘钥、当前秘钥检测不通过！','siteName','chatLogEntity','initGetAllConfig','2ZZKoeG','firstRregisterSendModel3Count','queryPayType','ticket','wechatAccessToken','registerSendStatus','OfficialService','post','length','wechatSilentLoginStatus','mjProxyImgUrl','isHideDrawMjPoint','15374117wDsvPX','wechatRegisterStatus','isAutoOpenNotice','getWechatAccessToken','payWeChatPrivateKey','phoneLoginStatus','手机验证码功能暂未开放!','27bGrPCz','utf-8','hideString','第三方应用认证码过期时间（秒）','mjUseBaiduFy','clientHomePath','domain','还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！','12446512ILiXya','drawingStyles','user','payLtzfStatus','wechatOfficialAppSecret','isHideDefaultPreset','agreementTitle','homeHtml','/cgi-bin/ticket/getticket?access_token=','pluginFirst','robotAvatar','BAD_REQUEST','model4Name','HttpStatus','payWechatStatus','cos','signInModel4Count','queryAllConfig','GlobalConfigService','salesAllowDrawMoney','mjProxy','&client_secret=','baseRequest','fetchJsapiTicket','buyCramiAddress','error','function','typeorm','openaiBaseUrl','wechatJsapiTicket','configKey','default','payMpayChannel','emailLoginStatus','log','__metadata','firstRegisterSendRank'];_0xc2ad=function(){return _0x584699;};return _0xc2ad();}let GlobalConfigService=class GlobalConfigService{constructor(_0x24d346,_0x13858b,_0x4f21b1){const _0x327583=_0x4c719b;this[_0x327583(0xe1)]=_0x24d346,this[_0x327583(0x103)]=_0x13858b,this[_0x327583(0x14b)]=_0x4f21b1,this[_0x327583(0x161)]={};}async[_0x4c719b(0xce)](){const _0x53a93e=_0x4c719b;await this[_0x53a93e(0x104)](),await this[_0x53a93e(0xb0)]();}async['getConfigs'](_0xfc3b12){const _0x4725ec=_0x4c719b;if(_0xfc3b12[_0x4725ec(0x10d)]===0x0)return;if(_0xfc3b12[_0x4725ec(0xbb)](_0x4725ec(0x109))&&_0xfc3b12['length']===0x1)return this[_0x4725ec(0x109)];if(_0xfc3b12[_0x4725ec(0xbb)](_0x4725ec(0x13d))&&_0xfc3b12['length']===0x1)return this[_0x4725ec(0x13d)];if(_0xfc3b12['length']===0x1)return this[_0x4725ec(0x161)][_0xfc3b12[0x0]];else{const _0x294cab={};return _0xfc3b12['forEach'](_0x58554d=>_0x294cab[_0x58554d]=this['globalConfigs'][_0x58554d]),_0x294cab;}}async[_0x4c719b(0x104)](){const _0x21a982=_0x4c719b,_0x339501=await this[_0x21a982(0xe1)][_0x21a982(0xc3)]();this[_0x21a982(0x161)]=_0x339501['reduce']((_0x3f1c5c,_0x719edd)=>{const _0x55acf3=_0x21a982;return _0x3f1c5c[_0x719edd[_0x55acf3(0x13e)]]=_0x719edd[_0x55acf3(0x148)],_0x3f1c5c;},{}),this[_0x21a982(0xcf)]();}async[_0x4c719b(0xcf)](_0x674f15=!![]){const _0x2d40d5=_0x4c719b,{baiduTextApiKey:_0x252e76,baiduTextSecretKey:_0x2e9cd0}=await this['getConfigs'](['baiduTextApiKey','baiduTextSecretKey']);if(!_0x252e76||!_0x2e9cd0)return;const _0x14aeb3={'Content-Type':_0x2d40d5(0xee),'Accept':_0x2d40d5(0xee)},_0x18412b=_0x2d40d5(0xd1)+_0x252e76+_0x2d40d5(0x135)+_0x2e9cd0+'&grant_type=client_credentials';try{const _0x2f6128=await axios_1[_0x2d40d5(0x13f)][_0x2d40d5(0x10c)](_0x18412b,{'headers':_0x14aeb3});this[_0x2d40d5(0x161)][_0x2d40d5(0x9d)]=_0x2f6128[_0x2d40d5(0xa2)][_0x2d40d5(0x9c)];}catch(_0x1ae185){if(_0x674f15){}else throw new common_1[(_0x2d40d5(0x9f))](_0x1ae185[_0x2d40d5(0xd2)][_0x2d40d5(0xa2)][_0x2d40d5(0xad)],common_1[_0x2d40d5(0x12d)][_0x2d40d5(0x12b)]);}}async[_0x4c719b(0x114)](_0x553552=![]){const _0x4e1d81=_0x4c719b,{wechatOfficialAppId:_0x3c0628,wechatOfficialAppSecret:_0x2a23ba}=await this[_0x4e1d81(0x151)](['wechatOfficialAppId','wechatOfficialAppSecret']);if(!_0x3c0628||!_0x2a23ba)return common_1[_0x4e1d81(0xea)]['error'](_0x4e1d81(0x11f),_0x4e1d81(0x10b));this[_0x4e1d81(0x109)]=await this['fetchBaseAccessToken'](_0x3c0628,_0x2a23ba,_0x553552),this['wechatJsapiTicket']=await this[_0x4e1d81(0x137)](this[_0x4e1d81(0x109)]),common_1[_0x4e1d81(0xea)][_0x4e1d81(0x142)]('wechat\x20refresh\x20access_token\x20\x20==>\x20'+this['wechatAccessToken'],_0x4e1d81(0x10b));}async[_0x4c719b(0xf3)](_0x3d1114,_0x243bce,_0x5446ff=![]){const _0x1d5a3e=_0x4c719b;if(process[_0x1d5a3e(0xed)][_0x1d5a3e(0x160)]===_0x1d5a3e(0xcb)){this[_0x1d5a3e(0x109)]='';return;}const _0x589ab1=(0x0,utils_1[_0x1d5a3e(0xf0)])(process['env'][_0x1d5a3e(0xe0)]||_0x1d5a3e(0xb5)),{data:{errmsg:_0x5c4b0b,access_token:_0x3774ee}}=await axios_1[_0x1d5a3e(0x13f)][_0x1d5a3e(0x15c)](_0x589ab1+_0x1d5a3e(0xf6)+_0x3d1114+_0x1d5a3e(0xd0)+_0x243bce);if(_0x5c4b0b){if(_0x5446ff)common_1[_0x1d5a3e(0xea)][_0x1d5a3e(0x139)]('获取微信access_token失败、错误信息：'+_0x5c4b0b,'OfficialService');else throw new common_1[(_0x1d5a3e(0x9f))](_0x1d5a3e(0x101),common_1[_0x1d5a3e(0x12d)][_0x1d5a3e(0x12b)]);return'';}return _0x3774ee;}async['fetchJsapiTicket'](_0x1f8d07){const _0xe32000=_0x4c719b;var _0x345554;if(process['env']['ISDEV']==='TRUE'){this[_0xe32000(0x13d)]='';return;}const _0x3f06ee=(0x0,utils_1['formatUrl'])(process[_0xe32000(0xed)][_0xe32000(0xe0)]||_0xe32000(0xb5)),_0x5b7031=await axios_1[_0xe32000(0x13f)][_0xe32000(0x15c)](_0x3f06ee+_0xe32000(0x128)+_0x1f8d07+_0xe32000(0x164));return(_0x345554=_0x5b7031===null||_0x5b7031===void 0x0?void 0x0:_0x5b7031[_0xe32000(0xa2)])===null||_0x345554===void 0x0?void 0x0:_0x345554[_0xe32000(0x108)];}async[_0x4c719b(0x131)](_0x23632f){const _0x3290bd=_0x4c719b,{role:_0x52d35f}=_0x23632f[_0x3290bd(0x122)];return this[_0x3290bd(0x161)];}async['queryFrontConfig'](_0x1c261d,_0x40d7ac){const _0x33f4dd=_0x4c719b,_0x37dd86=[_0x33f4dd(0x10a),'registerSendModel3Count',_0x33f4dd(0xd6),_0x33f4dd(0xde),'firstRegisterSendStatus',_0x33f4dd(0x144),_0x33f4dd(0x106),_0x33f4dd(0xa4),'firstRregisterSendDrawMjCount',_0x33f4dd(0x11d),'clientLogoPath','clientFavoIconPath',_0x33f4dd(0x121),_0x33f4dd(0xc2),'siteName',_0x33f4dd(0x12a),'siteRobotName',_0x33f4dd(0x138),'mindDefaultData',_0x33f4dd(0xf5),'payEpayChannel',_0x33f4dd(0x140),_0x33f4dd(0xd4),_0x33f4dd(0xf1),_0x33f4dd(0xf9),_0x33f4dd(0x12e),_0x33f4dd(0xdf),_0x33f4dd(0x123),_0x33f4dd(0x113),_0x33f4dd(0x100),_0x33f4dd(0xcd),_0x33f4dd(0xab),_0x33f4dd(0x133),_0x33f4dd(0xa8),_0x33f4dd(0xe4),_0x33f4dd(0x141),_0x33f4dd(0x116),_0x33f4dd(0x112),_0x33f4dd(0x10e),_0x33f4dd(0xbe),_0x33f4dd(0xc7),_0x33f4dd(0x130),_0x33f4dd(0xac),_0x33f4dd(0xdc),_0x33f4dd(0x129),_0x33f4dd(0x11c),'mjHideNotBlock',_0x33f4dd(0xfb),'isVerifyEmail',_0x33f4dd(0xaf),_0x33f4dd(0x9e),_0x33f4dd(0x125),_0x33f4dd(0xfc),_0x33f4dd(0xa7),_0x33f4dd(0x110),_0x33f4dd(0xb4),'model3Name',_0x33f4dd(0x12c),_0x33f4dd(0xe2),_0x33f4dd(0xfa),_0x33f4dd(0x156),_0x33f4dd(0xe3),_0x33f4dd(0x127),_0x33f4dd(0xb1),_0x33f4dd(0x154),_0x33f4dd(0x126)],_0x4af844=await this[_0x33f4dd(0xe1)][_0x33f4dd(0xc3)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x37dd86)}}),{domain:_0x38c29d}=_0x1c261d,_0x26d99f=this[_0x33f4dd(0x161)][_0x33f4dd(0x11e)];_0x26d99f!==_0x38c29d&&(this[_0x33f4dd(0xb9)]({'configKey':_0x33f4dd(0x11e),'configVal':_0x38c29d,'status':0x1}),await this[_0x33f4dd(0x104)]());const _0x45dda5=_0x4af844[_0x33f4dd(0x159)]((_0x16ed66,_0x143431)=>{const _0x4aa508=_0x33f4dd;return _0x16ed66[_0x143431[_0x4aa508(0x13e)]]=_0x143431[_0x4aa508(0x148)],_0x16ed66;},{}),{wechatOfficialAppId:_0x28859c,wechatOfficialAppSecret:_0x23a46c}=await this[_0x33f4dd(0x151)]([_0x33f4dd(0xa0),_0x33f4dd(0x124)]),_0x52445b=!!(_0x28859c&&_0x23a46c);return Object[_0x33f4dd(0xdd)](Object[_0x33f4dd(0xdd)]({},_0x45dda5),{'isUseWxLogin':_0x52445b});}async[_0x4c719b(0x14a)](_0x28bfb0,_0x38b299){const _0x149e37=_0x4c719b,{role:_0x4b38dc}=_0x38b299[_0x149e37(0x122)],{keys:_0x4a079c}=_0x28bfb0,_0x291542=await this[_0x149e37(0xe1)]['find']({'where':{'configKey':(0x0,typeorm_2['In'])(_0x4a079c)}});return _0x4b38dc!==_0x149e37(0xec)&&_0x291542['forEach'](_0x570a2f=>{const _0x3556ad=_0x149e37;if(_0x570a2f['configKey'][_0x3556ad(0xbb)]('mj')||_0x570a2f[_0x3556ad(0x13e)][_0x3556ad(0xbb)](_0x3556ad(0x15d))||_0x570a2f[_0x3556ad(0x13e)]['includes']('gpt')||_0x570a2f[_0x3556ad(0x13e)][_0x3556ad(0xbb)](_0x3556ad(0x12f))||_0x570a2f[_0x3556ad(0x13e)]['includes'](_0x3556ad(0xc8))||_0x570a2f[_0x3556ad(0x13e)]['includes']('ali')||_0x570a2f[_0x3556ad(0x13e)][_0x3556ad(0xbb)]('tencent')||_0x570a2f[_0x3556ad(0x13e)][_0x3556ad(0xbb)](_0x3556ad(0xb6))||_0x570a2f[_0x3556ad(0x13e)]['includes'](_0x3556ad(0xa1))||_0x570a2f[_0x3556ad(0x13e)][_0x3556ad(0xbb)](_0x3556ad(0x10f))||_0x570a2f[_0x3556ad(0x13e)]===_0x3556ad(0x13c)){const _0x368403=['payWeChatPublicKey',_0x3556ad(0x115)];if(_0x368403['includes'](_0x570a2f['configKey']))return _0x570a2f[_0x3556ad(0x148)]=(0x0,utils_1['hideString'])(_0x570a2f[_0x3556ad(0x148)],_0x3556ad(0xa3));const _0x252c48=[_0x3556ad(0xf1),_0x3556ad(0xf9),_0x3556ad(0x134),_0x3556ad(0x123)];!_0x252c48[_0x3556ad(0xbb)](_0x570a2f[_0x3556ad(0x13e)])&&!_0x570a2f[_0x3556ad(0x13e)]['includes']('Status')&&(_0x570a2f[_0x3556ad(0x148)]=(0x0,utils_1[_0x3556ad(0x11a)])(_0x570a2f[_0x3556ad(0x148)]));}}),_0x291542[_0x149e37(0x159)]((_0x5ad966,_0x1b01e1)=>{const _0x3b2f1a=_0x149e37;return _0x5ad966[_0x1b01e1[_0x3b2f1a(0x13e)]]=_0x1b01e1[_0x3b2f1a(0x148)],_0x5ad966;},{});}async[_0x4c719b(0xd7)](_0x14c8dc){const _0x5148d4=_0x4c719b;try{const {settings:_0x29e563}=_0x14c8dc;for(const _0x359d32 of _0x29e563){await this['createOrUpdate'](_0x359d32);}await this['initGetAllConfig']();const _0x160b69=_0x29e563[_0x5148d4(0xe9)](_0x235b3e=>_0x235b3e[_0x5148d4(0x13e)]);return(_0x160b69['includes'](_0x5148d4(0xe5))||_0x160b69['includes'](_0x5148d4(0x145)))&&await this[_0x5148d4(0xcf)](![]),(_0x160b69[_0x5148d4(0xbb)](_0x5148d4(0xa0))||_0x160b69[_0x5148d4(0xbb)]('wechatOfficialAppSecret'))&&await this[_0x5148d4(0x114)](),_0x5148d4(0xae);}catch(_0x31b389){console['log']('error:\x20',_0x31b389);}}async[_0x4c719b(0xb9)](_0x1dd35b){const _0x49414a=_0x4c719b;if(_0x1dd35b[_0x49414a(0x13e)]==_0x49414a(0xfd)){const _0x33d4b5=_0x1dd35b[_0x49414a(0xd5)],_0x2ed339=await(0x0,baseRequest_1[_0x49414a(0x136)])({'method':_0x49414a(0x10c),'url':_0x49414a(0xd9),'data':{'domain':_0x33d4b5,'authCode':_0x1dd35b['configVal']}});if(_0x2ed339[_0x49414a(0xd3)]===0x7)throw new common_1[(_0x49414a(0x9f))]('域名与授权码不匹配！',common_1['HttpStatus'][_0x49414a(0x12b)]);}try{const {configKey:_0x23804e,configVal:_0x50570b,status:status=0x1}=_0x1dd35b,_0x4bbe26=await this[_0x49414a(0xe1)]['findOne']({'where':{'configKey':_0x23804e}});return _0x4bbe26?await this[_0x49414a(0xe1)]['update']({'configKey':_0x23804e},{'configVal':_0x50570b,'status':status}):await this[_0x49414a(0xe1)][_0x49414a(0xfe)]({'configKey':_0x23804e,'configVal':_0x50570b,'status':status}),await this['initGetAllConfig'](),_0x49414a(0xae);}catch(_0x2df3fd){console[_0x49414a(0x142)](_0x49414a(0xeb),_0x2df3fd);throw new common_1[(_0x49414a(0x9f))](_0x49414a(0xf7),common_1[_0x49414a(0x12d)][_0x49414a(0x12b)]);}}async[_0x4c719b(0x15a)](){const _0x1553d7=_0x4c719b;return await this[_0x1553d7(0x151)]([_0x1553d7(0xe3),_0x1553d7(0xe6)]);}async[_0x4c719b(0x107)](){const _0x529606=_0x4c719b,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0,payLtzfStatus:payLtzfStatus=0x0}=await this[_0x529606(0x151)]([_0x529606(0xf9),_0x529606(0xf1),'payMpayStatus',_0x529606(0x12e),_0x529606(0x123)]);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus,payLtzfStatus][_0x529606(0x146)](_0x2bcbd2=>_0x2bcbd2===0x0))throw new common_1[(_0x529606(0x9f))](_0x529606(0x14f),common_1['HttpStatus'][_0x529606(0x12b)]);if(Number(payWechatStatus)===0x1)return'wechat';if(Number(payEpayStatus)===0x1)return _0x529606(0xbd);if(Number(payMpayStatus)===0x1)return'mpay';if(Number(payHupiStatus)===0x1)return _0x529606(0x14e);if(Number(payLtzfStatus)===0x1)return _0x529606(0xaa);}async[_0x4c719b(0xbc)](){const _0x3912a2=_0x4c719b,{siteName:_0x55f883,registerBaseUrl:_0x59c843,domain:_0x2350a6}=await this[_0x3912a2(0x151)]([_0x3912a2(0x102),_0x3912a2(0xf4),_0x3912a2(0x11e)]);return{'siteName':_0x55f883,'registerBaseUrl':_0x59c843,'domain':_0x2350a6};}async[_0x4c719b(0xa5)](){const _0x56c7b1=_0x4c719b,{phoneLoginStatus:_0x41a30d,aliPhoneAccessKeyId:_0x86f981,aliPhoneAccessKeySecret:_0x140eac,aliPhoneSignName:_0x4697a6,aliPhoneTemplateCode:_0xd3222}=await this[_0x56c7b1(0x151)]([_0x56c7b1(0x116),_0x56c7b1(0x15e),_0x56c7b1(0x9b),_0x56c7b1(0xb2),_0x56c7b1(0x158)]);if(Number(_0x41a30d)!==0x1)throw new common_1[(_0x56c7b1(0x9f))](_0x56c7b1(0x117),common_1[_0x56c7b1(0x12d)][_0x56c7b1(0x12b)]);return{'accessKeyId':_0x86f981,'accessKeySecret':_0x140eac,'SignName':_0x4697a6,'TemplateCode':_0xd3222};}async[_0x4c719b(0xc0)](){const _0x24498b=_0x4c719b,_0x6c8099=await this[_0x24498b(0x151)]([_0x24498b(0x15f),'emailPort',_0x24498b(0xca),'emailPass']);return _0x6c8099;}['getNamespace'](){const _0x3b3de5=_0x4c719b;return process[_0x3b3de5(0xed)][_0x3b3de5(0x15b)]||_0x3b3de5(0xf2);}async['getSignatureGiftConfig'](){const _0x526981=_0x4c719b,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this['getConfigs']([_0x526981(0xbe),_0x526981(0xc7),_0x526981(0x130),_0x526981(0xac)]);if(Number(signInStatus)!==0x1)throw new common_1[(_0x526981(0x9f))](_0x526981(0xb7),common_1[_0x526981(0x12d)]['BAD_REQUEST']);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async[_0x4c719b(0xd8)](){const _0x178669=_0x4c719b,_0x31ace4='',_0x354a13=await fetch(_0x31ace4,{}),_0x2d7fb3=await _0x354a13[_0x178669(0xbf)](),{success:success=!![],message:_0x215081}=_0x2d7fb3;common_1['Logger'][_0x178669(0xc9)](_0x178669(0x155));}async['getSensitiveConfig'](){const _0x52fe35=_0x4c719b,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x2a668e}=await this[_0x52fe35(0x151)]([_0x52fe35(0xb8),_0x52fe35(0x9d)]);if(Number(baiduTextStatus)===0x1)return{'useType':_0x52fe35(0xc8),'baiduTextAccessToken':_0x2a668e};return null;}async['initDefaultConfigs'](){const _0x104e73=_0x4c719b,_0xcdc060=[{'configKey':'thirdPartyAuthExpir','configVal':'60','public':0x0,'encrypt':0x0,'remark':_0x104e73(0x11b)}];for(const _0x198d36 of _0xcdc060){const _0x18d601=await this[_0x104e73(0xe1)][_0x104e73(0xba)]({'where':{'configKey':_0x198d36[_0x104e73(0x13e)]}});!_0x18d601&&(await this[_0x104e73(0xe1)]['save'](_0x198d36),this[_0x104e73(0x161)][_0x198d36[_0x104e73(0x13e)]]=_0x198d36[_0x104e73(0x148)],common_1['Logger'][_0x104e73(0x142)]('已添加默认配置:\x20'+_0x198d36[_0x104e73(0x13e)]+'='+_0x198d36['configVal'],_0x104e73(0x132)));}}};GlobalConfigService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_1[_0x4c719b(0xe8)])(config_entity_1[_0x4c719b(0xc1)])),__param(0x1,(0x0,typeorm_1['InjectRepository'])(chatLog_entity_1[_0x4c719b(0x152)])),__metadata('design:paramtypes',[typeorm_2[_0x4c719b(0xdb)],typeorm_2[_0x4c719b(0xdb)],models_service_1[_0x4c719b(0xc4)]])],GlobalConfigService),exports[_0x4c719b(0x132)]=GlobalConfigService;