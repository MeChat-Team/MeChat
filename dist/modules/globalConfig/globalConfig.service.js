'use strict';function _0x1fc0(_0x2e41c8,_0x40a41d){const _0x2c7ec8=_0x2c7e();return _0x1fc0=function(_0x1fc0a8,_0x458bfc){_0x1fc0a8=_0x1fc0a8-0x1cf;let _0x1d3cd5=_0x2c7ec8[_0x1fc0a8];return _0x1d3cd5;},_0x1fc0(_0x2e41c8,_0x40a41d);}const _0x4f0fcb=_0x1fc0;(function(_0x1007c3,_0xbea59){const _0x34daf5=_0x1fc0,_0x1d8217=_0x1007c3();while(!![]){try{const _0x165fba=-parseInt(_0x34daf5(0x251))/0x1*(parseInt(_0x34daf5(0x227))/0x2)+parseInt(_0x34daf5(0x281))/0x3+-parseInt(_0x34daf5(0x24c))/0x4+parseInt(_0x34daf5(0x272))/0x5*(-parseInt(_0x34daf5(0x27e))/0x6)+-parseInt(_0x34daf5(0x250))/0x7+-parseInt(_0x34daf5(0x269))/0x8+-parseInt(_0x34daf5(0x260))/0x9*(-parseInt(_0x34daf5(0x294))/0xa);if(_0x165fba===_0xbea59)break;else _0x1d8217['push'](_0x1d8217['shift']());}catch(_0x325223){_0x1d8217['push'](_0x1d8217['shift']());}}}(_0x2c7e,0x5c4aa));var __decorate=this&&this[_0x4f0fcb(0x23d)]||function(_0x1839bd,_0xeea0a4,_0x1da13f,_0x1d0272){const _0x39fe94=_0x4f0fcb;var _0x5ca20a=arguments[_0x39fe94(0x1ed)],_0x36bd43=_0x5ca20a<0x3?_0xeea0a4:_0x1d0272===null?_0x1d0272=Object[_0x39fe94(0x248)](_0xeea0a4,_0x1da13f):_0x1d0272,_0x2681b8;if(typeof Reflect===_0x39fe94(0x288)&&typeof Reflect[_0x39fe94(0x236)]===_0x39fe94(0x23f))_0x36bd43=Reflect[_0x39fe94(0x236)](_0x1839bd,_0xeea0a4,_0x1da13f,_0x1d0272);else{for(var _0xeb9c28=_0x1839bd[_0x39fe94(0x1ed)]-0x1;_0xeb9c28>=0x0;_0xeb9c28--)if(_0x2681b8=_0x1839bd[_0xeb9c28])_0x36bd43=(_0x5ca20a<0x3?_0x2681b8(_0x36bd43):_0x5ca20a>0x3?_0x2681b8(_0xeea0a4,_0x1da13f,_0x36bd43):_0x2681b8(_0xeea0a4,_0x1da13f))||_0x36bd43;}return _0x5ca20a>0x3&&_0x36bd43&&Object[_0x39fe94(0x23e)](_0xeea0a4,_0x1da13f,_0x36bd43),_0x36bd43;},__metadata=this&&this[_0x4f0fcb(0x27a)]||function(_0x186d57,_0x5226b2){const _0x25ea54=_0x4f0fcb;if(typeof Reflect===_0x25ea54(0x288)&&typeof Reflect[_0x25ea54(0x223)]===_0x25ea54(0x23f))return Reflect['metadata'](_0x186d57,_0x5226b2);},__param=this&&this[_0x4f0fcb(0x239)]||function(_0x5e6ce1,_0x513892){return function(_0xb91a4a,_0x44d56f){_0x513892(_0xb91a4a,_0x44d56f,_0x5e6ce1);};};Object[_0x4f0fcb(0x23e)](exports,'__esModule',{'value':!![]}),exports[_0x4f0fcb(0x249)]=void 0x0;function _0x2c7e(){const _0xcf4e2e=['clientHomePath','env','queryNotice','noticeTitle','设置完成！','registerSendStatus','isAutoOpenAgreement','aliPhoneSignName','findOne','post','typeorm','hideString','rocketAiKey','companyName','model3Name','isHideDrawMjPoint','access_token','mjUseBaiduFy','signInModel3Count','wechatRegisterStatus','payMpayStatus','debug','payEpayApiPayUrl','salesAllowDrawMoney','HttpException','registerSendModel3Count','response','ModelsService','get','mjHideNotBlock','Injectable','ali','onModuleInit','ConfigEntity','https://aip.baidubce.com/oauth/2.0/token?client_id=','TRUE','getEmailConfig','wechatAccessToken','metadata','getPhoneVerifyConfig','cos','baiduCode','46TkBpQG','formatUrl','aliPhoneTemplateCode','siteRobotName','queryAllConfig','initGetAllConfig','configEntity','baiduTextSecretKey','getSignatureGiftConfig','aliPhoneAccessKeyId','../../common/utils','Logger','fetchBaseAccessToken','filingNumber','firstRregisterSendDrawMjCount','decorate','wechatOfficialAppSecret','getAuthInfo','__param','isShowAppCatIcon','configKey','payWeChatPrivateKey','__decorate','defineProperty','function','signInMjDrawToken','isHideModel4Point','queryPayType','Status','default','modelsService','includes','phoneLoginStatus','getOwnPropertyDescriptor','GlobalConfigService','Key','error:\x20','1133440pltKiG','aliPhoneAccessKeySecret','gpt','Repository','2589153gXHDMt','21487uwLdoW','fetchJsapiTicket','payWeChatPublicKey','save','isVerifyEmail','baiduTextApiKey','noVerifyRegister','手机验证码功能暂未开放!','appMenuHeaderTips','已添加默认配置:\x20','initBaiduSensitive','mindDefaultData','super','firstRegisterSendRank','wechatOfficialAppId','344943oOpfxL','buyCramiAddress','wechat\x20refresh\x20access_token\x20\x20==>\x20','baiduTextStatus','@nestjs/common','model4Name','BAD_REQUEST','emailPass','NAMESPACE','2267528CqdjOM','isHideTts','mjHideWorkIn','data','setConfig','隐私内容、非超级管理员无权查看','find','user','chatLogEntity','360dSFXmS','isHideModel3Point','forEach','payLtzfStatus','/cgi-bin/ticket/getticket?access_token=','clientFavoIconPath','签到功能暂未开放!','clientLogoPath','__metadata','还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！','salesBaseRatio','globalConfigs','29838tmZWsm','emailLoginStatus','drawingStyles','61953uyJNLo','ISDEV','获取微信access_token失败、错误信息：','getSensitiveConfig','utf-8','reduce','showWatermark','object','baiduTextAccessToken','application/json','./../models/models.service','map','第三方应用认证码过期时间（秒）','OfficialService','感谢您使用AIWeb，祝您使用愉快~','firstRregisterSendModel3Count','payEpayStatus','getNamespace','baidu','560UpNArK','domain','域名与授权码不匹配！','error','ltzf','hupi','configVal','isHidePlugin','getWechatAccessToken','version','assign','payEpayChannel','siteName','auth','payHupiStatus','registerSendModel4Count','initDefaultConfigs','payMpayChannel','\x20current\x20use\x20version\x20in\x20------>:\x20','pluginFirst','thirdPartyAuthExpir','noticeInfo','支付功能暂未开放!','error_description','isModelInherited','ChatLogEntity','agreementTitle','emailUser','payWechatStatus','HttpStatus','every','agreementInfo','salesSeniorRatio','mjProxyImgUrl','signInStatus','design:paramtypes','length','../../common/utils/baseRequest','weChatApiUrl','wechatJsapiTicket','readFileSync','wechat','https://api.weixin.qq.com','./../chatLog/chatLog.entity','createOrUpdate','isAutoOpenNotice','getConfigs','log','signInModel4Count','firstRregisterSendModel4Count','queryFrontConfig','/cgi-bin/token?grant_type=client_credential&appid='];_0x2c7e=function(){return _0xcf4e2e;};return _0x2c7e();}const utils_1=require(_0x4f0fcb(0x231)),baseRequest_1=require(_0x4f0fcb(0x1ee)),common_1=require(_0x4f0fcb(0x264)),typeorm_1=require('@nestjs/typeorm'),axios_1=require('axios'),fs=require('fs'),typeorm_2=require(_0x4f0fcb(0x207)),chatLog_entity_1=require(_0x4f0fcb(0x1f4)),models_service_1=require(_0x4f0fcb(0x28b)),config_entity_1=require('./config.entity'),packageJsonContent=fs[_0x4f0fcb(0x1f1)]('package.json',_0x4f0fcb(0x285)),packageJson=JSON['parse'](packageJsonContent),version=packageJson[_0x4f0fcb(0x1d2)];console[_0x4f0fcb(0x1f8)](_0x4f0fcb(0x1db),version);let GlobalConfigService=class GlobalConfigService{constructor(_0x511a57,_0x4cbf13,_0x2db1ec){const _0x47c5ce=_0x4f0fcb;this[_0x47c5ce(0x22d)]=_0x511a57,this[_0x47c5ce(0x271)]=_0x4cbf13,this[_0x47c5ce(0x245)]=_0x2db1ec,this[_0x47c5ce(0x27d)]={};}async[_0x4f0fcb(0x21d)](){const _0x1feb30=_0x4f0fcb;await this[_0x1feb30(0x22c)](),await this[_0x1feb30(0x1d9)]();}async['getConfigs'](_0x50cd36){const _0x4c1629=_0x4f0fcb;if(_0x50cd36[_0x4c1629(0x1ed)]===0x0)return;if(_0x50cd36[_0x4c1629(0x246)]('wechatAccessToken')&&_0x50cd36[_0x4c1629(0x1ed)]===0x1)return this[_0x4c1629(0x222)];if(_0x50cd36['includes'](_0x4c1629(0x1f0))&&_0x50cd36[_0x4c1629(0x1ed)]===0x1)return this['wechatJsapiTicket'];if(_0x50cd36[_0x4c1629(0x1ed)]===0x1)return this[_0x4c1629(0x27d)][_0x50cd36[0x0]];else{const _0x478d83={};return _0x50cd36['forEach'](_0x68310=>_0x478d83[_0x68310]=this['globalConfigs'][_0x68310]),_0x478d83;}}async[_0x4f0fcb(0x22c)](){const _0x3f574b=_0x4f0fcb,_0x561e5a=await this[_0x3f574b(0x22d)][_0x3f574b(0x26f)]();this[_0x3f574b(0x27d)]=_0x561e5a[_0x3f574b(0x286)]((_0x68113a,_0x44dc26)=>{const _0x789ee7=_0x3f574b;return _0x68113a[_0x44dc26[_0x789ee7(0x23b)]]=_0x44dc26[_0x789ee7(0x1cf)],_0x68113a;},{}),this['initBaiduSensitive']();}async[_0x4f0fcb(0x25b)](_0x307c39=!![]){const _0x3f00c4=_0x4f0fcb,{baiduTextApiKey:_0x4e1997,baiduTextSecretKey:_0x3ca7b3}=await this[_0x3f00c4(0x1f7)]([_0x3f00c4(0x256),_0x3f00c4(0x22e)]);if(!_0x4e1997||!_0x3ca7b3)return;const _0x1f21c8={'Content-Type':_0x3f00c4(0x28a),'Accept':'application/json'},_0x4f66ea=_0x3f00c4(0x21f)+_0x4e1997+'&client_secret='+_0x3ca7b3+'&grant_type=client_credentials';try{const _0x54b1a0=await axios_1[_0x3f00c4(0x244)][_0x3f00c4(0x206)](_0x4f66ea,{'headers':_0x1f21c8});this[_0x3f00c4(0x27d)][_0x3f00c4(0x289)]=_0x54b1a0[_0x3f00c4(0x26c)][_0x3f00c4(0x20d)];}catch(_0x2817a0){if(_0x307c39){}else throw new common_1['HttpException'](_0x2817a0[_0x3f00c4(0x217)]['data'][_0x3f00c4(0x1e0)],common_1[_0x3f00c4(0x1e6)][_0x3f00c4(0x266)]);}}async[_0x4f0fcb(0x1d1)](_0x206093=![]){const _0x4f198f=_0x4f0fcb,{wechatOfficialAppId:_0x4a84b1,wechatOfficialAppSecret:_0x8fe2a2}=await this[_0x4f198f(0x1f7)](['wechatOfficialAppId',_0x4f198f(0x237)]);if(!_0x4a84b1||!_0x8fe2a2)return common_1[_0x4f198f(0x232)][_0x4f198f(0x297)](_0x4f198f(0x27b),_0x4f198f(0x28e));this['wechatAccessToken']=await this[_0x4f198f(0x233)](_0x4a84b1,_0x8fe2a2,_0x206093),this[_0x4f198f(0x1f0)]=await this[_0x4f198f(0x252)](this[_0x4f198f(0x222)]),common_1[_0x4f198f(0x232)]['log'](_0x4f198f(0x262)+this[_0x4f198f(0x222)],_0x4f198f(0x28e));}async[_0x4f0fcb(0x233)](_0x3ddb58,_0x501fe8,_0x3f8d03=![]){const _0x4a6d92=_0x4f0fcb;if(process[_0x4a6d92(0x1fe)]['ISDEV']===_0x4a6d92(0x220)){this['wechatAccessToken']='';return;}const _0x405afd=(0x0,utils_1[_0x4a6d92(0x228)])(process[_0x4a6d92(0x1fe)][_0x4a6d92(0x1ef)]||_0x4a6d92(0x1f3)),{data:{errmsg:_0x170d27,access_token:_0x325743}}=await axios_1[_0x4a6d92(0x244)][_0x4a6d92(0x219)](_0x405afd+_0x4a6d92(0x1fc)+_0x3ddb58+'&secret='+_0x501fe8);if(_0x170d27){if(_0x3f8d03)common_1['Logger'][_0x4a6d92(0x297)](_0x4a6d92(0x283)+_0x170d27,_0x4a6d92(0x28e));else throw new common_1[(_0x4a6d92(0x215))]('请配置正确的秘钥、当前秘钥检测不通过！',common_1[_0x4a6d92(0x1e6)][_0x4a6d92(0x266)]);return'';}return _0x325743;}async[_0x4f0fcb(0x252)](_0x2625e7){const _0x1c6450=_0x4f0fcb;var _0xc4ca48;if(process[_0x1c6450(0x1fe)][_0x1c6450(0x282)]===_0x1c6450(0x220)){this[_0x1c6450(0x1f0)]='';return;}const _0x50c838=(0x0,utils_1['formatUrl'])(process['env'][_0x1c6450(0x1ef)]||_0x1c6450(0x1f3)),_0x1661da=await axios_1[_0x1c6450(0x244)][_0x1c6450(0x219)](_0x50c838+_0x1c6450(0x276)+_0x2625e7+'&type=jsapi');return(_0xc4ca48=_0x1661da===null||_0x1661da===void 0x0?void 0x0:_0x1661da[_0x1c6450(0x26c)])===null||_0xc4ca48===void 0x0?void 0x0:_0xc4ca48['ticket'];}async[_0x4f0fcb(0x22b)](_0x52091a){const _0x23e395=_0x4f0fcb,{role:_0xbff7a3}=_0x52091a[_0x23e395(0x270)];return this['globalConfigs'];}async[_0x4f0fcb(0x1fb)](_0x348acf,_0x59f49d){const _0x133fd7=_0x4f0fcb,_0x31951a=[_0x133fd7(0x202),_0x133fd7(0x216),_0x133fd7(0x1d8),'registerSendDrawMjCount','firstRegisterSendStatus',_0x133fd7(0x25e),_0x133fd7(0x290),_0x133fd7(0x1fa),_0x133fd7(0x235),_0x133fd7(0x1fd),_0x133fd7(0x279),_0x133fd7(0x277),_0x133fd7(0x280),'isUseWxLogin',_0x133fd7(0x1d5),'robotAvatar',_0x133fd7(0x22a),_0x133fd7(0x261),_0x133fd7(0x25c),_0x133fd7(0x226),_0x133fd7(0x1d4),_0x133fd7(0x1da),_0x133fd7(0x213),_0x133fd7(0x291),'payHupiStatus',_0x133fd7(0x1e5),'payMpayStatus',_0x133fd7(0x275),_0x133fd7(0x1f6),_0x133fd7(0x23a),_0x133fd7(0x27c),_0x133fd7(0x1e9),_0x133fd7(0x214),_0x133fd7(0x20a),_0x133fd7(0x234),_0x133fd7(0x27f),'phoneLoginStatus',_0x133fd7(0x210),'wechatSilentLoginStatus',_0x133fd7(0x1eb),_0x133fd7(0x20f),_0x133fd7(0x1f9),_0x133fd7(0x240),_0x133fd7(0x259),_0x133fd7(0x1dc),_0x133fd7(0x20e),_0x133fd7(0x21a),_0x133fd7(0x26b),_0x133fd7(0x255),_0x133fd7(0x287),_0x133fd7(0x26a),'isHideDefaultPreset',_0x133fd7(0x273),_0x133fd7(0x241),_0x133fd7(0x20c),_0x133fd7(0x1d0),_0x133fd7(0x20b),_0x133fd7(0x265),'drawMjName',_0x133fd7(0x1e1),_0x133fd7(0x257),_0x133fd7(0x1de),'homeHtml',_0x133fd7(0x203),_0x133fd7(0x1e8),_0x133fd7(0x1e3)],_0x469281=await this['configEntity'][_0x133fd7(0x26f)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x31951a)}}),{domain:_0x2709db}=_0x348acf,_0x5bd00c=this[_0x133fd7(0x27d)]['domain'];_0x5bd00c!==_0x2709db&&(this[_0x133fd7(0x1f5)]({'configKey':_0x133fd7(0x295),'configVal':_0x2709db,'status':0x1}),await this[_0x133fd7(0x22c)]());const _0x211f7a=_0x469281[_0x133fd7(0x286)]((_0x106d01,_0x302bac)=>{const _0x5275ef=_0x133fd7;return _0x106d01[_0x302bac[_0x5275ef(0x23b)]]=_0x302bac[_0x5275ef(0x1cf)],_0x106d01;},{}),{wechatOfficialAppId:_0x7b9c8,wechatOfficialAppSecret:_0x31dcb4}=await this['getConfigs'](['wechatOfficialAppId','wechatOfficialAppSecret']),_0x54d0c6=!!(_0x7b9c8&&_0x31dcb4);return Object[_0x133fd7(0x1d3)](Object[_0x133fd7(0x1d3)]({},_0x211f7a),{'isUseWxLogin':_0x54d0c6});}async['queryConfig'](_0x5b8812,_0x4f0444){const _0x5777a9=_0x4f0fcb,{role:_0x5b37e8}=_0x4f0444[_0x5777a9(0x270)],{keys:_0xf11a12}=_0x5b8812,_0x2c9aaa=await this['configEntity'][_0x5777a9(0x26f)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0xf11a12)}});return _0x5b37e8!==_0x5777a9(0x25d)&&_0x2c9aaa[_0x5777a9(0x274)](_0x2cd989=>{const _0x33d6ad=_0x5777a9;if(_0x2cd989['configKey'][_0x33d6ad(0x246)]('mj')||_0x2cd989['configKey'][_0x33d6ad(0x246)](_0x33d6ad(0x24a))||_0x2cd989[_0x33d6ad(0x23b)][_0x33d6ad(0x246)](_0x33d6ad(0x24e))||_0x2cd989[_0x33d6ad(0x23b)][_0x33d6ad(0x246)](_0x33d6ad(0x225))||_0x2cd989[_0x33d6ad(0x23b)][_0x33d6ad(0x246)](_0x33d6ad(0x293))||_0x2cd989[_0x33d6ad(0x23b)][_0x33d6ad(0x246)](_0x33d6ad(0x21c))||_0x2cd989[_0x33d6ad(0x23b)][_0x33d6ad(0x246)]('tencent')||_0x2cd989[_0x33d6ad(0x23b)]['includes']('pay')||_0x2cd989[_0x33d6ad(0x23b)][_0x33d6ad(0x246)](_0x33d6ad(0x1f2))||_0x2cd989[_0x33d6ad(0x23b)][_0x33d6ad(0x246)](_0x33d6ad(0x1ea))||_0x2cd989[_0x33d6ad(0x23b)]==='openaiBaseUrl'){const _0x5752e6=[_0x33d6ad(0x253),_0x33d6ad(0x23c)];if(_0x5752e6[_0x33d6ad(0x246)](_0x2cd989[_0x33d6ad(0x23b)]))return _0x2cd989['configVal']=(0x0,utils_1[_0x33d6ad(0x208)])(_0x2cd989[_0x33d6ad(0x1cf)],_0x33d6ad(0x26e));const _0x5750d0=[_0x33d6ad(0x291),_0x33d6ad(0x1d7),'mjProxy','payLtzfStatus'];!_0x5750d0[_0x33d6ad(0x246)](_0x2cd989['configKey'])&&!_0x2cd989[_0x33d6ad(0x23b)][_0x33d6ad(0x246)](_0x33d6ad(0x243))&&(_0x2cd989[_0x33d6ad(0x1cf)]=(0x0,utils_1['hideString'])(_0x2cd989[_0x33d6ad(0x1cf)]));}}),_0x2c9aaa['reduce']((_0x3537d2,_0x3553bd)=>{const _0x5a6998=_0x5777a9;return _0x3537d2[_0x3553bd['configKey']]=_0x3553bd[_0x5a6998(0x1cf)],_0x3537d2;},{});}async[_0x4f0fcb(0x26d)](_0x37b72d){const _0x1e9cdd=_0x4f0fcb;try{const {settings:_0x4f47ec}=_0x37b72d;for(const _0xf04fee of _0x4f47ec){await this['createOrUpdate'](_0xf04fee);}await this[_0x1e9cdd(0x22c)]();const _0x3a9de1=_0x4f47ec[_0x1e9cdd(0x28c)](_0x6c3741=>_0x6c3741[_0x1e9cdd(0x23b)]);return(_0x3a9de1[_0x1e9cdd(0x246)](_0x1e9cdd(0x256))||_0x3a9de1[_0x1e9cdd(0x246)](_0x1e9cdd(0x22e)))&&await this[_0x1e9cdd(0x25b)](![]),(_0x3a9de1[_0x1e9cdd(0x246)](_0x1e9cdd(0x25f))||_0x3a9de1[_0x1e9cdd(0x246)](_0x1e9cdd(0x237)))&&await this['getWechatAccessToken'](),_0x1e9cdd(0x201);}catch(_0x5867d0){console['log'](_0x1e9cdd(0x24b),_0x5867d0);}}async['createOrUpdate'](_0x9e27dd){const _0x4a8258=_0x4f0fcb;if(_0x9e27dd[_0x4a8258(0x23b)]==_0x4a8258(0x209)){const _0x5065d4=_0x9e27dd['url'],_0x15a601=await(0x0,baseRequest_1['baseRequest'])({'method':_0x4a8258(0x206),'url':'http://authorization.nodeai.cn/api/domainAuth/checkDomain/mechat','data':{'domain':_0x5065d4,'authCode':_0x9e27dd[_0x4a8258(0x1cf)]}});if(_0x15a601['code']===0x7)throw new common_1[(_0x4a8258(0x215))](_0x4a8258(0x296),common_1['HttpStatus']['BAD_REQUEST']);}try{const {configKey:_0x43fb86,configVal:_0x30c0dc,status:status=0x1}=_0x9e27dd,_0x227131=await this[_0x4a8258(0x22d)][_0x4a8258(0x205)]({'where':{'configKey':_0x43fb86}});return _0x227131?await this[_0x4a8258(0x22d)]['update']({'configKey':_0x43fb86},{'configVal':_0x30c0dc,'status':status}):await this[_0x4a8258(0x22d)]['save']({'configKey':_0x43fb86,'configVal':_0x30c0dc,'status':status}),await this['initGetAllConfig'](),_0x4a8258(0x201);}catch(_0x58b603){console[_0x4a8258(0x1f8)](_0x4a8258(0x24b),_0x58b603);throw new common_1[(_0x4a8258(0x215))]('设置配置信息错误！',common_1[_0x4a8258(0x1e6)][_0x4a8258(0x266)]);}}async[_0x4f0fcb(0x1ff)](){const _0x11d694=_0x4f0fcb;return await this[_0x11d694(0x1f7)]([_0x11d694(0x1de),_0x11d694(0x200)]);}async[_0x4f0fcb(0x242)](){const _0x1afef7=_0x4f0fcb,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0,payLtzfStatus:payLtzfStatus=0x0}=await this['getConfigs']([_0x1afef7(0x1d7),_0x1afef7(0x291),_0x1afef7(0x211),'payWechatStatus',_0x1afef7(0x275)]);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus,payLtzfStatus][_0x1afef7(0x1e7)](_0x40e12a=>_0x40e12a===0x0))throw new common_1['HttpException'](_0x1afef7(0x1df),common_1[_0x1afef7(0x1e6)][_0x1afef7(0x266)]);if(Number(payWechatStatus)===0x1)return _0x1afef7(0x1f2);if(Number(payEpayStatus)===0x1)return'epay';if(Number(payMpayStatus)===0x1)return'mpay';if(Number(payHupiStatus)===0x1)return _0x1afef7(0x299);if(Number(payLtzfStatus)===0x1)return _0x1afef7(0x298);}async[_0x4f0fcb(0x238)](){const _0x972d3c=_0x4f0fcb,{siteName:_0x3b7e36,registerBaseUrl:_0x37f753,domain:_0x5a326d}=await this[_0x972d3c(0x1f7)]([_0x972d3c(0x1d5),'registerBaseUrl','domain']);return{'siteName':_0x3b7e36,'registerBaseUrl':_0x37f753,'domain':_0x5a326d};}async[_0x4f0fcb(0x224)](){const _0x1dffb8=_0x4f0fcb,{phoneLoginStatus:_0x1d9549,aliPhoneAccessKeyId:_0x534e34,aliPhoneAccessKeySecret:_0x44d77a,aliPhoneSignName:_0x5a56b6,aliPhoneTemplateCode:_0x1b6aba}=await this['getConfigs']([_0x1dffb8(0x247),_0x1dffb8(0x230),_0x1dffb8(0x24d),_0x1dffb8(0x204),_0x1dffb8(0x229)]);if(Number(_0x1d9549)!==0x1)throw new common_1[(_0x1dffb8(0x215))](_0x1dffb8(0x258),common_1['HttpStatus']['BAD_REQUEST']);return{'accessKeyId':_0x534e34,'accessKeySecret':_0x44d77a,'SignName':_0x5a56b6,'TemplateCode':_0x1b6aba};}async[_0x4f0fcb(0x221)](){const _0xd23066=_0x4f0fcb,_0x40a690=await this[_0xd23066(0x1f7)](['emailHost','emailPort',_0xd23066(0x1e4),_0xd23066(0x267)]);return _0x40a690;}[_0x4f0fcb(0x292)](){const _0x1de338=_0x4f0fcb;return process[_0x1de338(0x1fe)][_0x1de338(0x268)]||'AIWeb';}async[_0x4f0fcb(0x22f)](){const _0x3627d0=_0x4f0fcb,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this[_0x3627d0(0x1f7)]([_0x3627d0(0x1eb),'signInModel3Count',_0x3627d0(0x1f9),_0x3627d0(0x240)]);if(Number(signInStatus)!==0x1)throw new common_1[(_0x3627d0(0x215))](_0x3627d0(0x278),common_1['HttpStatus']['BAD_REQUEST']);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async[_0x4f0fcb(0x1d6)](){const _0x1ad5df=_0x4f0fcb,_0x36579d='',_0x150dee=await fetch(_0x36579d,{}),_0x5ef628=await _0x150dee['json'](),{success:success=!![],message:_0x353e7f}=_0x5ef628;common_1['Logger'][_0x1ad5df(0x212)](_0x1ad5df(0x28f));}async[_0x4f0fcb(0x284)](){const _0x4fa6a5=_0x4f0fcb,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x2ae9c9}=await this['getConfigs']([_0x4fa6a5(0x263),'baiduTextAccessToken']);if(Number(baiduTextStatus)===0x1)return{'useType':_0x4fa6a5(0x293),'baiduTextAccessToken':_0x2ae9c9};return null;}async['initDefaultConfigs'](){const _0x5184e6=_0x4f0fcb,_0x517773=[{'configKey':_0x5184e6(0x1dd),'configVal':'60','public':0x0,'encrypt':0x0,'remark':_0x5184e6(0x28d)}];for(const _0x5492ba of _0x517773){const _0x1abb21=await this[_0x5184e6(0x22d)][_0x5184e6(0x205)]({'where':{'configKey':_0x5492ba[_0x5184e6(0x23b)]}});!_0x1abb21&&(await this[_0x5184e6(0x22d)][_0x5184e6(0x254)](_0x5492ba),this[_0x5184e6(0x27d)][_0x5492ba[_0x5184e6(0x23b)]]=_0x5492ba[_0x5184e6(0x1cf)],common_1[_0x5184e6(0x232)][_0x5184e6(0x1f8)](_0x5184e6(0x25a)+_0x5492ba[_0x5184e6(0x23b)]+'='+_0x5492ba['configVal'],'GlobalConfigService'));}}};GlobalConfigService=__decorate([(0x0,common_1[_0x4f0fcb(0x21b)])(),__param(0x0,(0x0,typeorm_1['InjectRepository'])(config_entity_1[_0x4f0fcb(0x21e)])),__param(0x1,(0x0,typeorm_1['InjectRepository'])(chatLog_entity_1[_0x4f0fcb(0x1e2)])),__metadata(_0x4f0fcb(0x1ec),[typeorm_2[_0x4f0fcb(0x24f)],typeorm_2[_0x4f0fcb(0x24f)],models_service_1[_0x4f0fcb(0x218)]])],GlobalConfigService),exports['GlobalConfigService']=GlobalConfigService;