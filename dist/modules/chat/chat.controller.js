'use strict';function _0x9120(_0x50fde9,_0x48c7c2){const _0x4017fa=_0x4017();return _0x9120=function(_0x912060,_0x46bd0b){_0x912060=_0x912060-0x198;let _0x1ff309=_0x4017fa[_0x912060];return _0x1ff309;},_0x9120(_0x50fde9,_0x48c7c2);}const _0x1fd686=_0x9120;(function(_0x881ca,_0x48796c){const _0x2273ee=_0x9120,_0x4ff312=_0x881ca();while(!![]){try{const _0x305c1b=parseInt(_0x2273ee(0x1e6))/0x1*(-parseInt(_0x2273ee(0x1a5))/0x2)+parseInt(_0x2273ee(0x1ad))/0x3+parseInt(_0x2273ee(0x1a1))/0x4*(-parseInt(_0x2273ee(0x1d3))/0x5)+-parseInt(_0x2273ee(0x19d))/0x6+-parseInt(_0x2273ee(0x1d9))/0x7+parseInt(_0x2273ee(0x1e2))/0x8*(parseInt(_0x2273ee(0x1ab))/0x9)+parseInt(_0x2273ee(0x19e))/0xa*(parseInt(_0x2273ee(0x1b8))/0xb);if(_0x305c1b===_0x48796c)break;else _0x4ff312['push'](_0x4ff312['shift']());}catch(_0xd96060){_0x4ff312['push'](_0x4ff312['shift']());}}}(_0x4017,0x74f5e));var __decorate=this&&this['__decorate']||function(_0x1c1447,_0x342757,_0x265c28,_0x5eeff5){const _0x551263=_0x9120;var _0x29b3b8=arguments[_0x551263(0x1cb)],_0x5860fc=_0x29b3b8<0x3?_0x342757:_0x5eeff5===null?_0x5eeff5=Object[_0x551263(0x1e4)](_0x342757,_0x265c28):_0x5eeff5,_0x5e47b6;if(typeof Reflect===_0x551263(0x1a9)&&typeof Reflect['decorate']===_0x551263(0x1a7))_0x5860fc=Reflect[_0x551263(0x1b5)](_0x1c1447,_0x342757,_0x265c28,_0x5eeff5);else{for(var _0x2f1cac=_0x1c1447['length']-0x1;_0x2f1cac>=0x0;_0x2f1cac--)if(_0x5e47b6=_0x1c1447[_0x2f1cac])_0x5860fc=(_0x29b3b8<0x3?_0x5e47b6(_0x5860fc):_0x29b3b8>0x3?_0x5e47b6(_0x342757,_0x265c28,_0x5860fc):_0x5e47b6(_0x342757,_0x265c28))||_0x5860fc;}return _0x29b3b8>0x3&&_0x5860fc&&Object['defineProperty'](_0x342757,_0x265c28,_0x5860fc),_0x5860fc;},__metadata=this&&this['__metadata']||function(_0x39c083,_0x44f97d){const _0x136094=_0x9120;if(typeof Reflect===_0x136094(0x1a9)&&typeof Reflect[_0x136094(0x1d1)]===_0x136094(0x1a7))return Reflect[_0x136094(0x1d1)](_0x39c083,_0x44f97d);},__param=this&&this[_0x1fd686(0x1d6)]||function(_0x527c8e,_0x176860){return function(_0x319bc6,_0x5a2fa3){_0x176860(_0x319bc6,_0x5a2fa3,_0x527c8e);};};function _0x4017(){const _0x46245c=['../../common/auth/jwtAuth.guard','TTS语音合成','aiPptService','Controller','返回语音数据流','ttsProcess','Req','@nestjs/common','PromptOptimization','ApiResponse','ApiOperation','length','使用GPT生成思维导图，使用MindMap专用模型','AI\x20服务统一接口','Body','chat-mind','chat-sync','metadata','assign','90SOBpcE','@nestjs/swagger','响应文本','__param','./dto/chatProcess.dto','使用GPT对绘画描述词进行翻译和优化，使用PromptOptimization模型','1829394KehbYI','GlobalConfigService','chatProcessSync','Mind思维导图生成','../globalConfig/globalConfig.service','Post','将文本转换为语音','../ai/aiPPT','UseGuards','1662144EKOoxw','chatProcess','getOwnPropertyDescriptor','design:paramtypes','37UjxMqg','chatmind','ppt-cover','返回优化后的绘画描述词','design:returntype','chat-process','MindMap','GPT描述词绘画翻译','1181772BSkEdM','70psNcEA','pptCover','与GPT进行同步对话，返回完整响应','83336PqVEZh','任务ID','生成PPT封面','design:type','45512BHSxfH','number','function','返回完整的对话响应','object','返回思维导图数据','18dAYkaB','PPT封面生成','679941OHEmsN','ChatProcessDto','chatService','生成的文件信息','GPT同步对话','ApiBearerAuth','string','ChatController','decorate','tts-process','JwtAuthGuard','2376275eeTwMd','Res','prototype','chatgpt','globalConfigService','返回对话响应流或任务结果','统一处理各种\x20AI\x20服务的请求，支持：\x0a\x20\x20\x20\x201.\x20OpenAI\x20聊天\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20gpt-3.5-turbo,\x20gpt-4\x0a\x20\x20\x20\x202.\x20Suno\x20AI\x20音乐生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20suno-music\x0a\x20\x20\x20\x20\x20\x20\x20-\x20歌词生成：action=\x22LYRICS\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20音乐生成：action=\x22MUSIC\x22,\x20需提供\x20customId\x0a\x20\x20\x20\x203.\x20Luma\x20视频生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20luma-video\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action=\x22CREATE\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x204.\x20Flux\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20flux\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20参数\x0a\x20\x20\x20\x20\x20\x20\x20-\x20可选\x20options.groupId\x20参数\x0a\x20\x20\x20\x205.\x20Midjourney\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持四种速度模式：\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney:\x20默认速度\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-fast:\x20快速模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-relax:\x20放松模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-turbo:\x20极速模式\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action:\x20IMAGINE,\x20UPSCALE,\x20VARIATION,\x20ZOOM,\x20PAN,\x20DESCRIBE,\x20BLEND\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20所有请求都支持流式响应，可实时获取生成进度。','AiPptService'];_0x4017=function(){return _0x46245c;};return _0x4017();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['ChatController']=void 0x0;const swagger_1=require(_0x1fd686(0x1d4)),jwtAuth_guard_1=require(_0x1fd686(0x1c0)),chat_service_1=require('./chat.service'),common_1=require(_0x1fd686(0x1c7)),chatProcess_dto_1=require(_0x1fd686(0x1d7)),aiPPT_1=require(_0x1fd686(0x1e0)),globalConfig_service_1=require(_0x1fd686(0x1dd));let ChatController=class ChatController{constructor(_0x5dba7e,_0x57066f,_0x157e2b){const _0x274ab7=_0x1fd686;this[_0x274ab7(0x1af)]=_0x5dba7e,this[_0x274ab7(0x1bc)]=_0x57066f,this[_0x274ab7(0x1c2)]=_0x157e2b;}['chatProcess'](_0x51bc8a,_0xf44997,_0x430f5a){const _0xdd0743=_0x1fd686;return this['chatService'][_0xdd0743(0x1e3)](_0x51bc8a,_0xf44997,_0x430f5a);}[_0x1fd686(0x1db)](_0x10e586,_0x2b7b5d){const _0x2f00b6=_0x1fd686;return this[_0x2f00b6(0x1af)][_0x2f00b6(0x1e3)](Object[_0x2f00b6(0x1d2)]({},_0x10e586),_0x2b7b5d);}async['mjFanyi'](_0x404b37,_0x3d1365){const _0x542894=_0x1fd686;return this[_0x542894(0x1af)][_0x542894(0x1e3)](Object[_0x542894(0x1d2)](Object['assign']({},_0x404b37),{'specialModel':_0x542894(0x1c8)}),_0x3d1365);}async[_0x1fd686(0x1e7)](_0x55d126,_0x5a2f51,_0x7b2173){const _0x497964=_0x1fd686;return this[_0x497964(0x1af)][_0x497964(0x1e3)](Object[_0x497964(0x1d2)](Object[_0x497964(0x1d2)]({},_0x55d126),{'specialModel':_0x497964(0x19b)}),_0x5a2f51,_0x7b2173);}[_0x1fd686(0x1c5)](_0x314d9c,_0x2b4407,_0x41701c){const _0x391144=_0x1fd686;return this['chatService'][_0x391144(0x1c5)](_0x314d9c,_0x2b4407,_0x41701c);}[_0x1fd686(0x19f)](_0x37d191){const _0x4e8279=_0x1fd686;return this[_0x4e8279(0x1c2)]['pptCover'](_0x37d191);}};__decorate([(0x0,common_1[_0x1fd686(0x1de)])(_0x1fd686(0x19a)),(0x0,swagger_1['ApiOperation'])({'summary':_0x1fd686(0x1cd),'description':_0x1fd686(0x1be)}),(0x0,swagger_1[_0x1fd686(0x1c9)])({'status':0xc8,'description':_0x1fd686(0x1bd),'schema':{'properties':{'text':{'type':_0x1fd686(0x1b3),'description':_0x1fd686(0x1d5)},'fileInfo':{'type':_0x1fd686(0x1b3),'description':_0x1fd686(0x1b0)},'taskId':{'type':_0x1fd686(0x1b3),'description':_0x1fd686(0x1a2)},'taskData':{'type':'string','description':'任务数据'},'status':{'type':_0x1fd686(0x1a6),'description':'状态码：1-进行中，2-完成，3-失败'}}}}),(0x0,common_1[_0x1fd686(0x1e1)])(jwtAuth_guard_1[_0x1fd686(0x1b7)]),(0x0,swagger_1[_0x1fd686(0x1b2)])(),__param(0x0,(0x0,common_1[_0x1fd686(0x1ce)])()),__param(0x1,(0x0,common_1[_0x1fd686(0x1c6)])()),__param(0x2,(0x0,common_1['Res'])()),__metadata(_0x1fd686(0x1a4),Function),__metadata(_0x1fd686(0x1e5),[chatProcess_dto_1[_0x1fd686(0x1ae)],Object,Object]),__metadata(_0x1fd686(0x199),void 0x0)],ChatController[_0x1fd686(0x1ba)],_0x1fd686(0x1e3),null),__decorate([(0x0,common_1[_0x1fd686(0x1de)])(_0x1fd686(0x1d0)),(0x0,swagger_1['ApiOperation'])({'summary':_0x1fd686(0x1b1),'description':_0x1fd686(0x1a0)}),(0x0,swagger_1[_0x1fd686(0x1c9)])({'status':0xc8,'description':_0x1fd686(0x1a8)}),(0x0,common_1[_0x1fd686(0x1e1)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x1fd686(0x1ce)])()),__param(0x1,(0x0,common_1['Req'])()),__metadata('design:type',Function),__metadata(_0x1fd686(0x1e5),[chatProcess_dto_1[_0x1fd686(0x1ae)],Object]),__metadata(_0x1fd686(0x199),void 0x0)],ChatController[_0x1fd686(0x1ba)],_0x1fd686(0x1db),null),__decorate([(0x0,common_1[_0x1fd686(0x1de)])('mj-fy'),(0x0,swagger_1[_0x1fd686(0x1ca)])({'summary':_0x1fd686(0x19c),'description':_0x1fd686(0x1d8)}),(0x0,swagger_1[_0x1fd686(0x1c9)])({'status':0xc8,'description':_0x1fd686(0x198)}),(0x0,common_1[_0x1fd686(0x1e1)])(jwtAuth_guard_1[_0x1fd686(0x1b7)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x1fd686(0x1ce)])()),__param(0x1,(0x0,common_1[_0x1fd686(0x1c6)])()),__metadata(_0x1fd686(0x1a4),Function),__metadata(_0x1fd686(0x1e5),[chatProcess_dto_1[_0x1fd686(0x1ae)],Object]),__metadata(_0x1fd686(0x199),Promise)],ChatController[_0x1fd686(0x1ba)],'mjFanyi',null),__decorate([(0x0,common_1[_0x1fd686(0x1de)])(_0x1fd686(0x1cf)),(0x0,swagger_1[_0x1fd686(0x1ca)])({'summary':_0x1fd686(0x1dc),'description':_0x1fd686(0x1cc)}),(0x0,swagger_1[_0x1fd686(0x1c9)])({'status':0xc8,'description':_0x1fd686(0x1aa)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x1fd686(0x1b2)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x1fd686(0x1c6)])()),__param(0x2,(0x0,common_1[_0x1fd686(0x1b9)])()),__metadata(_0x1fd686(0x1a4),Function),__metadata(_0x1fd686(0x1e5),[chatProcess_dto_1[_0x1fd686(0x1ae)],Object,Object]),__metadata('design:returntype',Promise)],ChatController[_0x1fd686(0x1ba)],_0x1fd686(0x1e7),null),__decorate([(0x0,common_1['Post'])(_0x1fd686(0x1b6)),(0x0,swagger_1[_0x1fd686(0x1ca)])({'summary':_0x1fd686(0x1c1),'description':_0x1fd686(0x1df)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x1fd686(0x1c4)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x1fd686(0x1b7)]),(0x0,swagger_1[_0x1fd686(0x1b2)])(),__param(0x0,(0x0,common_1[_0x1fd686(0x1ce)])()),__param(0x1,(0x0,common_1[_0x1fd686(0x1c6)])()),__param(0x2,(0x0,common_1[_0x1fd686(0x1b9)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,Object,Object]),__metadata(_0x1fd686(0x199),void 0x0)],ChatController['prototype'],_0x1fd686(0x1c5),null),__decorate([(0x0,common_1['Post'])(_0x1fd686(0x1e8)),(0x0,swagger_1['ApiOperation'])({'summary':_0x1fd686(0x1ac),'description':_0x1fd686(0x1a3)}),(0x0,swagger_1[_0x1fd686(0x1c9)])({'status':0xc8,'description':'返回生成的PPT封面数据'}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x1fd686(0x1b2)])(),__param(0x0,(0x0,common_1[_0x1fd686(0x1ce)])()),__metadata(_0x1fd686(0x1a4),Function),__metadata(_0x1fd686(0x1e5),[Object]),__metadata('design:returntype',void 0x0)],ChatController[_0x1fd686(0x1ba)],_0x1fd686(0x19f),null),ChatController=__decorate([(0x0,swagger_1['ApiTags'])('chatgpt'),(0x0,common_1[_0x1fd686(0x1c3)])(_0x1fd686(0x1bb)),__metadata(_0x1fd686(0x1e5),[chat_service_1['ChatService'],globalConfig_service_1[_0x1fd686(0x1da)],aiPPT_1[_0x1fd686(0x1bf)]])],ChatController),exports[_0x1fd686(0x1b4)]=ChatController;