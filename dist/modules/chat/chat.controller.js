'use strict';const _0x497bac=_0x559a;function _0x559a(_0xafdc62,_0x38cd46){const _0x372437=_0x3724();return _0x559a=function(_0x559add,_0x565ed0){_0x559add=_0x559add-0xc2;let _0xada307=_0x372437[_0x559add];return _0xada307;},_0x559a(_0xafdc62,_0x38cd46);}(function(_0x3964ec,_0x22e005){const _0x3e0328=_0x559a,_0x1d240a=_0x3964ec();while(!![]){try{const _0x317733=-parseInt(_0x3e0328(0x100))/0x1*(-parseInt(_0x3e0328(0xeb))/0x2)+parseInt(_0x3e0328(0xde))/0x3*(parseInt(_0x3e0328(0x10e))/0x4)+parseInt(_0x3e0328(0x10d))/0x5*(-parseInt(_0x3e0328(0xd6))/0x6)+parseInt(_0x3e0328(0xc9))/0x7+parseInt(_0x3e0328(0xda))/0x8+-parseInt(_0x3e0328(0x112))/0x9*(parseInt(_0x3e0328(0xfc))/0xa)+parseInt(_0x3e0328(0x104))/0xb*(parseInt(_0x3e0328(0xf4))/0xc);if(_0x317733===_0x22e005)break;else _0x1d240a['push'](_0x1d240a['shift']());}catch(_0x22e44f){_0x1d240a['push'](_0x1d240a['shift']());}}}(_0x3724,0xeed88));function _0x3724(){const _0x5a5921=['25748gogYyi','GPT同步对话','__decorate','返回思维导图数据','ChatController','ttsProcess','Res','Body','GPT描述词绘画翻译','816QBvYDv','PPT封面生成','返回语音数据流','prototype','Post','ApiBearerAuth','chatmind','ppt-cover','290aLqIxM','globalConfigService','生成的文件信息','任务数据','68cmlrNw','chat-process','chat-mind','AI\x20服务统一接口','28138NjJzgA','decorate','ApiResponse','状态码：1-进行中，2-完成，3-失败','object','function','design:paramtypes','metadata','返回优化后的绘画描述词','10ajAZVW','20PmcULd','Req','JwtAuthGuard','ApiOperation','525033PfBswU','mjFanyi','getOwnPropertyDescriptor','design:returntype','ChatProcessDto','AiPptService','响应文本','chatService','5044081KUrfSg','chatgpt','pptCover','UseGuards','MindMap','number','TTS语音合成','string','../ai/aiPPT','../../common/auth/jwtAuth.guard','length','./dto/chatProcess.dto','与GPT进行同步对话，返回完整响应','583866JlQuja','chatProcess','返回完整的对话响应','PromptOptimization','3572824MOgMUk','mj-fy','design:type','使用GPT生成思维导图，使用MindMap专用模型','388887coBfWS','__metadata','chat-sync','__esModule','aiPptService','ApiTags','@nestjs/common','assign','生成PPT封面','将文本转换为语音','chatProcessSync','ChatService','统一处理各种\x20AI\x20服务的请求，支持：\x0a\x20\x20\x20\x201.\x20OpenAI\x20聊天\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20gpt-3.5-turbo,\x20gpt-4\x0a\x20\x20\x20\x202.\x20Suno\x20AI\x20音乐生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20suno-music\x0a\x20\x20\x20\x20\x20\x20\x20-\x20歌词生成：action=\x22LYRICS\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20音乐生成：action=\x22MUSIC\x22,\x20需提供\x20customId\x0a\x20\x20\x20\x203.\x20Luma\x20视频生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20luma-video\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action=\x22CREATE\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x204.\x20Flux\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20flux\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20参数\x0a\x20\x20\x20\x20\x20\x20\x20-\x20可选\x20options.groupId\x20参数\x0a\x20\x20\x20\x205.\x20Midjourney\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持四种速度模式：\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney:\x20默认速度\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-fast:\x20快速模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-relax:\x20放松模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-turbo:\x20极速模式\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action:\x20IMAGINE,\x20UPSCALE,\x20VARIATION,\x20ZOOM,\x20PAN,\x20DESCRIBE,\x20BLEND\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20所有请求都支持流式响应，可实时获取生成进度。'];_0x3724=function(){return _0x5a5921;};return _0x3724();}var __decorate=this&&this[_0x497bac(0xed)]||function(_0x3d0843,_0x589152,_0x39e508,_0x3f71c3){const _0x8fa6bd=_0x497bac;var _0x364487=arguments[_0x8fa6bd(0xd3)],_0x9c361a=_0x364487<0x3?_0x589152:_0x3f71c3===null?_0x3f71c3=Object[_0x8fa6bd(0xc3)](_0x589152,_0x39e508):_0x3f71c3,_0x1ece6c;if(typeof Reflect==='object'&&typeof Reflect[_0x8fa6bd(0x105)]==='function')_0x9c361a=Reflect[_0x8fa6bd(0x105)](_0x3d0843,_0x589152,_0x39e508,_0x3f71c3);else{for(var _0x1e7045=_0x3d0843[_0x8fa6bd(0xd3)]-0x1;_0x1e7045>=0x0;_0x1e7045--)if(_0x1ece6c=_0x3d0843[_0x1e7045])_0x9c361a=(_0x364487<0x3?_0x1ece6c(_0x9c361a):_0x364487>0x3?_0x1ece6c(_0x589152,_0x39e508,_0x9c361a):_0x1ece6c(_0x589152,_0x39e508))||_0x9c361a;}return _0x364487>0x3&&_0x9c361a&&Object['defineProperty'](_0x589152,_0x39e508,_0x9c361a),_0x9c361a;},__metadata=this&&this[_0x497bac(0xdf)]||function(_0x2b1a18,_0x2787f8){const _0x27da95=_0x497bac;if(typeof Reflect===_0x27da95(0x108)&&typeof Reflect[_0x27da95(0x10b)]===_0x27da95(0x109))return Reflect[_0x27da95(0x10b)](_0x2b1a18,_0x2787f8);},__param=this&&this['__param']||function(_0xfc1056,_0x18eee7){return function(_0x464a42,_0x3400dd){_0x18eee7(_0x464a42,_0x3400dd,_0xfc1056);};};Object['defineProperty'](exports,_0x497bac(0xe1),{'value':!![]}),exports['ChatController']=void 0x0;const swagger_1=require('@nestjs/swagger'),jwtAuth_guard_1=require(_0x497bac(0xd2)),chat_service_1=require('./chat.service'),common_1=require(_0x497bac(0xe4)),chatProcess_dto_1=require(_0x497bac(0xd4)),aiPPT_1=require(_0x497bac(0xd1)),globalConfig_service_1=require('../globalConfig/globalConfig.service');let ChatController=class ChatController{constructor(_0x5549bf,_0x4e3264,_0x113676){const _0x5f0c8e=_0x497bac;this[_0x5f0c8e(0xc8)]=_0x5549bf,this[_0x5f0c8e(0xfd)]=_0x4e3264,this[_0x5f0c8e(0xe2)]=_0x113676;}[_0x497bac(0xd7)](_0x1b7093,_0x595a52,_0x53d3d1){const _0x1a68f5=_0x497bac;return this[_0x1a68f5(0xc8)]['chatProcess'](_0x1b7093,_0x595a52,_0x53d3d1);}['chatProcessSync'](_0x1aa47a,_0x5c91ec){const _0x4523a2=_0x497bac;return this['chatService'][_0x4523a2(0xd7)](Object['assign']({},_0x1aa47a),_0x5c91ec);}async[_0x497bac(0xc2)](_0x503ea7,_0x3e7c87){const _0x5001ac=_0x497bac;return this['chatService']['chatProcess'](Object[_0x5001ac(0xe5)](Object[_0x5001ac(0xe5)]({},_0x503ea7),{'specialModel':_0x5001ac(0xd9)}),_0x3e7c87);}async[_0x497bac(0xfa)](_0x10417e,_0x5369b0,_0x164240){const _0x2423d0=_0x497bac;return this[_0x2423d0(0xc8)]['chatProcess'](Object[_0x2423d0(0xe5)](Object[_0x2423d0(0xe5)]({},_0x10417e),{'specialModel':_0x2423d0(0xcd)}),_0x5369b0,_0x164240);}[_0x497bac(0xf0)](_0x5b3a32,_0x4ff7e4,_0x5c1eab){const _0x502f28=_0x497bac;return this['chatService'][_0x502f28(0xf0)](_0x5b3a32,_0x4ff7e4,_0x5c1eab);}[_0x497bac(0xcb)](_0xe92fae){const _0xd77a80=_0x497bac;return this[_0xd77a80(0xe2)][_0xd77a80(0xcb)](_0xe92fae);}};__decorate([(0x0,common_1[_0x497bac(0xf8)])(_0x497bac(0x101)),(0x0,swagger_1[_0x497bac(0x111)])({'summary':_0x497bac(0x103),'description':_0x497bac(0xea)}),(0x0,swagger_1[_0x497bac(0x106)])({'status':0xc8,'description':'返回对话响应流或任务结果','schema':{'properties':{'text':{'type':_0x497bac(0xd0),'description':_0x497bac(0xc7)},'fileInfo':{'type':_0x497bac(0xd0),'description':_0x497bac(0xfe)},'taskId':{'type':_0x497bac(0xd0),'description':'任务ID'},'taskData':{'type':'string','description':_0x497bac(0xff)},'status':{'type':_0x497bac(0xce),'description':_0x497bac(0x107)}}}}),(0x0,common_1[_0x497bac(0xcc)])(jwtAuth_guard_1[_0x497bac(0x110)]),(0x0,swagger_1[_0x497bac(0xf9)])(),__param(0x0,(0x0,common_1[_0x497bac(0xf2)])()),__param(0x1,(0x0,common_1[_0x497bac(0x10f)])()),__param(0x2,(0x0,common_1['Res'])()),__metadata(_0x497bac(0xdc),Function),__metadata('design:paramtypes',[chatProcess_dto_1[_0x497bac(0xc5)],Object,Object]),__metadata(_0x497bac(0xc4),void 0x0)],ChatController[_0x497bac(0xf7)],_0x497bac(0xd7),null),__decorate([(0x0,common_1['Post'])(_0x497bac(0xe0)),(0x0,swagger_1['ApiOperation'])({'summary':_0x497bac(0xec),'description':_0x497bac(0xd5)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x497bac(0xd8)}),(0x0,common_1[_0x497bac(0xcc)])(jwtAuth_guard_1[_0x497bac(0x110)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x497bac(0xf2)])()),__param(0x1,(0x0,common_1[_0x497bac(0x10f)])()),__metadata(_0x497bac(0xdc),Function),__metadata('design:paramtypes',[chatProcess_dto_1[_0x497bac(0xc5)],Object]),__metadata(_0x497bac(0xc4),void 0x0)],ChatController[_0x497bac(0xf7)],_0x497bac(0xe8),null),__decorate([(0x0,common_1[_0x497bac(0xf8)])(_0x497bac(0xdb)),(0x0,swagger_1[_0x497bac(0x111)])({'summary':_0x497bac(0xf3),'description':'使用GPT对绘画描述词进行翻译和优化，使用PromptOptimization模型'}),(0x0,swagger_1[_0x497bac(0x106)])({'status':0xc8,'description':_0x497bac(0x10c)}),(0x0,common_1[_0x497bac(0xcc)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x497bac(0x10f)])()),__metadata(_0x497bac(0xdc),Function),__metadata('design:paramtypes',[chatProcess_dto_1[_0x497bac(0xc5)],Object]),__metadata(_0x497bac(0xc4),Promise)],ChatController[_0x497bac(0xf7)],_0x497bac(0xc2),null),__decorate([(0x0,common_1['Post'])(_0x497bac(0x102)),(0x0,swagger_1[_0x497bac(0x111)])({'summary':'Mind思维导图生成','description':_0x497bac(0xdd)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x497bac(0xee)}),(0x0,common_1[_0x497bac(0xcc)])(jwtAuth_guard_1[_0x497bac(0x110)]),(0x0,swagger_1[_0x497bac(0xf9)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x497bac(0x10f)])()),__param(0x2,(0x0,common_1['Res'])()),__metadata(_0x497bac(0xdc),Function),__metadata('design:paramtypes',[chatProcess_dto_1[_0x497bac(0xc5)],Object,Object]),__metadata(_0x497bac(0xc4),Promise)],ChatController[_0x497bac(0xf7)],'chatmind',null),__decorate([(0x0,common_1[_0x497bac(0xf8)])('tts-process'),(0x0,swagger_1[_0x497bac(0x111)])({'summary':_0x497bac(0xcf),'description':_0x497bac(0xe7)}),(0x0,swagger_1[_0x497bac(0x106)])({'status':0xc8,'description':_0x497bac(0xf6)}),(0x0,common_1[_0x497bac(0xcc)])(jwtAuth_guard_1[_0x497bac(0x110)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x497bac(0xf2)])()),__param(0x1,(0x0,common_1[_0x497bac(0x10f)])()),__param(0x2,(0x0,common_1[_0x497bac(0xf1)])()),__metadata(_0x497bac(0xdc),Function),__metadata('design:paramtypes',[Object,Object,Object]),__metadata(_0x497bac(0xc4),void 0x0)],ChatController['prototype'],_0x497bac(0xf0),null),__decorate([(0x0,common_1['Post'])(_0x497bac(0xfb)),(0x0,swagger_1[_0x497bac(0x111)])({'summary':_0x497bac(0xf5),'description':_0x497bac(0xe6)}),(0x0,swagger_1[_0x497bac(0x106)])({'status':0xc8,'description':'返回生成的PPT封面数据'}),(0x0,common_1[_0x497bac(0xcc)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x497bac(0xdc),Function),__metadata(_0x497bac(0x10a),[Object]),__metadata('design:returntype',void 0x0)],ChatController['prototype'],'pptCover',null),ChatController=__decorate([(0x0,swagger_1[_0x497bac(0xe3)])(_0x497bac(0xca)),(0x0,common_1['Controller'])(_0x497bac(0xca)),__metadata('design:paramtypes',[chat_service_1[_0x497bac(0xe9)],globalConfig_service_1['GlobalConfigService'],aiPPT_1[_0x497bac(0xc6)]])],ChatController),exports[_0x497bac(0xef)]=ChatController;