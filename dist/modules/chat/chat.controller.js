'use strict';const _0x55b153=_0x4895;(function(_0x2bd390,_0x4ebf06){const _0xfb430a=_0x4895,_0x2fe63f=_0x2bd390();while(!![]){try{const _0x506e4d=parseInt(_0xfb430a(0x1f6))/0x1*(parseInt(_0xfb430a(0x1d9))/0x2)+-parseInt(_0xfb430a(0x1b7))/0x3+-parseInt(_0xfb430a(0x1cc))/0x4*(parseInt(_0xfb430a(0x1c1))/0x5)+-parseInt(_0xfb430a(0x1d3))/0x6+-parseInt(_0xfb430a(0x1bc))/0x7*(-parseInt(_0xfb430a(0x1ce))/0x8)+-parseInt(_0xfb430a(0x1bf))/0x9*(parseInt(_0xfb430a(0x1db))/0xa)+-parseInt(_0xfb430a(0x1fb))/0xb*(-parseInt(_0xfb430a(0x1e8))/0xc);if(_0x506e4d===_0x4ebf06)break;else _0x2fe63f['push'](_0x2fe63f['shift']());}catch(_0x197f60){_0x2fe63f['push'](_0x2fe63f['shift']());}}}(_0x1425,0x6bd18));function _0x1425(){const _0x545afa=['./dto/chatProcess.dto','Req','20494MPiBdp','chatProcess','2980NtvZFt','TTS语音合成','chatgpt','ApiTags','__esModule','chat-mind','../ai/aiPPT','ChatProcessDto','使用GPT生成思维导图，使用MindMap专用模型','defineProperty','PPT封面生成','统一处理各种\x20AI\x20服务的请求，支持：\x0a\x20\x20\x20\x201.\x20OpenAI\x20聊天\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20gpt-3.5-turbo,\x20gpt-4\x0a\x20\x20\x20\x202.\x20Suno\x20AI\x20音乐生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20suno-music\x0a\x20\x20\x20\x20\x20\x20\x20-\x20歌词生成：action=\x22LYRICS\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20音乐生成：action=\x22MUSIC\x22,\x20需提供\x20customId\x0a\x20\x20\x20\x203.\x20Luma\x20视频生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20luma-video\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action=\x22CREATE\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x204.\x20Flux\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20flux\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20参数\x0a\x20\x20\x20\x20\x20\x20\x20-\x20可选\x20options.groupId\x20参数\x0a\x20\x20\x20\x205.\x20Midjourney\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持四种速度模式：\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney:\x20默认速度\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-fast:\x20快速模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-relax:\x20放松模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-turbo:\x20极速模式\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action:\x20IMAGINE,\x20UPSCALE,\x20VARIATION,\x20ZOOM,\x20PAN,\x20DESCRIBE,\x20BLEND\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20所有请求都支持流式响应，可实时获取生成进度。','PromptOptimization','720RkSmvq','将文本转换为语音','Controller','返回语音数据流','ttsProcess','chatmind','assign','aiPptService','JwtAuthGuard','AI\x20服务统一接口','Res','GPT描述词绘画翻译','decorate','__decorate','55zumymL','chatService','prototype','ApiResponse','ApiBearerAuth','52580WEkWmB','响应文本','chatProcessSync','MindMap','Post','返回思维导图数据','ChatController','Mind思维导图生成','./chat.service','ApiOperation','__param','生成的文件信息','tts-process','mjFanyi','chat-sync','design:type','79446VnItYq','object','string','返回生成的PPT封面数据','GPT同步对话','821198CKBKsY','design:paramtypes','GlobalConfigService','15219UtxeWD','Body','215EfJtkK','AiPptService','pptCover','状态码：1-进行中，2-完成，3-失败','使用GPT对绘画描述词进行翻译和优化，使用PromptOptimization模型','number','design:returntype','function','UseGuards','返回对话响应流或任务结果','chat-process','42656wOXWbd','@nestjs/common','56aXSqCv','length','与GPT进行同步对话，返回完整响应','globalConfigService','mj-fy','1446042fBpjwf','生成PPT封面','任务数据','../../common/auth/jwtAuth.guard'];_0x1425=function(){return _0x545afa;};return _0x1425();}function _0x4895(_0x3e6448,_0x1d6c17){const _0x1425ca=_0x1425();return _0x4895=function(_0x4895f6,_0xfc7dac){_0x4895f6=_0x4895f6-0x1b1;let _0x1e8953=_0x1425ca[_0x4895f6];return _0x1e8953;},_0x4895(_0x3e6448,_0x1d6c17);}var __decorate=this&&this[_0x55b153(0x1f5)]||function(_0x268157,_0xe06790,_0x2851d,_0x3a10c0){const _0x3f159a=_0x55b153;var _0xe44194=arguments[_0x3f159a(0x1cf)],_0x52e3ab=_0xe44194<0x3?_0xe06790:_0x3a10c0===null?_0x3a10c0=Object['getOwnPropertyDescriptor'](_0xe06790,_0x2851d):_0x3a10c0,_0x4b7a96;if(typeof Reflect==='object'&&typeof Reflect[_0x3f159a(0x1f4)]===_0x3f159a(0x1c8))_0x52e3ab=Reflect[_0x3f159a(0x1f4)](_0x268157,_0xe06790,_0x2851d,_0x3a10c0);else{for(var _0x47626e=_0x268157[_0x3f159a(0x1cf)]-0x1;_0x47626e>=0x0;_0x47626e--)if(_0x4b7a96=_0x268157[_0x47626e])_0x52e3ab=(_0xe44194<0x3?_0x4b7a96(_0x52e3ab):_0xe44194>0x3?_0x4b7a96(_0xe06790,_0x2851d,_0x52e3ab):_0x4b7a96(_0xe06790,_0x2851d))||_0x52e3ab;}return _0xe44194>0x3&&_0x52e3ab&&Object['defineProperty'](_0xe06790,_0x2851d,_0x52e3ab),_0x52e3ab;},__metadata=this&&this['__metadata']||function(_0x5202fa,_0x35d941){const _0x580c2c=_0x55b153;if(typeof Reflect===_0x580c2c(0x1b8)&&typeof Reflect['metadata']===_0x580c2c(0x1c8))return Reflect['metadata'](_0x5202fa,_0x35d941);},__param=this&&this[_0x55b153(0x1b1)]||function(_0x316269,_0x39e8dc){return function(_0x806165,_0x2bc4c6){_0x39e8dc(_0x806165,_0x2bc4c6,_0x316269);};};Object[_0x55b153(0x1e4)](exports,_0x55b153(0x1df),{'value':!![]}),exports[_0x55b153(0x201)]=void 0x0;const swagger_1=require('@nestjs/swagger'),jwtAuth_guard_1=require(_0x55b153(0x1d6)),chat_service_1=require(_0x55b153(0x203)),common_1=require(_0x55b153(0x1cd)),chatProcess_dto_1=require(_0x55b153(0x1d7)),aiPPT_1=require(_0x55b153(0x1e1)),globalConfig_service_1=require('../globalConfig/globalConfig.service');let ChatController=class ChatController{constructor(_0x528df5,_0x2c0cf6,_0x5e6630){const _0x4fdf13=_0x55b153;this['chatService']=_0x528df5,this[_0x4fdf13(0x1d1)]=_0x2c0cf6,this[_0x4fdf13(0x1ef)]=_0x5e6630;}[_0x55b153(0x1da)](_0x174a2f,_0x5b816c,_0x3f933c){const _0xb21bbb=_0x55b153;return this[_0xb21bbb(0x1f7)]['chatProcess'](_0x174a2f,_0x5b816c,_0x3f933c);}[_0x55b153(0x1fd)](_0x3d5662,_0x24810c){const _0x3aada3=_0x55b153;return this[_0x3aada3(0x1f7)][_0x3aada3(0x1da)](Object[_0x3aada3(0x1ee)]({},_0x3d5662),_0x24810c);}async['mjFanyi'](_0x318b3e,_0x506541){const _0x3b5a06=_0x55b153;return this[_0x3b5a06(0x1f7)]['chatProcess'](Object['assign'](Object[_0x3b5a06(0x1ee)]({},_0x318b3e),{'specialModel':_0x3b5a06(0x1e7)}),_0x506541);}async['chatmind'](_0x1a0755,_0x5e3d65,_0x2d9122){const _0x44fbf6=_0x55b153;return this[_0x44fbf6(0x1f7)]['chatProcess'](Object[_0x44fbf6(0x1ee)](Object[_0x44fbf6(0x1ee)]({},_0x1a0755),{'specialModel':_0x44fbf6(0x1fe)}),_0x5e3d65,_0x2d9122);}[_0x55b153(0x1ec)](_0x462183,_0x53aa97,_0x51d126){const _0x3aa023=_0x55b153;return this[_0x3aa023(0x1f7)][_0x3aa023(0x1ec)](_0x462183,_0x53aa97,_0x51d126);}[_0x55b153(0x1c3)](_0xb84122){const _0x44c3c7=_0x55b153;return this[_0x44c3c7(0x1ef)][_0x44c3c7(0x1c3)](_0xb84122);}};__decorate([(0x0,common_1[_0x55b153(0x1ff)])(_0x55b153(0x1cb)),(0x0,swagger_1[_0x55b153(0x204)])({'summary':_0x55b153(0x1f1),'description':_0x55b153(0x1e6)}),(0x0,swagger_1[_0x55b153(0x1f9)])({'status':0xc8,'description':_0x55b153(0x1ca),'schema':{'properties':{'text':{'type':'string','description':_0x55b153(0x1fc)},'fileInfo':{'type':_0x55b153(0x1b9),'description':_0x55b153(0x1b2)},'taskId':{'type':_0x55b153(0x1b9),'description':'任务ID'},'taskData':{'type':'string','description':_0x55b153(0x1d5)},'status':{'type':_0x55b153(0x1c6),'description':_0x55b153(0x1c4)}}}}),(0x0,common_1[_0x55b153(0x1c9)])(jwtAuth_guard_1[_0x55b153(0x1f0)]),(0x0,swagger_1[_0x55b153(0x1fa)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x55b153(0x1d8)])()),__param(0x2,(0x0,common_1[_0x55b153(0x1f2)])()),__metadata(_0x55b153(0x1b6),Function),__metadata('design:paramtypes',[chatProcess_dto_1[_0x55b153(0x1e2)],Object,Object]),__metadata(_0x55b153(0x1c7),void 0x0)],ChatController['prototype'],_0x55b153(0x1da),null),__decorate([(0x0,common_1[_0x55b153(0x1ff)])(_0x55b153(0x1b5)),(0x0,swagger_1['ApiOperation'])({'summary':_0x55b153(0x1bb),'description':_0x55b153(0x1d0)}),(0x0,swagger_1[_0x55b153(0x1f9)])({'status':0xc8,'description':'返回完整的对话响应'}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x55b153(0x1fa)])(),__param(0x0,(0x0,common_1[_0x55b153(0x1c0)])()),__param(0x1,(0x0,common_1[_0x55b153(0x1d8)])()),__metadata('design:type',Function),__metadata(_0x55b153(0x1bd),[chatProcess_dto_1['ChatProcessDto'],Object]),__metadata('design:returntype',void 0x0)],ChatController[_0x55b153(0x1f8)],_0x55b153(0x1fd),null),__decorate([(0x0,common_1[_0x55b153(0x1ff)])(_0x55b153(0x1d2)),(0x0,swagger_1[_0x55b153(0x204)])({'summary':_0x55b153(0x1f3),'description':_0x55b153(0x1c5)}),(0x0,swagger_1[_0x55b153(0x1f9)])({'status':0xc8,'description':'返回优化后的绘画描述词'}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x55b153(0x1f0)]),(0x0,swagger_1[_0x55b153(0x1fa)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1['Req'])()),__metadata(_0x55b153(0x1b6),Function),__metadata(_0x55b153(0x1bd),[chatProcess_dto_1['ChatProcessDto'],Object]),__metadata(_0x55b153(0x1c7),Promise)],ChatController['prototype'],_0x55b153(0x1b4),null),__decorate([(0x0,common_1[_0x55b153(0x1ff)])(_0x55b153(0x1e0)),(0x0,swagger_1['ApiOperation'])({'summary':_0x55b153(0x202),'description':_0x55b153(0x1e3)}),(0x0,swagger_1[_0x55b153(0x1f9)])({'status':0xc8,'description':_0x55b153(0x200)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x55b153(0x1f0)]),(0x0,swagger_1[_0x55b153(0x1fa)])(),__param(0x0,(0x0,common_1[_0x55b153(0x1c0)])()),__param(0x1,(0x0,common_1['Req'])()),__param(0x2,(0x0,common_1[_0x55b153(0x1f2)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[chatProcess_dto_1[_0x55b153(0x1e2)],Object,Object]),__metadata('design:returntype',Promise)],ChatController['prototype'],_0x55b153(0x1ed),null),__decorate([(0x0,common_1[_0x55b153(0x1ff)])(_0x55b153(0x1b3)),(0x0,swagger_1[_0x55b153(0x204)])({'summary':_0x55b153(0x1dc),'description':_0x55b153(0x1e9)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x55b153(0x1eb)}),(0x0,common_1[_0x55b153(0x1c9)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x55b153(0x1fa)])(),__param(0x0,(0x0,common_1[_0x55b153(0x1c0)])()),__param(0x1,(0x0,common_1['Req'])()),__param(0x2,(0x0,common_1[_0x55b153(0x1f2)])()),__metadata('design:type',Function),__metadata(_0x55b153(0x1bd),[Object,Object,Object]),__metadata(_0x55b153(0x1c7),void 0x0)],ChatController[_0x55b153(0x1f8)],_0x55b153(0x1ec),null),__decorate([(0x0,common_1['Post'])('ppt-cover'),(0x0,swagger_1['ApiOperation'])({'summary':_0x55b153(0x1e5),'description':_0x55b153(0x1d4)}),(0x0,swagger_1[_0x55b153(0x1f9)])({'status':0xc8,'description':_0x55b153(0x1ba)}),(0x0,common_1[_0x55b153(0x1c9)])(jwtAuth_guard_1[_0x55b153(0x1f0)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x55b153(0x1b6),Function),__metadata(_0x55b153(0x1bd),[Object]),__metadata(_0x55b153(0x1c7),void 0x0)],ChatController[_0x55b153(0x1f8)],_0x55b153(0x1c3),null),ChatController=__decorate([(0x0,swagger_1[_0x55b153(0x1de)])(_0x55b153(0x1dd)),(0x0,common_1[_0x55b153(0x1ea)])(_0x55b153(0x1dd)),__metadata(_0x55b153(0x1bd),[chat_service_1['ChatService'],globalConfig_service_1[_0x55b153(0x1be)],aiPPT_1[_0x55b153(0x1c2)]])],ChatController),exports[_0x55b153(0x201)]=ChatController;