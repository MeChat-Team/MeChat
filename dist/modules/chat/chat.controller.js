'use strict';const _0x2950c7=_0x434f;(function(_0x302772,_0x139736){const _0x467b08=_0x434f,_0x22d4de=_0x302772();while(!![]){try{const _0x5e60af=parseInt(_0x467b08(0x147))/0x1+parseInt(_0x467b08(0x116))/0x2*(parseInt(_0x467b08(0x11f))/0x3)+parseInt(_0x467b08(0x11d))/0x4+parseInt(_0x467b08(0x133))/0x5+parseInt(_0x467b08(0x13c))/0x6*(parseInt(_0x467b08(0x129))/0x7)+parseInt(_0x467b08(0x104))/0x8+-parseInt(_0x467b08(0x146))/0x9;if(_0x5e60af===_0x139736)break;else _0x22d4de['push'](_0x22d4de['shift']());}catch(_0x188233){_0x22d4de['push'](_0x22d4de['shift']());}}}(_0x4779,0xdb648));var __decorate=this&&this[_0x2950c7(0x110)]||function(_0x58ebf9,_0x3f0f68,_0x5134f5,_0x4fbf29){const _0x1eeff0=_0x2950c7;var _0x400abb=arguments[_0x1eeff0(0x14b)],_0xbe6774=_0x400abb<0x3?_0x3f0f68:_0x4fbf29===null?_0x4fbf29=Object['getOwnPropertyDescriptor'](_0x3f0f68,_0x5134f5):_0x4fbf29,_0x23c7e6;if(typeof Reflect===_0x1eeff0(0x126)&&typeof Reflect[_0x1eeff0(0x123)]===_0x1eeff0(0xff))_0xbe6774=Reflect[_0x1eeff0(0x123)](_0x58ebf9,_0x3f0f68,_0x5134f5,_0x4fbf29);else{for(var _0x38ec7f=_0x58ebf9[_0x1eeff0(0x14b)]-0x1;_0x38ec7f>=0x0;_0x38ec7f--)if(_0x23c7e6=_0x58ebf9[_0x38ec7f])_0xbe6774=(_0x400abb<0x3?_0x23c7e6(_0xbe6774):_0x400abb>0x3?_0x23c7e6(_0x3f0f68,_0x5134f5,_0xbe6774):_0x23c7e6(_0x3f0f68,_0x5134f5))||_0xbe6774;}return _0x400abb>0x3&&_0xbe6774&&Object[_0x1eeff0(0x122)](_0x3f0f68,_0x5134f5,_0xbe6774),_0xbe6774;},__metadata=this&&this[_0x2950c7(0x10d)]||function(_0x55751d,_0x17aca8){const _0x539f7=_0x2950c7;if(typeof Reflect===_0x539f7(0x126)&&typeof Reflect[_0x539f7(0x101)]===_0x539f7(0xff))return Reflect[_0x539f7(0x101)](_0x55751d,_0x17aca8);},__param=this&&this['__param']||function(_0x3bba52,_0xc0838b){return function(_0x4c0a30,_0x439409){_0xc0838b(_0x4c0a30,_0x439409,_0x3bba52);};};Object[_0x2950c7(0x122)](exports,_0x2950c7(0x10f),{'value':!![]}),exports[_0x2950c7(0x124)]=void 0x0;const swagger_1=require('@nestjs/swagger'),jwtAuth_guard_1=require(_0x2950c7(0x13e)),chat_service_1=require(_0x2950c7(0x13f)),common_1=require(_0x2950c7(0x131)),chatProcess_dto_1=require(_0x2950c7(0x143)),aiPPT_1=require(_0x2950c7(0x148)),globalConfig_service_1=require('../globalConfig/globalConfig.service');function _0x434f(_0x565508,_0x5e1ca8){const _0x4779ae=_0x4779();return _0x434f=function(_0x434f88,_0x55e336){_0x434f88=_0x434f88-0xfe;let _0x498e72=_0x4779ae[_0x434f88];return _0x498e72;},_0x434f(_0x565508,_0x5e1ca8);}let ChatController=class ChatController{constructor(_0x5ddb46,_0x1a92be,_0x39455b){const _0x506606=_0x2950c7;this[_0x506606(0x125)]=_0x5ddb46,this[_0x506606(0x149)]=_0x1a92be,this[_0x506606(0x14a)]=_0x39455b;}[_0x2950c7(0x135)](_0x4fe12f,_0x373bdc,_0x1b6d8c){const _0x54c58e=_0x2950c7;return this[_0x54c58e(0x125)][_0x54c58e(0x135)](_0x4fe12f,_0x373bdc,_0x1b6d8c);}[_0x2950c7(0x138)](_0x5e5c60,_0x564e5d){const _0x783f41=_0x2950c7;return this[_0x783f41(0x125)][_0x783f41(0x135)](Object[_0x783f41(0x105)]({},_0x5e5c60),_0x564e5d);}async['mjFanyi'](_0x3e9f65,_0x5a6517){const _0x3ed073=_0x2950c7;return this[_0x3ed073(0x125)][_0x3ed073(0x135)](Object['assign'](Object[_0x3ed073(0x105)]({},_0x3e9f65),{'specialModel':'PromptOptimization'}),_0x5a6517);}async[_0x2950c7(0x141)](_0x2c6b39,_0x999a64,_0x589494){const _0x5496eb=_0x2950c7;return this[_0x5496eb(0x125)][_0x5496eb(0x135)](Object[_0x5496eb(0x105)](Object[_0x5496eb(0x105)]({},_0x2c6b39),{'specialModel':_0x5496eb(0x120)}),_0x999a64,_0x589494);}[_0x2950c7(0x12f)](_0x4bca30,_0x332f22,_0x1a54f1){const _0xa21eb7=_0x2950c7;return this[_0xa21eb7(0x125)][_0xa21eb7(0x12f)](_0x4bca30,_0x332f22,_0x1a54f1);}['pptCover'](_0x4e2a24){return this['aiPptService']['pptCover'](_0x4e2a24);}};__decorate([(0x0,common_1[_0x2950c7(0x10b)])(_0x2950c7(0xfe)),(0x0,swagger_1[_0x2950c7(0x142)])({'summary':_0x2950c7(0x13d),'description':_0x2950c7(0x144)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x2950c7(0x100),'schema':{'properties':{'text':{'type':_0x2950c7(0x12c),'description':'响应文本'},'fileInfo':{'type':_0x2950c7(0x12c),'description':_0x2950c7(0x119)},'taskId':{'type':'string','description':_0x2950c7(0x11c)},'taskData':{'type':'string','description':'任务数据'},'status':{'type':_0x2950c7(0x11a),'description':'状态码：1-进行中，2-完成，3-失败'}}}}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x2950c7(0x10c)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x2950c7(0x13b)])()),__param(0x1,(0x0,common_1['Req'])()),__param(0x2,(0x0,common_1[_0x2950c7(0x102)])()),__metadata(_0x2950c7(0x11b),Function),__metadata(_0x2950c7(0x12a),[chatProcess_dto_1[_0x2950c7(0x145)],Object,Object]),__metadata(_0x2950c7(0x128),void 0x0)],ChatController[_0x2950c7(0x11e)],_0x2950c7(0x135),null),__decorate([(0x0,common_1[_0x2950c7(0x10b)])(_0x2950c7(0x10e)),(0x0,swagger_1[_0x2950c7(0x142)])({'summary':_0x2950c7(0x132),'description':_0x2950c7(0x136)}),(0x0,swagger_1[_0x2950c7(0x13a)])({'status':0xc8,'description':_0x2950c7(0x137)}),(0x0,common_1[_0x2950c7(0x111)])(jwtAuth_guard_1[_0x2950c7(0x10c)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x2950c7(0x13b)])()),__param(0x1,(0x0,common_1[_0x2950c7(0x134)])()),__metadata(_0x2950c7(0x11b),Function),__metadata('design:paramtypes',[chatProcess_dto_1[_0x2950c7(0x145)],Object]),__metadata('design:returntype',void 0x0)],ChatController[_0x2950c7(0x11e)],_0x2950c7(0x138),null),__decorate([(0x0,common_1[_0x2950c7(0x10b)])(_0x2950c7(0x114)),(0x0,swagger_1[_0x2950c7(0x142)])({'summary':_0x2950c7(0x127),'description':_0x2950c7(0x139)}),(0x0,swagger_1[_0x2950c7(0x13a)])({'status':0xc8,'description':_0x2950c7(0x10a)}),(0x0,common_1[_0x2950c7(0x111)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x2950c7(0x12e)])(),__param(0x0,(0x0,common_1[_0x2950c7(0x13b)])()),__param(0x1,(0x0,common_1[_0x2950c7(0x134)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[chatProcess_dto_1[_0x2950c7(0x145)],Object]),__metadata(_0x2950c7(0x128),Promise)],ChatController[_0x2950c7(0x11e)],_0x2950c7(0x12b),null),__decorate([(0x0,common_1[_0x2950c7(0x10b)])('chat-mind'),(0x0,swagger_1['ApiOperation'])({'summary':'Mind思维导图生成','description':_0x2950c7(0x109)}),(0x0,swagger_1[_0x2950c7(0x13a)])({'status':0xc8,'description':_0x2950c7(0x112)}),(0x0,common_1[_0x2950c7(0x111)])(jwtAuth_guard_1[_0x2950c7(0x10c)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x2950c7(0x13b)])()),__param(0x1,(0x0,common_1[_0x2950c7(0x134)])()),__param(0x2,(0x0,common_1[_0x2950c7(0x102)])()),__metadata(_0x2950c7(0x11b),Function),__metadata('design:paramtypes',[chatProcess_dto_1[_0x2950c7(0x145)],Object,Object]),__metadata(_0x2950c7(0x128),Promise)],ChatController[_0x2950c7(0x11e)],_0x2950c7(0x141),null),__decorate([(0x0,common_1[_0x2950c7(0x10b)])(_0x2950c7(0x108)),(0x0,swagger_1['ApiOperation'])({'summary':_0x2950c7(0x130),'description':'将文本转换为语音'}),(0x0,swagger_1[_0x2950c7(0x13a)])({'status':0xc8,'description':_0x2950c7(0x140)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x2950c7(0x10c)]),(0x0,swagger_1[_0x2950c7(0x12e)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1['Req'])()),__param(0x2,(0x0,common_1[_0x2950c7(0x102)])()),__metadata('design:type',Function),__metadata(_0x2950c7(0x12a),[Object,Object,Object]),__metadata(_0x2950c7(0x128),void 0x0)],ChatController[_0x2950c7(0x11e)],_0x2950c7(0x12f),null),__decorate([(0x0,common_1['Post'])(_0x2950c7(0x121)),(0x0,swagger_1[_0x2950c7(0x142)])({'summary':_0x2950c7(0x113),'description':_0x2950c7(0x115)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x2950c7(0x106)}),(0x0,common_1[_0x2950c7(0x111)])(jwtAuth_guard_1[_0x2950c7(0x10c)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1['Body'])()),__metadata('design:type',Function),__metadata(_0x2950c7(0x12a),[Object]),__metadata(_0x2950c7(0x128),void 0x0)],ChatController[_0x2950c7(0x11e)],'pptCover',null),ChatController=__decorate([(0x0,swagger_1['ApiTags'])(_0x2950c7(0x103)),(0x0,common_1[_0x2950c7(0x12d)])('chatgpt'),__metadata(_0x2950c7(0x12a),[chat_service_1[_0x2950c7(0x107)],globalConfig_service_1[_0x2950c7(0x117)],aiPPT_1[_0x2950c7(0x118)]])],ChatController),exports[_0x2950c7(0x124)]=ChatController;function _0x4779(){const _0x49fa05=['string','Controller','ApiBearerAuth','ttsProcess','TTS语音合成','@nestjs/common','GPT同步对话','4989955cLklkt','Req','chatProcess','与GPT进行同步对话，返回完整响应','返回完整的对话响应','chatProcessSync','使用GPT对绘画描述词进行翻译和优化，使用PromptOptimization模型','ApiResponse','Body','6vyzfvv','AI\x20服务统一接口','../../common/auth/jwtAuth.guard','./chat.service','返回语音数据流','chatmind','ApiOperation','./dto/chatProcess.dto','统一处理各种\x20AI\x20服务的请求，支持：\x0a\x20\x20\x20\x201.\x20OpenAI\x20聊天\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20gpt-3.5-turbo,\x20gpt-4\x0a\x20\x20\x20\x202.\x20Suno\x20AI\x20音乐生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20suno-music\x0a\x20\x20\x20\x20\x20\x20\x20-\x20歌词生成：action=\x22LYRICS\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20音乐生成：action=\x22MUSIC\x22,\x20需提供\x20customId\x0a\x20\x20\x20\x203.\x20Luma\x20视频生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20luma-video\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action=\x22CREATE\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x204.\x20Flux\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20flux\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20参数\x0a\x20\x20\x20\x20\x20\x20\x20-\x20可选\x20options.groupId\x20参数\x0a\x20\x20\x20\x205.\x20Midjourney\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持四种速度模式：\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney:\x20默认速度\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-fast:\x20快速模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-relax:\x20放松模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-turbo:\x20极速模式\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action:\x20IMAGINE,\x20UPSCALE,\x20VARIATION,\x20ZOOM,\x20PAN,\x20DESCRIBE,\x20BLEND\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20所有请求都支持流式响应，可实时获取生成进度。','ChatProcessDto','57114981vleOJt','1105285OtlERT','../ai/aiPPT','globalConfigService','aiPptService','length','chat-process','function','返回对话响应流或任务结果','metadata','Res','chatgpt','14097488tvRYWh','assign','返回生成的PPT封面数据','ChatService','tts-process','使用GPT生成思维导图，使用MindMap专用模型','返回优化后的绘画描述词','Post','JwtAuthGuard','__metadata','chat-sync','__esModule','__decorate','UseGuards','返回思维导图数据','PPT封面生成','mj-fy','生成PPT封面','2uLrnmp','GlobalConfigService','AiPptService','生成的文件信息','number','design:type','任务ID','5361412kSFDxO','prototype','4585431gjPBRn','MindMap','ppt-cover','defineProperty','decorate','ChatController','chatService','object','GPT描述词绘画翻译','design:returntype','3573143knUZtQ','design:paramtypes','mjFanyi'];_0x4779=function(){return _0x49fa05;};return _0x4779();}