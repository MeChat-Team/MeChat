'use strict';const _0x2cec57=_0x1dff;(function(_0x17e769,_0x3efa75){const _0x3db04a=_0x1dff,_0x2c082a=_0x17e769();while(!![]){try{const _0x1ab0fd=-parseInt(_0x3db04a(0xb1))/0x1+-parseInt(_0x3db04a(0xb4))/0x2*(-parseInt(_0x3db04a(0xe3))/0x3)+parseInt(_0x3db04a(0xfa))/0x4*(-parseInt(_0x3db04a(0xca))/0x5)+-parseInt(_0x3db04a(0xb6))/0x6*(parseInt(_0x3db04a(0xc1))/0x7)+parseInt(_0x3db04a(0xde))/0x8*(parseInt(_0x3db04a(0xef))/0x9)+-parseInt(_0x3db04a(0xe1))/0xa*(parseInt(_0x3db04a(0xd0))/0xb)+parseInt(_0x3db04a(0xb2))/0xc;if(_0x1ab0fd===_0x3efa75)break;else _0x2c082a['push'](_0x2c082a['shift']());}catch(_0x3a131c){_0x2c082a['push'](_0x2c082a['shift']());}}}(_0x210c,0x84114));var __decorate=this&&this['__decorate']||function(_0x557e8d,_0x3e1428,_0xd76584,_0x407f28){const _0x2dd369=_0x1dff;var _0x3176cd=arguments['length'],_0x33209e=_0x3176cd<0x3?_0x3e1428:_0x407f28===null?_0x407f28=Object['getOwnPropertyDescriptor'](_0x3e1428,_0xd76584):_0x407f28,_0x5c399f;if(typeof Reflect===_0x2dd369(0xbc)&&typeof Reflect[_0x2dd369(0xe5)]===_0x2dd369(0xdf))_0x33209e=Reflect['decorate'](_0x557e8d,_0x3e1428,_0xd76584,_0x407f28);else{for(var _0x25d3fd=_0x557e8d['length']-0x1;_0x25d3fd>=0x0;_0x25d3fd--)if(_0x5c399f=_0x557e8d[_0x25d3fd])_0x33209e=(_0x3176cd<0x3?_0x5c399f(_0x33209e):_0x3176cd>0x3?_0x5c399f(_0x3e1428,_0xd76584,_0x33209e):_0x5c399f(_0x3e1428,_0xd76584))||_0x33209e;}return _0x3176cd>0x3&&_0x33209e&&Object[_0x2dd369(0xce)](_0x3e1428,_0xd76584,_0x33209e),_0x33209e;},__metadata=this&&this[_0x2cec57(0xf6)]||function(_0x4e875a,_0x4c0f28){const _0x1425ee=_0x2cec57;if(typeof Reflect===_0x1425ee(0xbc)&&typeof Reflect[_0x1425ee(0xdc)]===_0x1425ee(0xdf))return Reflect[_0x1425ee(0xdc)](_0x4e875a,_0x4c0f28);},__param=this&&this['__param']||function(_0x525dc3,_0x5181b8){return function(_0x45c668,_0x1954b1){_0x5181b8(_0x45c668,_0x1954b1,_0x525dc3);};};function _0x210c(){const _0x3de839=['assign','25976DNIAEn','function','返回语音数据流','1530970GQvdzD','../ai/aiPPT','5091VIVddC','Req','decorate','GPT同步对话','ppt-cover','将文本转换为语音','__esModule','Body','design:returntype','mjFanyi','返回思维导图数据','@nestjs/swagger','1359OZUuvA','使用GPT生成思维导图，使用MindMap专用模型','chat-mind','Res','AiPptService','chatProcess','PPT封面生成','__metadata','number','chat-process','返回优化后的绘画描述词','4NSStsn','chatProcessSync','design:type','PromptOptimization','ApiOperation','ChatService','AI\x20服务统一接口','./chat.service','292851aOIVGP','8098176ydnPmj','ApiResponse','1100jgOhlX','任务ID','686478vDITld','ApiBearerAuth','chatgpt','globalConfigService','返回对话响应流或任务结果','GPT描述词绘画翻译','object','prototype','aiPptService','Post','pptCover','42kaEYgu','任务数据','返回完整的对话响应','TTS语音合成','string','chatmind','Mind思维导图生成','../../common/auth/jwtAuth.guard','JwtAuthGuard','2125605vfMyJR','chat-sync','chatService','与GPT进行同步对话，返回完整响应','defineProperty','使用GPT对绘画描述词进行翻译和优化，使用PromptOptimization模型','11uGzMqU','design:paramtypes','生成的文件信息','状态码：1-进行中，2-完成，3-失败','ChatController','ChatProcessDto','响应文本','UseGuards','ApiTags','tts-process','ttsProcess','返回生成的PPT封面数据','metadata'];_0x210c=function(){return _0x3de839;};return _0x210c();}Object[_0x2cec57(0xce)](exports,_0x2cec57(0xe9),{'value':!![]}),exports['ChatController']=void 0x0;const swagger_1=require(_0x2cec57(0xee)),jwtAuth_guard_1=require(_0x2cec57(0xc8)),chat_service_1=require(_0x2cec57(0xb0)),common_1=require('@nestjs/common'),chatProcess_dto_1=require('./dto/chatProcess.dto'),aiPPT_1=require(_0x2cec57(0xe2)),globalConfig_service_1=require('../globalConfig/globalConfig.service');function _0x1dff(_0x20e0bf,_0x1422ca){const _0x210ca2=_0x210c();return _0x1dff=function(_0x1dff8f,_0x5c004a){_0x1dff8f=_0x1dff8f-0xae;let _0x327db3=_0x210ca2[_0x1dff8f];return _0x327db3;},_0x1dff(_0x20e0bf,_0x1422ca);}let ChatController=class ChatController{constructor(_0x1f1e16,_0x303476,_0x4ac20b){const _0x23e529=_0x2cec57;this['chatService']=_0x1f1e16,this[_0x23e529(0xb9)]=_0x303476,this['aiPptService']=_0x4ac20b;}[_0x2cec57(0xf4)](_0x33a921,_0x121967,_0x1df85d){const _0x23be8f=_0x2cec57;return this[_0x23be8f(0xcc)][_0x23be8f(0xf4)](_0x33a921,_0x121967,_0x1df85d);}[_0x2cec57(0xfb)](_0x4f538b,_0x2a18de){const _0x5a4f35=_0x2cec57;return this[_0x5a4f35(0xcc)]['chatProcess'](Object[_0x5a4f35(0xdd)]({},_0x4f538b),_0x2a18de);}async[_0x2cec57(0xec)](_0x40ab6c,_0x28fb07){const _0x4b080f=_0x2cec57;return this[_0x4b080f(0xcc)]['chatProcess'](Object[_0x4b080f(0xdd)](Object[_0x4b080f(0xdd)]({},_0x40ab6c),{'specialModel':_0x4b080f(0xfd)}),_0x28fb07);}async[_0x2cec57(0xc6)](_0x4ac004,_0x512459,_0x2f0104){const _0x1235e1=_0x2cec57;return this[_0x1235e1(0xcc)]['chatProcess'](Object[_0x1235e1(0xdd)](Object['assign']({},_0x4ac004),{'specialModel':'MindMap'}),_0x512459,_0x2f0104);}[_0x2cec57(0xda)](_0x25aee5,_0x497ada,_0x2d980c){const _0x12381f=_0x2cec57;return this[_0x12381f(0xcc)][_0x12381f(0xda)](_0x25aee5,_0x497ada,_0x2d980c);}[_0x2cec57(0xc0)](_0x21e6e5){const _0x162fd3=_0x2cec57;return this[_0x162fd3(0xbe)][_0x162fd3(0xc0)](_0x21e6e5);}};__decorate([(0x0,common_1['Post'])(_0x2cec57(0xf8)),(0x0,swagger_1[_0x2cec57(0xfe)])({'summary':_0x2cec57(0xaf),'description':'统一处理各种\x20AI\x20服务的请求，支持：\x0a\x20\x20\x20\x201.\x20OpenAI\x20聊天\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20gpt-3.5-turbo,\x20gpt-4\x0a\x20\x20\x20\x202.\x20Suno\x20AI\x20音乐生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20suno-music\x0a\x20\x20\x20\x20\x20\x20\x20-\x20歌词生成：action=\x22LYRICS\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20音乐生成：action=\x22MUSIC\x22,\x20需提供\x20customId\x0a\x20\x20\x20\x203.\x20Luma\x20视频生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20luma-video\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action=\x22CREATE\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x204.\x20Flux\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20flux\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20参数\x0a\x20\x20\x20\x20\x20\x20\x20-\x20可选\x20options.groupId\x20参数\x0a\x20\x20\x20\x205.\x20Midjourney\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持四种速度模式：\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney:\x20默认速度\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-fast:\x20快速模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-relax:\x20放松模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-turbo:\x20极速模式\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action:\x20IMAGINE,\x20UPSCALE,\x20VARIATION,\x20ZOOM,\x20PAN,\x20DESCRIBE,\x20BLEND\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20所有请求都支持流式响应，可实时获取生成进度。'}),(0x0,swagger_1[_0x2cec57(0xb3)])({'status':0xc8,'description':_0x2cec57(0xba),'schema':{'properties':{'text':{'type':_0x2cec57(0xc5),'description':_0x2cec57(0xd6)},'fileInfo':{'type':_0x2cec57(0xc5),'description':_0x2cec57(0xd2)},'taskId':{'type':'string','description':_0x2cec57(0xb5)},'taskData':{'type':_0x2cec57(0xc5),'description':_0x2cec57(0xc2)},'status':{'type':_0x2cec57(0xf7),'description':_0x2cec57(0xd3)}}}}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x2cec57(0xc9)]),(0x0,swagger_1[_0x2cec57(0xb7)])(),__param(0x0,(0x0,common_1[_0x2cec57(0xea)])()),__param(0x1,(0x0,common_1[_0x2cec57(0xe4)])()),__param(0x2,(0x0,common_1[_0x2cec57(0xf2)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[chatProcess_dto_1[_0x2cec57(0xd5)],Object,Object]),__metadata(_0x2cec57(0xeb),void 0x0)],ChatController[_0x2cec57(0xbd)],'chatProcess',null),__decorate([(0x0,common_1['Post'])(_0x2cec57(0xcb)),(0x0,swagger_1[_0x2cec57(0xfe)])({'summary':_0x2cec57(0xe6),'description':_0x2cec57(0xcd)}),(0x0,swagger_1[_0x2cec57(0xb3)])({'status':0xc8,'description':_0x2cec57(0xc3)}),(0x0,common_1[_0x2cec57(0xd7)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x2cec57(0xb7)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x2cec57(0xe4)])()),__metadata(_0x2cec57(0xfc),Function),__metadata('design:paramtypes',[chatProcess_dto_1[_0x2cec57(0xd5)],Object]),__metadata(_0x2cec57(0xeb),void 0x0)],ChatController[_0x2cec57(0xbd)],_0x2cec57(0xfb),null),__decorate([(0x0,common_1['Post'])('mj-fy'),(0x0,swagger_1[_0x2cec57(0xfe)])({'summary':_0x2cec57(0xbb),'description':_0x2cec57(0xcf)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x2cec57(0xf9)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x2cec57(0xc9)]),(0x0,swagger_1[_0x2cec57(0xb7)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x2cec57(0xe4)])()),__metadata('design:type',Function),__metadata(_0x2cec57(0xd1),[chatProcess_dto_1[_0x2cec57(0xd5)],Object]),__metadata(_0x2cec57(0xeb),Promise)],ChatController[_0x2cec57(0xbd)],'mjFanyi',null),__decorate([(0x0,common_1[_0x2cec57(0xbf)])(_0x2cec57(0xf1)),(0x0,swagger_1[_0x2cec57(0xfe)])({'summary':_0x2cec57(0xc7),'description':_0x2cec57(0xf0)}),(0x0,swagger_1[_0x2cec57(0xb3)])({'status':0xc8,'description':_0x2cec57(0xed)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x2cec57(0xc9)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x2cec57(0xea)])()),__param(0x1,(0x0,common_1[_0x2cec57(0xe4)])()),__param(0x2,(0x0,common_1[_0x2cec57(0xf2)])()),__metadata(_0x2cec57(0xfc),Function),__metadata(_0x2cec57(0xd1),[chatProcess_dto_1[_0x2cec57(0xd5)],Object,Object]),__metadata(_0x2cec57(0xeb),Promise)],ChatController[_0x2cec57(0xbd)],_0x2cec57(0xc6),null),__decorate([(0x0,common_1[_0x2cec57(0xbf)])(_0x2cec57(0xd9)),(0x0,swagger_1['ApiOperation'])({'summary':_0x2cec57(0xc4),'description':_0x2cec57(0xe8)}),(0x0,swagger_1[_0x2cec57(0xb3)])({'status':0xc8,'description':_0x2cec57(0xe0)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x2cec57(0xc9)]),(0x0,swagger_1[_0x2cec57(0xb7)])(),__param(0x0,(0x0,common_1[_0x2cec57(0xea)])()),__param(0x1,(0x0,common_1['Req'])()),__param(0x2,(0x0,common_1['Res'])()),__metadata(_0x2cec57(0xfc),Function),__metadata(_0x2cec57(0xd1),[Object,Object,Object]),__metadata(_0x2cec57(0xeb),void 0x0)],ChatController[_0x2cec57(0xbd)],_0x2cec57(0xda),null),__decorate([(0x0,common_1[_0x2cec57(0xbf)])(_0x2cec57(0xe7)),(0x0,swagger_1[_0x2cec57(0xfe)])({'summary':_0x2cec57(0xf5),'description':'生成PPT封面'}),(0x0,swagger_1[_0x2cec57(0xb3)])({'status':0xc8,'description':_0x2cec57(0xdb)}),(0x0,common_1[_0x2cec57(0xd7)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x2cec57(0xb7)])(),__param(0x0,(0x0,common_1[_0x2cec57(0xea)])()),__metadata(_0x2cec57(0xfc),Function),__metadata(_0x2cec57(0xd1),[Object]),__metadata(_0x2cec57(0xeb),void 0x0)],ChatController[_0x2cec57(0xbd)],_0x2cec57(0xc0),null),ChatController=__decorate([(0x0,swagger_1[_0x2cec57(0xd8)])(_0x2cec57(0xb8)),(0x0,common_1['Controller'])(_0x2cec57(0xb8)),__metadata(_0x2cec57(0xd1),[chat_service_1[_0x2cec57(0xae)],globalConfig_service_1['GlobalConfigService'],aiPPT_1[_0x2cec57(0xf3)]])],ChatController),exports[_0x2cec57(0xd4)]=ChatController;