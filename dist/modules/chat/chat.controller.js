'use strict';function _0x33a8(_0x3e0641,_0x733f02){const _0x3513b3=_0x3513();return _0x33a8=function(_0x33a8a6,_0x3e4201){_0x33a8a6=_0x33a8a6-0xdd;let _0x295047=_0x3513b3[_0x33a8a6];return _0x295047;},_0x33a8(_0x3e0641,_0x733f02);}const _0x2a4641=_0x33a8;(function(_0x10bd39,_0x1158e7){const _0x350442=_0x33a8,_0x287790=_0x10bd39();while(!![]){try{const _0x43bf81=parseInt(_0x350442(0xff))/0x1*(parseInt(_0x350442(0x101))/0x2)+parseInt(_0x350442(0xe8))/0x3+-parseInt(_0x350442(0xdd))/0x4*(-parseInt(_0x350442(0xe2))/0x5)+-parseInt(_0x350442(0x118))/0x6*(-parseInt(_0x350442(0xec))/0x7)+-parseInt(_0x350442(0x115))/0x8+parseInt(_0x350442(0x117))/0x9*(-parseInt(_0x350442(0x11e))/0xa)+-parseInt(_0x350442(0x110))/0xb;if(_0x43bf81===_0x1158e7)break;else _0x287790['push'](_0x287790['shift']());}catch(_0x43d4fd){_0x287790['push'](_0x287790['shift']());}}}(_0x3513,0x89263));var __decorate=this&&this['__decorate']||function(_0x1b2241,_0xed892e,_0x178d7f,_0x1fd785){const _0x455c5f=_0x33a8;var _0x5bf851=arguments[_0x455c5f(0xfc)],_0x4d5a1e=_0x5bf851<0x3?_0xed892e:_0x1fd785===null?_0x1fd785=Object[_0x455c5f(0x126)](_0xed892e,_0x178d7f):_0x1fd785,_0x3f0e7d;if(typeof Reflect===_0x455c5f(0xf4)&&typeof Reflect['decorate']===_0x455c5f(0xdf))_0x4d5a1e=Reflect[_0x455c5f(0xef)](_0x1b2241,_0xed892e,_0x178d7f,_0x1fd785);else{for(var _0x7aaaf2=_0x1b2241[_0x455c5f(0xfc)]-0x1;_0x7aaaf2>=0x0;_0x7aaaf2--)if(_0x3f0e7d=_0x1b2241[_0x7aaaf2])_0x4d5a1e=(_0x5bf851<0x3?_0x3f0e7d(_0x4d5a1e):_0x5bf851>0x3?_0x3f0e7d(_0xed892e,_0x178d7f,_0x4d5a1e):_0x3f0e7d(_0xed892e,_0x178d7f))||_0x4d5a1e;}return _0x5bf851>0x3&&_0x4d5a1e&&Object[_0x455c5f(0x127)](_0xed892e,_0x178d7f,_0x4d5a1e),_0x4d5a1e;},__metadata=this&&this[_0x2a4641(0x10d)]||function(_0x83779,_0x900a07){const _0x3fb239=_0x2a4641;if(typeof Reflect===_0x3fb239(0xf4)&&typeof Reflect[_0x3fb239(0x11b)]===_0x3fb239(0xdf))return Reflect[_0x3fb239(0x11b)](_0x83779,_0x900a07);},__param=this&&this[_0x2a4641(0x121)]||function(_0x492e7c,_0x1c1345){return function(_0x386156,_0x533f44){_0x1c1345(_0x386156,_0x533f44,_0x492e7c);};};Object[_0x2a4641(0x127)](exports,_0x2a4641(0xf6),{'value':!![]}),exports[_0x2a4641(0xf8)]=void 0x0;function _0x3513(){const _0x172bc9=['AiPptService','__param','aiPptService','使用GPT对绘画描述词进行翻译和优化，使用PromptOptimization模型','tts-process','PromptOptimization','getOwnPropertyDescriptor','defineProperty','ChatService','design:returntype','3921420Pitein','返回语音数据流','function','Req','mjFanyi','5ytpgup','chat-sync','chatService','AI\x20服务统一接口','prototype','./dto/chatProcess.dto','2436498XxQdoR','ppt-cover','状态码：1-进行中，2-完成，3-失败','mj-fy','66787ytLErl','GPT同步对话','GlobalConfigService','decorate','Res','响应文本','chatgpt','与GPT进行同步对话，返回完整响应','object','Post','__esModule','ChatProcessDto','ChatController','chatmind','@nestjs/swagger','ApiTags','length','Controller','ApiBearerAuth','312773qkshCv','chatProcess','2PhTcXa','PPT封面生成','string','生成PPT封面','UseGuards','design:type','pptCover','任务ID','将文本转换为语音','ApiOperation','ApiResponse','../ai/aiPPT','__metadata','生成的文件信息','design:paramtypes','13651198lJrToD','统一处理各种\x20AI\x20服务的请求，支持：\x0a\x20\x20\x20\x201.\x20OpenAI\x20聊天\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20gpt-3.5-turbo,\x20gpt-4\x0a\x20\x20\x20\x202.\x20Suno\x20AI\x20音乐生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20suno-music\x0a\x20\x20\x20\x20\x20\x20\x20-\x20歌词生成：action=\x22LYRICS\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20音乐生成：action=\x22MUSIC\x22,\x20需提供\x20customId\x0a\x20\x20\x20\x203.\x20Luma\x20视频生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20luma-video\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action=\x22CREATE\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x204.\x20Flux\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20flux\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20参数\x0a\x20\x20\x20\x20\x20\x20\x20-\x20可选\x20options.groupId\x20参数\x0a\x20\x20\x20\x205.\x20Midjourney\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持四种速度模式：\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney:\x20默认速度\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-fast:\x20快速模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-relax:\x20放松模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-turbo:\x20极速模式\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action:\x20IMAGINE,\x20UPSCALE,\x20VARIATION,\x20ZOOM,\x20PAN,\x20DESCRIBE,\x20BLEND\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20所有请求都支持流式响应，可实时获取生成进度。','JwtAuthGuard','GPT描述词绘画翻译','ttsProcess','4654168EwFEIA','assign','4270329axmbaB','474yynPef','返回思维导图数据','返回对话响应流或任务结果','metadata','Body','number','10txyFUn','返回生成的PPT封面数据'];_0x3513=function(){return _0x172bc9;};return _0x3513();}const swagger_1=require(_0x2a4641(0xfa)),jwtAuth_guard_1=require('../../common/auth/jwtAuth.guard'),chat_service_1=require('./chat.service'),common_1=require('@nestjs/common'),chatProcess_dto_1=require(_0x2a4641(0xe7)),aiPPT_1=require(_0x2a4641(0x10c)),globalConfig_service_1=require('../globalConfig/globalConfig.service');let ChatController=class ChatController{constructor(_0x5e03fb,_0x58bde4,_0x3185de){const _0x5c9b2f=_0x2a4641;this[_0x5c9b2f(0xe4)]=_0x5e03fb,this['globalConfigService']=_0x58bde4,this[_0x5c9b2f(0x122)]=_0x3185de;}[_0x2a4641(0x100)](_0x34e20d,_0x5df573,_0x5a95f5){const _0x590d86=_0x2a4641;return this['chatService'][_0x590d86(0x100)](_0x34e20d,_0x5df573,_0x5a95f5);}['chatProcessSync'](_0x47f80e,_0x1ba0bb){const _0x5bf9bb=_0x2a4641;return this[_0x5bf9bb(0xe4)]['chatProcess'](Object['assign']({},_0x47f80e),_0x1ba0bb);}async['mjFanyi'](_0x4a82cf,_0x37acab){const _0x1d2203=_0x2a4641;return this[_0x1d2203(0xe4)][_0x1d2203(0x100)](Object[_0x1d2203(0x116)](Object[_0x1d2203(0x116)]({},_0x4a82cf),{'specialModel':_0x1d2203(0x125)}),_0x37acab);}async['chatmind'](_0x1ec2f2,_0x366f2d,_0xa710e4){const _0x47cc59=_0x2a4641;return this[_0x47cc59(0xe4)][_0x47cc59(0x100)](Object[_0x47cc59(0x116)](Object[_0x47cc59(0x116)]({},_0x1ec2f2),{'specialModel':'MindMap'}),_0x366f2d,_0xa710e4);}[_0x2a4641(0x114)](_0x5493d8,_0x15b3eb,_0x13e542){const _0x2ec21e=_0x2a4641;return this[_0x2ec21e(0xe4)][_0x2ec21e(0x114)](_0x5493d8,_0x15b3eb,_0x13e542);}[_0x2a4641(0x107)](_0x1c8060){return this['aiPptService']['pptCover'](_0x1c8060);}};__decorate([(0x0,common_1[_0x2a4641(0xf5)])('chat-process'),(0x0,swagger_1['ApiOperation'])({'summary':_0x2a4641(0xe5),'description':_0x2a4641(0x111)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x2a4641(0x11a),'schema':{'properties':{'text':{'type':_0x2a4641(0x103),'description':_0x2a4641(0xf1)},'fileInfo':{'type':_0x2a4641(0x103),'description':_0x2a4641(0x10e)},'taskId':{'type':'string','description':_0x2a4641(0x108)},'taskData':{'type':'string','description':'任务数据'},'status':{'type':_0x2a4641(0x11d),'description':_0x2a4641(0xea)}}}}),(0x0,common_1[_0x2a4641(0x105)])(jwtAuth_guard_1[_0x2a4641(0x112)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x2a4641(0x11c)])()),__param(0x1,(0x0,common_1[_0x2a4641(0xe0)])()),__param(0x2,(0x0,common_1[_0x2a4641(0xf0)])()),__metadata(_0x2a4641(0x106),Function),__metadata('design:paramtypes',[chatProcess_dto_1['ChatProcessDto'],Object,Object]),__metadata(_0x2a4641(0x129),void 0x0)],ChatController[_0x2a4641(0xe6)],'chatProcess',null),__decorate([(0x0,common_1[_0x2a4641(0xf5)])(_0x2a4641(0xe3)),(0x0,swagger_1[_0x2a4641(0x10a)])({'summary':_0x2a4641(0xed),'description':_0x2a4641(0xf3)}),(0x0,swagger_1[_0x2a4641(0x10b)])({'status':0xc8,'description':'返回完整的对话响应'}),(0x0,common_1[_0x2a4641(0x105)])(jwtAuth_guard_1[_0x2a4641(0x112)]),(0x0,swagger_1[_0x2a4641(0xfe)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x2a4641(0xe0)])()),__metadata(_0x2a4641(0x106),Function),__metadata(_0x2a4641(0x10f),[chatProcess_dto_1[_0x2a4641(0xf7)],Object]),__metadata(_0x2a4641(0x129),void 0x0)],ChatController[_0x2a4641(0xe6)],'chatProcessSync',null),__decorate([(0x0,common_1[_0x2a4641(0xf5)])(_0x2a4641(0xeb)),(0x0,swagger_1[_0x2a4641(0x10a)])({'summary':_0x2a4641(0x113),'description':_0x2a4641(0x123)}),(0x0,swagger_1[_0x2a4641(0x10b)])({'status':0xc8,'description':'返回优化后的绘画描述词'}),(0x0,common_1[_0x2a4641(0x105)])(jwtAuth_guard_1[_0x2a4641(0x112)]),(0x0,swagger_1[_0x2a4641(0xfe)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x2a4641(0xe0)])()),__metadata(_0x2a4641(0x106),Function),__metadata('design:paramtypes',[chatProcess_dto_1[_0x2a4641(0xf7)],Object]),__metadata(_0x2a4641(0x129),Promise)],ChatController[_0x2a4641(0xe6)],_0x2a4641(0xe1),null),__decorate([(0x0,common_1['Post'])('chat-mind'),(0x0,swagger_1[_0x2a4641(0x10a)])({'summary':'Mind思维导图生成','description':'使用GPT生成思维导图，使用MindMap专用模型'}),(0x0,swagger_1[_0x2a4641(0x10b)])({'status':0xc8,'description':_0x2a4641(0x119)}),(0x0,common_1[_0x2a4641(0x105)])(jwtAuth_guard_1[_0x2a4641(0x112)]),(0x0,swagger_1[_0x2a4641(0xfe)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x2a4641(0xe0)])()),__param(0x2,(0x0,common_1[_0x2a4641(0xf0)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[chatProcess_dto_1['ChatProcessDto'],Object,Object]),__metadata(_0x2a4641(0x129),Promise)],ChatController['prototype'],_0x2a4641(0xf9),null),__decorate([(0x0,common_1['Post'])(_0x2a4641(0x124)),(0x0,swagger_1[_0x2a4641(0x10a)])({'summary':'TTS语音合成','description':_0x2a4641(0x109)}),(0x0,swagger_1[_0x2a4641(0x10b)])({'status':0xc8,'description':_0x2a4641(0xde)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x2a4641(0xfe)])(),__param(0x0,(0x0,common_1[_0x2a4641(0x11c)])()),__param(0x1,(0x0,common_1[_0x2a4641(0xe0)])()),__param(0x2,(0x0,common_1['Res'])()),__metadata(_0x2a4641(0x106),Function),__metadata('design:paramtypes',[Object,Object,Object]),__metadata(_0x2a4641(0x129),void 0x0)],ChatController[_0x2a4641(0xe6)],_0x2a4641(0x114),null),__decorate([(0x0,common_1['Post'])(_0x2a4641(0xe9)),(0x0,swagger_1[_0x2a4641(0x10a)])({'summary':_0x2a4641(0x102),'description':_0x2a4641(0x104)}),(0x0,swagger_1[_0x2a4641(0x10b)])({'status':0xc8,'description':_0x2a4641(0x11f)}),(0x0,common_1[_0x2a4641(0x105)])(jwtAuth_guard_1[_0x2a4641(0x112)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x2a4641(0x11c)])()),__metadata(_0x2a4641(0x106),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x2a4641(0x129),void 0x0)],ChatController[_0x2a4641(0xe6)],_0x2a4641(0x107),null),ChatController=__decorate([(0x0,swagger_1[_0x2a4641(0xfb)])(_0x2a4641(0xf2)),(0x0,common_1[_0x2a4641(0xfd)])('chatgpt'),__metadata(_0x2a4641(0x10f),[chat_service_1[_0x2a4641(0x128)],globalConfig_service_1[_0x2a4641(0xee)],aiPPT_1[_0x2a4641(0x120)]])],ChatController),exports[_0x2a4641(0xf8)]=ChatController;