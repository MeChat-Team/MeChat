'use strict';function _0x2530(){const _0x1bf052=['TTS语音合成','prototype','pptCover','@nestjs/common','JwtAuthGuard','5509370GfLpMD','ApiResponse','./dto/chatProcess.dto','globalConfigService','Post','372RArYtZ','任务ID','ppt-cover','defineProperty','chatgpt','GPT同步对话','ttsProcess','UseGuards','响应文本','状态码：1-进行中，2-完成，3-失败','Mind思维导图生成','返回思维导图数据','ChatController','design:returntype','65302XOQJQg','AI\x20服务统一接口','将文本转换为语音','MindMap','__decorate','length','assign','GlobalConfigService','Req','object','使用GPT对绘画描述词进行翻译和优化，使用PromptOptimization模型','425458GpoJdH','design:paramtypes','decorate','1550511vUePpr','../../common/auth/jwtAuth.guard','__metadata','Body','string','3QHxZoW','aiPptService','chatService','tts-process','返回语音数据流','与GPT进行同步对话，返回完整响应','chat-mind','ApiOperation','chatProcessSync','使用GPT生成思维导图，使用MindMap专用模型','ApiBearerAuth','__param','ChatProcessDto','返回对话响应流或任务结果','chat-sync','function','metadata','统一处理各种\x20AI\x20服务的请求，支持：\x0a\x20\x20\x20\x201.\x20OpenAI\x20聊天\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20gpt-3.5-turbo,\x20gpt-4\x0a\x20\x20\x20\x202.\x20Suno\x20AI\x20音乐生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20suno-music\x0a\x20\x20\x20\x20\x20\x20\x20-\x20歌词生成：action=\x22LYRICS\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20音乐生成：action=\x22MUSIC\x22,\x20需提供\x20customId\x0a\x20\x20\x20\x203.\x20Luma\x20视频生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20luma-video\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action=\x22CREATE\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x204.\x20Flux\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20flux\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20参数\x0a\x20\x20\x20\x20\x20\x20\x20-\x20可选\x20options.groupId\x20参数\x0a\x20\x20\x20\x205.\x20Midjourney\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持四种速度模式：\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney:\x20默认速度\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-fast:\x20快速模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-relax:\x20放松模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-turbo:\x20极速模式\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action:\x20IMAGINE,\x20UPSCALE,\x20VARIATION,\x20ZOOM,\x20PAN,\x20DESCRIBE,\x20BLEND\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20所有请求都支持流式响应，可实时获取生成进度。','../globalConfig/globalConfig.service','GPT描述词绘画翻译','__esModule','chatmind','mj-fy','design:type','getOwnPropertyDescriptor','8oCwiAu','6995fNeqkL','chat-process','12BsWTYf','返回优化后的绘画描述词','2112887JgiDHl','PromptOptimization','50759mRYrBD','PPT封面生成','mjFanyi','Controller','chatProcess'];_0x2530=function(){return _0x1bf052;};return _0x2530();}const _0x3f8300=_0x34e4;(function(_0x2f9f14,_0x5a8374){const _0x588703=_0x34e4,_0xd27bfa=_0x2f9f14();while(!![]){try{const _0x411764=-parseInt(_0x588703(0x11c))/0x1+parseInt(_0x588703(0x139))/0x2*(-parseInt(_0x588703(0x14c))/0x3)+-parseInt(_0x588703(0x12b))/0x4*(-parseInt(_0x588703(0x116))/0x5)+parseInt(_0x588703(0x118))/0x6*(parseInt(_0x588703(0x11a))/0x7)+parseInt(_0x588703(0x115))/0x8*(parseInt(_0x588703(0x147))/0x9)+-parseInt(_0x588703(0x126))/0xa+parseInt(_0x588703(0x144))/0xb;if(_0x411764===_0x5a8374)break;else _0xd27bfa['push'](_0xd27bfa['shift']());}catch(_0x297d86){_0xd27bfa['push'](_0xd27bfa['shift']());}}}(_0x2530,0x4bc7f));var __decorate=this&&this[_0x3f8300(0x13d)]||function(_0x9cd25a,_0x41fedb,_0x125906,_0x5eb44f){const _0x34a3e6=_0x3f8300;var _0x3c56af=arguments[_0x34a3e6(0x13e)],_0x3c9fb8=_0x3c56af<0x3?_0x41fedb:_0x5eb44f===null?_0x5eb44f=Object[_0x34a3e6(0x114)](_0x41fedb,_0x125906):_0x5eb44f,_0x1634e2;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x34a3e6(0x10b))_0x3c9fb8=Reflect[_0x34a3e6(0x146)](_0x9cd25a,_0x41fedb,_0x125906,_0x5eb44f);else{for(var _0x1a95ac=_0x9cd25a[_0x34a3e6(0x13e)]-0x1;_0x1a95ac>=0x0;_0x1a95ac--)if(_0x1634e2=_0x9cd25a[_0x1a95ac])_0x3c9fb8=(_0x3c56af<0x3?_0x1634e2(_0x3c9fb8):_0x3c56af>0x3?_0x1634e2(_0x41fedb,_0x125906,_0x3c9fb8):_0x1634e2(_0x41fedb,_0x125906))||_0x3c9fb8;}return _0x3c56af>0x3&&_0x3c9fb8&&Object[_0x34a3e6(0x12e)](_0x41fedb,_0x125906,_0x3c9fb8),_0x3c9fb8;},__metadata=this&&this[_0x3f8300(0x149)]||function(_0x4919c0,_0x3768c0){const _0x502567=_0x3f8300;if(typeof Reflect===_0x502567(0x142)&&typeof Reflect[_0x502567(0x10c)]===_0x502567(0x10b))return Reflect[_0x502567(0x10c)](_0x4919c0,_0x3768c0);},__param=this&&this[_0x3f8300(0x107)]||function(_0x54c87e,_0x5806a1){return function(_0x4a3bfa,_0x48983e){_0x5806a1(_0x4a3bfa,_0x48983e,_0x54c87e);};};Object[_0x3f8300(0x12e)](exports,_0x3f8300(0x110),{'value':!![]}),exports[_0x3f8300(0x137)]=void 0x0;const swagger_1=require('@nestjs/swagger'),jwtAuth_guard_1=require(_0x3f8300(0x148)),chat_service_1=require('./chat.service'),common_1=require(_0x3f8300(0x124)),chatProcess_dto_1=require(_0x3f8300(0x128)),aiPPT_1=require('../ai/aiPPT'),globalConfig_service_1=require(_0x3f8300(0x10e));function _0x34e4(_0x39c4b4,_0x4d466b){const _0x2530cc=_0x2530();return _0x34e4=function(_0x34e490,_0x4b7b8a){_0x34e490=_0x34e490-0x101;let _0x19f861=_0x2530cc[_0x34e490];return _0x19f861;},_0x34e4(_0x39c4b4,_0x4d466b);}let ChatController=class ChatController{constructor(_0x5e8a12,_0x18bcc0,_0x2890fb){const _0x3f721e=_0x3f8300;this[_0x3f721e(0x14e)]=_0x5e8a12,this[_0x3f721e(0x129)]=_0x18bcc0,this[_0x3f721e(0x14d)]=_0x2890fb;}[_0x3f8300(0x120)](_0x2f8808,_0x21b8ac,_0x3f0e08){const _0x232260=_0x3f8300;return this[_0x232260(0x14e)][_0x232260(0x120)](_0x2f8808,_0x21b8ac,_0x3f0e08);}[_0x3f8300(0x104)](_0x4c8bf4,_0x4d8065){const _0x1bee7=_0x3f8300;return this[_0x1bee7(0x14e)][_0x1bee7(0x120)](Object[_0x1bee7(0x13f)]({},_0x4c8bf4),_0x4d8065);}async[_0x3f8300(0x11e)](_0x14031c,_0x5c4fc8){const _0x1b0763=_0x3f8300;return this['chatService'][_0x1b0763(0x120)](Object['assign'](Object['assign']({},_0x14031c),{'specialModel':_0x1b0763(0x11b)}),_0x5c4fc8);}async[_0x3f8300(0x111)](_0x48e3c1,_0x40ce29,_0x1a2278){const _0x3bf76c=_0x3f8300;return this[_0x3bf76c(0x14e)][_0x3bf76c(0x120)](Object[_0x3bf76c(0x13f)](Object[_0x3bf76c(0x13f)]({},_0x48e3c1),{'specialModel':_0x3bf76c(0x13c)}),_0x40ce29,_0x1a2278);}['ttsProcess'](_0x5b2fa1,_0x413564,_0x3f1a9b){const _0x20aaf3=_0x3f8300;return this[_0x20aaf3(0x14e)]['ttsProcess'](_0x5b2fa1,_0x413564,_0x3f1a9b);}[_0x3f8300(0x123)](_0x5cdf23){const _0x1ccdf5=_0x3f8300;return this[_0x1ccdf5(0x14d)]['pptCover'](_0x5cdf23);}};__decorate([(0x0,common_1[_0x3f8300(0x12a)])(_0x3f8300(0x117)),(0x0,swagger_1['ApiOperation'])({'summary':_0x3f8300(0x13a),'description':_0x3f8300(0x10d)}),(0x0,swagger_1[_0x3f8300(0x127)])({'status':0xc8,'description':_0x3f8300(0x109),'schema':{'properties':{'text':{'type':_0x3f8300(0x14b),'description':_0x3f8300(0x133)},'fileInfo':{'type':_0x3f8300(0x14b),'description':'生成的文件信息'},'taskId':{'type':'string','description':_0x3f8300(0x12c)},'taskData':{'type':'string','description':'任务数据'},'status':{'type':'number','description':_0x3f8300(0x134)}}}}),(0x0,common_1[_0x3f8300(0x132)])(jwtAuth_guard_1[_0x3f8300(0x125)]),(0x0,swagger_1[_0x3f8300(0x106)])(),__param(0x0,(0x0,common_1[_0x3f8300(0x14a)])()),__param(0x1,(0x0,common_1[_0x3f8300(0x141)])()),__param(0x2,(0x0,common_1['Res'])()),__metadata(_0x3f8300(0x113),Function),__metadata(_0x3f8300(0x145),[chatProcess_dto_1[_0x3f8300(0x108)],Object,Object]),__metadata(_0x3f8300(0x138),void 0x0)],ChatController[_0x3f8300(0x122)],_0x3f8300(0x120),null),__decorate([(0x0,common_1[_0x3f8300(0x12a)])(_0x3f8300(0x10a)),(0x0,swagger_1[_0x3f8300(0x103)])({'summary':_0x3f8300(0x130),'description':_0x3f8300(0x101)}),(0x0,swagger_1[_0x3f8300(0x127)])({'status':0xc8,'description':'返回完整的对话响应'}),(0x0,common_1[_0x3f8300(0x132)])(jwtAuth_guard_1[_0x3f8300(0x125)]),(0x0,swagger_1[_0x3f8300(0x106)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x3f8300(0x141)])()),__metadata(_0x3f8300(0x113),Function),__metadata('design:paramtypes',[chatProcess_dto_1[_0x3f8300(0x108)],Object]),__metadata(_0x3f8300(0x138),void 0x0)],ChatController['prototype'],_0x3f8300(0x104),null),__decorate([(0x0,common_1[_0x3f8300(0x12a)])(_0x3f8300(0x112)),(0x0,swagger_1[_0x3f8300(0x103)])({'summary':_0x3f8300(0x10f),'description':_0x3f8300(0x143)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x3f8300(0x119)}),(0x0,common_1[_0x3f8300(0x132)])(jwtAuth_guard_1[_0x3f8300(0x125)]),(0x0,swagger_1[_0x3f8300(0x106)])(),__param(0x0,(0x0,common_1[_0x3f8300(0x14a)])()),__param(0x1,(0x0,common_1[_0x3f8300(0x141)])()),__metadata(_0x3f8300(0x113),Function),__metadata(_0x3f8300(0x145),[chatProcess_dto_1['ChatProcessDto'],Object]),__metadata(_0x3f8300(0x138),Promise)],ChatController[_0x3f8300(0x122)],_0x3f8300(0x11e),null),__decorate([(0x0,common_1[_0x3f8300(0x12a)])(_0x3f8300(0x102)),(0x0,swagger_1[_0x3f8300(0x103)])({'summary':_0x3f8300(0x135),'description':_0x3f8300(0x105)}),(0x0,swagger_1[_0x3f8300(0x127)])({'status':0xc8,'description':_0x3f8300(0x136)}),(0x0,common_1[_0x3f8300(0x132)])(jwtAuth_guard_1[_0x3f8300(0x125)]),(0x0,swagger_1[_0x3f8300(0x106)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x3f8300(0x141)])()),__param(0x2,(0x0,common_1['Res'])()),__metadata(_0x3f8300(0x113),Function),__metadata(_0x3f8300(0x145),[chatProcess_dto_1['ChatProcessDto'],Object,Object]),__metadata(_0x3f8300(0x138),Promise)],ChatController[_0x3f8300(0x122)],_0x3f8300(0x111),null),__decorate([(0x0,common_1[_0x3f8300(0x12a)])(_0x3f8300(0x14f)),(0x0,swagger_1[_0x3f8300(0x103)])({'summary':_0x3f8300(0x121),'description':_0x3f8300(0x13b)}),(0x0,swagger_1[_0x3f8300(0x127)])({'status':0xc8,'description':_0x3f8300(0x150)}),(0x0,common_1[_0x3f8300(0x132)])(jwtAuth_guard_1[_0x3f8300(0x125)]),(0x0,swagger_1[_0x3f8300(0x106)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1['Req'])()),__param(0x2,(0x0,common_1['Res'])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,Object,Object]),__metadata(_0x3f8300(0x138),void 0x0)],ChatController[_0x3f8300(0x122)],_0x3f8300(0x131),null),__decorate([(0x0,common_1[_0x3f8300(0x12a)])(_0x3f8300(0x12d)),(0x0,swagger_1[_0x3f8300(0x103)])({'summary':_0x3f8300(0x11d),'description':'生成PPT封面'}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':'返回生成的PPT封面数据'}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x3f8300(0x125)]),(0x0,swagger_1[_0x3f8300(0x106)])(),__param(0x0,(0x0,common_1[_0x3f8300(0x14a)])()),__metadata('design:type',Function),__metadata(_0x3f8300(0x145),[Object]),__metadata(_0x3f8300(0x138),void 0x0)],ChatController[_0x3f8300(0x122)],'pptCover',null),ChatController=__decorate([(0x0,swagger_1['ApiTags'])(_0x3f8300(0x12f)),(0x0,common_1[_0x3f8300(0x11f)])('chatgpt'),__metadata(_0x3f8300(0x145),[chat_service_1['ChatService'],globalConfig_service_1[_0x3f8300(0x140)],aiPPT_1['AiPptService']])],ChatController),exports[_0x3f8300(0x137)]=ChatController;