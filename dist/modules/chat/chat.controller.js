'use strict';const _0x1f47ce=_0x2903;function _0x167f(){const _0x4d140b=['2ZRCHfg','chatProcess','返回语音数据流','Res','chat-mind','prototype','tts-process','Req','ttsProcess','chatmind','ChatProcessDto','AiPptService','响应文本','GPT同步对话','__esModule','3888824ZjGuQj','3228952UhIFBQ','返回生成的PPT封面数据','AI\x20服务统一接口','1232382GKEuhP','chat-sync','getOwnPropertyDescriptor','GPT描述词绘画翻译','9weISrm','统一处理各种\x20AI\x20服务的请求，支持：\x0a\x20\x20\x20\x201.\x20OpenAI\x20聊天\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20gpt-3.5-turbo,\x20gpt-4\x0a\x20\x20\x20\x202.\x20Suno\x20AI\x20音乐生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20suno-music\x0a\x20\x20\x20\x20\x20\x20\x20-\x20歌词生成：action=\x22LYRICS\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20音乐生成：action=\x22MUSIC\x22,\x20需提供\x20customId\x0a\x20\x20\x20\x203.\x20Luma\x20视频生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20luma-video\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action=\x22CREATE\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x204.\x20Flux\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20flux\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20参数\x0a\x20\x20\x20\x20\x20\x20\x20-\x20可选\x20options.groupId\x20参数\x0a\x20\x20\x20\x205.\x20Midjourney\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持四种速度模式：\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney:\x20默认速度\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-fast:\x20快速模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-relax:\x20放松模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-turbo:\x20极速模式\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action:\x20IMAGINE,\x20UPSCALE,\x20VARIATION,\x20ZOOM,\x20PAN,\x20DESCRIBE,\x20BLEND\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20所有请求都支持流式响应，可实时获取生成进度。','UseGuards','PPT封面生成','../../common/auth/jwtAuth.guard','GlobalConfigService','与GPT进行同步对话，返回完整响应','chat-process','ApiResponse','ChatService','@nestjs/swagger','5407020BcgZTA','function','chatgpt','chatService','design:paramtypes','mjFanyi','design:returntype','ApiOperation','metadata','ApiTags','../globalConfig/globalConfig.service','ApiBearerAuth','3615600rKZwkS','defineProperty','design:type','生成PPT封面','MindMap','number','7unTsqw','mj-fy','3181410VsOLRr','返回完整的对话响应','string','Controller','__metadata','任务数据','object','assign','decorate','使用GPT对绘画描述词进行翻译和优化，使用PromptOptimization模型','@nestjs/common','返回优化后的绘画描述词','../ai/aiPPT','Post','JwtAuthGuard','Body','__param','返回对话响应流或任务结果','3893520qUKYOk','pptCover','状态码：1-进行中，2-完成，3-失败','使用GPT生成思维导图，使用MindMap专用模型','./chat.service','globalConfigService','返回思维导图数据','任务ID','Mind思维导图生成','ChatController','ppt-cover','chatProcessSync','aiPptService'];_0x167f=function(){return _0x4d140b;};return _0x167f();}(function(_0x495b46,_0x8500a4){const _0x1dbab4=_0x2903,_0x4e1514=_0x495b46();while(!![]){try{const _0x298caa=-parseInt(_0x1dbab4(0xc9))/0x1*(parseInt(_0x1dbab4(0xb6))/0x2)+parseInt(_0x1dbab4(0x8f))/0x3+parseInt(_0x1dbab4(0xc5))/0x4+parseInt(_0x1dbab4(0xd8))/0x5+-parseInt(_0x1dbab4(0xa9))/0x6+parseInt(_0x1dbab4(0x95))/0x7*(-parseInt(_0x1dbab4(0xc6))/0x8)+-parseInt(_0x1dbab4(0xcd))/0x9*(parseInt(_0x1dbab4(0x97))/0xa);if(_0x298caa===_0x8500a4)break;else _0x4e1514['push'](_0x4e1514['shift']());}catch(_0x269743){_0x4e1514['push'](_0x4e1514['shift']());}}}(_0x167f,0xa0184));function _0x2903(_0x30609e,_0x276b5a){const _0x167fa4=_0x167f();return _0x2903=function(_0x2903d2,_0x5ac812){_0x2903d2=_0x2903d2-0x88;let _0x237096=_0x167fa4[_0x2903d2];return _0x237096;},_0x2903(_0x30609e,_0x276b5a);}var __decorate=this&&this['__decorate']||function(_0x232e56,_0x5692cd,_0x1bacf5,_0x653ac){const _0xf22c8f=_0x2903;var _0xc96d49=arguments['length'],_0x177920=_0xc96d49<0x3?_0x5692cd:_0x653ac===null?_0x653ac=Object[_0xf22c8f(0xcb)](_0x5692cd,_0x1bacf5):_0x653ac,_0x2ee9ff;if(typeof Reflect==='object'&&typeof Reflect[_0xf22c8f(0x9f)]===_0xf22c8f(0xd9))_0x177920=Reflect[_0xf22c8f(0x9f)](_0x232e56,_0x5692cd,_0x1bacf5,_0x653ac);else{for(var _0x44f568=_0x232e56['length']-0x1;_0x44f568>=0x0;_0x44f568--)if(_0x2ee9ff=_0x232e56[_0x44f568])_0x177920=(_0xc96d49<0x3?_0x2ee9ff(_0x177920):_0xc96d49>0x3?_0x2ee9ff(_0x5692cd,_0x1bacf5,_0x177920):_0x2ee9ff(_0x5692cd,_0x1bacf5))||_0x177920;}return _0xc96d49>0x3&&_0x177920&&Object[_0xf22c8f(0x90)](_0x5692cd,_0x1bacf5,_0x177920),_0x177920;},__metadata=this&&this[_0x1f47ce(0x9b)]||function(_0x1f451f,_0x4471cb){const _0x578e9b=_0x1f47ce;if(typeof Reflect===_0x578e9b(0x9d)&&typeof Reflect[_0x578e9b(0x8b)]===_0x578e9b(0xd9))return Reflect[_0x578e9b(0x8b)](_0x1f451f,_0x4471cb);},__param=this&&this[_0x1f47ce(0xa7)]||function(_0x4e204e,_0x13c828){return function(_0x213099,_0x1cdfeb){_0x13c828(_0x213099,_0x1cdfeb,_0x4e204e);};};Object[_0x1f47ce(0x90)](exports,_0x1f47ce(0xc4),{'value':!![]}),exports['ChatController']=void 0x0;const swagger_1=require(_0x1f47ce(0xd7)),jwtAuth_guard_1=require(_0x1f47ce(0xd1)),chat_service_1=require(_0x1f47ce(0xad)),common_1=require(_0x1f47ce(0xa1)),chatProcess_dto_1=require('./dto/chatProcess.dto'),aiPPT_1=require(_0x1f47ce(0xa3)),globalConfig_service_1=require(_0x1f47ce(0x8d));let ChatController=class ChatController{constructor(_0x52ceba,_0x1f54f7,_0x176df1){const _0x3e9631=_0x1f47ce;this['chatService']=_0x52ceba,this[_0x3e9631(0xae)]=_0x1f54f7,this[_0x3e9631(0xb5)]=_0x176df1;}[_0x1f47ce(0xb7)](_0xabbe2b,_0x4726da,_0x452bb7){const _0x1e538c=_0x1f47ce;return this[_0x1e538c(0xdb)]['chatProcess'](_0xabbe2b,_0x4726da,_0x452bb7);}['chatProcessSync'](_0x1d7a99,_0x43ad01){const _0x3ffe5b=_0x1f47ce;return this[_0x3ffe5b(0xdb)][_0x3ffe5b(0xb7)](Object[_0x3ffe5b(0x9e)]({},_0x1d7a99),_0x43ad01);}async[_0x1f47ce(0x88)](_0x4baf1f,_0x1ea01e){const _0x18c2b0=_0x1f47ce;return this['chatService'][_0x18c2b0(0xb7)](Object[_0x18c2b0(0x9e)](Object[_0x18c2b0(0x9e)]({},_0x4baf1f),{'specialModel':'PromptOptimization'}),_0x1ea01e);}async[_0x1f47ce(0xbf)](_0x564dd9,_0x555409,_0x343992){const _0x2d8a5e=_0x1f47ce;return this[_0x2d8a5e(0xdb)]['chatProcess'](Object[_0x2d8a5e(0x9e)](Object[_0x2d8a5e(0x9e)]({},_0x564dd9),{'specialModel':_0x2d8a5e(0x93)}),_0x555409,_0x343992);}[_0x1f47ce(0xbe)](_0x339188,_0x61c952,_0xaa745){const _0x251a27=_0x1f47ce;return this['chatService'][_0x251a27(0xbe)](_0x339188,_0x61c952,_0xaa745);}[_0x1f47ce(0xaa)](_0x55bfc0){const _0x5c8eca=_0x1f47ce;return this[_0x5c8eca(0xb5)]['pptCover'](_0x55bfc0);}};__decorate([(0x0,common_1[_0x1f47ce(0xa4)])(_0x1f47ce(0xd4)),(0x0,swagger_1[_0x1f47ce(0x8a)])({'summary':_0x1f47ce(0xc8),'description':_0x1f47ce(0xce)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x1f47ce(0xa8),'schema':{'properties':{'text':{'type':'string','description':_0x1f47ce(0xc2)},'fileInfo':{'type':_0x1f47ce(0x99),'description':'生成的文件信息'},'taskId':{'type':_0x1f47ce(0x99),'description':_0x1f47ce(0xb0)},'taskData':{'type':'string','description':_0x1f47ce(0x9c)},'status':{'type':_0x1f47ce(0x94),'description':_0x1f47ce(0xab)}}}}),(0x0,common_1[_0x1f47ce(0xcf)])(jwtAuth_guard_1[_0x1f47ce(0xa5)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x1f47ce(0xa6)])()),__param(0x1,(0x0,common_1[_0x1f47ce(0xbd)])()),__param(0x2,(0x0,common_1['Res'])()),__metadata('design:type',Function),__metadata('design:paramtypes',[chatProcess_dto_1[_0x1f47ce(0xc0)],Object,Object]),__metadata(_0x1f47ce(0x89),void 0x0)],ChatController['prototype'],_0x1f47ce(0xb7),null),__decorate([(0x0,common_1[_0x1f47ce(0xa4)])(_0x1f47ce(0xca)),(0x0,swagger_1[_0x1f47ce(0x8a)])({'summary':_0x1f47ce(0xc3),'description':_0x1f47ce(0xd3)}),(0x0,swagger_1[_0x1f47ce(0xd5)])({'status':0xc8,'description':_0x1f47ce(0x98)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x1f47ce(0xa5)]),(0x0,swagger_1[_0x1f47ce(0x8e)])(),__param(0x0,(0x0,common_1[_0x1f47ce(0xa6)])()),__param(0x1,(0x0,common_1[_0x1f47ce(0xbd)])()),__metadata('design:type',Function),__metadata(_0x1f47ce(0xdc),[chatProcess_dto_1[_0x1f47ce(0xc0)],Object]),__metadata('design:returntype',void 0x0)],ChatController[_0x1f47ce(0xbb)],_0x1f47ce(0xb4),null),__decorate([(0x0,common_1[_0x1f47ce(0xa4)])(_0x1f47ce(0x96)),(0x0,swagger_1[_0x1f47ce(0x8a)])({'summary':_0x1f47ce(0xcc),'description':_0x1f47ce(0xa0)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x1f47ce(0xa2)}),(0x0,common_1[_0x1f47ce(0xcf)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x1f47ce(0x8e)])(),__param(0x0,(0x0,common_1[_0x1f47ce(0xa6)])()),__param(0x1,(0x0,common_1['Req'])()),__metadata(_0x1f47ce(0x91),Function),__metadata(_0x1f47ce(0xdc),[chatProcess_dto_1[_0x1f47ce(0xc0)],Object]),__metadata('design:returntype',Promise)],ChatController[_0x1f47ce(0xbb)],_0x1f47ce(0x88),null),__decorate([(0x0,common_1['Post'])(_0x1f47ce(0xba)),(0x0,swagger_1[_0x1f47ce(0x8a)])({'summary':_0x1f47ce(0xb1),'description':_0x1f47ce(0xac)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x1f47ce(0xaf)}),(0x0,common_1[_0x1f47ce(0xcf)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x1f47ce(0xa6)])()),__param(0x1,(0x0,common_1[_0x1f47ce(0xbd)])()),__param(0x2,(0x0,common_1[_0x1f47ce(0xb9)])()),__metadata(_0x1f47ce(0x91),Function),__metadata(_0x1f47ce(0xdc),[chatProcess_dto_1['ChatProcessDto'],Object,Object]),__metadata(_0x1f47ce(0x89),Promise)],ChatController['prototype'],_0x1f47ce(0xbf),null),__decorate([(0x0,common_1[_0x1f47ce(0xa4)])(_0x1f47ce(0xbc)),(0x0,swagger_1['ApiOperation'])({'summary':'TTS语音合成','description':'将文本转换为语音'}),(0x0,swagger_1[_0x1f47ce(0xd5)])({'status':0xc8,'description':_0x1f47ce(0xb8)}),(0x0,common_1[_0x1f47ce(0xcf)])(jwtAuth_guard_1[_0x1f47ce(0xa5)]),(0x0,swagger_1[_0x1f47ce(0x8e)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x1f47ce(0xbd)])()),__param(0x2,(0x0,common_1[_0x1f47ce(0xb9)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,Object,Object]),__metadata(_0x1f47ce(0x89),void 0x0)],ChatController[_0x1f47ce(0xbb)],_0x1f47ce(0xbe),null),__decorate([(0x0,common_1['Post'])(_0x1f47ce(0xb3)),(0x0,swagger_1[_0x1f47ce(0x8a)])({'summary':_0x1f47ce(0xd0),'description':_0x1f47ce(0x92)}),(0x0,swagger_1[_0x1f47ce(0xd5)])({'status':0xc8,'description':_0x1f47ce(0xc7)}),(0x0,common_1[_0x1f47ce(0xcf)])(jwtAuth_guard_1[_0x1f47ce(0xa5)]),(0x0,swagger_1[_0x1f47ce(0x8e)])(),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x1f47ce(0x91),Function),__metadata(_0x1f47ce(0xdc),[Object]),__metadata(_0x1f47ce(0x89),void 0x0)],ChatController[_0x1f47ce(0xbb)],_0x1f47ce(0xaa),null),ChatController=__decorate([(0x0,swagger_1[_0x1f47ce(0x8c)])('chatgpt'),(0x0,common_1[_0x1f47ce(0x9a)])(_0x1f47ce(0xda)),__metadata(_0x1f47ce(0xdc),[chat_service_1[_0x1f47ce(0xd6)],globalConfig_service_1[_0x1f47ce(0xd2)],aiPPT_1[_0x1f47ce(0xc1)]])],ChatController),exports[_0x1f47ce(0xb2)]=ChatController;