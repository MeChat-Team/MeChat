'use strict';function _0x2df4(){const _0x1f55c3=['__param','mjFanyi','1715830YijdBD','2450zfsPlt','响应文本','Post','返回生成的PPT封面数据','pptCover','__esModule','返回对话响应流或任务结果','TTS语音合成','Res','状态码：1-进行中，2-完成，3-失败','chat-process','661809jmjwcr','ttsProcess','ChatService','object','number','function','globalConfigService','PPT封面生成','./chat.service','design:paramtypes','GPT同步对话','ApiBearerAuth','GPT描述词绘画翻译','chat-sync','3263376jteIlt','../globalConfig/globalConfig.service','ApiResponse','length','ppt-cover','Mind思维导图生成','返回优化后的绘画描述词','任务数据','JwtAuthGuard','string','2249516SQtIiJ','chat-mind','@nestjs/common','__metadata','defineProperty','Controller','PromptOptimization','design:type','ApiTags','ChatController','GlobalConfigService','与GPT进行同步对话，返回完整响应','chatmind','将文本转换为语音','chatgpt','chatProcess','27MQLuVt','Body','mj-fy','生成PPT封面','4166775eARish','getOwnPropertyDescriptor','9606PvgXSu','ChatProcessDto','metadata','tts-process','AiPptService','@nestjs/swagger','chatService','design:returntype','prototype','统一处理各种\x20AI\x20服务的请求，支持：\x0a\x20\x20\x20\x201.\x20OpenAI\x20聊天\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20gpt-3.5-turbo,\x20gpt-4\x0a\x20\x20\x20\x202.\x20Suno\x20AI\x20音乐生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20suno-music\x0a\x20\x20\x20\x20\x20\x20\x20-\x20歌词生成：action=\x22LYRICS\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20音乐生成：action=\x22MUSIC\x22,\x20需提供\x20customId\x0a\x20\x20\x20\x203.\x20Luma\x20视频生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20luma-video\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action=\x22CREATE\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x204.\x20Flux\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20flux\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20参数\x0a\x20\x20\x20\x20\x20\x20\x20-\x20可选\x20options.groupId\x20参数\x0a\x20\x20\x20\x205.\x20Midjourney\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持四种速度模式：\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney:\x20默认速度\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-fast:\x20快速模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-relax:\x20放松模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-turbo:\x20极速模式\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action:\x20IMAGINE,\x20UPSCALE,\x20VARIATION,\x20ZOOM,\x20PAN,\x20DESCRIBE,\x20BLEND\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20所有请求都支持流式响应，可实时获取生成进度。','aiPptService','返回语音数据流','778085fWoGFs','UseGuards','AI\x20服务统一接口','../../common/auth/jwtAuth.guard','assign','Req','ApiOperation'];_0x2df4=function(){return _0x1f55c3;};return _0x2df4();}const _0x2679d6=_0x216e;(function(_0x34ef3f,_0x343331){const _0x1c4776=_0x216e,_0x5836de=_0x34ef3f();while(!![]){try{const _0x1060dc=parseInt(_0x1c4776(0x210))/0x1+-parseInt(_0x1c4776(0x219))/0x2+-parseInt(_0x1c4776(0x225))/0x3+parseInt(_0x1c4776(0x1ee))/0x4+parseInt(_0x1c4776(0x202))/0x5+parseInt(_0x1c4776(0x204))/0x6*(parseInt(_0x1c4776(0x21a))/0x7)+-parseInt(_0x1c4776(0x1e4))/0x8*(parseInt(_0x1c4776(0x1fe))/0x9);if(_0x1060dc===_0x343331)break;else _0x5836de['push'](_0x5836de['shift']());}catch(_0x5b41e5){_0x5836de['push'](_0x5836de['shift']());}}}(_0x2df4,0x6970d));function _0x216e(_0x3e547f,_0x463a5e){const _0x2df426=_0x2df4();return _0x216e=function(_0x216e4d,_0x2117d1){_0x216e4d=_0x216e4d-0x1d9;let _0x20b11b=_0x2df426[_0x216e4d];return _0x20b11b;},_0x216e(_0x3e547f,_0x463a5e);}var __decorate=this&&this['__decorate']||function(_0x38d0cb,_0x3655b9,_0x32dc9c,_0x180373){const _0x1440bd=_0x216e;var _0x41bc99=arguments[_0x1440bd(0x1e7)],_0x2a2d6a=_0x41bc99<0x3?_0x3655b9:_0x180373===null?_0x180373=Object[_0x1440bd(0x203)](_0x3655b9,_0x32dc9c):_0x180373,_0x305464;if(typeof Reflect===_0x1440bd(0x1d9)&&typeof Reflect['decorate']===_0x1440bd(0x1db))_0x2a2d6a=Reflect['decorate'](_0x38d0cb,_0x3655b9,_0x32dc9c,_0x180373);else{for(var _0xb2fcbb=_0x38d0cb[_0x1440bd(0x1e7)]-0x1;_0xb2fcbb>=0x0;_0xb2fcbb--)if(_0x305464=_0x38d0cb[_0xb2fcbb])_0x2a2d6a=(_0x41bc99<0x3?_0x305464(_0x2a2d6a):_0x41bc99>0x3?_0x305464(_0x3655b9,_0x32dc9c,_0x2a2d6a):_0x305464(_0x3655b9,_0x32dc9c))||_0x2a2d6a;}return _0x41bc99>0x3&&_0x2a2d6a&&Object[_0x1440bd(0x1f2)](_0x3655b9,_0x32dc9c,_0x2a2d6a),_0x2a2d6a;},__metadata=this&&this[_0x2679d6(0x1f1)]||function(_0x25633b,_0x580f22){const _0x2f2bfb=_0x2679d6;if(typeof Reflect===_0x2f2bfb(0x1d9)&&typeof Reflect[_0x2f2bfb(0x206)]==='function')return Reflect[_0x2f2bfb(0x206)](_0x25633b,_0x580f22);},__param=this&&this[_0x2679d6(0x217)]||function(_0x2f471f,_0x30b2e0){return function(_0x26bb4e,_0x5ecf94){_0x30b2e0(_0x26bb4e,_0x5ecf94,_0x2f471f);};};Object[_0x2679d6(0x1f2)](exports,_0x2679d6(0x21f),{'value':!![]}),exports[_0x2679d6(0x1f7)]=void 0x0;const swagger_1=require(_0x2679d6(0x209)),jwtAuth_guard_1=require(_0x2679d6(0x213)),chat_service_1=require(_0x2679d6(0x1de)),common_1=require(_0x2679d6(0x1f0)),chatProcess_dto_1=require('./dto/chatProcess.dto'),aiPPT_1=require('../ai/aiPPT'),globalConfig_service_1=require(_0x2679d6(0x1e5));let ChatController=class ChatController{constructor(_0x5eaf63,_0x258c16,_0x4d8a77){const _0xc64df8=_0x2679d6;this['chatService']=_0x5eaf63,this[_0xc64df8(0x1dc)]=_0x258c16,this[_0xc64df8(0x20e)]=_0x4d8a77;}[_0x2679d6(0x1fd)](_0xca53d6,_0xd107ff,_0x2e9f51){const _0x4a04c8=_0x2679d6;return this[_0x4a04c8(0x20a)][_0x4a04c8(0x1fd)](_0xca53d6,_0xd107ff,_0x2e9f51);}['chatProcessSync'](_0x39ae02,_0x4a5ed0){const _0x135a09=_0x2679d6;return this[_0x135a09(0x20a)]['chatProcess'](Object[_0x135a09(0x214)]({},_0x39ae02),_0x4a5ed0);}async[_0x2679d6(0x218)](_0x28a5d4,_0x189ca6){const _0x150337=_0x2679d6;return this[_0x150337(0x20a)][_0x150337(0x1fd)](Object['assign'](Object['assign']({},_0x28a5d4),{'specialModel':_0x150337(0x1f4)}),_0x189ca6);}async[_0x2679d6(0x1fa)](_0x464bf2,_0x1ec53d,_0x3a4196){const _0x4b0ecb=_0x2679d6;return this[_0x4b0ecb(0x20a)][_0x4b0ecb(0x1fd)](Object['assign'](Object[_0x4b0ecb(0x214)]({},_0x464bf2),{'specialModel':'MindMap'}),_0x1ec53d,_0x3a4196);}[_0x2679d6(0x226)](_0x2485aa,_0x1a8edd,_0x24f72d){const _0x25e52e=_0x2679d6;return this[_0x25e52e(0x20a)][_0x25e52e(0x226)](_0x2485aa,_0x1a8edd,_0x24f72d);}[_0x2679d6(0x21e)](_0x1c9143){const _0x524e6a=_0x2679d6;return this['aiPptService'][_0x524e6a(0x21e)](_0x1c9143);}};__decorate([(0x0,common_1[_0x2679d6(0x21c)])(_0x2679d6(0x224)),(0x0,swagger_1['ApiOperation'])({'summary':_0x2679d6(0x212),'description':_0x2679d6(0x20d)}),(0x0,swagger_1[_0x2679d6(0x1e6)])({'status':0xc8,'description':_0x2679d6(0x220),'schema':{'properties':{'text':{'type':'string','description':_0x2679d6(0x21b)},'fileInfo':{'type':_0x2679d6(0x1ed),'description':'生成的文件信息'},'taskId':{'type':'string','description':'任务ID'},'taskData':{'type':_0x2679d6(0x1ed),'description':_0x2679d6(0x1eb)},'status':{'type':_0x2679d6(0x1da),'description':_0x2679d6(0x223)}}}}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x2679d6(0x1ec)]),(0x0,swagger_1[_0x2679d6(0x1e1)])(),__param(0x0,(0x0,common_1[_0x2679d6(0x1ff)])()),__param(0x1,(0x0,common_1[_0x2679d6(0x215)])()),__param(0x2,(0x0,common_1[_0x2679d6(0x222)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[chatProcess_dto_1[_0x2679d6(0x205)],Object,Object]),__metadata(_0x2679d6(0x20b),void 0x0)],ChatController[_0x2679d6(0x20c)],'chatProcess',null),__decorate([(0x0,common_1[_0x2679d6(0x21c)])(_0x2679d6(0x1e3)),(0x0,swagger_1[_0x2679d6(0x216)])({'summary':_0x2679d6(0x1e0),'description':_0x2679d6(0x1f9)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':'返回完整的对话响应'}),(0x0,common_1[_0x2679d6(0x211)])(jwtAuth_guard_1[_0x2679d6(0x1ec)]),(0x0,swagger_1[_0x2679d6(0x1e1)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x2679d6(0x215)])()),__metadata('design:type',Function),__metadata(_0x2679d6(0x1df),[chatProcess_dto_1['ChatProcessDto'],Object]),__metadata('design:returntype',void 0x0)],ChatController[_0x2679d6(0x20c)],'chatProcessSync',null),__decorate([(0x0,common_1[_0x2679d6(0x21c)])(_0x2679d6(0x200)),(0x0,swagger_1['ApiOperation'])({'summary':_0x2679d6(0x1e2),'description':'使用GPT对绘画描述词进行翻译和优化，使用PromptOptimization模型'}),(0x0,swagger_1[_0x2679d6(0x1e6)])({'status':0xc8,'description':_0x2679d6(0x1ea)}),(0x0,common_1[_0x2679d6(0x211)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x2679d6(0x1e1)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x2679d6(0x215)])()),__metadata(_0x2679d6(0x1f5),Function),__metadata(_0x2679d6(0x1df),[chatProcess_dto_1[_0x2679d6(0x205)],Object]),__metadata(_0x2679d6(0x20b),Promise)],ChatController[_0x2679d6(0x20c)],_0x2679d6(0x218),null),__decorate([(0x0,common_1[_0x2679d6(0x21c)])(_0x2679d6(0x1ef)),(0x0,swagger_1[_0x2679d6(0x216)])({'summary':_0x2679d6(0x1e9),'description':'使用GPT生成思维导图，使用MindMap专用模型'}),(0x0,swagger_1[_0x2679d6(0x1e6)])({'status':0xc8,'description':'返回思维导图数据'}),(0x0,common_1[_0x2679d6(0x211)])(jwtAuth_guard_1[_0x2679d6(0x1ec)]),(0x0,swagger_1[_0x2679d6(0x1e1)])(),__param(0x0,(0x0,common_1[_0x2679d6(0x1ff)])()),__param(0x1,(0x0,common_1[_0x2679d6(0x215)])()),__param(0x2,(0x0,common_1['Res'])()),__metadata('design:type',Function),__metadata(_0x2679d6(0x1df),[chatProcess_dto_1[_0x2679d6(0x205)],Object,Object]),__metadata(_0x2679d6(0x20b),Promise)],ChatController[_0x2679d6(0x20c)],'chatmind',null),__decorate([(0x0,common_1['Post'])(_0x2679d6(0x207)),(0x0,swagger_1[_0x2679d6(0x216)])({'summary':_0x2679d6(0x221),'description':_0x2679d6(0x1fb)}),(0x0,swagger_1[_0x2679d6(0x1e6)])({'status':0xc8,'description':_0x2679d6(0x20f)}),(0x0,common_1[_0x2679d6(0x211)])(jwtAuth_guard_1[_0x2679d6(0x1ec)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1[_0x2679d6(0x1ff)])()),__param(0x1,(0x0,common_1['Req'])()),__param(0x2,(0x0,common_1[_0x2679d6(0x222)])()),__metadata(_0x2679d6(0x1f5),Function),__metadata('design:paramtypes',[Object,Object,Object]),__metadata(_0x2679d6(0x20b),void 0x0)],ChatController['prototype'],_0x2679d6(0x226),null),__decorate([(0x0,common_1[_0x2679d6(0x21c)])(_0x2679d6(0x1e8)),(0x0,swagger_1[_0x2679d6(0x216)])({'summary':_0x2679d6(0x1dd),'description':_0x2679d6(0x201)}),(0x0,swagger_1[_0x2679d6(0x1e6)])({'status':0xc8,'description':_0x2679d6(0x21d)}),(0x0,common_1[_0x2679d6(0x211)])(jwtAuth_guard_1[_0x2679d6(0x1ec)]),(0x0,swagger_1[_0x2679d6(0x1e1)])(),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x2679d6(0x1f5),Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',void 0x0)],ChatController['prototype'],_0x2679d6(0x21e),null),ChatController=__decorate([(0x0,swagger_1[_0x2679d6(0x1f6)])(_0x2679d6(0x1fc)),(0x0,common_1[_0x2679d6(0x1f3)])(_0x2679d6(0x1fc)),__metadata(_0x2679d6(0x1df),[chat_service_1[_0x2679d6(0x227)],globalConfig_service_1[_0x2679d6(0x1f8)],aiPPT_1[_0x2679d6(0x208)]])],ChatController),exports[_0x2679d6(0x1f7)]=ChatController;