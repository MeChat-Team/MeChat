'use strict';const _0x65d1c8=_0x16a9;(function(_0x5af063,_0xb8e4b5){const _0x1bcfa4=_0x16a9,_0x12bb94=_0x5af063();while(!![]){try{const _0x3707dd=-parseInt(_0x1bcfa4(0x15f))/0x1+-parseInt(_0x1bcfa4(0x146))/0x2+-parseInt(_0x1bcfa4(0x149))/0x3*(-parseInt(_0x1bcfa4(0x11f))/0x4)+-parseInt(_0x1bcfa4(0x14d))/0x5*(parseInt(_0x1bcfa4(0x15e))/0x6)+-parseInt(_0x1bcfa4(0x127))/0x7*(parseInt(_0x1bcfa4(0x116))/0x8)+parseInt(_0x1bcfa4(0x156))/0x9+parseInt(_0x1bcfa4(0x119))/0xa;if(_0x3707dd===_0xb8e4b5)break;else _0x12bb94['push'](_0x12bb94['shift']());}catch(_0x146319){_0x12bb94['push'](_0x12bb94['shift']());}}}(_0x13b6,0x66cbd));var __decorate=this&&this['__decorate']||function(_0x2b6498,_0x213fa5,_0x5754d7,_0x8addd9){const _0x3d4225=_0x16a9;var _0x4da8f7=arguments[_0x3d4225(0x14e)],_0x25642e=_0x4da8f7<0x3?_0x213fa5:_0x8addd9===null?_0x8addd9=Object[_0x3d4225(0x12a)](_0x213fa5,_0x5754d7):_0x8addd9,_0x194501;if(typeof Reflect==='object'&&typeof Reflect[_0x3d4225(0x14f)]===_0x3d4225(0x121))_0x25642e=Reflect[_0x3d4225(0x14f)](_0x2b6498,_0x213fa5,_0x5754d7,_0x8addd9);else{for(var _0x5cc0ae=_0x2b6498[_0x3d4225(0x14e)]-0x1;_0x5cc0ae>=0x0;_0x5cc0ae--)if(_0x194501=_0x2b6498[_0x5cc0ae])_0x25642e=(_0x4da8f7<0x3?_0x194501(_0x25642e):_0x4da8f7>0x3?_0x194501(_0x213fa5,_0x5754d7,_0x25642e):_0x194501(_0x213fa5,_0x5754d7))||_0x25642e;}return _0x4da8f7>0x3&&_0x25642e&&Object[_0x3d4225(0x126)](_0x213fa5,_0x5754d7,_0x25642e),_0x25642e;},__metadata=this&&this['__metadata']||function(_0x4586fa,_0x2d8f3e){const _0xf64e81=_0x16a9;if(typeof Reflect===_0xf64e81(0x14a)&&typeof Reflect['metadata']===_0xf64e81(0x121))return Reflect[_0xf64e81(0x122)](_0x4586fa,_0x2d8f3e);},__param=this&&this[_0x65d1c8(0x11b)]||function(_0x4b3cd0,_0x22bdee){return function(_0x26cc38,_0x2511fa){_0x22bdee(_0x26cc38,_0x2511fa,_0x4b3cd0);};};function _0x13b6(){const _0x5de615=['JwtAuthGuard','Post','Res','PPT封面生成','ChatController','aiPptService','./dto/chatProcess.dto','ChatService','生成的文件信息','design:returntype','GlobalConfigService','number','返回完整的对话响应','prototype','Req','tts-process','1205404kaWbpf','string','返回思维导图数据','716829lUzRIo','object','ApiOperation','mjFanyi','1636025qcymdX','length','decorate','design:type','返回生成的PPT封面数据','ApiBearerAuth','chatmind','状态码：1-进行中，2-完成，3-失败','chat-process','3350601XKEcFZ','globalConfigService','与GPT进行同步对话，返回完整响应','__esModule','生成PPT封面','@nestjs/swagger','ChatProcessDto','chatProcess','6EhIKML','781670DckOuk','chatProcessSync','./chat.service','ApiTags','chat-mind','统一处理各种\x20AI\x20服务的请求，支持：\x0a\x20\x20\x20\x201.\x20OpenAI\x20聊天\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20gpt-3.5-turbo,\x20gpt-4\x0a\x20\x20\x20\x202.\x20Suno\x20AI\x20音乐生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20suno-music\x0a\x20\x20\x20\x20\x20\x20\x20-\x20歌词生成：action=\x22LYRICS\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20音乐生成：action=\x22MUSIC\x22,\x20需提供\x20customId\x0a\x20\x20\x20\x203.\x20Luma\x20视频生成\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20luma-video\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action=\x22CREATE\x22\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x204.\x20Flux\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20model:\x20flux\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20参数\x0a\x20\x20\x20\x20\x20\x20\x20-\x20可选\x20options.groupId\x20参数\x0a\x20\x20\x20\x205.\x20Midjourney\x20绘图\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持四种速度模式：\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney:\x20默认速度\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-fast:\x20快速模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-relax:\x20放松模式\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20midjourney-turbo:\x20极速模式\x0a\x20\x20\x20\x20\x20\x20\x20-\x20action:\x20IMAGINE,\x20UPSCALE,\x20VARIATION,\x20ZOOM,\x20PAN,\x20DESCRIBE,\x20BLEND\x0a\x20\x20\x20\x20\x20\x20\x20-\x20支持\x20extraParam\x20和\x20fileInfo\x20参数\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20所有请求都支持流式响应，可实时获取生成进度。','811912zxSafN','GPT描述词绘画翻译','GPT同步对话','18258650qoodMR','将文本转换为语音','__param','design:paramtypes','ApiResponse','pptCover','4srRLYM','Body','function','metadata','assign','响应文本','AiPptService','defineProperty','21xMgFtr','mj-fy','任务数据','getOwnPropertyDescriptor','返回对话响应流或任务结果','chat-sync','../globalConfig/globalConfig.service','../../common/auth/jwtAuth.guard','返回语音数据流','chatService','任务ID','使用GPT生成思维导图，使用MindMap专用模型','返回优化后的绘画描述词','ttsProcess','UseGuards'];_0x13b6=function(){return _0x5de615;};return _0x13b6();}Object['defineProperty'](exports,_0x65d1c8(0x159),{'value':!![]}),exports[_0x65d1c8(0x13a)]=void 0x0;const swagger_1=require(_0x65d1c8(0x15b)),jwtAuth_guard_1=require(_0x65d1c8(0x12e)),chat_service_1=require(_0x65d1c8(0x161)),common_1=require('@nestjs/common'),chatProcess_dto_1=require(_0x65d1c8(0x13c)),aiPPT_1=require('../ai/aiPPT'),globalConfig_service_1=require(_0x65d1c8(0x12d));function _0x16a9(_0x19e117,_0x533b3a){const _0x13b6a8=_0x13b6();return _0x16a9=function(_0x16a9f6,_0x2e2bbb){_0x16a9f6=_0x16a9f6-0x113;let _0x1fd958=_0x13b6a8[_0x16a9f6];return _0x1fd958;},_0x16a9(_0x19e117,_0x533b3a);}let ChatController=class ChatController{constructor(_0x328784,_0x4d5b55,_0x235ba8){const _0x52edf5=_0x65d1c8;this[_0x52edf5(0x130)]=_0x328784,this[_0x52edf5(0x157)]=_0x4d5b55,this[_0x52edf5(0x13b)]=_0x235ba8;}[_0x65d1c8(0x15d)](_0x3b98f9,_0x4a0f55,_0x5f3efd){const _0x14b304=_0x65d1c8;return this['chatService'][_0x14b304(0x15d)](_0x3b98f9,_0x4a0f55,_0x5f3efd);}[_0x65d1c8(0x160)](_0x2f1ff9,_0x23928b){const _0x142318=_0x65d1c8;return this[_0x142318(0x130)][_0x142318(0x15d)](Object['assign']({},_0x2f1ff9),_0x23928b);}async[_0x65d1c8(0x14c)](_0x5dc3f7,_0x3b8c0d){const _0x52740e=_0x65d1c8;return this[_0x52740e(0x130)][_0x52740e(0x15d)](Object[_0x52740e(0x123)](Object[_0x52740e(0x123)]({},_0x5dc3f7),{'specialModel':'PromptOptimization'}),_0x3b8c0d);}async[_0x65d1c8(0x153)](_0x458b8b,_0x57b9de,_0x468e64){const _0xdc15ab=_0x65d1c8;return this[_0xdc15ab(0x130)][_0xdc15ab(0x15d)](Object[_0xdc15ab(0x123)](Object[_0xdc15ab(0x123)]({},_0x458b8b),{'specialModel':'MindMap'}),_0x57b9de,_0x468e64);}[_0x65d1c8(0x134)](_0x28660c,_0x35e067,_0x41fbd7){const _0x568f3c=_0x65d1c8;return this[_0x568f3c(0x130)][_0x568f3c(0x134)](_0x28660c,_0x35e067,_0x41fbd7);}[_0x65d1c8(0x11e)](_0x391644){const _0x2dd3a5=_0x65d1c8;return this[_0x2dd3a5(0x13b)]['pptCover'](_0x391644);}};__decorate([(0x0,common_1['Post'])(_0x65d1c8(0x155)),(0x0,swagger_1[_0x65d1c8(0x14b)])({'summary':'AI\x20服务统一接口','description':_0x65d1c8(0x115)}),(0x0,swagger_1[_0x65d1c8(0x11d)])({'status':0xc8,'description':_0x65d1c8(0x12b),'schema':{'properties':{'text':{'type':_0x65d1c8(0x147),'description':_0x65d1c8(0x124)},'fileInfo':{'type':_0x65d1c8(0x147),'description':_0x65d1c8(0x13e)},'taskId':{'type':_0x65d1c8(0x147),'description':_0x65d1c8(0x131)},'taskData':{'type':_0x65d1c8(0x147),'description':_0x65d1c8(0x129)},'status':{'type':_0x65d1c8(0x141),'description':_0x65d1c8(0x154)}}}}),(0x0,common_1[_0x65d1c8(0x135)])(jwtAuth_guard_1[_0x65d1c8(0x136)]),(0x0,swagger_1[_0x65d1c8(0x152)])(),__param(0x0,(0x0,common_1[_0x65d1c8(0x120)])()),__param(0x1,(0x0,common_1[_0x65d1c8(0x144)])()),__param(0x2,(0x0,common_1[_0x65d1c8(0x138)])()),__metadata(_0x65d1c8(0x150),Function),__metadata(_0x65d1c8(0x11c),[chatProcess_dto_1[_0x65d1c8(0x15c)],Object,Object]),__metadata(_0x65d1c8(0x13f),void 0x0)],ChatController['prototype'],_0x65d1c8(0x15d),null),__decorate([(0x0,common_1[_0x65d1c8(0x137)])(_0x65d1c8(0x12c)),(0x0,swagger_1[_0x65d1c8(0x14b)])({'summary':_0x65d1c8(0x118),'description':_0x65d1c8(0x158)}),(0x0,swagger_1[_0x65d1c8(0x11d)])({'status':0xc8,'description':_0x65d1c8(0x142)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x65d1c8(0x152)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x65d1c8(0x144)])()),__metadata(_0x65d1c8(0x150),Function),__metadata(_0x65d1c8(0x11c),[chatProcess_dto_1[_0x65d1c8(0x15c)],Object]),__metadata('design:returntype',void 0x0)],ChatController[_0x65d1c8(0x143)],_0x65d1c8(0x160),null),__decorate([(0x0,common_1[_0x65d1c8(0x137)])(_0x65d1c8(0x128)),(0x0,swagger_1[_0x65d1c8(0x14b)])({'summary':_0x65d1c8(0x117),'description':'使用GPT对绘画描述词进行翻译和优化，使用PromptOptimization模型'}),(0x0,swagger_1[_0x65d1c8(0x11d)])({'status':0xc8,'description':_0x65d1c8(0x133)}),(0x0,common_1[_0x65d1c8(0x135)])(jwtAuth_guard_1['JwtAuthGuard']),(0x0,swagger_1[_0x65d1c8(0x152)])(),__param(0x0,(0x0,common_1[_0x65d1c8(0x120)])()),__param(0x1,(0x0,common_1[_0x65d1c8(0x144)])()),__metadata('design:type',Function),__metadata(_0x65d1c8(0x11c),[chatProcess_dto_1['ChatProcessDto'],Object]),__metadata(_0x65d1c8(0x13f),Promise)],ChatController[_0x65d1c8(0x143)],_0x65d1c8(0x14c),null),__decorate([(0x0,common_1[_0x65d1c8(0x137)])(_0x65d1c8(0x114)),(0x0,swagger_1[_0x65d1c8(0x14b)])({'summary':'Mind思维导图生成','description':_0x65d1c8(0x132)}),(0x0,swagger_1['ApiResponse'])({'status':0xc8,'description':_0x65d1c8(0x148)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x65d1c8(0x136)]),(0x0,swagger_1[_0x65d1c8(0x152)])(),__param(0x0,(0x0,common_1['Body'])()),__param(0x1,(0x0,common_1[_0x65d1c8(0x144)])()),__param(0x2,(0x0,common_1[_0x65d1c8(0x138)])()),__metadata(_0x65d1c8(0x150),Function),__metadata(_0x65d1c8(0x11c),[chatProcess_dto_1[_0x65d1c8(0x15c)],Object,Object]),__metadata(_0x65d1c8(0x13f),Promise)],ChatController[_0x65d1c8(0x143)],_0x65d1c8(0x153),null),__decorate([(0x0,common_1['Post'])(_0x65d1c8(0x145)),(0x0,swagger_1['ApiOperation'])({'summary':'TTS语音合成','description':_0x65d1c8(0x11a)}),(0x0,swagger_1[_0x65d1c8(0x11d)])({'status':0xc8,'description':_0x65d1c8(0x12f)}),(0x0,common_1[_0x65d1c8(0x135)])(jwtAuth_guard_1[_0x65d1c8(0x136)]),(0x0,swagger_1[_0x65d1c8(0x152)])(),__param(0x0,(0x0,common_1[_0x65d1c8(0x120)])()),__param(0x1,(0x0,common_1['Req'])()),__param(0x2,(0x0,common_1[_0x65d1c8(0x138)])()),__metadata(_0x65d1c8(0x150),Function),__metadata('design:paramtypes',[Object,Object,Object]),__metadata(_0x65d1c8(0x13f),void 0x0)],ChatController['prototype'],_0x65d1c8(0x134),null),__decorate([(0x0,common_1[_0x65d1c8(0x137)])('ppt-cover'),(0x0,swagger_1[_0x65d1c8(0x14b)])({'summary':_0x65d1c8(0x139),'description':_0x65d1c8(0x15a)}),(0x0,swagger_1[_0x65d1c8(0x11d)])({'status':0xc8,'description':_0x65d1c8(0x151)}),(0x0,common_1[_0x65d1c8(0x135)])(jwtAuth_guard_1[_0x65d1c8(0x136)]),(0x0,swagger_1[_0x65d1c8(0x152)])(),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x65d1c8(0x150),Function),__metadata(_0x65d1c8(0x11c),[Object]),__metadata(_0x65d1c8(0x13f),void 0x0)],ChatController[_0x65d1c8(0x143)],_0x65d1c8(0x11e),null),ChatController=__decorate([(0x0,swagger_1[_0x65d1c8(0x113)])('chatgpt'),(0x0,common_1['Controller'])('chatgpt'),__metadata(_0x65d1c8(0x11c),[chat_service_1[_0x65d1c8(0x13d)],globalConfig_service_1[_0x65d1c8(0x140)],aiPPT_1[_0x65d1c8(0x125)]])],ChatController),exports[_0x65d1c8(0x13a)]=ChatController;