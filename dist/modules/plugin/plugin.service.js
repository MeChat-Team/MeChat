'use strict';const _0x5545fe=_0x1e67;(function(_0x5f33e6,_0x3d9f6d){const _0x3d8ba5=_0x1e67,_0x3b1fe7=_0x5f33e6();while(!![]){try{const _0x3f6fe5=-parseInt(_0x3d8ba5(0xda))/0x1*(-parseInt(_0x3d8ba5(0xd8))/0x2)+parseInt(_0x3d8ba5(0xbe))/0x3+parseInt(_0x3d8ba5(0xb3))/0x4*(-parseInt(_0x3d8ba5(0xea))/0x5)+parseInt(_0x3d8ba5(0xe3))/0x6*(parseInt(_0x3d8ba5(0xdc))/0x7)+-parseInt(_0x3d8ba5(0xe1))/0x8+-parseInt(_0x3d8ba5(0xe5))/0x9+parseInt(_0x3d8ba5(0xd6))/0xa;if(_0x3f6fe5===_0x3d9f6d)break;else _0x3b1fe7['push'](_0x3b1fe7['shift']());}catch(_0x403cf4){_0x3b1fe7['push'](_0x3b1fe7['shift']());}}}(_0x2365,0x58665));var __decorate=this&&this['__decorate']||function(_0x283ef7,_0x1e8b1a,_0x593ea1,_0x584fb6){const _0x41b409=_0x1e67;var _0x587865=arguments[_0x41b409(0xb9)],_0x10b97c=_0x587865<0x3?_0x1e8b1a:_0x584fb6===null?_0x584fb6=Object['getOwnPropertyDescriptor'](_0x1e8b1a,_0x593ea1):_0x584fb6,_0x479c76;if(typeof Reflect===_0x41b409(0xbd)&&typeof Reflect[_0x41b409(0xd9)]==='function')_0x10b97c=Reflect['decorate'](_0x283ef7,_0x1e8b1a,_0x593ea1,_0x584fb6);else{for(var _0x2745ce=_0x283ef7[_0x41b409(0xb9)]-0x1;_0x2745ce>=0x0;_0x2745ce--)if(_0x479c76=_0x283ef7[_0x2745ce])_0x10b97c=(_0x587865<0x3?_0x479c76(_0x10b97c):_0x587865>0x3?_0x479c76(_0x1e8b1a,_0x593ea1,_0x10b97c):_0x479c76(_0x1e8b1a,_0x593ea1))||_0x10b97c;}return _0x587865>0x3&&_0x10b97c&&Object[_0x41b409(0xd3)](_0x1e8b1a,_0x593ea1,_0x10b97c),_0x10b97c;},__metadata=this&&this[_0x5545fe(0xc1)]||function(_0x7449a6,_0x49471d){const _0x549fa8=_0x5545fe;if(typeof Reflect==='object'&&typeof Reflect[_0x549fa8(0xe6)]==='function')return Reflect['metadata'](_0x7449a6,_0x49471d);},__param=this&&this[_0x5545fe(0xdb)]||function(_0x50eba2,_0x5f3f9b){return function(_0x29273c,_0x773545){_0x5f3f9b(_0x29273c,_0x773545,_0x50eba2);};};function _0x1e67(_0x48bae9,_0xd00947){const _0x2365a0=_0x2365();return _0x1e67=function(_0x1e67a2,_0x575884){_0x1e67a2=_0x1e67a2-0xb2;let _0x5f1019=_0x2365a0[_0x1e67a2];return _0x5f1019;},_0x1e67(_0x48bae9,_0xd00947);}Object[_0x5545fe(0xd3)](exports,'__esModule',{'value':!![]}),exports['PluginService']=void 0x0;const common_1=require(_0x5545fe(0xbc)),typeorm_1=require(_0x5545fe(0xdd)),typeorm_2=require(_0x5545fe(0xd4)),models_service_1=require(_0x5545fe(0xb4)),plugin_entity_1=require('./plugin.entity');let PluginService=class PluginService{constructor(_0x5a051e,_0x5f1f4f){const _0x558e34=_0x5545fe;this[_0x558e34(0xd2)]=_0x5a051e,this['modelsService']=_0x5f1f4f;}async['pluginList'](_0x27c87c){const _0x22dc62=_0x5545fe,{page:page=0x1,size:size=0x64}=_0x27c87c,_0x4e1eb2=await this[_0x22dc62(0xd2)][_0x22dc62(0xd5)]({'order':{'sortOrder':'ASC','id':_0x22dc62(0xb2)},'skip':(page-0x1)*size,'take':size}),_0xbd1f63=await Promise['all'](_0x4e1eb2[_0x22dc62(0xd1)](async _0x430e58=>{const _0x357cf8=_0x22dc62;if(_0x430e58['isSystemPlugin']===0x1)try{const _0x14c509=await this[_0x357cf8(0xcd)][_0x357cf8(0xd0)](_0x430e58[_0x357cf8(0xe8)]),_0x447b55=_0x14c509[_0x357cf8(0xb5)];return Object[_0x357cf8(0xbb)](Object[_0x357cf8(0xbb)]({},_0x430e58),{'deductType':_0x447b55});}catch(_0xa6e217){return Object[_0x357cf8(0xbb)](Object[_0x357cf8(0xbb)]({},_0x430e58),{'deductType':0x0});}else return Object['assign'](Object['assign']({},_0x430e58),{'deductType':0x0});})),_0x4f1141=_0xbd1f63[_0x22dc62(0xcf)](_0x187875=>_0x187875!==null);return{'rows':_0x4f1141,'count':_0x4f1141['length']};}async[_0x5545fe(0xe7)](_0x4e920b){const _0x488726=_0x5545fe,{name:_0x35a8ed,pluginImg:_0x22fda2,description:_0x25020f,isEnabled:_0x237917,isSystemPlugin:_0x94107d,parameters:_0x1abe62,sortOrder:_0x8a32d3}=_0x4e920b,_0x1d5adf=await this[_0x488726(0xd2)][_0x488726(0xc2)]({'where':{'name':_0x35a8ed}});if(_0x1d5adf)throw new common_1[(_0x488726(0xba))](_0x488726(0xe0),common_1[_0x488726(0xc8)]['BAD_REQUEST']);const _0x39bc24=this['PluginEntity'][_0x488726(0xd7)]({'name':_0x35a8ed,'pluginImg':_0x22fda2,'description':_0x25020f,'isEnabled':_0x237917!==undefined?_0x237917:0x1,'isSystemPlugin':_0x94107d!==undefined?_0x94107d:0x0,'parameters':_0x1abe62,'sortOrder':_0x8a32d3!==undefined?_0x8a32d3:0x0});return await this['PluginEntity']['save'](_0x39bc24);}async[_0x5545fe(0xe9)](_0x184e6e){const _0x248017=_0x5545fe,{id:_0x44d827,name:_0x1d3372,pluginImg:_0x4b18ce,description:_0xdca6c4,isEnabled:_0x5282f1,isSystemPlugin:_0x52355a,parameters:_0x1722ba,sortOrder:_0x17c61a}=_0x184e6e,_0x3b90ba=await this['PluginEntity']['findOne']({'where':{'id':_0x44d827}});if(!_0x3b90ba)throw new common_1[(_0x248017(0xba))](_0x248017(0xca),common_1[_0x248017(0xc8)][_0x248017(0xc9)]);const _0x35494b=await this[_0x248017(0xd2)][_0x248017(0xc2)]({'where':{'name':_0x1d3372,'id':(0x0,typeorm_2[_0x248017(0xde)])(_0x44d827)}});if(_0x35494b)throw new common_1[(_0x248017(0xba))](_0x248017(0xe0),common_1[_0x248017(0xc8)][_0x248017(0xc9)]);return _0x3b90ba[_0x248017(0xe4)]=_0x1d3372,_0x3b90ba[_0x248017(0xdf)]=_0x4b18ce,_0x3b90ba['description']=_0xdca6c4,_0x3b90ba[_0x248017(0xc6)]=_0x5282f1!==undefined?_0x5282f1:_0x3b90ba['isEnabled'],_0x3b90ba[_0x248017(0xbf)]=_0x52355a!==undefined?_0x52355a:_0x3b90ba['isSystemPlugin'],_0x3b90ba[_0x248017(0xe8)]=_0x1722ba,_0x3b90ba[_0x248017(0xc5)]=_0x17c61a!==undefined?_0x17c61a:_0x3b90ba['sortOrder'],await this[_0x248017(0xd2)]['save'](_0x3b90ba),_0x248017(0xb6);}async[_0x5545fe(0xc7)](_0x162c7f){const _0x45cdb3=_0x5545fe,{id:_0x399167}=_0x162c7f,_0x28468=await this[_0x45cdb3(0xd2)][_0x45cdb3(0xc2)]({'where':{'id':_0x399167}});if(!_0x28468)throw new common_1['HttpException'](_0x45cdb3(0xe2),common_1['HttpStatus']['BAD_REQUEST']);const _0xaec858=await this[_0x45cdb3(0xd2)][_0x45cdb3(0xc0)](_0x399167);if(_0xaec858[_0x45cdb3(0xb8)]>0x0)return _0x45cdb3(0xb7);else throw new common_1[(_0x45cdb3(0xba))](_0x45cdb3(0xc3),common_1[_0x45cdb3(0xc8)][_0x45cdb3(0xc9)]);}};function _0x2365(){const _0x2aa2bb=['2867292YlNKiP','metadata','createPlugin','parameters','updatePlugin','1699825Rvealz','DESC','8fXKgmt','../models/models.service','deductType','修改插件信息成功','删除插件成功','affected','length','HttpException','assign','@nestjs/common','object','1596879HsfQbs','isSystemPlugin','delete','__metadata','findOne','删除插件失败！','InjectRepository','sortOrder','isEnabled','delPlugin','HttpStatus','BAD_REQUEST','插件不存在！','Repository','Injectable','modelsService','design:paramtypes','filter','getCurrentModelKeyInfo','map','PluginEntity','defineProperty','typeorm','find','3861710cykELX','create','216dvhTAI','decorate','3578KMGinL','__param','7YnJurP','@nestjs/typeorm','Not','pluginImg','该插件名称已存在！','2037784TzJpCq','该插件不存在！','1862628FtkfPG','name'];_0x2365=function(){return _0x2aa2bb;};return _0x2365();}PluginService=__decorate([(0x0,common_1[_0x5545fe(0xcc)])(),__param(0x0,(0x0,typeorm_1[_0x5545fe(0xc4)])(plugin_entity_1[_0x5545fe(0xd2)])),__metadata(_0x5545fe(0xce),[typeorm_2[_0x5545fe(0xcb)],models_service_1['ModelsService']])],PluginService),exports['PluginService']=PluginService;