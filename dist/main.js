'use strict';const _0x20a60b=_0x41d2;(function(_0x3075f4,_0x2eadef){const _0x36b226=_0x41d2,_0x10b921=_0x3075f4();while(!![]){try{const _0x4cecf6=-parseInt(_0x36b226(0x14a))/0x1*(-parseInt(_0x36b226(0x131))/0x2)+-parseInt(_0x36b226(0x15d))/0x3*(-parseInt(_0x36b226(0x147))/0x4)+-parseInt(_0x36b226(0x125))/0x5+-parseInt(_0x36b226(0x142))/0x6+parseInt(_0x36b226(0x13b))/0x7+-parseInt(_0x36b226(0x150))/0x8*(parseInt(_0x36b226(0x145))/0x9)+parseInt(_0x36b226(0x132))/0xa*(parseInt(_0x36b226(0x139))/0xb);if(_0x4cecf6===_0x2eadef)break;else _0x10b921['push'](_0x10b921['shift']());}catch(_0x1f1932){_0x10b921['push'](_0x10b921['shift']());}}}(_0x3d9b,0x9d8a8));Object[_0x20a60b(0x137)](exports,'__esModule',{'value':!![]});function _0x3d9b(){const _0x2dacb3=['get','enableCors','@nestjs/common','/api','compression','AllExceptionsFilter','1936466NayFrT','60QImgev','REDIS_DB','timeout','initDatabase','setGlobalPrefix','defineProperty','JWT_SECRET','1213487DGDDHe','ValidationPipe','4573835XtKvXQ','./common/filters/typeOrmQueryFailed.filter','useGlobalInterceptors','Main','.env','useGlobalFilters','PORT','3854670oUNlEX','create','@nestjs/core','1677933AngkXv','toString','4RCvBSc','ioredis','./modules/database/initDatabase','1uDArJc','AppModule','getInstance','getHttpAdapter','REDIS_PASSWORD','GET,HEAD,PUT,PATCH,POST,DELETE','24otivQO','set','templates/pages','log','CustomLoggerService','NestFactory','express-xml-bodyparser','REDIS_HOST','config','hbs','useLogger','Logger','服务启动成功:\x20http://localhost:','1090158dggUzc','default','./app.module','createSwagger','3999410DWUhRf','randomBytes','./common/swagger/index','env','TypeOrmQueryFailedFilter','crypto'];_0x3d9b=function(){return _0x2dacb3;};return _0x3d9b();}function _0x41d2(_0x2de24a,_0x3b2bd5){const _0x3d9b25=_0x3d9b();return _0x41d2=function(_0x41d203,_0x166f5d){_0x41d203=_0x41d203-0x123;let _0xe8962a=_0x3d9b25[_0x41d203];return _0xe8962a;},_0x41d2(_0x2de24a,_0x3b2bd5);}const allExceptions_filter_1=require('./common/filters/allExceptions.filter'),typeOrmQueryFailed_filter_1=require(_0x20a60b(0x13c)),transform_interceptor_1=require('./common/interceptors/transform.interceptor'),index_1=require(_0x20a60b(0x127)),custom_logger_service_1=require('./common/logger/custom-logger.service'),initDatabase_1=require(_0x20a60b(0x149)),common_1=require(_0x20a60b(0x12d)),core_1=require(_0x20a60b(0x144)),compression=require(_0x20a60b(0x12f)),crypto_1=require(_0x20a60b(0x12a)),Dotenv=require('dotenv'),xmlBodyParser=require(_0x20a60b(0x156)),ioredis_1=require(_0x20a60b(0x148)),app_module_1=require(_0x20a60b(0x123));Dotenv[_0x20a60b(0x158)]({'path':_0x20a60b(0x13f)});async function bootstrap(){const _0x2fdea9=_0x20a60b,_0x55c99a=new ioredis_1[(_0x2fdea9(0x15e))]({'host':process['env'][_0x2fdea9(0x157)],'port':Number(process[_0x2fdea9(0x128)]['REDIS_PORT']),'password':process['env'][_0x2fdea9(0x14e)],'db':Number(process['env'][_0x2fdea9(0x133)]||0x0)}),_0x54b441=await _0x55c99a['get'](_0x2fdea9(0x138));if(!_0x54b441){const _0x177431=(0x0,crypto_1[_0x2fdea9(0x126)])(0x100)[_0x2fdea9(0x146)]('base64');common_1[_0x2fdea9(0x15b)][_0x2fdea9(0x153)]('Generating\x20and\x20setting\x20new\x20JWT_SECRET'),await _0x55c99a[_0x2fdea9(0x151)](_0x2fdea9(0x138),_0x177431);}const _0x43db53=await core_1[_0x2fdea9(0x155)][_0x2fdea9(0x143)](app_module_1[_0x2fdea9(0x14b)]);await(0x0,initDatabase_1[_0x2fdea9(0x135)])(),_0x43db53[_0x2fdea9(0x15a)](_0x43db53[_0x2fdea9(0x12b)](custom_logger_service_1[_0x2fdea9(0x154)])),_0x43db53['use'](compression()),_0x43db53['use'](xmlBodyParser()),_0x43db53[_0x2fdea9(0x12c)]({'origin':'*','methods':_0x2fdea9(0x14f),'preflightContinue':![],'optionsSuccessStatus':0xcc}),_0x43db53[_0x2fdea9(0x136)](_0x2fdea9(0x12e)),(0x0,index_1[_0x2fdea9(0x124)])(_0x43db53),_0x43db53['useGlobalPipes'](new common_1[(_0x2fdea9(0x13a))]()),_0x43db53[_0x2fdea9(0x140)](new allExceptions_filter_1[(_0x2fdea9(0x130))](),new typeOrmQueryFailed_filter_1[(_0x2fdea9(0x129))]()),_0x43db53[_0x2fdea9(0x13d)](new transform_interceptor_1['TransformInterceptor']()),_0x43db53['getHttpAdapter']()[_0x2fdea9(0x14c)]()[_0x2fdea9(0x151)]('views',_0x2fdea9(0x152)),_0x43db53[_0x2fdea9(0x14d)]()[_0x2fdea9(0x14c)]()[_0x2fdea9(0x151)]('view\x20engine',_0x2fdea9(0x159));const _0x2541dc=process['env'][_0x2fdea9(0x141)]||0xbb8,_0x20d604=await _0x43db53['listen'](_0x2541dc,()=>{const _0x51e699=_0x2fdea9;common_1[_0x51e699(0x15b)][_0x51e699(0x153)](_0x51e699(0x15c)+_0x2541dc+'/api/docs',_0x51e699(0x13e)),common_1[_0x51e699(0x15b)][_0x51e699(0x153)](_0x51e699(0x15c)+_0x2541dc,_0x51e699(0x13e));});_0x20d604[_0x2fdea9(0x134)]=0x5*0x3c*0x3e8;}bootstrap();