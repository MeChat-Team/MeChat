'use strict';const _0x2516f5=_0x43e3;(function(_0x3428e8,_0x18e309){const _0x7d463d=_0x43e3,_0x33f3b7=_0x3428e8();while(!![]){try{const _0x16ba72=parseInt(_0x7d463d(0xfe))/0x1+parseInt(_0x7d463d(0x106))/0x2+parseInt(_0x7d463d(0x10b))/0x3*(parseInt(_0x7d463d(0xdc))/0x4)+parseInt(_0x7d463d(0x107))/0x5+-parseInt(_0x7d463d(0xef))/0x6+-parseInt(_0x7d463d(0xe0))/0x7+-parseInt(_0x7d463d(0x103))/0x8;if(_0x16ba72===_0x18e309)break;else _0x33f3b7['push'](_0x33f3b7['shift']());}catch(_0x15ddba){_0x33f3b7['push'](_0x33f3b7['shift']());}}}(_0x58e8,0xa13a3));function _0x43e3(_0x30efe7,_0x36ef02){const _0x58e87e=_0x58e8();return _0x43e3=function(_0x43e32e,_0x543268){_0x43e32e=_0x43e32e-0xdc;let _0x71f520=_0x58e87e[_0x43e32e];return _0x71f520;},_0x43e3(_0x30efe7,_0x36ef02);}Object[_0x2516f5(0xfd)](exports,_0x2516f5(0xe4),{'value':!![]});const allExceptions_filter_1=require('./common/filters/allExceptions.filter'),typeOrmQueryFailed_filter_1=require(_0x2516f5(0xf2)),transform_interceptor_1=require(_0x2516f5(0xfa)),index_1=require(_0x2516f5(0xf5)),custom_logger_service_1=require(_0x2516f5(0x10d)),initDatabase_1=require('./modules/database/initDatabase'),common_1=require(_0x2516f5(0xff)),core_1=require(_0x2516f5(0x10e)),compression=require(_0x2516f5(0xe6)),crypto_1=require('crypto'),Dotenv=require(_0x2516f5(0xe5)),xmlBodyParser=require('express-xml-bodyparser'),ioredis_1=require(_0x2516f5(0xe2)),app_module_1=require(_0x2516f5(0xe3));function _0x58e8(){const _0x39917f=['__esModule','dotenv','compression','useLogger','JWT_SECRET','enableCors','/api/docs','NestFactory','TypeOrmQueryFailedFilter','initDatabase','use','2655084oaewgP','REDIS_DB','set','./common/filters/typeOrmQueryFailed.filter','getHttpAdapter','templates/pages','./common/swagger/index','view\x20engine','base64','TransformInterceptor','views','./common/interceptors/transform.interceptor','AllExceptionsFilter','getInstance','defineProperty','341826SnEnpt','@nestjs/common','Generating\x20and\x20setting\x20new\x20JWT_SECRET','服务启动成功:\x20http://localhost:','log','2891632iyqXui','hbs','PORT','833292EoavPz','3802810MXaKck','REDIS_HOST','REDIS_PASSWORD','timeout','48tEQsEG','CustomLoggerService','./common/logger/custom-logger.service','@nestjs/core','get','ValidationPipe','create','220280ejNted','Logger','.env','env','6550593NgUQGP','Main','ioredis','./app.module'];_0x58e8=function(){return _0x39917f;};return _0x58e8();}Dotenv['config']({'path':_0x2516f5(0xde)});async function bootstrap(){const _0x4898f8=_0x2516f5,_0x503586=new ioredis_1['default']({'host':process[_0x4898f8(0xdf)][_0x4898f8(0x108)],'port':Number(process['env']['REDIS_PORT']),'password':process[_0x4898f8(0xdf)][_0x4898f8(0x109)],'db':Number(process[_0x4898f8(0xdf)][_0x4898f8(0xf0)]||0x0)}),_0x54ac41=await _0x503586[_0x4898f8(0x10f)](_0x4898f8(0xe8));if(!_0x54ac41){const _0x5e4b03=(0x0,crypto_1['randomBytes'])(0x100)['toString'](_0x4898f8(0xf7));common_1[_0x4898f8(0xdd)][_0x4898f8(0x102)](_0x4898f8(0x100)),await _0x503586[_0x4898f8(0xf1)]('JWT_SECRET',_0x5e4b03);}const _0x479256=await core_1[_0x4898f8(0xeb)][_0x4898f8(0x111)](app_module_1['AppModule']);await(0x0,initDatabase_1[_0x4898f8(0xed)])(),_0x479256[_0x4898f8(0xe7)](_0x479256[_0x4898f8(0x10f)](custom_logger_service_1[_0x4898f8(0x10c)])),_0x479256[_0x4898f8(0xee)](compression()),_0x479256[_0x4898f8(0xee)](xmlBodyParser()),_0x479256[_0x4898f8(0xe9)]({'origin':'*','methods':'GET,HEAD,PUT,PATCH,POST,DELETE','preflightContinue':![],'optionsSuccessStatus':0xcc}),_0x479256['setGlobalPrefix']('/api'),(0x0,index_1['createSwagger'])(_0x479256),_0x479256['useGlobalPipes'](new common_1[(_0x4898f8(0x110))]()),_0x479256['useGlobalFilters'](new allExceptions_filter_1[(_0x4898f8(0xfb))](),new typeOrmQueryFailed_filter_1[(_0x4898f8(0xec))]()),_0x479256['useGlobalInterceptors'](new transform_interceptor_1[(_0x4898f8(0xf8))]()),_0x479256[_0x4898f8(0xf3)]()[_0x4898f8(0xfc)]()['set'](_0x4898f8(0xf9),_0x4898f8(0xf4)),_0x479256[_0x4898f8(0xf3)]()['getInstance']()['set'](_0x4898f8(0xf6),_0x4898f8(0x104));const _0x26b9ed=process[_0x4898f8(0xdf)][_0x4898f8(0x105)]||0xbb8,_0xf984ff=await _0x479256['listen'](_0x26b9ed,()=>{const _0x13ec59=_0x4898f8;common_1['Logger'][_0x13ec59(0x102)](_0x13ec59(0x101)+_0x26b9ed+_0x13ec59(0xea),'Main'),common_1[_0x13ec59(0xdd)][_0x13ec59(0x102)]('服务启动成功:\x20http://localhost:'+_0x26b9ed,_0x13ec59(0xe1));});_0xf984ff[_0x4898f8(0x10a)]=0x5*0x3c*0x3e8;}bootstrap();