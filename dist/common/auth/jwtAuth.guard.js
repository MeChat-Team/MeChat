'use strict';const _0x115ca1=_0x3c38;(function(_0x2f9519,_0x3ac4b6){const _0x5076b2=_0x3c38,_0xdf2528=_0x2f9519();while(!![]){try{const _0x22df78=parseInt(_0x5076b2(0x86))/0x1+-parseInt(_0x5076b2(0x81))/0x2*(parseInt(_0x5076b2(0xaa))/0x3)+parseInt(_0x5076b2(0x94))/0x4*(parseInt(_0x5076b2(0x95))/0x5)+-parseInt(_0x5076b2(0xa7))/0x6*(-parseInt(_0x5076b2(0x85))/0x7)+parseInt(_0x5076b2(0x8d))/0x8+parseInt(_0x5076b2(0x91))/0x9+-parseInt(_0x5076b2(0x84))/0xa;if(_0x22df78===_0x3ac4b6)break;else _0xdf2528['push'](_0xdf2528['shift']());}catch(_0x4b8ea1){_0xdf2528['push'](_0xdf2528['shift']());}}}(_0x4b4b,0x28540));var __decorate=this&&this[_0x115ca1(0x9d)]||function(_0x28ec70,_0x40fa5c,_0x596def,_0x47bcff){const _0x46ee8a=_0x115ca1;var _0x33806e=arguments['length'],_0x9f1426=_0x33806e<0x3?_0x40fa5c:_0x47bcff===null?_0x47bcff=Object[_0x46ee8a(0xad)](_0x40fa5c,_0x596def):_0x47bcff,_0x5aec14;if(typeof Reflect===_0x46ee8a(0x8a)&&typeof Reflect[_0x46ee8a(0xac)]===_0x46ee8a(0x8e))_0x9f1426=Reflect[_0x46ee8a(0xac)](_0x28ec70,_0x40fa5c,_0x596def,_0x47bcff);else{for(var _0x2b000c=_0x28ec70['length']-0x1;_0x2b000c>=0x0;_0x2b000c--)if(_0x5aec14=_0x28ec70[_0x2b000c])_0x9f1426=(_0x33806e<0x3?_0x5aec14(_0x9f1426):_0x33806e>0x3?_0x5aec14(_0x40fa5c,_0x596def,_0x9f1426):_0x5aec14(_0x40fa5c,_0x596def))||_0x9f1426;}return _0x33806e>0x3&&_0x9f1426&&Object['defineProperty'](_0x40fa5c,_0x596def,_0x9f1426),_0x9f1426;},__metadata=this&&this[_0x115ca1(0xb3)]||function(_0x397044,_0x24a060){const _0x362141=_0x115ca1;if(typeof Reflect===_0x362141(0x8a)&&typeof Reflect[_0x362141(0xb0)]==='function')return Reflect[_0x362141(0xb0)](_0x397044,_0x24a060);};Object[_0x115ca1(0xa0)](exports,_0x115ca1(0xb2),{'value':!![]}),exports[_0x115ca1(0x7e)]=void 0x0;const globalConfig_service_1=require('../../modules/globalConfig/globalConfig.service'),redisCache_service_1=require(_0x115ca1(0xa8)),common_1=require(_0x115ca1(0x83)),core_1=require(_0x115ca1(0x92)),passport_1=require('@nestjs/passport'),jwt=require(_0x115ca1(0xa2)),auth_service_1=require('../../modules/auth/auth.service');function _0x3c38(_0x30cc9a,_0x157ba3){const _0x4b4b7f=_0x4b4b();return _0x3c38=function(_0x3c38ea,_0x425b0c){_0x3c38ea=_0x3c38ea-0x7d;let _0x3c9d94=_0x4b4b7f[_0x3c38ea];return _0x3c9d94;},_0x3c38(_0x30cc9a,_0x157ba3);}let JwtAuthGuard=class JwtAuthGuard extends(0x0,passport_1[_0x115ca1(0x9a)])(_0x115ca1(0xae)){constructor(_0x34811b,_0x308595,_0x5ddbeb,_0x2fde6a){const _0x5d0a3d=_0x115ca1;super(),this[_0x5d0a3d(0x9f)]=_0x34811b,this[_0x5d0a3d(0x98)]=_0x308595,this[_0x5d0a3d(0xb1)]=_0x5ddbeb,this[_0x5d0a3d(0x93)]=_0x2fde6a;}async[_0x115ca1(0x99)](_0x58d1f8){const _0x35fc9a=_0x115ca1;!this['redisCacheService']&&(this[_0x35fc9a(0x9f)]=this[_0x35fc9a(0x98)][_0x35fc9a(0xb6)](redisCache_service_1[_0x35fc9a(0xa5)],{'strict':![]}));const _0x3728ca=_0x58d1f8[_0x35fc9a(0x8f)]()[_0x35fc9a(0xaf)](),_0x499a28=_0x3728ca['headers'][_0x35fc9a(0x89)],_0x900574=this[_0x35fc9a(0xa6)](_0x3728ca);return _0x3728ca[_0x35fc9a(0x80)]=await this[_0x35fc9a(0xa1)](_0x900574),await this[_0x35fc9a(0x9f)]['checkTokenAuth'](_0x900574,_0x3728ca),!![];}[_0x115ca1(0xa6)](_0x4eb8dd){const _0x2aaded=_0x115ca1;if(!_0x4eb8dd[_0x2aaded(0x90)][_0x2aaded(0x9e)]){if(_0x4eb8dd[_0x2aaded(0x90)]['fingerprint']){let _0x515123=_0x4eb8dd[_0x2aaded(0x90)]['fingerprint'];_0x515123>0x7fffffff&&(_0x515123=_0x515123[_0x2aaded(0x7f)]()[_0x2aaded(0x9b)](-0x9),_0x515123=Number(String(Number(_0x515123))));const _0x1bf29a=this['authService'][_0x2aaded(0xb5)](_0x515123);return _0x1bf29a;}return null;}const _0x4e25a4=_0x4eb8dd[_0x2aaded(0x90)][_0x2aaded(0x9e)][_0x2aaded(0xab)]('\x20');if(_0x4e25a4[_0x2aaded(0x88)]!==0x2||_0x4e25a4[0x0]!==_0x2aaded(0xa3))return null;return _0x4e25a4[0x1];}async[_0x115ca1(0xa1)](_0x6f7c67){const _0x2e1c62=_0x115ca1;try{const _0xd119d2=await this[_0x2e1c62(0x9f)][_0x2e1c62(0xb4)](),_0x3ac659=await jwt[_0x2e1c62(0xa9)](_0x6f7c67,_0xd119d2);return _0x3ac659;}catch(_0x58ab02){throw new common_1[(_0x2e1c62(0x8c))](_0x2e1c62(0x87),common_1['HttpStatus'][_0x2e1c62(0x97)]);}}['handleRequest'](_0x286a71,_0x411486,_0x3a6259){const _0x5b9a8c=_0x115ca1;if(_0x286a71||!_0x411486){console[_0x5b9a8c(0x7d)]('err:\x20',_0x286a71);throw _0x286a71||new common_1[(_0x5b9a8c(0x96))]();}return _0x411486;}};JwtAuthGuard=__decorate([(0x0,common_1[_0x115ca1(0x9c)])(),__metadata(_0x115ca1(0x82),[redisCache_service_1[_0x115ca1(0xa5)],core_1['ModuleRef'],globalConfig_service_1[_0x115ca1(0xa4)],auth_service_1[_0x115ca1(0x8b)]])],JwtAuthGuard),exports[_0x115ca1(0x7e)]=JwtAuthGuard;function _0x4b4b(){const _0x1e3ebe=['redisCacheService','defineProperty','validateToken','jsonwebtoken','Bearer','GlobalConfigService','RedisCacheService','extractToken','6TZpAJD','../../modules/redisCache/redisCache.service','verify','42tiDRhK','split','decorate','getOwnPropertyDescriptor','jwt','getRequest','metadata','globalConfigService','__esModule','__metadata','getJwtSecret','createTokenFromFingerprint','get','log','JwtAuthGuard','toString','user','32996hGxqgS','design:paramtypes','@nestjs/common','1232620WyYEKY','839552FXjftc','147645jBmbQW','亲爱的用户,请登录后继续操作,我们正在等您的到来！','length','x-website-domain','object','AuthService','HttpException','529080FZMXYT','function','switchToHttp','headers','899559FzDycR','@nestjs/core','authService','343004RRQNVs','5Dwkdsk','UnauthorizedException','UNAUTHORIZED','moduleRef','canActivate','AuthGuard','slice','Injectable','__decorate','authorization'];_0x4b4b=function(){return _0x1e3ebe;};return _0x4b4b();}