'use strict';const _0x324cb6=_0xa146;(function(_0x3b88ed,_0x510d84){const _0x4fc9cf=_0xa146,_0xe097d1=_0x3b88ed();while(!![]){try{const _0x3a82e6=parseInt(_0x4fc9cf(0x1f6))/0x1*(parseInt(_0x4fc9cf(0x1e1))/0x2)+parseInt(_0x4fc9cf(0x1eb))/0x3*(parseInt(_0x4fc9cf(0x1c6))/0x4)+parseInt(_0x4fc9cf(0x1ee))/0x5+-parseInt(_0x4fc9cf(0x1c2))/0x6*(parseInt(_0x4fc9cf(0x1d4))/0x7)+-parseInt(_0x4fc9cf(0x1bf))/0x8+parseInt(_0x4fc9cf(0x1b9))/0x9*(-parseInt(_0x4fc9cf(0x1e5))/0xa)+parseInt(_0x4fc9cf(0x1f3))/0xb;if(_0x3a82e6===_0x510d84)break;else _0xe097d1['push'](_0xe097d1['shift']());}catch(_0x45b296){_0xe097d1['push'](_0xe097d1['shift']());}}}(_0xc471,0x9b845));function _0xc471(){const _0x59dc0a=['jwt','function','handleRequest','__metadata','AuthGuard','switchToHttp','jsonwebtoken','@nestjs/core','split','../../modules/auth/auth.service','亲爱的用户,请登录后继续操作,我们正在等您的到来！','redisCacheService','GlobalConfigService','994133jcqDNY','fingerprint','toString','__esModule','__decorate','Bearer','decorate','canActivate','defineProperty','RedisCacheService','x-website-domain','headers','validateToken','4UupLyO','createTokenFromFingerprint','ModuleRef','verify','10JFEbIy','authorization','err:\x20','moduleRef','../../modules/redisCache/redisCache.service','HttpException','3ppPkeS','Injectable','@nestjs/passport','3414170KoGPQE','getOwnPropertyDescriptor','getJwtSecret','JwtAuthGuard','user','2062841RUKJBC','get','@nestjs/common','287248PRyCDX','1980567PRcVZk','checkTokenAuth','authService','object','metadata','UnauthorizedException','4714936XuUAOC','slice','HttpStatus','18ZlDMwm','length','extractToken','AuthService','1710492sXOswC'];_0xc471=function(){return _0x59dc0a;};return _0xc471();}var __decorate=this&&this[_0x324cb6(0x1d8)]||function(_0x37a7d6,_0x2dcd24,_0x191c8a,_0x14c16e){const _0x1b8a38=_0x324cb6;var _0x12577d=arguments[_0x1b8a38(0x1c3)],_0x1eab9f=_0x12577d<0x3?_0x2dcd24:_0x14c16e===null?_0x14c16e=Object[_0x1b8a38(0x1ef)](_0x2dcd24,_0x191c8a):_0x14c16e,_0x388a15;if(typeof Reflect===_0x1b8a38(0x1bc)&&typeof Reflect[_0x1b8a38(0x1da)]===_0x1b8a38(0x1c8))_0x1eab9f=Reflect[_0x1b8a38(0x1da)](_0x37a7d6,_0x2dcd24,_0x191c8a,_0x14c16e);else{for(var _0x189ef1=_0x37a7d6['length']-0x1;_0x189ef1>=0x0;_0x189ef1--)if(_0x388a15=_0x37a7d6[_0x189ef1])_0x1eab9f=(_0x12577d<0x3?_0x388a15(_0x1eab9f):_0x12577d>0x3?_0x388a15(_0x2dcd24,_0x191c8a,_0x1eab9f):_0x388a15(_0x2dcd24,_0x191c8a))||_0x1eab9f;}return _0x12577d>0x3&&_0x1eab9f&&Object[_0x1b8a38(0x1dc)](_0x2dcd24,_0x191c8a,_0x1eab9f),_0x1eab9f;},__metadata=this&&this[_0x324cb6(0x1ca)]||function(_0x184612,_0x18fcdb){const _0x233a1e=_0x324cb6;if(typeof Reflect===_0x233a1e(0x1bc)&&typeof Reflect[_0x233a1e(0x1bd)]==='function')return Reflect[_0x233a1e(0x1bd)](_0x184612,_0x18fcdb);};Object['defineProperty'](exports,_0x324cb6(0x1d7),{'value':!![]}),exports[_0x324cb6(0x1f1)]=void 0x0;const globalConfig_service_1=require('../../modules/globalConfig/globalConfig.service'),redisCache_service_1=require(_0x324cb6(0x1e9)),common_1=require(_0x324cb6(0x1f5)),core_1=require(_0x324cb6(0x1ce)),passport_1=require(_0x324cb6(0x1ed)),jwt=require(_0x324cb6(0x1cd)),auth_service_1=require(_0x324cb6(0x1d0));function _0xa146(_0x75555c,_0x149c2b){const _0xc47198=_0xc471();return _0xa146=function(_0xa146e9,_0x49bfe3){_0xa146e9=_0xa146e9-0x1b9;let _0x1dcbf0=_0xc47198[_0xa146e9];return _0x1dcbf0;},_0xa146(_0x75555c,_0x149c2b);}let JwtAuthGuard=class JwtAuthGuard extends(0x0,passport_1[_0x324cb6(0x1cb)])(_0x324cb6(0x1c7)){constructor(_0x168945,_0xc11fb,_0x323ee9,_0xdc6fe2){const _0x1aaaa9=_0x324cb6;super(),this['redisCacheService']=_0x168945,this[_0x1aaaa9(0x1e8)]=_0xc11fb,this['globalConfigService']=_0x323ee9,this[_0x1aaaa9(0x1bb)]=_0xdc6fe2;}async[_0x324cb6(0x1db)](_0x92c5a6){const _0x794187=_0x324cb6;!this[_0x794187(0x1d2)]&&(this['redisCacheService']=this['moduleRef'][_0x794187(0x1f4)](redisCache_service_1[_0x794187(0x1dd)],{'strict':![]}));const _0x1d2f0e=_0x92c5a6[_0x794187(0x1cc)]()['getRequest'](),_0x344c64=_0x1d2f0e[_0x794187(0x1df)][_0x794187(0x1de)],_0xc468d4=this[_0x794187(0x1c4)](_0x1d2f0e);return _0x1d2f0e[_0x794187(0x1f2)]=await this[_0x794187(0x1e0)](_0xc468d4),await this['redisCacheService'][_0x794187(0x1ba)](_0xc468d4,_0x1d2f0e),!![];}[_0x324cb6(0x1c4)](_0x3b8183){const _0x563b03=_0x324cb6;if(!_0x3b8183[_0x563b03(0x1df)][_0x563b03(0x1e6)]){if(_0x3b8183['headers'][_0x563b03(0x1d5)]){let _0x251880=_0x3b8183[_0x563b03(0x1df)][_0x563b03(0x1d5)];_0x251880>0x7fffffff&&(_0x251880=_0x251880[_0x563b03(0x1d6)]()[_0x563b03(0x1c0)](-0x9),_0x251880=Number(String(Number(_0x251880))));const _0x4d5e1e=this[_0x563b03(0x1bb)][_0x563b03(0x1e2)](_0x251880);return _0x4d5e1e;}return null;}const _0x41d62a=_0x3b8183[_0x563b03(0x1df)][_0x563b03(0x1e6)][_0x563b03(0x1cf)]('\x20');if(_0x41d62a[_0x563b03(0x1c3)]!==0x2||_0x41d62a[0x0]!==_0x563b03(0x1d9))return null;return _0x41d62a[0x1];}async[_0x324cb6(0x1e0)](_0x18f036){const _0x559e7e=_0x324cb6;try{const _0x2e5838=await this['redisCacheService'][_0x559e7e(0x1f0)](),_0x41d0f2=await jwt[_0x559e7e(0x1e4)](_0x18f036,_0x2e5838);return _0x41d0f2;}catch(_0x5cf7d6){throw new common_1[(_0x559e7e(0x1ea))](_0x559e7e(0x1d1),common_1[_0x559e7e(0x1c1)]['UNAUTHORIZED']);}}[_0x324cb6(0x1c9)](_0x4bacab,_0x49c9b9,_0x547e41){const _0x3678fb=_0x324cb6;if(_0x4bacab||!_0x49c9b9){console['log'](_0x3678fb(0x1e7),_0x4bacab);throw _0x4bacab||new common_1[(_0x3678fb(0x1be))]();}return _0x49c9b9;}};JwtAuthGuard=__decorate([(0x0,common_1[_0x324cb6(0x1ec)])(),__metadata('design:paramtypes',[redisCache_service_1['RedisCacheService'],core_1[_0x324cb6(0x1e3)],globalConfig_service_1[_0x324cb6(0x1d3)],auth_service_1[_0x324cb6(0x1c5)]])],JwtAuthGuard),exports[_0x324cb6(0x1f1)]=JwtAuthGuard;